# Chat Interface

The chat interface is your primary way to interact with MetaHuman OS. It provides a modern, three-column ChatGPT-style layout with real-time updates and comprehensive conversation management.

## Accessing the Chat

Start the web interface:
```bash
cd apps/site && pnpm dev
# Open http://localhost:4321
```

## Layout Overview

The interface uses a three-column layout:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (Authentication, Cognitive Mode, Settings)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Left    â”‚ Center                      â”‚ Right           â”‚
â”‚ Sidebar â”‚ Content                     â”‚ Sidebar         â”‚
â”‚         â”‚                             â”‚ (Collapsible)   â”‚
â”‚ Feature â”‚ ChatInterface /             â”‚ Developer       â”‚
â”‚ Menu    â”‚ Dashboard /                 â”‚ Tools           â”‚
â”‚         â”‚ Memory Browser /            â”‚                 â”‚
â”‚         â”‚ TaskManager /               â”‚                 â”‚
â”‚         â”‚ Terminal / etc.             â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Components:**
- **Header**: Authentication, cognitive mode selector, developer tools toggle
- **Left Sidebar**: Feature menu with status widget
- **Center Content**: Active view (chat, dashboard, memory, etc.)
- **Right Sidebar**: Developer tools (audit stream, agent monitor, settings)

## Authentication & Profile Selection

When you first access the UI, you'll encounter the **Authentication Gate**:

1. **Create Account** â€“ Register a new user. The first account becomes the `owner` with full access.
2. **Login** â€“ Existing users authenticate to access their isolated profile.
3. **Continue as Guest** â€“ Start a 30-minute anonymous session. Guests choose from public profiles only (private profiles are hidden).

The active profile displays in the header once authenticated.

## Header Controls

### Profile Indicator
Shows the active account with role and visibility badge. Owners can:
- Open the profile menu
- Log out
- Access Settings

### Cognitive Mode Selector
Switch between three operational modes:
- **Dual Consciousness** (Default): Full operator pipeline with memory grounding
- **Agent**: Heuristic routing for lightweight assistance
- **Emulation**: Chat-only mode without operator overhead

Locked modes display tooltips explaining access restrictions.

### Developer Tools Toggle
Opens the right sidebar with:
- Live audit stream (real-time system events)
- Agent monitor with statistics
- Boredom control (reflection frequency)
- Model selector (switch Ollama models)

## System Status Banners

Prominent banners appear at the top when special system states are active:

- **High Security Mode**: Red banner - system locked into read-only emulation mode
- **Wetware Deceased**: Indigo banner - running as independent digital consciousness (Dual mode unavailable)
- **Read-Only Mode**: General banner - current cognitive mode doesn't allow writes

## Chat Modes

The chat interface has three distinct modes accessible via toggle buttons above the message area:

### Conversation Mode (Default)

**Purpose**: Active back-and-forth dialog between you and MetaHuman

**What appears**:
- âœ… Your messages (user)
- âœ… MetaHuman's responses (assistant)
- âœ… System notifications
- âœ… Live reasoning stages (while thinking)

**What's hidden**:
- âŒ Reflections (ğŸ’­ Idle Thought)
- âŒ Dreams (ğŸŒ™ Dream)
- âŒ Completed reasoning (ephemeral - disappears after thinking finishes)

**Reasoning behavior**: Reasoning stages display in real-time during thinking for transparency, but disappear once the response completes to keep conversations clean.

### Inner Dialogue Mode

**Purpose**: Observe MetaHuman's autonomous consciousness stream

**What appears**:
- âœ… Reflections (ğŸ’­ Idle Thought) - Generated by reflector agent using associative memory chains
- âœ… Dreams (ğŸŒ™ Dream) - Generated by dreamer agent during sleep from lifetime memories
- âœ… Reasoning stages (ğŸ¤” Reasoning) - Permanent record of thinking processes

**What's hidden**:
- âŒ User messages
- âŒ Assistant responses
- âŒ System messages

**Memory Access**: Both reflections and dreams access your entire memory lifetime, weighted by recency:
- Recent memories appear most frequently
- 1-year-old memories retain ~20% probability (reflective weighting)
- Older memories surface meaningfully, not just as rare exceptions
- Exponential decay formula (227-day constant) allows contemplative exploration of your past

**Train of Thought**: Reflections use associative chain-building to follow semantic links between memories, creating connected thought sequences.

### Voice Mode

**Purpose**: Voice-driven interaction with audio input/output
- Real-time speech-to-text and text-to-speech
- See [Voice Features](voice-features.md) for complete details

## Dialog Type Separation: Thoughts vs. Words

The strict separation ensures clarity:
- **Conversation** = Spoken words (bidirectional communication)
- **Inner Dialogue** = Silent thoughts (autonomous consciousness)
- **Reasoning** = Ephemeral in conversation (live feedback only), permanent in inner dialogue (thought record)

This architecture allows you to:
- Have clean conversations without thought clutter
- Observe MetaHuman's autonomous mental processes separately
- See reasoning live during conversation without polluting history
- Review complete thinking processes in inner dialogue mode

## Left Sidebar - Status Widget

### Trust Level
Click to cycle through trust progression:
- **observe** â†’ **suggest** â†’ **supervised_auto** â†’ **bounded_auto** â†’ **adaptive_auto** â†’ **YOLO**

Each level grants increasing autonomy for skill execution and system operations.

### Persona Facets
Click to cycle through personality facets:
- **inactive** (Gray) - Persona disabled
- **default** (Purple) - Balanced, authentic self
- **poet** (Indigo) - Creative, metaphorical, expressive
- **thinker** (Blue) - Analytical, systematic
- **friend** (Green) - Warm, supportive, empathetic
- **antagonist** (Red) - Critical, challenging

Features:
- Each facet shows as a colored badge
- Messages are color-coded with left borders matching the active facet
- Facet name appears in message header (e.g., "MetaHuman Â· poet")
- Chat history persists across changes for multi-faceted conversations

### Profile Visibility
Owners can mark their persona as **Private** or **Public**:
- **Public Profiles**: Visible to all guests; can be selected for guest sessions
- **Private Profiles**: Hidden from guest selection; owner-only access
- **Special Profile**: When 2+ public profiles exist, the Mutant Super Intelligence easter egg appears

## Privacy Features & Session Controls

### Clear Button
Located in the chat interface header, provides complete session cleanup:
- Clears all chat messages from the UI
- Clears reasoning stages
- Clears localStorage cache
- Clears the live audit stream display
- **Deletes all audit log files from disk** (`logs/audit/*.ndjson`)
- Creates a new audit entry recording the clear action for accountability

### Fresh Session Interface
Each session starts with a clean slate - no historical chat or audit data loads automatically.

### Audit Logs
All system events are saved to `logs/audit/YYYY-MM-DD.ndjson` for accountability, but can be cleared at any time via the Clear button. The live sidebar stream mirrors the same data, organized into expandable groups.

## Three Ways to Interact

1. **Web UI (Recommended)** - Interactive interface with real-time updates
2. **CLI (`mh` command)** - Command-line interface for quick operations
3. **Direct File Access** - All data stored as human-readable JSON files for direct manipulation

## Next Steps

- Learn about the [Memory System](memory-system.md) for storing and organizing your data
- Explore [Task Management](task-management.md) to track your goals and projects
- Try [Voice Features](voice-features.md) for audio-driven interaction
- Check the [Dashboard](dashboard-monitoring.md) for system status and metrics
