{
  "entrypoint": {
    "description": "How a user request enters the system.",
    "key_files": [
      "apps/site/src/pages/api/operator.ts",
      "apps/site/src/pages/api/agent.ts",
      "package.json"
    ],
    "key_functions_or_scripts": {
      "apps/site/package.json[scripts.dev]": "pnpm dev",
      "apps/site/src/pages/api/operator.ts": "POST /api/operator",
      "apps/site/src/pages/api/agent.ts": "POST /api/agent"
    }
  },
  "core_logic": {
    "description": "The 'brain' of the application.",
    "key_files": [
      "brain/agents/operator.ts",
      "packages/core/src/skills.ts",
      "packages/core/src/llm.ts"
    ],
    "key_functions": [
      "runTask(goal, context)",
      "plan(task, profile)",
      "execute(plan)",
      "critique(task, plan, results)"
    ],
    "import_chains": [
      "apps/site/src/pages/api/operator.ts -> brain/agents/operator.ts -> packages/core/src/skills.ts",
      "apps/site/src/pages/api/operator.ts -> packages/core/src/llm.ts"
    ]
  },
  "data_management": {
    "description": "How the application reads/writes data.",
    "key_files": [
      "packages/core/src/paths.ts",
      "packages/core/src/memory.ts",
      "packages/core/src/skills.ts"
    ],
    "patterns": [
      "Uses a central 'paths.ts' object with predefined directories.",
      "Reads from/writes to 'memory/episodic/', 'memory/semantic/', 'memory/tasks/', 'out/', 'logs/' directories using fs.readFileSync/WriteFileSync.",
      "Enforces directory-based sandboxing with allowedDirectories.",
      "No traditional database connection found - uses file-based storage."
    ]
  },
  "environment": {
    "description": "How the application is run and serves models.",
    "key_files": [
      "package.json",
      "Dockerfile",
      "bin/run-with-agents"
    ],
    "patterns": [
      "Application is started with 'pnpm dev' which runs 'bin/run-with-agents astro dev'.",
      "Uses Docker for GPU-enabled runtime environment.",
      "Communicates with an 'Ollama' service via HTTP requests at http://localhost:11434.",
      "Astro framework serves web UI and API routes."
    ]
  }
}