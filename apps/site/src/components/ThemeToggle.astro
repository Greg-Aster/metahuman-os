---
const id = 'metahuman-theme';
---
<button class="btn" aria-label="Toggle theme" onclick={`
  (function(){
    const c = document.documentElement.classList;
    const dark = c.toggle('dark');
    try { localStorage.setItem('${id}', dark ? 'dark' : 'light'); } catch {}
  })();
`}>
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path class="dark:hidden" d="M12 4V2M12 22v-2M5 5 3.586 3.586M20.414 20.414 19 19M4 12H2m20 0h-2M5 19l-1.414 1.414M20.414 3.586 19 5M12 6a6 6 0 100 12 6 6 0 000-12z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path class="hidden dark:block" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/>
  </svg>
  <span class="hidden sm:inline">Theme</span>
</button>

<script>
  (function() {
    try {
      const pref = localStorage.getItem('metahuman-theme');
      const sys = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      const mode = pref || sys;
      if (mode === 'dark') document.documentElement.classList.add('dark');
    } catch {}
  })();
</script>
