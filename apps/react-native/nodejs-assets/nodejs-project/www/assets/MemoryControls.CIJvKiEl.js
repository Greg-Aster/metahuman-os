import{S as Ze,i as $e,s as et,n as Ae,d,v as tt,z as Ke,p as G,a as H,b as t,x as Y,c,O as Qe,e as n,f as p,g as U,h as g,q as B,j as r,k as C,t as L,T as st,l as Ee}from"./api-config.B-uR5Kyo.js";function We(l){let e,s,i;return{c(){e=r("div"),s=L("⚠️ "),i=L(l[6]),this.h()},l(o){e=n(o,"DIV",{class:!0});var a=p(e);s=B(a,"⚠️ "),i=B(a,l[6]),a.forEach(d),this.h()},h(){c(e,"class","note error svelte-1b2myr9")},m(o,a){H(o,e,a),t(e,s),t(e,i)},p(o,a){a&64&&G(i,o[6])},d(o){o&&d(e)}}}function Xe(l){let e,s,i;return{c(){e=r("div"),s=L("✓ "),i=L(l[7]),this.h()},l(o){e=n(o,"DIV",{class:!0});var a=p(e);s=B(a,"✓ "),i=B(a,l[7]),a.forEach(d),this.h()},h(){c(e,"class","note ok svelte-1b2myr9")},m(o,a){H(o,e,a),t(e,s),t(e,i)},p(o,a){a&128&&G(i,o[7])},d(o){o&&d(e)}}}function lt(l){let e,s,i,o="Status:",a,h=l[3].exists?"Ready":"Not built",I,f,u=l[3].exists&&Ye(l);return{c(){e=r("div"),s=r("div"),i=r("strong"),i.textContent=o,a=C(),I=L(h),f=C(),u&&u.c(),this.h()},l(_){e=n(_,"DIV",{class:!0});var k=p(e);s=n(k,"DIV",{});var D=p(s);i=n(D,"STRONG",{"data-svelte-h":!0}),U(i)!=="svelte-1ftu2mm"&&(i.textContent=o),a=g(D),I=B(D,h),D.forEach(d),f=g(k),u&&u.l(k),k.forEach(d),this.h()},h(){c(e,"class","grid svelte-1b2myr9")},m(_,k){H(_,e,k),t(e,s),t(s,i),t(s,a),t(s,I),t(e,f),u&&u.m(e,null)},p(_,k){k&8&&h!==(h=_[3].exists?"Ready":"Not built")&&G(I,h),_[3].exists?u?u.p(_,k):(u=Ye(_),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(_){_&&d(e),u&&u.d()}}}function nt(l){let e,s="Loading index status…";return{c(){e=r("div"),e.textContent=s,this.h()},l(i){e=n(i,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1ihqao2"&&(e.textContent=s),this.h()},h(){c(e,"class","muted svelte-1b2myr9")},m(i,o){H(i,e,o)},p:Ae,d(i){i&&d(e)}}}function rt(l){let e,s,i;return{c(){e=r("div"),s=L("⚠️ "),i=L(l[2]),this.h()},l(o){e=n(o,"DIV",{class:!0});var a=p(e);s=B(a,"⚠️ "),i=B(a,l[2]),a.forEach(d),this.h()},h(){c(e,"class","note error svelte-1b2myr9")},m(o,a){H(o,e,a),t(e,s),t(e,i)},p(o,a){a&4&&G(i,o[2])},d(o){o&&d(e)}}}function Ye(l){let e,s,i="Items:",o,a=l[3].items+"",h,I,f,u,_="Model:",k,D=l[3].model+"",J,q,w,N,j="Provider:",P,R=l[3].provider+"",Z,F,S,V,$="Created:",v,y=(l[3].createdAt&&new Date(l[3].createdAt).toLocaleString())+"",K;return{c(){e=r("div"),s=r("strong"),s.textContent=i,o=C(),h=L(a),I=C(),f=r("div"),u=r("strong"),u.textContent=_,k=C(),J=L(D),q=C(),w=r("div"),N=r("strong"),N.textContent=j,P=C(),Z=L(R),F=C(),S=r("div"),V=r("strong"),V.textContent=$,v=C(),K=L(y)},l(m){e=n(m,"DIV",{});var E=p(e);s=n(E,"STRONG",{"data-svelte-h":!0}),U(s)!=="svelte-1dld1zm"&&(s.textContent=i),o=g(E),h=B(E,a),E.forEach(d),I=g(m),f=n(m,"DIV",{});var M=p(f);u=n(M,"STRONG",{"data-svelte-h":!0}),U(u)!=="svelte-1n6jg5l"&&(u.textContent=_),k=g(M),J=B(M,D),M.forEach(d),q=g(m),w=n(m,"DIV",{});var ee=p(w);N=n(ee,"STRONG",{"data-svelte-h":!0}),U(N)!=="svelte-6fzk4d"&&(N.textContent=j),P=g(ee),Z=B(ee,R),ee.forEach(d),F=g(m),S=n(m,"DIV",{});var x=p(S);V=n(x,"STRONG",{"data-svelte-h":!0}),U(V)!=="svelte-1gha3lu"&&(V.textContent=$),v=g(x),K=B(x,y),x.forEach(d)},m(m,E){H(m,e,E),t(e,s),t(e,o),t(e,h),H(m,I,E),H(m,f,E),t(f,u),t(f,k),t(f,J),H(m,q,E),H(m,w,E),t(w,N),t(w,P),t(w,Z),H(m,F,E),H(m,S,E),t(S,V),t(S,v),t(S,K)},p(m,E){E&8&&a!==(a=m[3].items+"")&&G(h,a),E&8&&D!==(D=m[3].model+"")&&G(J,D),E&8&&R!==(R=m[3].provider+"")&&G(Z,R),E&8&&y!==(y=(m[3].createdAt&&new Date(m[3].createdAt).toLocaleString())+"")&&G(K,y)},d(m){m&&(d(e),d(I),d(f),d(q),d(w),d(F),d(S))}}}function at(l){let e,s,i,o="<h3>Quick Capture</h3>",a,h,I,f,u,_,k=l[5]?"Saving...":"Save",D,J,q,w,N,j,P,R,Z="Search Index",F,S,V,$,v,y,K=l[1]?"Building…":"Build Index",m,E,M,ee,x,ae,Be="<h3>Agents</h3>",Te,Q,W,te,Le="Run Organizer",Se,se,Pe="Run Indexer",De,le,Re="Run Ingestor",we,ie,Ue="Organizer enriches episodic JSON; Indexer rebuilds semantic index; Ingestor converts files from <code>memory/inbox</code>.",Ve,X,ne,re,Ne,oe,je="Use AI Ingestor (organize)",Oe,de,he=l[8]?"Summarize/curate large files with outline/highlights":"Legacy raw ingestor (observation chunks)",be,ze,xe,O=l[6]&&We(l),z=l[7]&&Xe(l);function He(b,T){if(b[2])return rt;if(b[0])return nt;if(b[3])return lt}let ue=He(l),A=ue&&ue(l);return{c(){e=r("div"),s=r("div"),i=r("div"),i.innerHTML=o,a=C(),h=r("div"),I=r("div"),f=r("input"),u=C(),_=r("button"),D=L(k),q=C(),O&&O.c(),w=C(),z&&z.c(),N=C(),j=r("div"),P=r("div"),R=r("h3"),R.textContent=Z,F=C(),S=r("div"),V=r("button"),$=L("Refresh"),v=C(),y=r("button"),m=L(K),E=C(),M=r("div"),A&&A.c(),ee=C(),x=r("div"),ae=r("div"),ae.innerHTML=Be,Te=C(),Q=r("div"),W=r("div"),te=r("button"),te.textContent=Le,Se=C(),se=r("button"),se.textContent=Pe,De=C(),le=r("button"),le.textContent=Re,we=C(),ie=r("div"),ie.innerHTML=Ue,Ve=C(),X=r("div"),ne=r("label"),re=r("input"),Ne=C(),oe=r("span"),oe.textContent=je,Oe=C(),de=r("span"),be=L(he),this.h()},l(b){e=n(b,"DIV",{class:!0});var T=p(e);s=n(T,"DIV",{class:!0});var me=p(s);i=n(me,"DIV",{class:!0,"data-svelte-h":!0}),U(i)!=="svelte-1eesz95"&&(i.innerHTML=o),a=g(me),h=n(me,"DIV",{class:!0});var ce=p(h);I=n(ce,"DIV",{class:!0});var _e=p(I);f=n(_e,"INPUT",{class:!0,type:!0,placeholder:!0}),u=g(_e),_=n(_e,"BUTTON",{class:!0});var Me=p(_);D=B(Me,k),Me.forEach(d),_e.forEach(d),q=g(ce),O&&O.l(ce),w=g(ce),z&&z.l(ce),ce.forEach(d),me.forEach(d),N=g(T),j=n(T,"DIV",{class:!0});var pe=p(j);P=n(pe,"DIV",{class:!0});var ye=p(P);R=n(ye,"H3",{"data-svelte-h":!0}),U(R)!=="svelte-ssbz2g"&&(R.textContent=Z),F=g(ye),S=n(ye,"DIV",{class:!0});var ge=p(S);V=n(ge,"BUTTON",{class:!0});var Je=p(V);$=B(Je,"Refresh"),Je.forEach(d),v=g(ge),y=n(ge,"BUTTON",{class:!0});var qe=p(y);m=B(qe,K),qe.forEach(d),ge.forEach(d),ye.forEach(d),E=g(pe),M=n(pe,"DIV",{class:!0});var Ge=p(M);A&&A.l(Ge),Ge.forEach(d),pe.forEach(d),ee=g(T),x=n(T,"DIV",{class:!0});var Ce=p(x);ae=n(Ce,"DIV",{class:!0,"data-svelte-h":!0}),U(ae)!=="svelte-5dca5s"&&(ae.innerHTML=Be),Te=g(Ce),Q=n(Ce,"DIV",{class:!0});var fe=p(Q);W=n(fe,"DIV",{class:!0});var ve=p(W);te=n(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),U(te)!=="svelte-1xqzz10"&&(te.textContent=Le),Se=g(ve),se=n(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),U(se)!=="svelte-29g7sg"&&(se.textContent=Pe),De=g(ve),le=n(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),U(le)!=="svelte-7oksxk"&&(le.textContent=Re),ve.forEach(d),we=g(fe),ie=n(fe,"DIV",{class:!0,"data-svelte-h":!0}),U(ie)!=="svelte-oakmsl"&&(ie.innerHTML=Ue),Ve=g(fe),X=n(fe,"DIV",{class:!0,style:!0});var Ie=p(X);ne=n(Ie,"LABEL",{class:!0});var ke=p(ne);re=n(ke,"INPUT",{type:!0}),Ne=g(ke),oe=n(ke,"SPAN",{"data-svelte-h":!0}),U(oe)!=="svelte-eoglb2"&&(oe.textContent=je),ke.forEach(d),Oe=g(Ie),de=n(Ie,"SPAN",{class:!0});var Fe=p(de);be=B(Fe,he),Fe.forEach(d),Ie.forEach(d),fe.forEach(d),Ce.forEach(d),T.forEach(d),this.h()},h(){c(i,"class","card-header svelte-1b2myr9"),c(f,"class","input svelte-1b2myr9"),c(f,"type","text"),c(f,"placeholder","Capture an observation (Enter to save)"),c(_,"class","btn btn-primary svelte-1b2myr9"),_.disabled=J=l[5]||!l[4].trim(),c(I,"class","row svelte-1b2myr9"),c(h,"class","card-body svelte-1b2myr9"),c(s,"class","card svelte-1b2myr9"),c(V,"class","btn btn-secondary svelte-1b2myr9"),V.disabled=l[0],c(y,"class","btn btn-primary svelte-1b2myr9"),y.disabled=l[1],c(S,"class","actions"),c(P,"class","card-header svelte-1b2myr9"),c(M,"class","card-body svelte-1b2myr9"),c(j,"class","card svelte-1b2myr9"),c(ae,"class","card-header svelte-1b2myr9"),c(te,"class","btn btn-secondary svelte-1b2myr9"),c(se,"class","btn btn-secondary svelte-1b2myr9"),c(le,"class","btn btn-secondary svelte-1b2myr9"),c(W,"class","row svelte-1b2myr9"),c(ie,"class","muted small svelte-1b2myr9"),c(re,"type","checkbox"),c(ne,"class","switch-row svelte-1b2myr9"),c(de,"class","muted small svelte-1b2myr9"),c(X,"class","row svelte-1b2myr9"),Qe(X,"margin-top","0.5rem"),Qe(X,"align-items","center"),c(Q,"class","card-body svelte-1b2myr9"),c(x,"class","card svelte-1b2myr9"),c(e,"class","memory-controls svelte-1b2myr9")},m(b,T){H(b,e,T),t(e,s),t(s,i),t(s,a),t(s,h),t(h,I),t(I,f),Ke(f,l[4]),t(I,u),t(I,_),t(_,D),t(h,q),O&&O.m(h,null),t(h,w),z&&z.m(h,null),t(e,N),t(e,j),t(j,P),t(P,R),t(P,F),t(P,S),t(S,V),t(V,$),t(S,v),t(S,y),t(y,m),t(j,E),t(j,M),A&&A.m(M,null),t(e,ee),t(e,x),t(x,ae),t(x,Te),t(x,Q),t(Q,W),t(W,te),t(W,Se),t(W,se),t(W,De),t(W,le),t(Q,we),t(Q,ie),t(Q,Ve),t(Q,X),t(X,ne),t(ne,re),re.checked=l[8],t(ne,Ne),t(ne,oe),t(X,Oe),t(X,de),t(de,be),ze||(xe=[Y(f,"input",l[16]),Y(f,"keydown",l[15]),Y(_,"click",l[11]),Y(V,"click",l[9]),Y(y,"click",l[10]),Y(te,"click",l[17]),Y(se,"click",l[18]),Y(le,"click",l[14]),Y(re,"change",l[19]),Y(re,"change",l[13])],ze=!0)},p(b,[T]){T&16&&f.value!==b[4]&&Ke(f,b[4]),T&32&&k!==(k=b[5]?"Saving...":"Save")&&G(D,k),T&48&&J!==(J=b[5]||!b[4].trim())&&(_.disabled=J),b[6]?O?O.p(b,T):(O=We(b),O.c(),O.m(h,w)):O&&(O.d(1),O=null),b[7]?z?z.p(b,T):(z=Xe(b),z.c(),z.m(h,null)):z&&(z.d(1),z=null),T&1&&(V.disabled=b[0]),T&2&&K!==(K=b[1]?"Building…":"Build Index")&&G(m,K),T&2&&(y.disabled=b[1]),ue===(ue=He(b))&&A?A.p(b,T):(A&&A.d(1),A=ue&&ue(b),A&&(A.c(),A.m(M,null))),T&256&&(re.checked=b[8]),T&256&&he!==(he=b[8]?"Summarize/curate large files with outline/highlights":"Legacy raw ingestor (observation chunks)")&&G(be,he)},i:Ae,o:Ae,d(b){b&&d(e),O&&O.d(),z&&z.d(),A&&A.d(),ze=!1,tt(xe)}}}function it(l,e,s){const i=st();let o=!1,a=!1,h=null,I=null,f="",u=!1,_=null,k=null;async function D(){s(0,o=!0),s(2,h=null);try{const v=await Ee("/api/index");if(!v.ok)throw new Error(`HTTP ${v.status}`);s(3,I=await v.json())}catch(v){s(2,h=v.message),s(3,I=null)}finally{s(0,o=!1)}}async function J(){s(1,a=!0),s(2,h=null);try{const v=await Ee("/api/index",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"build"})}),y=await v.json();if(!v.ok||!y.success)throw new Error(y.error||"Build failed");s(3,I=y.status)}catch(v){s(2,h=v.message)}finally{s(1,a=!1)}}async function q(){if(f.trim()){s(5,u=!0),s(6,_=null),s(7,k=null);try{const v=await Ee("/api/capture",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:f})}),y=await v.json();if(!v.ok||!y.success)throw new Error(y.error||"Capture failed");s(7,k="Saved"),s(4,f=""),i("captured")}catch(v){s(6,_=v.message)}finally{s(5,u=!1)}}}async function w(v){try{await Ee("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentName:v})})}catch{}}let N=!0;function j(){try{const v=localStorage.getItem("memoryPrefs");if(!v)return;const y=JSON.parse(v);typeof y.useAiIngestor=="boolean"&&s(8,N=y.useAiIngestor)}catch{}}function P(){try{localStorage.setItem("memoryPrefs",JSON.stringify({useAiIngestor:N}))}catch{}}function R(){w(N?"ai-ingestor":"ingestor")}function Z(v){v.key==="Enter"&&!u&&q()}D(),j();function F(){f=this.value,s(4,f)}const S=()=>w("organizer"),V=()=>w("indexer");function $(){N=this.checked,s(8,N)}return[o,a,h,I,f,u,_,k,N,D,J,q,w,P,R,Z,F,S,V,$]}class dt extends Ze{constructor(e){super(),$e(this,e,it,at,et,{})}}export{dt as default};
