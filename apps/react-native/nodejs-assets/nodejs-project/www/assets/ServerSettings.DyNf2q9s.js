import{S as yt,i as Et,s as St,n as ge,d as i,a as A,M as Oe,o as Pt,Q as Lt,c,e as u,g as R,j as d,p as le,b as n,x as de,f as k,q as z,h as j,t as B,k as g,r as ft,u as zt,v as dt,O as Re,L as fe,ad as Dt,A as Nl,l as Bt,ag as Il,K as ql,z as wt,N as Ll,X as zl,F as He,G as Fe,a0 as Vl,a1 as Al,ah as Bl,ai as Ol,aj as Ut,ak as Hl,E as bt,H as mt,I as kt,J as Ct}from"./api-config.B-uR5Kyo.js";import{h as Tl}from"./server-health.RMTlZIDp.js";import{s as Fl,t as Rl,a as Gl,d as Wl,i as Jl,b as Mt,e as Yt,g as qt,T as jt,f as Ql,h as Kl}from"./CenterContent.pCZxoRMf.js";import{g as Yl,a as Xl,b as Zl,d as $l,s as xl,u as es,c as ts,e as ls,i as ss,f as ns,S as as}from"./SyncStatus.DemBWcbd.js";import{w as rs,d as Ot}from"./index.PToQ82vo.js";import"./navigation.DpIJm6IG.js";import"./security-policy.Bh98pxWs.js";import"./clear-events.HcvDxiLr.js";import"./local-memory.DgMLNaVQ.js";function Xt(s,e,t){const l=s.slice();l[23]=e[t];const a=l[1]?.tierStatuses[l[23].id];l[24]=a;const r=l[4]===l[23].id;return l[25]=r,l}function Zt(s,e,t){const l=s.slice();return l[28]=e[t],l}function os(s){let e,t,l,a="Compute Tier",r,o,v,h,f,_=s[11]()+"",p,m,b=s[6].batteryLevel+"",w,C,y,E,P=s[12]()+"",N,W,q=s[6].networkType+"",H,M,T,S,V,O,I,L,X,Y,x,D,J,$,Z,ee,ve,oe,_e,te,me,he,pe,G,K,ie,Ee,Ae;function we(U,Q){return U[3]?us:fs}let Se=we(s),ue=Se(s),re=s[6].saveDataMode&&$t(),be=ft(Object.values(jt)),ne=[];for(let U=0;U<be.length;U+=1)ne[U]=tl(Xt(s,be,U));let se=s[1]?.reason&&ll(s);return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=a,r=g(),o=d("button"),ue.c(),v=g(),h=d("div"),f=d("span"),p=B(_),m=g(),w=B(b),C=B("%"),y=g(),E=d("span"),N=B(P),W=g(),H=B(q),M=g(),re&&re.c(),T=g(),S=d("div"),V=d("label"),O=d("input"),L=B(`
        Auto`),X=g(),Y=d("label"),x=d("input"),J=B(`
        Prefer Offline`),$=g(),Z=d("label"),ee=d("input"),oe=B(`
        Prefer Server`),_e=g(),te=d("label"),me=d("input"),pe=B(`
        Manual`),G=g(),K=d("div");for(let U=0;U<ne.length;U+=1)ne[U].c();ie=g(),se&&se.c(),this.h()},l(U){e=u(U,"DIV",{class:!0});var Q=k(e);t=u(Q,"DIV",{class:!0});var ae=k(t);l=u(ae,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1occmxv"&&(l.textContent=a),r=j(ae),o=u(ae,"BUTTON",{class:!0});var je=k(o);ue.l(je),je.forEach(i),ae.forEach(i),v=j(Q),h=u(Q,"DIV",{class:!0});var ye=k(h);f=u(ye,"SPAN",{class:!0,title:!0});var Me=k(f);p=z(Me,_),m=j(Me),w=z(Me,b),C=z(Me,"%"),Me.forEach(i),y=j(ye),E=u(ye,"SPAN",{class:!0,title:!0});var Te=k(E);N=z(Te,P),W=j(Te),H=z(Te,q),Te.forEach(i),M=j(ye),re&&re.l(ye),ye.forEach(i),T=j(Q),S=u(Q,"DIV",{class:!0});var ke=k(S);V=u(ke,"LABEL",{class:!0});var Pe=k(V);O=u(Pe,"INPUT",{type:!0,name:!0}),L=z(Pe,`
        Auto`),Pe.forEach(i),X=j(ke),Y=u(ke,"LABEL",{class:!0});var xe=k(Y);x=u(xe,"INPUT",{type:!0,name:!0}),J=z(xe,`
        Prefer Offline`),xe.forEach(i),$=j(ke),Z=u(ke,"LABEL",{class:!0});var Ge=k(Z);ee=u(Ge,"INPUT",{type:!0,name:!0}),oe=z(Ge,`
        Prefer Server`),Ge.forEach(i),_e=j(ke),te=u(ke,"LABEL",{class:!0});var qe=k(te);me=u(qe,"INPUT",{type:!0,name:!0}),pe=z(qe,`
        Manual`),qe.forEach(i),ke.forEach(i),G=j(Q),K=u(Q,"DIV",{class:!0});var ut=k(K);for(let We=0;We<ne.length;We+=1)ne[We].l(ut);ut.forEach(i),ie=j(Q),se&&se.l(Q),Q.forEach(i),this.h()},h(){c(l,"class","svelte-1loaz6j"),c(o,"class","refresh-btn svelte-1loaz6j"),o.disabled=s[3],c(t,"class","tier-header svelte-1loaz6j"),c(f,"class","status-item svelte-1loaz6j"),c(f,"title","Battery"),c(E,"class","status-item svelte-1loaz6j"),c(E,"title","Network"),c(h,"class","device-status svelte-1loaz6j"),c(O,"type","radio"),c(O,"name","mode"),O.value="auto",O.checked=I=s[5].mode==="auto",c(V,"class","svelte-1loaz6j"),c(x,"type","radio"),c(x,"name","mode"),x.value="prefer-offline",x.checked=D=s[5].mode==="prefer-offline",c(Y,"class","svelte-1loaz6j"),c(ee,"type","radio"),c(ee,"name","mode"),ee.value="prefer-server",ee.checked=ve=s[5].mode==="prefer-server",c(Z,"class","svelte-1loaz6j"),c(me,"type","radio"),c(me,"name","mode"),me.value="manual",me.checked=he=s[5].mode==="manual",c(te,"class","svelte-1loaz6j"),c(S,"class","mode-selector svelte-1loaz6j"),c(K,"class","tier-cards svelte-1loaz6j"),c(e,"class","tier-selector svelte-1loaz6j")},m(U,Q){A(U,e,Q),n(e,t),n(t,l),n(t,r),n(t,o),ue.m(o,null),n(e,v),n(e,h),n(h,f),n(f,p),n(f,m),n(f,w),n(f,C),n(h,y),n(h,E),n(E,N),n(E,W),n(E,H),n(h,M),re&&re.m(h,null),n(e,T),n(e,S),n(S,V),n(V,O),n(V,L),n(S,X),n(S,Y),n(Y,x),n(Y,J),n(S,$),n(S,Z),n(Z,ee),n(Z,oe),n(S,_e),n(S,te),n(te,me),n(te,pe),n(e,G),n(e,K);for(let ae=0;ae<ne.length;ae+=1)ne[ae]&&ne[ae].m(K,null);n(e,ie),se&&se.m(e,null),Ee||(Ae=[de(o,"click",s[7]),de(O,"change",s[13]),de(x,"change",s[14]),de(ee,"change",s[15]),de(me,"change",s[16])],Ee=!0)},p(U,Q){if(Se!==(Se=we(U))&&(ue.d(1),ue=Se(U),ue&&(ue.c(),ue.m(o,null))),Q&8&&(o.disabled=U[3]),Q&64&&b!==(b=U[6].batteryLevel+"")&&le(w,b),Q&64&&q!==(q=U[6].networkType+"")&&le(H,q),U[6].saveDataMode?re||(re=$t(),re.c(),re.m(h,null)):re&&(re.d(1),re=null),Q&32&&I!==(I=U[5].mode==="auto")&&(O.checked=I),Q&32&&D!==(D=U[5].mode==="prefer-offline")&&(x.checked=D),Q&32&&ve!==(ve=U[5].mode==="prefer-server")&&(ee.checked=ve),Q&32&&he!==(he=U[5].mode==="manual")&&(me.checked=he),Q&1586){be=ft(Object.values(jt));let ae;for(ae=0;ae<be.length;ae+=1){const je=Xt(U,be,ae);ne[ae]?ne[ae].p(je,Q):(ne[ae]=tl(je),ne[ae].c(),ne[ae].m(K,null))}for(;ae<ne.length;ae+=1)ne[ae].d(1);ne.length=be.length}U[1]?.reason?se?se.p(U,Q):(se=ll(U),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},d(U){U&&i(e),ue.d(),re&&re.d(),zt(ne,U),se&&se.d(),Ee=!1,dt(Ae)}}}function is(s){let e,t,l=qt(s[4])+"",a,r,o,v=jt[s[4]].name+"",h,f,_,p,m=s[3]&&sl();return{c(){e=d("button"),t=d("span"),a=B(l),r=g(),o=d("span"),h=B(v),f=g(),m&&m.c(),this.h()},l(b){e=u(b,"BUTTON",{class:!0});var w=k(e);t=u(w,"SPAN",{class:!0});var C=k(t);a=z(C,l),C.forEach(i),r=j(w),o=u(w,"SPAN",{class:!0});var y=k(o);h=z(y,v),y.forEach(i),f=j(w),m&&m.l(w),w.forEach(i),this.h()},h(){c(t,"class","tier-icon svelte-1loaz6j"),c(o,"class","tier-name svelte-1loaz6j"),c(e,"class","tier-compact svelte-1loaz6j"),e.disabled=s[3]},m(b,w){A(b,e,w),n(e,t),n(t,a),n(e,r),n(e,o),n(o,h),n(e,f),m&&m.m(e,null),_||(p=de(e,"click",s[7]),_=!0)},p(b,w){w&16&&l!==(l=qt(b[4])+"")&&le(a,l),w&16&&v!==(v=jt[b[4]].name+"")&&le(h,v),b[3]?m||(m=sl(),m.c(),m.m(e,null)):m&&(m.d(1),m=null),w&8&&(e.disabled=b[3])},d(b){b&&i(e),m&&m.d(),_=!1,p()}}}function cs(s){let e,t='<span class="spinner svelte-1loaz6j"></span> <span>Detecting tiers...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-j9sa9v"&&(e.innerHTML=t),this.h()},h(){c(e,"class","tier-selector loading svelte-1loaz6j")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function fs(s){let e;return{c(){e=B("üîÑ")},l(t){e=z(t,"üîÑ")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function us(s){let e;return{c(){e=d("span"),this.h()},l(t){e=u(t,"SPAN",{class:!0}),k(e).forEach(i),this.h()},h(){c(e,"class","spinner small svelte-1loaz6j")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function $t(s){let e,t="üíæ Saver";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),R(e)!=="svelte-5s7pax"&&(e.textContent=t),this.h()},h(){c(e,"class","status-item warning svelte-1loaz6j"),c(e,"title","Data Saver Active")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function xt(s){let e,t=Ql(s[28])+"",l;return{c(){e=d("span"),l=B(t),this.h()},l(a){e=u(a,"SPAN",{class:!0,title:!0});var r=k(e);l=z(r,t),r.forEach(i),this.h()},h(){c(e,"class","capability svelte-1loaz6j"),c(e,"title",s[28])},m(a,r){A(a,e,r),n(e,l)},p:ge,d(a){a&&i(e)}}}function ds(s){let e,t,l=s[23].capabilities.length-4+"",a;return{c(){e=d("span"),t=B("+"),a=B(l),this.h()},l(r){e=u(r,"SPAN",{class:!0});var o=k(e);t=z(o,"+"),a=z(o,l),o.forEach(i),this.h()},h(){c(e,"class","capability more svelte-1loaz6j")},m(r,o){A(r,e,o),n(e,t),n(e,a)},p:ge,d(r){r&&i(e)}}}function el(s){let e,t="Active";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-59e60i"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-1loaz6j")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function tl(s){let e,t,l,a=qt(s[23].id)+"",r,o,v,h=s[23].name+"",f,_,p,m,b,w=s[23].model+"",C,y,E,P=s[10](s[23].id)+"",N,W,q,H,M,T,S,V,O,I=ft(s[23].capabilities.slice(0,4)),L=[];for(let D=0;D<I.length;D+=1)L[D]=xt(Zt(s,I,D));let X=s[23].capabilities.length>4&&ds(s),Y=s[25]&&el();function x(){return s[17](s[23])}return{c(){e=d("button"),t=d("div"),l=d("span"),r=B(a),o=g(),v=d("span"),f=B(h),_=g(),p=d("span"),m=g(),b=d("div"),C=B(w),y=g(),E=d("div"),N=B(P),W=g(),q=d("div");for(let D=0;D<L.length;D+=1)L[D].c();H=g(),X&&X.c(),M=g(),Y&&Y.c(),T=g(),this.h()},l(D){e=u(D,"BUTTON",{class:!0});var J=k(e);t=u(J,"DIV",{class:!0});var $=k(t);l=u($,"SPAN",{class:!0});var Z=k(l);r=z(Z,a),Z.forEach(i),o=j($),v=u($,"SPAN",{class:!0});var ee=k(v);f=z(ee,h),ee.forEach(i),_=j($),p=u($,"SPAN",{class:!0,style:!0}),k(p).forEach(i),$.forEach(i),m=j(J),b=u(J,"DIV",{class:!0});var ve=k(b);C=z(ve,w),ve.forEach(i),y=j(J),E=u(J,"DIV",{class:!0});var oe=k(E);N=z(oe,P),oe.forEach(i),W=j(J),q=u(J,"DIV",{class:!0});var _e=k(q);for(let te=0;te<L.length;te+=1)L[te].l(_e);H=j(_e),X&&X.l(_e),_e.forEach(i),M=j(J),Y&&Y.l(J),T=j(J),J.forEach(i),this.h()},h(){c(l,"class","tier-icon large svelte-1loaz6j"),c(v,"class","tier-name svelte-1loaz6j"),c(p,"class","status-dot svelte-1loaz6j"),Re(p,"background-color",nl(s[24]?.available||!1)),c(t,"class","tier-card-header svelte-1loaz6j"),c(b,"class","tier-model svelte-1loaz6j"),c(E,"class","tier-status svelte-1loaz6j"),c(q,"class","tier-capabilities svelte-1loaz6j"),c(e,"class","tier-card svelte-1loaz6j"),e.disabled=S=s[5].mode!=="manual",fe(e,"selected",s[25]),fe(e,"available",s[24]?.available),fe(e,"unavailable",!s[24]?.available)},m(D,J){A(D,e,J),n(e,t),n(t,l),n(l,r),n(t,o),n(t,v),n(v,f),n(t,_),n(t,p),n(e,m),n(e,b),n(b,C),n(e,y),n(e,E),n(E,N),n(e,W),n(e,q);for(let $=0;$<L.length;$+=1)L[$]&&L[$].m(q,null);n(q,H),X&&X.m(q,null),n(e,M),Y&&Y.m(e,null),n(e,T),V||(O=de(e,"click",x),V=!0)},p(D,J){if(s=D,J&2&&Re(p,"background-color",nl(s[24]?.available||!1)),J&0){I=ft(s[23].capabilities.slice(0,4));let $;for($=0;$<I.length;$+=1){const Z=Zt(s,I,$);L[$]?L[$].p(Z,J):(L[$]=xt(Z),L[$].c(),L[$].m(q,H))}for(;$<L.length;$+=1)L[$].d(1);L.length=I.length}s[23].capabilities.length>4&&X.p(s,J),s[25]?Y||(Y=el(),Y.c(),Y.m(e,T)):Y&&(Y.d(1),Y=null),J&32&&S!==(S=s[5].mode!=="manual")&&(e.disabled=S),J&16&&fe(e,"selected",s[25]),J&2&&fe(e,"available",s[24]?.available),J&2&&fe(e,"unavailable",!s[24]?.available)},d(D){D&&i(e),zt(L,D),X&&X.d(),Y&&Y.d(),V=!1,O()}}}function ll(s){let e,t,l="Why:",a,r=s[1].reason+"",o;return{c(){e=d("div"),t=d("strong"),t.textContent=l,a=g(),o=B(r),this.h()},l(v){e=u(v,"DIV",{class:!0});var h=k(e);t=u(h,"STRONG",{"data-svelte-h":!0}),R(t)!=="svelte-shvnp0"&&(t.textContent=l),a=j(h),o=z(h,r),h.forEach(i),this.h()},h(){c(e,"class","selection-reason svelte-1loaz6j")},m(v,h){A(v,e,h),n(e,t),n(e,a),n(e,o)},p(v,h){h&2&&r!==(r=v[1].reason+"")&&le(o,r)},d(v){v&&i(e)}}}function sl(s){let e;return{c(){e=d("span"),this.h()},l(t){e=u(t,"SPAN",{class:!0}),k(e).forEach(i),this.h()},h(){c(e,"class","spinner small svelte-1loaz6j")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function vs(s){let e;function t(r,o){return r[2]?cs:r[0]?is:os}let l=t(s),a=l(s);return{c(){a.c(),e=Oe()},l(r){a.l(r),e=Oe()},m(r,o){a.m(r,o),A(r,e,o)},p(r,[o]){l===(l=t(r))&&a?a.p(r,o):(a.d(1),a=l(r),a&&(a.c(),a.m(e.parentNode,e)))},i:ge,o:ge,d(r){r&&i(e),a.d(r)}}}function nl(s){return s?"#22c55e":"#ef4444"}function hs(s,e,t){let{compact:l=!1}=e,a=null,r=!0,o=!1,v="server",h={mode:"auto"},f={batteryLevel:100,batteryCharging:!1,networkType:"unknown",saveDataMode:!1};const _=Fl.subscribe(S=>t(4,v=S)),p=Rl.subscribe(S=>t(5,h=S)),m=Gl.subscribe(S=>S),b=Wl.subscribe(S=>t(6,f=S));Pt(async()=>{try{t(1,a=await Jl())}catch(S){console.error("Tier selection init failed:",S)}t(2,r=!1)}),Lt(()=>{_(),p(),m(),b(),Kl()});async function w(){t(3,o=!0);try{t(1,a=await Mt())}catch(S){console.error("Tier refresh failed:",S)}t(3,o=!1)}async function C(S){await Yt(S),t(1,a=await Mt())}async function y(S){await Yt("manual",S),t(1,a=await Mt())}function E(S){const V=a?.tierStatuses[S];return V?V.available?V.latencyMs?`${V.latencyMs}ms`:"Available":V.error||"Unavailable":"Unknown"}function P(){return f.batteryCharging?"üîå":f.batteryLevel>75?"üîã":f.batteryLevel>25?"ü™´":"üî¥"}function N(){switch(f.networkType){case"wifi":return"üì∂";case"cellular":return"üì±";case"ethernet":return"üîå";case"none":return"üìµ";default:return"‚ùì"}}const W=()=>C("auto"),q=()=>C("prefer-offline"),H=()=>C("prefer-server"),M=()=>C("manual"),T=S=>y(S.id);return s.$$set=S=>{"compact"in S&&t(0,l=S.compact)},[l,a,r,o,v,h,f,w,C,y,E,P,N,W,q,H,M,T]}class ps extends yt{constructor(e){super(),Et(this,e,hs,vs,St,{compact:0})}}const _s={checking:!1,updating:!1,updateProgress:0,updateAvailable:!1,error:null,lastChecked:null,platform:"unknown",currentVersion:"0.0.0",currentVersionCode:0,latestMobileVersion:null,serverUpdateInfo:null},Ce=rs(_s);Ot(Ce,s=>s.updateAvailable);Ot(Ce,s=>s.checking);Ot(Ce,s=>s.updating);function Ul(){return Dt()?"mobile":"server"}async function Ml(){if(!Dt())return{version:"0.0.0",versionCode:0,packageName:"com.metahuman.os"};if(Nl()){try{const s=await fetch("http://127.0.0.1:4322/app-info");if(s.ok)return await s.json()}catch{}return{version:"1.0.0",versionCode:1,packageName:"com.metahuman.os"}}return{version:"1.0.0",versionCode:1,packageName:"com.metahuman.os"}}async function bs(){const s=Ul();Ce.update(e=>({...e,checking:!0,error:null,platform:s}));try{return s==="mobile"?await ms():await ks()}catch(e){const t=e instanceof Error?e.message:"Failed to check for updates";return Ce.update(l=>({...l,checking:!1,error:t})),!1}}async function ms(){const s=await Ml();Ce.update(l=>({...l,currentVersion:s.version,currentVersionCode:s.versionCode}));const e=await Bt(`/api/mobile/version?current=${s.version}&versionCode=${s.versionCode}`);if(!e.ok){const l=await e.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||`Server returned ${e.status}`)}const t=await e.json();return Ce.update(l=>({...l,checking:!1,latestMobileVersion:t.latest,updateAvailable:t.updateAvailable,lastChecked:new Date().toISOString()})),t.updateAvailable}async function ks(){const s=await Bt("/api/server-update");if(!s.ok){const t=await s.json().catch(()=>({error:"Unknown error"}));throw new Error(t.error||`Server returned ${s.status}`)}const e=await s.json();return Ce.update(t=>({...t,checking:!1,serverUpdateInfo:e,updateAvailable:e.updateAvailable,currentVersion:e.currentVersion,lastChecked:new Date().toISOString()})),e.updateAvailable}async function Cs(){const s=await new Promise(e=>{Ce.subscribe(t=>e(t))()});if(!s.updateAvailable)throw new Error("No update available");return s.platform==="mobile"?await ws():await js()}async function ws(){const s=await new Promise(e=>{Ce.subscribe(t=>e(t))()});if(!s.latestMobileVersion)throw new Error("No update available to download");Ce.update(e=>({...e,updating:!0,updateProgress:0,error:null}));try{const t=`${await Il()||window.location.origin}${s.latestMobileVersion.downloadUrl}`;Nl()?window.ReactNativeWebView?(window.ReactNativeWebView.postMessage(JSON.stringify({type:"download-update",url:t,version:s.latestMobileVersion.version})),Ce.update(l=>({...l,updateProgress:10}))):(window.open(t,"_blank"),Ce.update(l=>({...l,updating:!1,updateProgress:100}))):(window.open(t,"_blank"),Ce.update(l=>({...l,updating:!1,updateProgress:100})))}catch(e){const t=e instanceof Error?e.message:"Download failed";throw Ce.update(l=>({...l,updating:!1,error:t})),e}}async function js(){const s=await new Promise(e=>{Ce.subscribe(t=>e(t))()});if(!s.serverUpdateInfo?.canUpdate)throw new Error(s.serverUpdateInfo?.reason||"Cannot update");Ce.update(e=>({...e,updating:!0,updateProgress:0,error:null}));try{Ce.update(l=>({...l,updateProgress:30}));const e=await Bt("/api/server-update",{method:"POST"});if(!e.ok){const l=await e.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||"Update failed")}const t=await e.json();if(Ce.update(l=>({...l,updateProgress:80})),!t.success)throw new Error(t.message||"Update failed");Ce.update(l=>({...l,updating:!1,updateProgress:100,updateAvailable:!1,serverUpdateInfo:{...l.serverUpdateInfo,updateAvailable:!1,currentVersion:t.newCommit,commitsBehind:0}})),t.restartMessage&&console.log("[app-updater]",t.restartMessage)}catch(e){const t=e instanceof Error?e.message:"Update failed";throw Ce.update(l=>({...l,updating:!1,error:t})),e}}async function gs(){return Cs()}function al(s){return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`}function rl(s){if(!s)return"Never";const e=new Date(s),l=new Date().getTime()-e.getTime(),a=Math.floor(l/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:e.toLocaleDateString()}async function ys(){const s=Ul();if(Ce.update(e=>({...e,platform:s})),s==="mobile"){const e=await Ml();Ce.update(t=>({...t,currentVersion:e.version,currentVersionCode:e.versionCode}))}}function Es(s){let e;return{c(){e=B("‚Üª Check for Updates")},l(t){e=z(t,"‚Üª Check for Updates")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function Ss(s){let e,t="‚Üª",l;return{c(){e=d("span"),e.textContent=t,l=B(" Checking..."),this.h()},l(a){e=u(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ul7xd3"&&(e.textContent=t),l=z(a," Checking..."),this.h()},h(){c(e,"class","spinner svelte-raqknj")},m(a,r){A(a,e,r),A(a,l,r)},d(a){a&&(i(e),i(l))}}}function Ps(s){let e,t,l,a="Installed Version:",r,o,v=s[0].currentVersion+"",h,f,_,p,m=s[0].currentVersionCode+"",b,w,C,y,E,P,N,W='<p class="svelte-raqknj">Updates are downloaded from your connected server. Make sure you&#39;re connected to the correct server before updating.</p>',q=s[0].lastChecked&&ol(s);function H(V,O){if(V[0].latestVersion)return Is;if(!V[0].checking&&!V[0].error)return Ns}let M=H(s),T=M&&M(s),S=s[0].error&&cl(s);return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,r=g(),o=d("span"),h=B(v),f=g(),_=d("span"),p=B("(build "),b=B(m),w=B(")"),C=g(),q&&q.c(),y=g(),T&&T.c(),E=g(),S&&S.c(),P=g(),N=d("div"),N.innerHTML=W,this.h()},l(V){e=u(V,"DIV",{class:!0});var O=k(e);t=u(O,"DIV",{class:!0});var I=k(t);l=u(I,"SPAN",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-u4diij"&&(l.textContent=a),r=j(I),o=u(I,"SPAN",{class:!0});var L=k(o);h=z(L,v),L.forEach(i),f=j(I),_=u(I,"SPAN",{class:!0});var X=k(_);p=z(X,"(build "),b=z(X,m),w=z(X,")"),X.forEach(i),I.forEach(i),C=j(O),q&&q.l(O),O.forEach(i),y=j(V),T&&T.l(V),E=j(V),S&&S.l(V),P=j(V),N=u(V,"DIV",{class:!0,"data-svelte-h":!0}),R(N)!=="svelte-809y20"&&(N.innerHTML=W),this.h()},h(){c(l,"class","label svelte-raqknj"),c(o,"class","value svelte-raqknj"),c(_,"class","version-code svelte-raqknj"),c(t,"class","version-row svelte-raqknj"),c(e,"class","version-info svelte-raqknj"),c(N,"class","help-text svelte-raqknj")},m(V,O){A(V,e,O),n(e,t),n(t,l),n(t,r),n(t,o),n(o,h),n(t,f),n(t,_),n(_,p),n(_,b),n(_,w),n(e,C),q&&q.m(e,null),A(V,y,O),T&&T.m(V,O),A(V,E,O),S&&S.m(V,O),A(V,P,O),A(V,N,O)},p(V,O){O&1&&v!==(v=V[0].currentVersion+"")&&le(h,v),O&1&&m!==(m=V[0].currentVersionCode+"")&&le(b,m),V[0].lastChecked?q?q.p(V,O):(q=ol(V),q.c(),q.m(e,null)):q&&(q.d(1),q=null),M===(M=H(V))&&T?T.p(V,O):(T&&T.d(1),T=M&&M(V),T&&(T.c(),T.m(E.parentNode,E))),V[0].error?S?S.p(V,O):(S=cl(V),S.c(),S.m(P.parentNode,P)):S&&(S.d(1),S=null)},d(V){V&&(i(e),i(y),i(E),i(P),i(N)),q&&q.d(),T&&T.d(V),S&&S.d(V)}}}function Ds(s){let e,t='<p class="svelte-raqknj">App updates are only available in the mobile app.</p> <p class="svelte-raqknj">Use the server&#39;s releases page to download the latest APK.</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-aocxe9"&&(e.innerHTML=t),this.h()},h(){c(e,"class","info-box svelte-raqknj")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function ol(s){let e,t,l="Last Checked:",a,r,o=rl(s[0].lastChecked)+"",v;return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("span"),v=B(o),this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-16zkf08"&&(t.textContent=l),a=j(f),r=u(f,"SPAN",{class:!0});var _=k(r);v=z(_,o),_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","label svelte-raqknj"),c(r,"class","value svelte-raqknj"),c(e,"class","version-row svelte-raqknj")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r),n(r,v)},p(h,f){f&1&&o!==(o=rl(h[0].lastChecked)+"")&&le(v,o)},d(h){h&&i(e)}}}function Ns(s){let e,t='<p class="svelte-raqknj">Tap &quot;Check for Updates&quot; to see if a new version is available.</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-152k361"&&(e.innerHTML=t),this.h()},h(){c(e,"class","no-check svelte-raqknj")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function Is(s){let e,t,l,a=s[4]()+"",r,o,v,h;function f(C,y){return C[0].updateAvailable?As:Vs}let _=f(s),p=_(s);function m(C,y){return C[0].updateAvailable?Us:Ts}let b=m(s),w=b(s);return{c(){e=d("div"),t=d("div"),l=d("span"),r=B(a),o=g(),v=d("span"),p.c(),h=g(),w.c(),this.h()},l(C){e=u(C,"DIV",{class:!0});var y=k(e);t=u(y,"DIV",{class:!0});var E=k(t);l=u(E,"SPAN",{class:!0,style:!0});var P=k(l);r=z(P,a),P.forEach(i),o=j(E),v=u(E,"SPAN",{class:!0});var N=k(v);p.l(N),N.forEach(i),E.forEach(i),h=j(y),w.l(y),y.forEach(i),this.h()},h(){c(l,"class","update-icon svelte-raqknj"),Re(l,"color",s[5]()),c(v,"class","update-title svelte-raqknj"),c(t,"class","update-header svelte-raqknj"),c(e,"class","update-card svelte-raqknj"),fe(e,"available",s[0].updateAvailable)},m(C,y){A(C,e,y),n(e,t),n(t,l),n(l,r),n(t,o),n(t,v),p.m(v,null),n(e,h),w.m(e,null)},p(C,y){_!==(_=f(C))&&(p.d(1),p=_(C),p&&(p.c(),p.m(v,null))),b===(b=m(C))&&w?w.p(C,y):(w.d(1),w=b(C),w&&(w.c(),w.m(e,null))),y&1&&fe(e,"available",C[0].updateAvailable)},d(C){C&&i(e),p.d(),w.d()}}}function Vs(s){let e;return{c(){e=B("Up to Date")},l(t){e=z(t,"Up to Date")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function As(s){let e;return{c(){e=B("Update Available")},l(t){e=z(t,"Update Available")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function Ts(s){let e,t="You're running the latest version of MetaHuman OS.";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1b1wcw0"&&(e.textContent=t),this.h()},h(){c(e,"class","up-to-date-msg svelte-raqknj")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function Us(s){let e,t,l,a="New Version:",r,o,v=s[0].latestVersion.version+"",h,f,_,p,m="Size:",b,w,C=al(s[0].latestVersion.fileSize)+"",y,E,P,N,W="Released:",q,H,M=s[0].latestVersion.releaseDate+"",T,S,V,O,I=s[0].latestVersion.releaseNotes&&il(s);function L(x,D){return x[0].downloading?qs:Ms}let X=L(s),Y=X(s);return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,r=g(),o=d("span"),h=B(v),f=g(),_=d("div"),p=d("span"),p.textContent=m,b=g(),w=d("span"),y=B(C),E=g(),P=d("div"),N=d("span"),N.textContent=W,q=g(),H=d("span"),T=B(M),S=g(),I&&I.c(),V=g(),O=d("div"),Y.c(),this.h()},l(x){e=u(x,"DIV",{class:!0});var D=k(e);t=u(D,"DIV",{class:!0});var J=k(t);l=u(J,"SPAN",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1fi4wpz"&&(l.textContent=a),r=j(J),o=u(J,"SPAN",{class:!0});var $=k(o);h=z($,v),$.forEach(i),J.forEach(i),f=j(D),_=u(D,"DIV",{class:!0});var Z=k(_);p=u(Z,"SPAN",{class:!0,"data-svelte-h":!0}),R(p)!=="svelte-pgvm1s"&&(p.textContent=m),b=j(Z),w=u(Z,"SPAN",{class:!0});var ee=k(w);y=z(ee,C),ee.forEach(i),Z.forEach(i),E=j(D),P=u(D,"DIV",{class:!0});var ve=k(P);N=u(ve,"SPAN",{class:!0,"data-svelte-h":!0}),R(N)!=="svelte-yjw2oe"&&(N.textContent=W),q=j(ve),H=u(ve,"SPAN",{class:!0});var oe=k(H);T=z(oe,M),oe.forEach(i),ve.forEach(i),S=j(D),I&&I.l(D),V=j(D),O=u(D,"DIV",{class:!0});var _e=k(O);Y.l(_e),_e.forEach(i),D.forEach(i),this.h()},h(){c(l,"class","label svelte-raqknj"),c(o,"class","value svelte-raqknj"),c(t,"class","detail-row svelte-raqknj"),c(p,"class","label svelte-raqknj"),c(w,"class","value svelte-raqknj"),c(_,"class","detail-row svelte-raqknj"),c(N,"class","label svelte-raqknj"),c(H,"class","value svelte-raqknj"),c(P,"class","detail-row svelte-raqknj"),c(O,"class","download-section svelte-raqknj"),c(e,"class","update-details svelte-raqknj")},m(x,D){A(x,e,D),n(e,t),n(t,l),n(t,r),n(t,o),n(o,h),n(e,f),n(e,_),n(_,p),n(_,b),n(_,w),n(w,y),n(e,E),n(e,P),n(P,N),n(P,q),n(P,H),n(H,T),n(e,S),I&&I.m(e,null),n(e,V),n(e,O),Y.m(O,null)},p(x,D){D&1&&v!==(v=x[0].latestVersion.version+"")&&le(h,v),D&1&&C!==(C=al(x[0].latestVersion.fileSize)+"")&&le(y,C),D&1&&M!==(M=x[0].latestVersion.releaseDate+"")&&le(T,M),x[0].latestVersion.releaseNotes?I?I.p(x,D):(I=il(x),I.c(),I.m(e,V)):I&&(I.d(1),I=null),X===(X=L(x))&&Y?Y.p(x,D):(Y.d(1),Y=X(x),Y&&(Y.c(),Y.m(O,null)))},d(x){x&&i(e),I&&I.d(),Y.d()}}}function il(s){let e,t,l="What's New:",a,r,o=s[0].latestVersion.releaseNotes+"",v;return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("p"),v=B(o),this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1q9l4yz"&&(t.textContent=l),a=j(f),r=u(f,"P",{class:!0});var _=k(r);v=z(_,o),_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","label svelte-raqknj"),c(r,"class","svelte-raqknj"),c(e,"class","release-notes svelte-raqknj")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r),n(r,v)},p(h,f){f&1&&o!==(o=h[0].latestVersion.releaseNotes+"")&&le(v,o)},d(h){h&&i(e)}}}function Ms(s){let e,t,l,a,r;return{c(){e=d("button"),t=B("‚¨á Download & Install"),this.h()},l(o){e=u(o,"BUTTON",{class:!0});var v=k(e);t=z(v,"‚¨á Download & Install"),v.forEach(i),this.h()},h(){c(e,"class","download-btn svelte-raqknj"),e.disabled=l=s[0].downloading},m(o,v){A(o,e,v),n(e,t),a||(r=de(e,"click",s[3]),a=!0)},p(o,v){v&1&&l!==(l=o[0].downloading)&&(e.disabled=l)},d(o){o&&i(e),a=!1,r()}}}function qs(s){let e,t,l,a,r=s[0].downloadProgress+"",o,v,h,f,_="Download will open installer when complete";return{c(){e=d("div"),t=d("div"),l=g(),a=d("span"),o=B(r),v=B("%"),h=g(),f=d("p"),f.textContent=_,this.h()},l(p){e=u(p,"DIV",{class:!0});var m=k(e);t=u(m,"DIV",{class:!0,style:!0}),k(t).forEach(i),l=j(m),a=u(m,"SPAN",{class:!0});var b=k(a);o=z(b,r),v=z(b,"%"),b.forEach(i),m.forEach(i),h=j(p),f=u(p,"P",{class:!0,"data-svelte-h":!0}),R(f)!=="svelte-3e1qj2"&&(f.textContent=_),this.h()},h(){c(t,"class","progress-bar svelte-raqknj"),Re(t,"width",s[0].downloadProgress+"%"),c(a,"class","progress-text svelte-raqknj"),c(e,"class","download-progress svelte-raqknj"),c(f,"class","download-hint svelte-raqknj")},m(p,m){A(p,e,m),n(e,t),n(e,l),n(e,a),n(a,o),n(a,v),A(p,h,m),A(p,f,m)},p(p,m){m&1&&Re(t,"width",p[0].downloadProgress+"%"),m&1&&r!==(r=p[0].downloadProgress+"")&&le(o,r)},d(p){p&&(i(e),i(h),i(f))}}}function cl(s){let e,t,l="‚ö†",a,r,o=s[0].error+"",v;return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("span"),v=B(o),this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1ob89cd"&&(t.textContent=l),a=j(f),r=u(f,"SPAN",{class:!0});var _=k(r);v=z(_,o),_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","error-icon svelte-raqknj"),c(r,"class","svelte-raqknj"),c(e,"class","error-message svelte-raqknj")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r),n(r,v)},p(h,f){f&1&&o!==(o=h[0].error+"")&&le(v,o)},d(h){h&&i(e)}}}function Ls(s){let e,t,l,a="App Updates",r,o,v,h,f,_;function p(E,P){return E[0].checking?Ss:Es}let m=p(s),b=m(s);function w(E,P){return E[1]?Ps:Ds}let C=w(s),y=C(s);return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=a,r=g(),o=d("button"),b.c(),h=g(),y.c(),this.h()},l(E){e=u(E,"DIV",{class:!0});var P=k(e);t=u(P,"DIV",{class:!0});var N=k(t);l=u(N,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1a7ztc5"&&(l.textContent=a),r=j(N),o=u(N,"BUTTON",{class:!0});var W=k(o);b.l(W),W.forEach(i),N.forEach(i),h=j(P),y.l(P),P.forEach(i),this.h()},h(){c(l,"class","svelte-raqknj"),c(o,"class","check-btn svelte-raqknj"),o.disabled=v=s[0].checking||s[0].downloading,c(t,"class","section-header svelte-raqknj"),c(e,"class","update-manager svelte-raqknj")},m(E,P){A(E,e,P),n(e,t),n(t,l),n(t,r),n(t,o),b.m(o,null),n(e,h),y.m(e,null),f||(_=de(o,"click",s[2]),f=!0)},p(E,[P]){m!==(m=p(E))&&(b.d(1),b=m(E),b&&(b.c(),b.m(o,null))),P&1&&v!==(v=E[0].checking||E[0].downloading)&&(o.disabled=v),C===(C=w(E))&&y?y.p(E,P):(y.d(1),y=C(E),y&&(y.c(),y.m(e,null)))},i:ge,o:ge,d(E){E&&i(e),b.d(),y.d(),f=!1,_()}}}function zs(s,e,t){let l={checking:!1,downloading:!1,downloadProgress:0,currentVersion:"0.0.0",currentVersionCode:0,latestVersion:null,updateAvailable:!1,error:null,lastChecked:null},a=!1;const r=Ce.subscribe(_=>{t(0,l=_)});Pt(async()=>{t(1,a=Dt()),a&&await ys()}),Lt(()=>{r()});async function o(){await bs()}async function v(){try{await gs()}catch{}}function h(){return l.checking?"‚Üª":l.downloading?"‚¨á":l.updateAvailable?"üÜï":"‚úì"}function f(){return l.error?"#ef4444":l.updateAvailable?"#f59e0b":"#22c55e"}return[l,a,o,v,h,f]}class Bs extends yt{constructor(e){super(),Et(this,e,zs,Ls,St,{})}}function fl(s,e,t){const l=s.slice();return l[30]=e[t],l}function ul(s){let e,t;return{c(){e=d("div"),t=B(s[4]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=k(e);t=z(a,s[4]),a.forEach(i),this.h()},h(){c(e,"class","message error svelte-11cwtjh")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a[0]&16&&le(t,l[4])},d(l){l&&i(e)}}}function dl(s){let e,t;return{c(){e=d("div"),t=B(s[5]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=k(e);t=z(a,s[5]),a.forEach(i),this.h()},h(){c(e,"class","message success svelte-11cwtjh")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a[0]&32&&le(t,l[5])},d(l){l&&i(e)}}}function Os(s){let e,t,l="Current Profile",a,r,o,v,h,f="Actions",_,p,m,b,w,C,y,E,P,N,W="‚¨ÜÔ∏è",q,H,M,T,S=`<span class="icon svelte-11cwtjh">‚ûï</span>
          Create New Profile`,V,O,I,L="üì§",X,Y,x,D,J,$="üì•",Z,ee,ve,oe,_e,te,me,he;function pe(U,Q){return U[1]?Rs:Fs}let G=pe(s),K=G(s),ie=s[2]&&hl(s);function Ee(U,Q){return U[6]?Ws:Gs}let Ae=Ee(s),we=Ae(s);function Se(U,Q){return U[8]?Ys:Ks}let ue=Se(s),re=ue(s),be=!s[14]&&pl(),ne=s[7]&&_l(s),se=s[0].length>1&&bl(s);return{c(){e=d("div"),t=d("h3"),t.textContent=l,a=g(),K.c(),r=g(),ie&&ie.c(),o=g(),v=d("div"),h=d("h3"),h.textContent=f,_=g(),p=d("div"),m=d("button"),we.c(),w=g(),C=d("button"),re.c(),E=g(),P=d("button"),N=d("span"),N.textContent=W,q=B(`
          Upload Local Changes`),M=g(),T=d("button"),T.innerHTML=S,V=g(),O=d("button"),I=d("span"),I.textContent=L,X=B(`
          Export Profile`),x=g(),D=d("label"),J=d("span"),J.textContent=$,Z=B(`
          Import Profile
          `),ee=d("input"),ve=g(),be&&be.c(),oe=g(),ne&&ne.c(),_e=g(),se&&se.c(),te=Oe(),this.h()},l(U){e=u(U,"DIV",{class:!0});var Q=k(e);t=u(Q,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-27f3w6"&&(t.textContent=l),a=j(Q),K.l(Q),Q.forEach(i),r=j(U),ie&&ie.l(U),o=j(U),v=u(U,"DIV",{class:!0});var ae=k(v);h=u(ae,"H3",{class:!0,"data-svelte-h":!0}),R(h)!=="svelte-1e9nfuf"&&(h.textContent=f),_=j(ae),p=u(ae,"DIV",{class:!0});var je=k(p);m=u(je,"BUTTON",{class:!0});var ye=k(m);we.l(ye),ye.forEach(i),w=j(je),C=u(je,"BUTTON",{class:!0});var Me=k(C);re.l(Me),Me.forEach(i),E=j(je),P=u(je,"BUTTON",{class:!0});var Te=k(P);N=u(Te,"SPAN",{class:!0,"data-svelte-h":!0}),R(N)!=="svelte-siljcr"&&(N.textContent=W),q=z(Te,`
          Upload Local Changes`),Te.forEach(i),M=j(je),T=u(je,"BUTTON",{class:!0,"data-svelte-h":!0}),R(T)!=="svelte-h5o7ck"&&(T.innerHTML=S),V=j(je),O=u(je,"BUTTON",{class:!0});var ke=k(O);I=u(ke,"SPAN",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-12yujtx"&&(I.textContent=L),X=z(ke,`
          Export Profile`),ke.forEach(i),x=j(je),D=u(je,"LABEL",{class:!0});var Pe=k(D);J=u(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),R(J)!=="svelte-1q2s3h4"&&(J.textContent=$),Z=z(Pe,`
          Import Profile
          `),ee=u(Pe,"INPUT",{type:!0,accept:!0,style:!0}),Pe.forEach(i),je.forEach(i),ve=j(ae),be&&be.l(ae),ae.forEach(i),oe=j(U),ne&&ne.l(U),_e=j(U),se&&se.l(U),te=Oe(),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh"),c(h,"class","svelte-11cwtjh"),c(m,"class","action-btn primary svelte-11cwtjh"),m.disabled=b=s[6]||!s[14],c(C,"class","action-btn svelte-11cwtjh"),C.disabled=y=s[8]||!s[14]||!s[1],c(N,"class","icon svelte-11cwtjh"),c(P,"class","action-btn svelte-11cwtjh"),P.disabled=H=s[8]||!s[14]||!s[2]||s[2].pendingUpload===0,c(T,"class","action-btn secondary svelte-11cwtjh"),c(I,"class","icon svelte-11cwtjh"),c(O,"class","action-btn svelte-11cwtjh"),O.disabled=Y=s[12]||!s[1],c(J,"class","icon svelte-11cwtjh"),c(ee,"type","file"),c(ee,"accept",".json"),ee.disabled=s[13],Re(ee,"display","none"),c(D,"class","action-btn svelte-11cwtjh"),c(p,"class","actions svelte-11cwtjh"),c(v,"class","section svelte-11cwtjh")},m(U,Q){A(U,e,Q),n(e,t),n(e,a),K.m(e,null),A(U,r,Q),ie&&ie.m(U,Q),A(U,o,Q),A(U,v,Q),n(v,h),n(v,_),n(v,p),n(p,m),we.m(m,null),n(p,w),n(p,C),re.m(C,null),n(p,E),n(p,P),n(P,N),n(P,q),n(p,M),n(p,T),n(p,V),n(p,O),n(O,I),n(O,X),n(p,x),n(p,D),n(D,J),n(D,Z),n(D,ee),n(v,ve),be&&be.m(v,null),A(U,oe,Q),ne&&ne.m(U,Q),A(U,_e,Q),se&&se.m(U,Q),A(U,te,Q),me||(he=[de(m,"click",s[15]),de(C,"click",s[16]),de(P,"click",s[17]),de(T,"click",s[24]),de(O,"click",s[19]),de(ee,"change",s[20])],me=!0)},p(U,Q){G===(G=pe(U))&&K?K.p(U,Q):(K.d(1),K=G(U),K&&(K.c(),K.m(e,null))),U[2]?ie?ie.p(U,Q):(ie=hl(U),ie.c(),ie.m(o.parentNode,o)):ie&&(ie.d(1),ie=null),Ae===(Ae=Ee(U))&&we?we.p(U,Q):(we.d(1),we=Ae(U),we&&(we.c(),we.m(m,null))),Q[0]&16448&&b!==(b=U[6]||!U[14])&&(m.disabled=b),ue!==(ue=Se(U))&&(re.d(1),re=ue(U),re&&(re.c(),re.m(C,null))),Q[0]&16642&&y!==(y=U[8]||!U[14]||!U[1])&&(C.disabled=y),Q[0]&16644&&H!==(H=U[8]||!U[14]||!U[2]||U[2].pendingUpload===0)&&(P.disabled=H),Q[0]&4098&&Y!==(Y=U[12]||!U[1])&&(O.disabled=Y),Q[0]&8192&&(ee.disabled=U[13]),U[14]?be&&(be.d(1),be=null):be||(be=pl(),be.c(),be.m(v,null)),U[7]?ne?ne.p(U,Q):(ne=_l(U),ne.c(),ne.m(_e.parentNode,_e)):ne&&(ne.d(1),ne=null),U[0].length>1?se?se.p(U,Q):(se=bl(U),se.c(),se.m(te.parentNode,te)):se&&(se.d(1),se=null)},d(U){U&&(i(e),i(r),i(o),i(v),i(oe),i(_e),i(te)),K.d(),ie&&ie.d(U),we.d(),re.d(),be&&be.d(),ne&&ne.d(U),se&&se.d(U),me=!1,dt(he)}}}function Hs(s){let e,t="Loading profiles...";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1lk3pqz"&&(e.textContent=t),this.h()},h(){c(e,"class","loading svelte-11cwtjh")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function Fs(s){let e,t="<p>No profile loaded. Download from server or create a new one.</p>";return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-y7bsc5"&&(e.innerHTML=t),this.h()},h(){c(e,"class","no-profile svelte-11cwtjh")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function Rs(s){let e,t,l,a=s[1].name+"",r,o,v,h=s[1].source+"",f,_,p,m,b=s[1].memoryCount+"",w,C,y,E,P,N=gt(s[1].updatedAt)+"",W,q,H=s[1].serverUrl&&vl(s);return{c(){e=d("div"),t=d("div"),l=d("span"),r=B(a),o=g(),v=d("span"),f=B(h),_=g(),p=d("div"),m=d("span"),w=B(b),C=B(" memories"),y=g(),E=d("span"),P=B("Updated: "),W=B(N),q=g(),H&&H.c(),this.h()},l(M){e=u(M,"DIV",{class:!0});var T=k(e);t=u(T,"DIV",{class:!0});var S=k(t);l=u(S,"SPAN",{class:!0});var V=k(l);r=z(V,a),V.forEach(i),o=j(S),v=u(S,"SPAN",{class:!0});var O=k(v);f=z(O,h),O.forEach(i),S.forEach(i),_=j(T),p=u(T,"DIV",{class:!0});var I=k(p);m=u(I,"SPAN",{});var L=k(m);w=z(L,b),C=z(L," memories"),L.forEach(i),y=j(I),E=u(I,"SPAN",{});var X=k(E);P=z(X,"Updated: "),W=z(X,N),X.forEach(i),I.forEach(i),q=j(T),H&&H.l(T),T.forEach(i),this.h()},h(){c(l,"class","profile-name svelte-11cwtjh"),c(v,"class","profile-source svelte-11cwtjh"),c(t,"class","profile-info svelte-11cwtjh"),c(p,"class","profile-meta svelte-11cwtjh"),c(e,"class","profile-card active svelte-11cwtjh")},m(M,T){A(M,e,T),n(e,t),n(t,l),n(l,r),n(t,o),n(t,v),n(v,f),n(e,_),n(e,p),n(p,m),n(m,w),n(m,C),n(p,y),n(p,E),n(E,P),n(E,W),n(e,q),H&&H.m(e,null)},p(M,T){T[0]&2&&a!==(a=M[1].name+"")&&le(r,a),T[0]&2&&h!==(h=M[1].source+"")&&le(f,h),T[0]&2&&b!==(b=M[1].memoryCount+"")&&le(w,b),T[0]&2&&N!==(N=gt(M[1].updatedAt)+"")&&le(W,N),M[1].serverUrl?H?H.p(M,T):(H=vl(M),H.c(),H.m(e,null)):H&&(H.d(1),H=null)},d(M){M&&i(e),H&&H.d()}}}function vl(s){let e,t,l=s[1].serverUrl+"",a;return{c(){e=d("div"),t=B("Server: "),a=B(l),this.h()},l(r){e=u(r,"DIV",{class:!0});var o=k(e);t=z(o,"Server: "),a=z(o,l),o.forEach(i),this.h()},h(){c(e,"class","profile-server svelte-11cwtjh")},m(r,o){A(r,e,o),n(e,t),n(e,a)},p(r,o){o[0]&2&&l!==(l=r[1].serverUrl+"")&&le(a,l)},d(r){r&&i(e)}}}function hl(s){let e,t,l="Sync Status",a,r,o,v,h="Last Sync:",f,_,p=gt(s[2].lastSync||"")+"",m,b,w,C,y="Pending Upload:",E,P,N=s[2].pendingUpload+"",W;return{c(){e=d("div"),t=d("h3"),t.textContent=l,a=g(),r=d("div"),o=d("div"),v=d("span"),v.textContent=h,f=g(),_=d("span"),m=B(p),b=g(),w=d("div"),C=d("span"),C.textContent=y,E=g(),P=d("span"),W=B(N),this.h()},l(q){e=u(q,"DIV",{class:!0});var H=k(e);t=u(H,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-41jirb"&&(t.textContent=l),a=j(H),r=u(H,"DIV",{class:!0});var M=k(r);o=u(M,"DIV",{class:!0});var T=k(o);v=u(T,"SPAN",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-10azr6g"&&(v.textContent=h),f=j(T),_=u(T,"SPAN",{class:!0});var S=k(_);m=z(S,p),S.forEach(i),T.forEach(i),b=j(M),w=u(M,"DIV",{class:!0});var V=k(w);C=u(V,"SPAN",{class:!0,"data-svelte-h":!0}),R(C)!=="svelte-1fp0ioz"&&(C.textContent=y),E=j(V),P=u(V,"SPAN",{class:!0});var O=k(P);W=z(O,N),O.forEach(i),V.forEach(i),M.forEach(i),H.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(v,"class","sync-label svelte-11cwtjh"),c(_,"class","sync-value svelte-11cwtjh"),c(o,"class","sync-item svelte-11cwtjh"),c(C,"class","sync-label svelte-11cwtjh"),c(P,"class","sync-value svelte-11cwtjh"),fe(P,"has-pending",s[2].pendingUpload>0),c(w,"class","sync-item svelte-11cwtjh"),c(r,"class","sync-status svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(q,H){A(q,e,H),n(e,t),n(e,a),n(e,r),n(r,o),n(o,v),n(o,f),n(o,_),n(_,m),n(r,b),n(r,w),n(w,C),n(w,E),n(w,P),n(P,W)},p(q,H){H[0]&4&&p!==(p=gt(q[2].lastSync||"")+"")&&le(m,p),H[0]&4&&N!==(N=q[2].pendingUpload+"")&&le(W,N),H[0]&4&&fe(P,"has-pending",q[2].pendingUpload>0)},d(q){q&&i(e)}}}function Gs(s){let e,t="‚¨áÔ∏è",l;return{c(){e=d("span"),e.textContent=t,l=B(`
            Download from Server`),this.h()},l(a){e=u(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1eltenc"&&(e.textContent=t),l=z(a,`
            Download from Server`),this.h()},h(){c(e,"class","icon svelte-11cwtjh")},m(a,r){A(a,e,r),A(a,l,r)},p:ge,d(a){a&&(i(e),i(l))}}}function Ws(s){let e,t,l;function a(v,h){return v[7]?Qs:Js}let r=a(s),o=r(s);return{c(){e=d("span"),t=g(),o.c(),l=Oe(),this.h()},l(v){e=u(v,"SPAN",{class:!0}),k(e).forEach(i),t=j(v),o.l(v),l=Oe(),this.h()},h(){c(e,"class","spinner svelte-11cwtjh")},m(v,h){A(v,e,h),A(v,t,h),o.m(v,h),A(v,l,h)},p(v,h){r===(r=a(v))&&o?o.p(v,h):(o.d(1),o=r(v),o&&(o.c(),o.m(l.parentNode,l)))},d(v){v&&(i(e),i(t),i(l)),o.d(v)}}}function Js(s){let e;return{c(){e=B("Downloading...")},l(t){e=z(t,"Downloading...")},m(t,l){A(t,e,l)},p:ge,d(t){t&&i(e)}}}function Qs(s){let e=s[7].message+"",t;return{c(){t=B(e)},l(l){t=z(l,e)},m(l,a){A(l,t,a)},p(l,a){a[0]&128&&e!==(e=l[7].message+"")&&le(t,e)},d(l){l&&i(t)}}}function Ks(s){let e,t="üîÑ",l;return{c(){e=d("span"),e.textContent=t,l=B(`
            Sync Changes`),this.h()},l(a){e=u(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1tzy5s5"&&(e.textContent=t),l=z(a,`
            Sync Changes`),this.h()},h(){c(e,"class","icon svelte-11cwtjh")},m(a,r){A(a,e,r),A(a,l,r)},d(a){a&&(i(e),i(l))}}}function Ys(s){let e,t;return{c(){e=d("span"),t=B(`
            Syncing...`),this.h()},l(l){e=u(l,"SPAN",{class:!0}),k(e).forEach(i),t=z(l,`
            Syncing...`),this.h()},h(){c(e,"class","spinner svelte-11cwtjh")},m(l,a){A(l,e,a),A(l,t,a)},d(l){l&&(i(e),i(t))}}}function pl(s){let e,t="‚ö†Ô∏è Server not connected. Some actions require server connection.";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ye9kvr"&&(e.textContent=t),this.h()},h(){c(e,"class","hint warning svelte-11cwtjh")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function _l(s){let e,t,l="Download Progress",a,r,o,v,h,f,_=s[7].message+"",p,m,b=s[7].current+"",w,C,y=s[7].total+"",E,P;return{c(){e=d("div"),t=d("h3"),t.textContent=l,a=g(),r=d("div"),o=d("div"),v=d("div"),h=g(),f=d("div"),p=B(_),m=B(`
            (`),w=B(b),C=B(" / "),E=B(y),P=B(")"),this.h()},l(N){e=u(N,"DIV",{class:!0});var W=k(e);t=u(W,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-3ajo9z"&&(t.textContent=l),a=j(W),r=u(W,"DIV",{class:!0});var q=k(r);o=u(q,"DIV",{class:!0});var H=k(o);v=u(H,"DIV",{class:!0,style:!0}),k(v).forEach(i),H.forEach(i),h=j(q),f=u(q,"DIV",{class:!0});var M=k(f);p=z(M,_),m=z(M,`
            (`),w=z(M,b),C=z(M," / "),E=z(M,y),P=z(M,")"),M.forEach(i),q.forEach(i),W.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(v,"class","progress-fill svelte-11cwtjh"),Re(v,"width",s[7].current/s[7].total*100+"%"),c(o,"class","progress-bar svelte-11cwtjh"),c(f,"class","progress-text svelte-11cwtjh"),c(r,"class","progress-container svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(N,W){A(N,e,W),n(e,t),n(e,a),n(e,r),n(r,o),n(o,v),n(r,h),n(r,f),n(f,p),n(f,m),n(f,w),n(f,C),n(f,E),n(f,P)},p(N,W){W[0]&128&&Re(v,"width",N[7].current/N[7].total*100+"%"),W[0]&128&&_!==(_=N[7].message+"")&&le(p,_),W[0]&128&&b!==(b=N[7].current+"")&&le(w,b),W[0]&128&&y!==(y=N[7].total+"")&&le(E,y)},d(N){N&&i(e)}}}function bl(s){let e,t,l="All Profiles",a,r,o=ft(s[0]),v=[];for(let h=0;h<o.length;h+=1)v[h]=kl(fl(s,o,h));return{c(){e=d("div"),t=d("h3"),t.textContent=l,a=g(),r=d("div");for(let h=0;h<v.length;h+=1)v[h].c();this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-x5aom3"&&(t.textContent=l),a=j(f),r=u(f,"DIV",{class:!0});var _=k(r);for(let p=0;p<v.length;p+=1)v[p].l(_);_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(r,"class","profiles-list svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(r,null)},p(h,f){if(f[0]&2097155){o=ft(h[0]);let _;for(_=0;_<o.length;_+=1){const p=fl(h,o,_);v[_]?v[_].p(p,f):(v[_]=kl(p),v[_].c(),v[_].m(r,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=o.length}},d(h){h&&i(e),zt(v,h)}}}function ml(s){let e,t="Delete",l,a;function r(){return s[25](s[30])}return{c(){e=d("button"),e.textContent=t,this.h()},l(o){e=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-p1eeu2"&&(e.textContent=t),this.h()},h(){c(e,"class","small-btn danger svelte-11cwtjh")},m(o,v){A(o,e,v),l||(a=de(e,"click",r),l=!0)},p(o,v){s=o},d(o){o&&i(e),l=!1,a()}}}function kl(s){let e,t,l,a=s[30].name+"",r,o,v,h=s[30].source+"",f,_,p,m,b=s[30].id!==s[1]?.id&&ml(s);return{c(){e=d("div"),t=d("div"),l=d("span"),r=B(a),o=g(),v=d("span"),f=B(h),_=g(),p=d("div"),b&&b.c(),m=g(),this.h()},l(w){e=u(w,"DIV",{class:!0});var C=k(e);t=u(C,"DIV",{class:!0});var y=k(t);l=u(y,"SPAN",{class:!0});var E=k(l);r=z(E,a),E.forEach(i),o=j(y),v=u(y,"SPAN",{class:!0});var P=k(v);f=z(P,h),P.forEach(i),y.forEach(i),_=j(C),p=u(C,"DIV",{class:!0});var N=k(p);b&&b.l(N),N.forEach(i),m=j(C),C.forEach(i),this.h()},h(){c(l,"class","profile-name svelte-11cwtjh"),c(v,"class","profile-source svelte-11cwtjh"),c(t,"class","profile-info svelte-11cwtjh"),c(p,"class","profile-actions svelte-11cwtjh"),c(e,"class","profile-card svelte-11cwtjh"),fe(e,"active",s[30].id===s[1]?.id)},m(w,C){A(w,e,C),n(e,t),n(t,l),n(l,r),n(t,o),n(t,v),n(v,f),n(e,_),n(e,p),b&&b.m(p,null),n(e,m)},p(w,C){C[0]&1&&a!==(a=w[30].name+"")&&le(r,a),C[0]&1&&h!==(h=w[30].source+"")&&le(f,h),w[30].id!==w[1]?.id?b?b.p(w,C):(b=ml(w),b.c(),b.m(p,null)):b&&(b.d(1),b=null),C[0]&3&&fe(e,"active",w[30].id===w[1]?.id)},d(w){w&&i(e),b&&b.d()}}}function Cl(s){let e,t,l,a="Create New Profile",r,o,v="Create a local profile that works completely offline.",h,f,_,p="Profile Name",m,b,w,C,y,E,P,N,W=s[11]?"Creating...":"Create Profile",q,H,M,T;return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=a,r=g(),o=d("p"),o.textContent=v,h=g(),f=d("div"),_=d("label"),_.textContent=p,m=g(),b=d("input"),w=g(),C=d("div"),y=d("button"),E=B("Cancel"),P=g(),N=d("button"),q=B(W),this.h()},l(S){e=u(S,"DIV",{class:!0});var V=k(e);t=u(V,"DIV",{class:!0});var O=k(t);l=u(O,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1ajl4yz"&&(l.textContent=a),r=j(O),o=u(O,"P",{"data-svelte-h":!0}),R(o)!=="svelte-uj2z8j"&&(o.textContent=v),h=j(O),f=u(O,"DIV",{class:!0});var I=k(f);_=u(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(_)!=="svelte-t5d041"&&(_.textContent=p),m=j(I),b=u(I,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),I.forEach(i),w=j(O),C=u(O,"DIV",{class:!0});var L=k(C);y=u(L,"BUTTON",{class:!0});var X=k(y);E=z(X,"Cancel"),X.forEach(i),P=j(L),N=u(L,"BUTTON",{class:!0});var Y=k(N);q=z(Y,W),Y.forEach(i),L.forEach(i),O.forEach(i),V.forEach(i),this.h()},h(){c(l,"class","svelte-11cwtjh"),c(_,"for","profile-name"),c(_,"class","svelte-11cwtjh"),c(b,"id","profile-name"),c(b,"type","text"),c(b,"placeholder","Enter name..."),b.disabled=s[11],c(b,"class","svelte-11cwtjh"),c(f,"class","form-group svelte-11cwtjh"),c(y,"class","action-btn secondary svelte-11cwtjh"),y.disabled=s[11],c(N,"class","action-btn primary svelte-11cwtjh"),N.disabled=H=s[11]||!s[10].trim(),c(C,"class","modal-actions svelte-11cwtjh"),c(t,"class","modal svelte-11cwtjh"),c(e,"class","modal-overlay svelte-11cwtjh")},m(S,V){A(S,e,V),n(e,t),n(t,l),n(t,r),n(t,o),n(t,h),n(t,f),n(f,_),n(f,m),n(f,b),wt(b,s[10]),n(t,w),n(t,C),n(C,y),n(y,E),n(C,P),n(C,N),n(N,q),M||(T=[de(b,"input",s[26]),de(y,"click",s[27]),de(N,"click",s[18]),de(t,"click",Ll(s[23])),de(e,"click",s[28])],M=!0)},p(S,V){V[0]&2048&&(b.disabled=S[11]),V[0]&1024&&b.value!==S[10]&&wt(b,S[10]),V[0]&2048&&(y.disabled=S[11]),V[0]&2048&&W!==(W=S[11]?"Creating...":"Create Profile")&&le(q,W),V[0]&3072&&H!==(H=S[11]||!S[10].trim())&&(N.disabled=H)},d(S){S&&i(e),M=!1,dt(T)}}}function Xs(s){let e,t,l="Profile Management",a,r,o="Manage your profile data locally. Download from server, create new profiles, or sync changes.",v,h,f,_,p=s[4]&&ul(s),m=s[5]&&dl(s);function b(E,P){return E[3]?Hs:Os}let w=b(s),C=w(s),y=s[9]&&Cl(s);return{c(){e=d("div"),t=d("h2"),t.textContent=l,a=g(),r=d("p"),r.textContent=o,v=g(),p&&p.c(),h=g(),m&&m.c(),f=g(),C.c(),_=g(),y&&y.c(),this.h()},l(E){e=u(E,"DIV",{class:!0});var P=k(e);t=u(P,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-o8bucm"&&(t.textContent=l),a=j(P),r=u(P,"P",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-p9oxl4"&&(r.textContent=o),v=j(P),p&&p.l(P),h=j(P),m&&m.l(P),f=j(P),C.l(P),_=j(P),y&&y.l(P),P.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(r,"class","description svelte-11cwtjh"),c(e,"class","profile-manager svelte-11cwtjh")},m(E,P){A(E,e,P),n(e,t),n(e,a),n(e,r),n(e,v),p&&p.m(e,null),n(e,h),m&&m.m(e,null),n(e,f),C.m(e,null),n(e,_),y&&y.m(e,null)},p(E,P){E[4]?p?p.p(E,P):(p=ul(E),p.c(),p.m(e,h)):p&&(p.d(1),p=null),E[5]?m?m.p(E,P):(m=dl(E),m.c(),m.m(e,f)):m&&(m.d(1),m=null),w===(w=b(E))&&C?C.p(E,P):(C.d(1),C=w(E),C&&(C.c(),C.m(e,_))),E[9]?y?y.p(E,P):(y=Cl(E),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:ge,o:ge,d(E){E&&i(e),p&&p.d(),m&&m.d(),C.d(),y&&y.d()}}}function gt(s){return s?new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}function Zs(s,e,t){let l,a;ql(s,Tl,D=>t(22,a=D));let r=[],o=null,v=null,h=!0,f="",_="",p=!1,m=null,b=!1,w=!1,C="",y=!1,E=!1,P=!1;Pt(async()=>{await N()});async function N(){t(3,h=!0),t(4,f="");try{t(0,r=await Yl()),t(1,o=await Xl()),t(2,v=await Zl())}catch(D){t(4,f=D instanceof Error?D.message:"Failed to load profiles")}finally{t(3,h=!1)}}async function W(){if(!l){t(4,f="Server not connected");return}t(6,p=!0),t(4,f=""),t(5,_="");try{const D=await $l(J=>{t(7,m=J)});t(5,_=`Profile "${D.name}" downloaded successfully!`),await N()}catch(D){t(4,f=D instanceof Error?D.message:"Download failed")}finally{t(6,p=!1),t(7,m=null)}}async function q(){if(!l){t(4,f="Server not connected");return}t(8,b=!0),t(4,f=""),t(5,_="");try{const D=await xl();D.errors.length>0?t(4,f=D.errors.join(", ")):t(5,_=`Synced: ${D.uploaded} uploaded, ${D.downloaded} downloaded`),await N()}catch(D){t(4,f=D instanceof Error?D.message:"Sync failed")}finally{t(8,b=!1)}}async function H(){if(!l){t(4,f="Server not connected");return}t(8,b=!0),t(4,f=""),t(5,_="");try{const D=await es();D.errors.length>0?t(4,f=D.errors.join(", ")):t(5,_=`Uploaded ${D.uploaded} changes`),await N()}catch(D){t(4,f=D instanceof Error?D.message:"Upload failed")}finally{t(8,b=!1)}}async function M(){if(!C.trim()){t(4,f="Profile name is required");return}t(11,y=!0),t(4,f=""),t(5,_="");try{const D=await ts(C.trim());t(5,_=`Profile "${D.name}" created!`),t(9,w=!1),t(10,C=""),await N()}catch(D){t(4,f=D instanceof Error?D.message:"Failed to create profile")}finally{t(11,y=!1)}}async function T(){if(!o){t(4,f="No active profile to export");return}t(12,E=!0),t(4,f="");try{const D=await ls(),J=JSON.stringify(D,null,2),$=new Blob([J],{type:"application/json"}),Z=URL.createObjectURL($),ee=document.createElement("a");ee.href=Z,ee.download=`${o.name}-profile-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Z),t(5,_="Profile exported!")}catch(D){t(4,f=D instanceof Error?D.message:"Export failed")}finally{t(12,E=!1)}}async function S(D){const J=D.target,$=J.files?.[0];if($){t(13,P=!0),t(4,f=""),t(5,_="");try{const Z=await $.text(),ee=JSON.parse(Z),ve=await ss(ee);t(5,_=`Profile "${ve.name}" imported!`),await N()}catch(Z){t(4,f=Z instanceof Error?Z.message:"Import failed")}finally{t(13,P=!1),J.value=""}}}async function V(D){if(confirm(`Delete profile "${D.name}"? This cannot be undone.`))try{await ns(D.id),t(5,_=`Profile "${D.name}" deleted`),await N()}catch(J){t(4,f=J instanceof Error?J.message:"Delete failed")}}function O(D){zl.call(this,s,D)}const I=()=>t(9,w=!0),L=D=>V(D);function X(){C=this.value,t(10,C)}const Y=()=>t(9,w=!1),x=()=>t(9,w=!1);return s.$$.update=()=>{s.$$.dirty[0]&4194304&&t(14,l=a.connected)},[r,o,v,h,f,_,p,m,b,w,C,y,E,P,l,W,q,H,M,T,S,V,a,O,I,L,X,Y,x]}class $s extends yt{constructor(e){super(),Et(this,e,Zs,Xs,St,{},null,[-1,-1])}}function xs(s){let e,t,l="Connection Status",a,r,o,v,h,f,_=s[6]?.connected?"‚úÖ Connected":"‚ùå Disconnected",p,m,b,w,C,y,E="Server:",P,N,W=(s[6]?.url||"Not configured")+"",q,H,M,T,S=s[4]?"Testing...":"üîÑ Test Connection",V,O,I,L,X,Y,x,D,J,$,Z=s[4]&&wl();function ee(G,K){if(G[6]?.connected)return ln;if(G[6]?.error)return tn}let ve=ee(s),oe=ve&&ve(s);const _e=[nn,sn],te=[];function me(G,K){return G[2]?0:1}I=me(s),L=te[I]=_e[I](s);let he=s[7]&&Pl(s),pe=s[8]&&Dl(s);return{c(){e=d("div"),t=d("h2"),t.textContent=l,a=g(),r=d("div"),o=d("div"),v=d("span"),h=g(),f=d("strong"),p=B(_),m=g(),Z&&Z.c(),b=g(),w=d("div"),C=d("div"),y=d("span"),y.textContent=E,P=g(),N=d("span"),q=B(W),H=g(),oe&&oe.c(),M=g(),T=d("button"),V=B(S),O=g(),L.c(),X=g(),he&&he.c(),Y=g(),pe&&pe.c(),x=Oe(),this.h()},l(G){e=u(G,"DIV",{class:!0});var K=k(e);t=u(K,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-fz8c20"&&(t.textContent=l),a=j(K),r=u(K,"DIV",{class:!0});var ie=k(r);o=u(ie,"DIV",{class:!0});var Ee=k(o);v=u(Ee,"SPAN",{class:!0}),k(v).forEach(i),h=j(Ee),f=u(Ee,"STRONG",{});var Ae=k(f);p=z(Ae,_),Ae.forEach(i),m=j(Ee),Z&&Z.l(Ee),Ee.forEach(i),b=j(ie),w=u(ie,"DIV",{class:!0});var we=k(w);C=u(we,"DIV",{class:!0});var Se=k(C);y=u(Se,"SPAN",{class:!0,"data-svelte-h":!0}),R(y)!=="svelte-1hsanka"&&(y.textContent=E),P=j(Se),N=u(Se,"SPAN",{class:!0});var ue=k(N);q=z(ue,W),ue.forEach(i),Se.forEach(i),H=j(we),oe&&oe.l(we),we.forEach(i),M=j(ie),T=u(ie,"BUTTON",{class:!0});var re=k(T);V=z(re,S),re.forEach(i),ie.forEach(i),K.forEach(i),O=j(G),L.l(G),X=j(G),he&&he.l(G),Y=j(G),pe&&pe.l(G),x=Oe(),this.h()},h(){c(t,"class","svelte-360cfj"),c(v,"class","status-dot svelte-360cfj"),fe(v,"dot-connected",s[6]?.connected),fe(v,"dot-disconnected",!s[6]?.connected),c(o,"class","status-indicator svelte-360cfj"),c(y,"class","label svelte-360cfj"),c(N,"class","value svelte-360cfj"),c(C,"class","info-row svelte-360cfj"),c(w,"class","server-info svelte-360cfj"),c(T,"class","btn btn-secondary svelte-360cfj"),T.disabled=s[4],c(r,"class","status-box svelte-360cfj"),fe(r,"status-connected",s[6]?.connected),fe(r,"status-disconnected",!s[6]?.connected),c(e,"class","section svelte-360cfj")},m(G,K){A(G,e,K),n(e,t),n(e,a),n(e,r),n(r,o),n(o,v),n(o,h),n(o,f),n(f,p),n(o,m),Z&&Z.m(o,null),n(r,b),n(r,w),n(w,C),n(C,y),n(C,P),n(C,N),n(N,q),n(w,H),oe&&oe.m(w,null),n(r,M),n(r,T),n(T,V),A(G,O,K),te[I].m(G,K),A(G,X,K),he&&he.m(G,K),A(G,Y,K),pe&&pe.m(G,K),A(G,x,K),D=!0,J||($=de(T,"click",s[11]),J=!0)},p(G,K){(!D||K&64)&&fe(v,"dot-connected",G[6]?.connected),(!D||K&64)&&fe(v,"dot-disconnected",!G[6]?.connected),(!D||K&64)&&_!==(_=G[6]?.connected?"‚úÖ Connected":"‚ùå Disconnected")&&le(p,_),G[4]?Z||(Z=wl(),Z.c(),Z.m(o,null)):Z&&(Z.d(1),Z=null),(!D||K&64)&&W!==(W=(G[6]?.url||"Not configured")+"")&&le(q,W),ve===(ve=ee(G))&&oe?oe.p(G,K):(oe&&oe.d(1),oe=ve&&ve(G),oe&&(oe.c(),oe.m(w,null))),(!D||K&16)&&S!==(S=G[4]?"Testing...":"üîÑ Test Connection")&&le(V,S),(!D||K&16)&&(T.disabled=G[4]),(!D||K&64)&&fe(r,"status-connected",G[6]?.connected),(!D||K&64)&&fe(r,"status-disconnected",!G[6]?.connected);let ie=I;I=me(G),I===ie?te[I].p(G,K):(Vl(),He(te[ie],1,1,()=>{te[ie]=null}),Al(),L=te[I],L?L.p(G,K):(L=te[I]=_e[I](G),L.c()),Fe(L,1),L.m(X.parentNode,X)),G[7]?he?he.p(G,K):(he=Pl(G),he.c(),he.m(Y.parentNode,Y)):he&&(he.d(1),he=null),G[8]?pe?pe.p(G,K):(pe=Dl(G),pe.c(),pe.m(x.parentNode,x)):pe&&(pe.d(1),pe=null)},i(G){D||(Fe(L),D=!0)},o(G){He(L),D=!1},d(G){G&&(i(e),i(O),i(X),i(Y),i(x)),Z&&Z.d(),oe&&oe.d(),te[I].d(G),he&&he.d(G),pe&&pe.d(G),J=!1,$()}}}function en(s){let e,t="Loading server configuration...";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-iymla6"&&(e.textContent=t),this.h()},h(){c(e,"class","loading svelte-360cfj")},m(l,a){A(l,e,a)},p:ge,i:ge,o:ge,d(l){l&&i(e)}}}function wl(s){let e,t="Testing...";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-11o41vp"&&(e.textContent=t),this.h()},h(){c(e,"class","testing-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function tn(s){let e,t,l="Error:",a,r,o=s[6].error+"",v;return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("span"),v=B(o),this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-zrrsg3"&&(t.textContent=l),a=j(f),r=u(f,"SPAN",{class:!0});var _=k(r);v=z(_,o),_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","label svelte-360cfj"),c(r,"class","value svelte-360cfj"),c(e,"class","info-row error svelte-360cfj")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r),n(r,v)},p(h,f){f&64&&o!==(o=h[6].error+"")&&le(v,o)},d(h){h&&i(e)}}}function ln(s){let e,t,l="Latency:",a,r,o=s[6].latencyMs+"",v,h,f,_,p=s[6].version&&jl(s);return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("span"),v=B(o),h=B("ms"),f=g(),p&&p.c(),_=Oe(),this.h()},l(m){e=u(m,"DIV",{class:!0});var b=k(e);t=u(b,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-falt9j"&&(t.textContent=l),a=j(b),r=u(b,"SPAN",{class:!0});var w=k(r);v=z(w,o),h=z(w,"ms"),w.forEach(i),b.forEach(i),f=j(m),p&&p.l(m),_=Oe(),this.h()},h(){c(t,"class","label svelte-360cfj"),c(r,"class","value latency svelte-360cfj"),fe(r,"latency-good",s[6].latencyMs<200),fe(r,"latency-warn",s[6].latencyMs>=200&&s[6].latencyMs<500),fe(r,"latency-bad",s[6].latencyMs>=500),c(e,"class","info-row svelte-360cfj")},m(m,b){A(m,e,b),n(e,t),n(e,a),n(e,r),n(r,v),n(r,h),A(m,f,b),p&&p.m(m,b),A(m,_,b)},p(m,b){b&64&&o!==(o=m[6].latencyMs+"")&&le(v,o),b&64&&fe(r,"latency-good",m[6].latencyMs<200),b&64&&fe(r,"latency-warn",m[6].latencyMs>=200&&m[6].latencyMs<500),b&64&&fe(r,"latency-bad",m[6].latencyMs>=500),m[6].version?p?p.p(m,b):(p=jl(m),p.c(),p.m(_.parentNode,_)):p&&(p.d(1),p=null)},d(m){m&&(i(e),i(f),i(_)),p&&p.d(m)}}}function jl(s){let e,t,l="Version:",a,r,o=s[6].version+"",v;return{c(){e=d("div"),t=d("span"),t.textContent=l,a=g(),r=d("span"),v=B(o),this.h()},l(h){e=u(h,"DIV",{class:!0});var f=k(e);t=u(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1s4wfrd"&&(t.textContent=l),a=j(f),r=u(f,"SPAN",{class:!0});var _=k(r);v=z(_,o),_.forEach(i),f.forEach(i),this.h()},h(){c(t,"class","label svelte-360cfj"),c(r,"class","value svelte-360cfj"),c(e,"class","info-row svelte-360cfj")},m(h,f){A(h,e,f),n(e,t),n(e,a),n(e,r),n(r,v)},p(h,f){f&64&&o!==(o=h[6].version+"")&&le(v,o)},d(h){h&&i(e)}}}function sn(s){let e,t='<div class="info-box svelte-360cfj"><h3 class="svelte-360cfj">‚ÑπÔ∏è Web Mode</h3> <p class="svelte-360cfj">You&#39;re running in web browser mode. The app automatically connects to the same server hosting this page.</p> <p class="svelte-360cfj">Server configuration is only available in the mobile app.</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1kpqbtr"&&(e.innerHTML=t),this.h()},h(){c(e,"class","section svelte-360cfj")},m(l,a){A(l,e,a)},p:ge,i:ge,o:ge,d(l){l&&i(e)}}}function nn(s){let e,t,l="üîß Server Selection",a,r,o="Choose which server to connect to. Your app will remember this setting.",v,h,f,_,p="üè†",m,b,w,C="Home Server",y,E,P=s[10].local+"",N,W,q,H="Local Ollama with full model access",M,T,S,V,O="‚òÅÔ∏è",I,L,X,Y="Cloud Server",x,D,J=s[10].cloud+"",$,Z,ee,ve="RunPod GPU with Qwen3-Coder-30B",oe,_e,te,me,he="‚öôÔ∏è",pe,G,K,ie="Custom Server",Ee,Ae,we,Se,ue,re,be="‚ö° Compute Tier",ne,se,U="Automatically select the best compute tier based on connectivity, battery, and task requirements.",Q,ae,je,ye,Me='<h2 class="svelte-360cfj">‚ÑπÔ∏è Tier Details</h2> <div class="info-box svelte-360cfj"><ul class="svelte-360cfj"><li class="svelte-360cfj"><strong>üè† Home Server:</strong> Full Ollama access, Qwen3:14B, all memories synced</li> <li class="svelte-360cfj"><strong>‚òÅÔ∏è Cloud Server:</strong> RunPod GPU, Qwen3-Coder-30B, low latency</li> <li class="svelte-360cfj"><strong>üì± On-Device:</strong> Local Qwen3-1.7B via llama.cpp (offline capable)</li></ul></div>',Te,ke,Pe,xe="üîÑ Memory Sync",Ge,qe,ut="Keep your memories synchronized between devices. Changes made offline will sync when reconnected.",We,Je,vt,Le,Qe,Ht="‚¨áÔ∏è App Updates",Nt,Ke,Ft="Check for and download new versions of the MetaHuman app from your connected server.",It,Ye,ht,ze,Xe,Rt="üë§ Profile Data",Vt,Ze,Gt="Download your profile for offline use, create local profiles, or sync changes with the server.",At,$e,Ue,Tt,Wt,Ne=s[0]===s[10].local&&!s[9]&&gl(),Ie=s[0]===s[10].cloud&&!s[9]&&yl();function Jt(F,ce){return!F[9]&&F[0]!==F[10].local&&F[0]!==F[10].cloud?rn:an}let pt=Jt(s),Be=pt(s),Ve=!s[9]&&s[0]!==s[10].local&&s[0]!==s[10].cloud&&El(),De=s[9]&&Sl(s);return ae=new ps({}),Je=new as({}),Ye=new Bs({}),$e=new $s({}),{c(){e=d("div"),t=d("h2"),t.textContent=l,a=g(),r=d("p"),r.textContent=o,v=g(),h=d("div"),f=d("button"),_=d("div"),_.textContent=p,m=g(),b=d("div"),w=d("strong"),w.textContent=C,y=g(),E=d("span"),N=B(P),W=g(),q=d("span"),q.textContent=H,M=g(),Ne&&Ne.c(),T=g(),S=d("button"),V=d("div"),V.textContent=O,I=g(),L=d("div"),X=d("strong"),X.textContent=Y,x=g(),D=d("span"),$=B(J),Z=g(),ee=d("span"),ee.textContent=ve,oe=g(),Ie&&Ie.c(),_e=g(),te=d("button"),me=d("div"),me.textContent=he,pe=g(),G=d("div"),K=d("strong"),K.textContent=ie,Ee=g(),Be.c(),Ae=g(),Ve&&Ve.c(),we=g(),De&&De.c(),Se=g(),ue=d("div"),re=d("h2"),re.textContent=be,ne=g(),se=d("p"),se.textContent=U,Q=g(),Ct(ae.$$.fragment),je=g(),ye=d("div"),ye.innerHTML=Me,Te=g(),ke=d("div"),Pe=d("h2"),Pe.textContent=xe,Ge=g(),qe=d("p"),qe.textContent=ut,We=g(),Ct(Je.$$.fragment),vt=g(),Le=d("div"),Qe=d("h2"),Qe.textContent=Ht,Nt=g(),Ke=d("p"),Ke.textContent=Ft,It=g(),Ct(Ye.$$.fragment),ht=g(),ze=d("div"),Xe=d("h2"),Xe.textContent=Rt,Vt=g(),Ze=d("p"),Ze.textContent=Gt,At=g(),Ct($e.$$.fragment),this.h()},l(F){e=u(F,"DIV",{class:!0});var ce=k(e);t=u(ce,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-khslw9"&&(t.textContent=l),a=j(ce),r=u(ce,"P",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-1f9nw6h"&&(r.textContent=o),v=j(ce),h=u(ce,"DIV",{class:!0});var et=k(h);f=u(et,"BUTTON",{class:!0});var tt=k(f);_=u(tt,"DIV",{class:!0,"data-svelte-h":!0}),R(_)!=="svelte-cuagae"&&(_.textContent=p),m=j(tt),b=u(tt,"DIV",{class:!0});var lt=k(b);w=u(lt,"STRONG",{class:!0,"data-svelte-h":!0}),R(w)!=="svelte-1xy9zss"&&(w.textContent=C),y=j(lt),E=u(lt,"SPAN",{class:!0});var Qt=k(E);N=z(Qt,P),Qt.forEach(i),W=j(lt),q=u(lt,"SPAN",{class:!0,"data-svelte-h":!0}),R(q)!=="svelte-t7fvc9"&&(q.textContent=H),lt.forEach(i),M=j(tt),Ne&&Ne.l(tt),tt.forEach(i),T=j(et),S=u(et,"BUTTON",{class:!0});var st=k(S);V=u(st,"DIV",{class:!0,"data-svelte-h":!0}),R(V)!=="svelte-1b8t7ye"&&(V.textContent=O),I=j(st),L=u(st,"DIV",{class:!0});var nt=k(L);X=u(nt,"STRONG",{class:!0,"data-svelte-h":!0}),R(X)!=="svelte-1aefjk8"&&(X.textContent=Y),x=j(nt),D=u(nt,"SPAN",{class:!0});var Kt=k(D);$=z(Kt,J),Kt.forEach(i),Z=j(nt),ee=u(nt,"SPAN",{class:!0,"data-svelte-h":!0}),R(ee)!=="svelte-1ya09is"&&(ee.textContent=ve),nt.forEach(i),oe=j(st),Ie&&Ie.l(st),st.forEach(i),_e=j(et),te=u(et,"BUTTON",{class:!0});var at=k(te);me=u(at,"DIV",{class:!0,"data-svelte-h":!0}),R(me)!=="svelte-9f46pa"&&(me.textContent=he),pe=j(at),G=u(at,"DIV",{class:!0});var _t=k(G);K=u(_t,"STRONG",{class:!0,"data-svelte-h":!0}),R(K)!=="svelte-40mnbg"&&(K.textContent=ie),Ee=j(_t),Be.l(_t),_t.forEach(i),Ae=j(at),Ve&&Ve.l(at),at.forEach(i),et.forEach(i),we=j(ce),De&&De.l(ce),ce.forEach(i),Se=j(F),ue=u(F,"DIV",{class:!0});var rt=k(ue);re=u(rt,"H2",{class:!0,"data-svelte-h":!0}),R(re)!=="svelte-168whps"&&(re.textContent=be),ne=j(rt),se=u(rt,"P",{class:!0,"data-svelte-h":!0}),R(se)!=="svelte-p0ggs8"&&(se.textContent=U),Q=j(rt),kt(ae.$$.fragment,rt),rt.forEach(i),je=j(F),ye=u(F,"DIV",{class:!0,"data-svelte-h":!0}),R(ye)!=="svelte-4ot784"&&(ye.innerHTML=Me),Te=j(F),ke=u(F,"DIV",{class:!0});var ot=k(ke);Pe=u(ot,"H2",{class:!0,"data-svelte-h":!0}),R(Pe)!=="svelte-3ufk35"&&(Pe.textContent=xe),Ge=j(ot),qe=u(ot,"P",{class:!0,"data-svelte-h":!0}),R(qe)!=="svelte-1at4t57"&&(qe.textContent=ut),We=j(ot),kt(Je.$$.fragment,ot),ot.forEach(i),vt=j(F),Le=u(F,"DIV",{class:!0});var it=k(Le);Qe=u(it,"H2",{class:!0,"data-svelte-h":!0}),R(Qe)!=="svelte-8qmm65"&&(Qe.textContent=Ht),Nt=j(it),Ke=u(it,"P",{class:!0,"data-svelte-h":!0}),R(Ke)!=="svelte-1qqmfxy"&&(Ke.textContent=Ft),It=j(it),kt(Ye.$$.fragment,it),it.forEach(i),ht=j(F),ze=u(F,"DIV",{class:!0});var ct=k(ze);Xe=u(ct,"H2",{class:!0,"data-svelte-h":!0}),R(Xe)!=="svelte-lee9t6"&&(Xe.textContent=Rt),Vt=j(ct),Ze=u(ct,"P",{class:!0,"data-svelte-h":!0}),R(Ze)!=="svelte-i9tj86"&&(Ze.textContent=Gt),At=j(ct),kt($e.$$.fragment,ct),ct.forEach(i),this.h()},h(){c(t,"class","svelte-360cfj"),c(r,"class","section-description svelte-360cfj"),c(_,"class","option-icon svelte-360cfj"),c(w,"class","svelte-360cfj"),c(E,"class","option-url svelte-360cfj"),c(q,"class","option-desc svelte-360cfj"),c(b,"class","option-details svelte-360cfj"),c(f,"class","server-option svelte-360cfj"),f.disabled=s[5],fe(f,"selected",s[0]===s[10].local&&!s[9]),c(V,"class","option-icon svelte-360cfj"),c(X,"class","svelte-360cfj"),c(D,"class","option-url svelte-360cfj"),c(ee,"class","option-desc svelte-360cfj"),c(L,"class","option-details svelte-360cfj"),c(S,"class","server-option svelte-360cfj"),S.disabled=s[5],fe(S,"selected",s[0]===s[10].cloud&&!s[9]),c(me,"class","option-icon svelte-360cfj"),c(K,"class","svelte-360cfj"),c(G,"class","option-details svelte-360cfj"),c(te,"class","server-option svelte-360cfj"),te.disabled=s[5],fe(te,"selected",s[9]||s[0]!==s[10].local&&s[0]!==s[10].cloud),c(h,"class","server-options svelte-360cfj"),c(e,"class","section svelte-360cfj"),c(re,"class","svelte-360cfj"),c(se,"class","section-description svelte-360cfj"),c(ue,"class","section svelte-360cfj"),c(ye,"class","section svelte-360cfj"),c(Pe,"class","svelte-360cfj"),c(qe,"class","section-description svelte-360cfj"),c(ke,"class","section svelte-360cfj"),c(Qe,"class","svelte-360cfj"),c(Ke,"class","section-description svelte-360cfj"),c(Le,"class","section svelte-360cfj"),c(Xe,"class","svelte-360cfj"),c(Ze,"class","section-description svelte-360cfj"),c(ze,"class","section svelte-360cfj")},m(F,ce){A(F,e,ce),n(e,t),n(e,a),n(e,r),n(e,v),n(e,h),n(h,f),n(f,_),n(f,m),n(f,b),n(b,w),n(b,y),n(b,E),n(E,N),n(b,W),n(b,q),n(f,M),Ne&&Ne.m(f,null),n(h,T),n(h,S),n(S,V),n(S,I),n(S,L),n(L,X),n(L,x),n(L,D),n(D,$),n(L,Z),n(L,ee),n(S,oe),Ie&&Ie.m(S,null),n(h,_e),n(h,te),n(te,me),n(te,pe),n(te,G),n(G,K),n(G,Ee),Be.m(G,null),n(te,Ae),Ve&&Ve.m(te,null),n(e,we),De&&De.m(e,null),A(F,Se,ce),A(F,ue,ce),n(ue,re),n(ue,ne),n(ue,se),n(ue,Q),mt(ae,ue,null),A(F,je,ce),A(F,ye,ce),A(F,Te,ce),A(F,ke,ce),n(ke,Pe),n(ke,Ge),n(ke,qe),n(ke,We),mt(Je,ke,null),A(F,vt,ce),A(F,Le,ce),n(Le,Qe),n(Le,Nt),n(Le,Ke),n(Le,It),mt(Ye,Le,null),A(F,ht,ce),A(F,ze,ce),n(ze,Xe),n(ze,Vt),n(ze,Ze),n(ze,At),mt($e,ze,null),Ue=!0,Tt||(Wt=[de(f,"click",s[17]),de(S,"click",s[18]),de(te,"click",s[15])],Tt=!0)},p(F,ce){(!Ue||ce&1024)&&P!==(P=F[10].local+"")&&le(N,P),F[0]===F[10].local&&!F[9]?Ne||(Ne=gl(),Ne.c(),Ne.m(f,null)):Ne&&(Ne.d(1),Ne=null),(!Ue||ce&32)&&(f.disabled=F[5]),(!Ue||ce&1537)&&fe(f,"selected",F[0]===F[10].local&&!F[9]),(!Ue||ce&1024)&&J!==(J=F[10].cloud+"")&&le($,J),F[0]===F[10].cloud&&!F[9]?Ie||(Ie=yl(),Ie.c(),Ie.m(S,null)):Ie&&(Ie.d(1),Ie=null),(!Ue||ce&32)&&(S.disabled=F[5]),(!Ue||ce&1537)&&fe(S,"selected",F[0]===F[10].cloud&&!F[9]),pt===(pt=Jt(F))&&Be?Be.p(F,ce):(Be.d(1),Be=pt(F),Be&&(Be.c(),Be.m(G,null))),!F[9]&&F[0]!==F[10].local&&F[0]!==F[10].cloud?Ve||(Ve=El(),Ve.c(),Ve.m(te,null)):Ve&&(Ve.d(1),Ve=null),(!Ue||ce&32)&&(te.disabled=F[5]),(!Ue||ce&1537)&&fe(te,"selected",F[9]||F[0]!==F[10].local&&F[0]!==F[10].cloud),F[9]?De?De.p(F,ce):(De=Sl(F),De.c(),De.m(e,null)):De&&(De.d(1),De=null)},i(F){Ue||(Fe(ae.$$.fragment,F),Fe(Je.$$.fragment,F),Fe(Ye.$$.fragment,F),Fe($e.$$.fragment,F),Ue=!0)},o(F){He(ae.$$.fragment,F),He(Je.$$.fragment,F),He(Ye.$$.fragment,F),He($e.$$.fragment,F),Ue=!1},d(F){F&&(i(e),i(Se),i(ue),i(je),i(ye),i(Te),i(ke),i(vt),i(Le),i(ht),i(ze)),Ne&&Ne.d(),Ie&&Ie.d(),Be.d(),Ve&&Ve.d(),De&&De.d(),bt(ae),bt(Je),bt(Ye),bt($e),Tt=!1,dt(Wt)}}}function gl(s){let e,t="Active";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function yl(s){let e,t="Active";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function an(s){let e,t="Enter a custom server URL";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1yhgm26"&&(e.textContent=t),this.h()},h(){c(e,"class","option-desc svelte-360cfj")},m(l,a){A(l,e,a)},p:ge,d(l){l&&i(e)}}}function rn(s){let e,t;return{c(){e=d("span"),t=B(s[0]),this.h()},l(l){e=u(l,"SPAN",{class:!0});var a=k(e);t=z(a,s[0]),a.forEach(i),this.h()},h(){c(e,"class","option-url svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&1&&le(t,l[0])},d(l){l&&i(e)}}}function El(s){let e,t="Active";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Sl(s){let e,t,l="Custom Server URL:",a,r,o,v,h,f,_,p,m,b,w,C=s[5]?"Saving...":"Save & Connect",y,E,P,N,W,q,H;return{c(){e=d("div"),t=d("label"),t.textContent=l,a=g(),r=d("div"),o=d("input"),h=g(),f=d("button"),_=B("Test"),m=g(),b=d("div"),w=d("button"),y=B(C),P=g(),N=d("button"),W=B("Cancel"),this.h()},l(M){e=u(M,"DIV",{class:!0});var T=k(e);t=u(T,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1k7ykxe"&&(t.textContent=l),a=j(T),r=u(T,"DIV",{class:!0});var S=k(r);o=u(S,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),h=j(S),f=u(S,"BUTTON",{class:!0});var V=k(f);_=z(V,"Test"),V.forEach(i),S.forEach(i),m=j(T),b=u(T,"DIV",{class:!0});var O=k(b);w=u(O,"BUTTON",{class:!0});var I=k(w);y=z(I,C),I.forEach(i),P=j(O),N=u(O,"BUTTON",{class:!0});var L=k(N);W=z(L,"Cancel"),L.forEach(i),O.forEach(i),T.forEach(i),this.h()},h(){c(t,"for","custom-url"),c(t,"class","svelte-360cfj"),c(o,"id","custom-url"),c(o,"type","url"),c(o,"placeholder","https://your-server.example.com"),o.disabled=v=s[5]||s[4],c(o,"class","svelte-360cfj"),c(f,"class","btn btn-primary svelte-360cfj"),f.disabled=p=s[5]||s[4]||!s[1],c(r,"class","input-group svelte-360cfj"),c(w,"class","btn btn-success svelte-360cfj"),w.disabled=E=s[5]||s[4]||!s[1],c(N,"class","btn btn-secondary svelte-360cfj"),N.disabled=s[5],c(b,"class","button-row svelte-360cfj"),c(e,"class","custom-input-section svelte-360cfj")},m(M,T){A(M,e,T),n(e,t),n(e,a),n(e,r),n(r,o),wt(o,s[1]),n(r,h),n(r,f),n(f,_),n(e,m),n(e,b),n(b,w),n(w,y),n(b,P),n(b,N),n(N,W),q||(H=[de(o,"input",s[19]),de(f,"click",s[20]),de(w,"click",s[21]),de(N,"click",s[16])],q=!0)},p(M,T){T&48&&v!==(v=M[5]||M[4])&&(o.disabled=v),T&2&&o.value!==M[1]&&wt(o,M[1]),T&50&&p!==(p=M[5]||M[4]||!M[1])&&(f.disabled=p),T&32&&C!==(C=M[5]?"Saving...":"Save & Connect")&&le(y,C),T&50&&E!==(E=M[5]||M[4]||!M[1])&&(w.disabled=E),T&32&&(N.disabled=M[5])},d(M){M&&i(e),q=!1,dt(H)}}}function Pl(s){let e,t;return{c(){e=d("div"),t=B(s[7]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=k(e);t=z(a,s[7]),a.forEach(i),this.h()},h(){c(e,"class","error-message svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&128&&le(t,l[7])},d(l){l&&i(e)}}}function Dl(s){let e,t;return{c(){e=d("div"),t=B(s[8]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=k(e);t=z(a,s[8]),a.forEach(i),this.h()},h(){c(e,"class","success-message svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&256&&le(t,l[8])},d(l){l&&i(e)}}}function on(s){let e,t,l='<h1 class="svelte-360cfj">üì° Server Settings</h1> <p class="svelte-360cfj">Configure your MetaHuman server connection</p>',a,r,o,v;const h=[en,xs],f=[];function _(p,m){return p[3]?0:1}return r=_(s),o=f[r]=h[r](s),{c(){e=d("div"),t=d("div"),t.innerHTML=l,a=g(),o.c(),this.h()},l(p){e=u(p,"DIV",{class:!0});var m=k(e);t=u(m,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-fustc2"&&(t.innerHTML=l),a=j(m),o.l(m),m.forEach(i),this.h()},h(){c(t,"class","server-header svelte-360cfj"),c(e,"class","server-container svelte-360cfj")},m(p,m){A(p,e,m),n(e,t),n(e,a),f[r].m(e,null),v=!0},p(p,[m]){let b=r;r=_(p),r===b?f[r].p(p,m):(Vl(),He(f[b],1,1,()=>{f[b]=null}),Al(),o=f[r],o?o.p(p,m):(o=f[r]=h[r](p),o.c()),Fe(o,1),o.m(e,null))},i(p){v||(Fe(o),v=!0)},o(p){He(o),v=!1},d(p){p&&i(e),f[r].d()}}}function cn(s,e,t){let l="",a="",r=!1,o=!0,v=!1,h=!1,f=null,_=null,p=null,m=!1,b={local:"",cloud:""};const w=Tl.subscribe(I=>{I&&f&&t(6,f={...f,connected:I.connected,latencyMs:I.latencyMs,error:I.error})});async function C(){t(3,o=!0);try{t(2,r=Dt()),t(10,b=Ol()),t(0,l=await Il()),t(1,a=l),await y()}catch(I){console.error("Failed to load server config:",I),t(7,_=I instanceof Error?I.message:"Failed to load configuration")}finally{t(3,o=!1)}}async function y(){if(!l){t(6,f={url:window.location.origin,connected:!0,latencyMs:0,version:"local"});return}t(4,v=!0),t(7,_=null);try{const I=await Ut(l);t(6,f={url:l,connected:I.success,latencyMs:I.latencyMs,version:I.version,error:I.error})}catch(I){t(6,f={url:l,connected:!1,latencyMs:0,error:I instanceof Error?I.message:"Connection failed"})}finally{t(4,v=!1)}}async function E(I){t(4,v=!0),t(7,_=null),t(8,p=null);try{const L=await Ut(I);return L.success?(t(8,p=`Connected! Latency: ${L.latencyMs}ms${L.version?`, Version: ${L.version}`:""}`),!0):(t(7,_=L.error||"Connection failed"),!1)}catch(L){return t(7,_=L instanceof Error?L.message:"Connection test failed"),!1}finally{t(4,v=!1)}}async function P(I){t(5,h=!0),t(7,_=null),t(8,p=null);try{const L=await Ut(I);if(!L.success){t(7,_=`Cannot connect to server: ${L.error}`);return}await Hl(I),t(0,l=I),t(1,a=I),t(9,m=!1),t(8,p=`Server updated to ${I}`),t(6,f={url:I,connected:!0,latencyMs:L.latencyMs,version:L.version})}catch(L){t(7,_=L instanceof Error?L.message:"Failed to save server")}finally{t(5,h=!1)}}function N(I){t(1,a=I),t(9,m=!1),P(I)}function W(){t(9,m=!0),t(1,a="")}function q(){t(9,m=!1),t(1,a=l)}let H=null;Pt(()=>{(async()=>(await Bl(),await C()))(),H=setInterval(y,3e4)}),Lt(()=>{w(),H&&clearInterval(H)});const M=()=>N(b.local),T=()=>N(b.cloud);function S(){a=this.value,t(1,a)}return[l,a,r,o,v,h,f,_,p,m,b,y,E,P,N,W,q,M,T,S,()=>E(a),()=>P(a)]}class kn extends yt{constructor(e){super(),Et(this,e,cn,on,St,{})}}export{kn as default};
