import{S as ft,i as vt,s as pt,r as Ne,n as Me,d as u,u as ut,v as Xe,p as F,c as f,P as $e,a as R,b as r,x as ae,O as ze,e as v,f as g,g as ne,h as A,q as P,M as Qe,j as p,k as I,t as O,K as $t,o as tt,Q as yt,Z as ps,N as zt,l as Re,X as Bt,R as bt,_ as Ft,$ as qt,G as Ge,a0 as Jt,F as We,a1 as Gt,al as ll,y as _s,L as W,U as sl,V as al,E as wt,H as Et,I as St,J as Ct}from"./api-config.B-uR5Kyo.js";import{c as hs}from"./clear-events.HcvDxiLr.js";/* empty css                         */import{s as ms}from"./sleep-status.CRUqY9VP.js";import"./index.PToQ82vo.js";function nl(l,e,t){const s=l.slice();return s[36]=e[t],s}function rl(l){let e,t,s;return{c(){e=p("span"),t=O("@ "),s=O(l[6]),this.h()},l(a){e=v(a,"SPAN",{class:!0});var n=g(e);t=P(n,"@ "),s=P(n,l[6]),n.forEach(u),this.h()},h(){f(e,"class","text-xs text-gray-500")},m(a,n){R(a,e,n),r(e,t),r(e,s)},p(a,n){n[0]&64&&F(s,a[6])},d(a){a&&u(e)}}}function il(l){let e,t=l[5]?"Loading audit entries...":l[2]==="all"?"No audit entries for today. Click Refresh to reload.":"No matching messages",s;return{c(){e=p("div"),s=O(t),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);s=P(n,t),n.forEach(u),this.h()},h(){f(e,"class","text-gray-500")},m(a,n){R(a,e,n),r(e,s)},p(a,n){n[0]&36&&t!==(t=a[5]?"Loading audit entries...":a[2]==="all"?"No audit entries for today. Click Refresh to reload.":"No matching messages")&&F(s,t)},d(a){a&&u(e)}}}function ol(l){let e,t=JSON.stringify(l[36].details||l[36].metadata,null,2)+"",s;return{c(){e=p("pre"),s=O(t),this.h()},l(a){e=v(a,"PRE",{class:!0});var n=g(e);s=P(n,t),n.forEach(u),this.h()},h(){f(e,"class","text-[9px] text-gray-500 mt-1 ml-4 whitespace-pre-wrap break-words overflow-x-auto opacity-70")},m(a,n){R(a,e,n),r(e,s)},p(a,n){n[0]&256&&t!==(t=JSON.stringify(a[36].details||a[36].metadata,null,2)+"")&&F(s,t)},d(a){a&&u(e)}}}function cl(l){let e,t,s,a=new Date(l[36].timestamp).toLocaleTimeString()+"",n,i,o,d,c=(l[36].event||l[36].message||"Unknown")+"",h,E,m,_,b,S=l[36].actor+"",w,N,M=l[36].category+"",D,x,L,k,C,y=(l[36].details||l[36].metadata)&&ol(l);function T(...V){return l[22](l[36],...V)}return{c(){e=p("div"),t=p("span"),s=O("["),n=O(a),i=O("]"),o=I(),d=p("span"),h=O(c),m=I(),_=p("span"),b=O("("),w=O(S),N=O(" via "),D=O(M),x=O(")"),L=I(),y&&y.c(),this.h()},l(V){e=v(V,"DIV",{class:!0});var U=g(e);t=v(U,"SPAN",{class:!0});var q=g(t);s=P(q,"["),n=P(q,a),i=P(q,"]"),q.forEach(u),o=A(U),d=v(U,"SPAN",{class:!0});var G=g(d);h=P(G,c),G.forEach(u),m=A(U),_=v(U,"SPAN",{class:!0});var z=g(_);b=P(z,"("),w=P(z,S),N=P(z," via "),D=P(z,M),x=P(z,")"),z.forEach(u),L=A(U),y&&y.l(U),U.forEach(u),this.h()},h(){f(t,"class","text-gray-500"),f(d,"class",E="font-bold mx-2 "+dl(l[36].level)+" svelte-p71bx4"),f(_,"class","text-gray-400"),f(e,"class","log-entry mb-2 hover:bg-gray-900 cursor-context-menu px-2 py-1 rounded")},m(V,U){R(V,e,U),r(e,t),r(t,s),r(t,n),r(t,i),r(e,o),r(e,d),r(d,h),r(e,m),r(e,_),r(_,b),r(_,w),r(_,N),r(_,D),r(_,x),r(e,L),y&&y.m(e,null),k||(C=ae(e,"contextmenu",T),k=!0)},p(V,U){l=V,U[0]&256&&a!==(a=new Date(l[36].timestamp).toLocaleTimeString()+"")&&F(n,a),U[0]&256&&c!==(c=(l[36].event||l[36].message||"Unknown")+"")&&F(h,c),U[0]&256&&E!==(E="font-bold mx-2 "+dl(l[36].level)+" svelte-p71bx4")&&f(d,"class",E),U[0]&256&&S!==(S=l[36].actor+"")&&F(w,S),U[0]&256&&M!==(M=l[36].category+"")&&F(D,M),l[36].details||l[36].metadata?y?y.p(l,U):(y=ol(l),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(V){V&&u(e),y&&y.d(),k=!1,C()}}}function ul(l){let e,t,s,a,n="üìã Copy Message",i,o,d="üìã Copy All Messages",c,h,E="üíæ Save Message as JSON",m,_,b="üíæ Save All as JSON",S,w,N,M,D="üóëÔ∏è Clear Messages",x,L;return{c(){e=p("div"),t=I(),s=p("div"),a=p("button"),a.textContent=n,i=I(),o=p("button"),o.textContent=d,c=I(),h=p("button"),h.textContent=E,m=I(),_=p("button"),_.textContent=b,S=I(),w=p("div"),N=I(),M=p("button"),M.textContent=D,this.h()},l(k){e=v(k,"DIV",{class:!0}),g(e).forEach(u),t=A(k),s=v(k,"DIV",{class:!0,style:!0});var C=g(s);a=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-1m8ixcl"&&(a.textContent=n),i=A(C),o=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-1pq7jjt"&&(o.textContent=d),c=A(C),h=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-197dhnb"&&(h.textContent=E),m=A(C),_=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-1nhpmt1"&&(_.textContent=b),S=A(C),w=v(C,"DIV",{class:!0}),g(w).forEach(u),N=A(C),M=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(M)!=="svelte-11l854z"&&(M.textContent=D),C.forEach(u),this.h()},h(){f(e,"class","context-menu-backdrop svelte-p71bx4"),f(a,"class","context-menu-item svelte-p71bx4"),f(o,"class","context-menu-item svelte-p71bx4"),f(h,"class","context-menu-item svelte-p71bx4"),f(_,"class","context-menu-item svelte-p71bx4"),f(w,"class","context-menu-divider svelte-p71bx4"),f(M,"class","context-menu-item svelte-p71bx4"),f(s,"class","context-menu svelte-p71bx4"),ze(s,"left",l[7].x+"px"),ze(s,"top",l[7].y+"px")},m(k,C){R(k,e,C),R(k,t,C),R(k,s,C),r(s,a),r(s,i),r(s,o),r(s,c),r(s,h),r(s,m),r(s,_),r(s,S),r(s,w),r(s,N),r(s,M),x||(L=[ae(e,"click",l[12]),ae(e,"contextmenu",ps(l[12])),ae(a,"click",l[25]),ae(o,"click",l[26]),ae(h,"click",l[27]),ae(_,"click",l[28]),ae(M,"click",l[29]),ae(s,"click",zt(l[17]))],x=!0)},p(k,C){C[0]&128&&ze(s,"left",k[7].x+"px"),C[0]&128&&ze(s,"top",k[7].y+"px")},d(k){k&&(u(e),u(t),u(s)),x=!1,Xe(L)}}}function gs(l){let e,t,s,a,n="Audit Log",i,o,d,c,h,E,m,_="¬∑",b,S,w=l[8].length+"",N,M,D,x,L,k,C,y,T,V,U,q,G,z,Q,te,he,re,ee,ue,le,fe,Z=l[5]?"...":"Refresh",B,_e,j,H="Clear",X,J,me,we,ve,K,se,pe,be="‚Üí",Ee,ie,$,oe,ye,ge,Y,de="‚Üí",Se,Ae,Ce,Be,lt,Ve,He,dt="‚Üí",st,Je,je,Ke,Dt,At,at,Ht="‚Üí",It,Ze,nt,ht,Nt,Tt,Ue,_t,mt,rt,gt,it,Vt,Wt,Pe=l[6]&&rl(l),Oe=l[8].length===0&&il(l),ot=Ne(l[8]),Te=[];for(let ce=0;ce<ot.length;ce+=1)Te[ce]=cl(nl(l,ot,ce));let Le=l[7]&&ul(l);return{c(){e=p("div"),t=p("div"),s=p("div"),a=p("h3"),a.textContent=n,i=I(),o=p("div"),d=p("span"),c=O(l[3]),h=I(),Pe&&Pe.c(),E=I(),m=p("span"),m.textContent=_,b=I(),S=p("span"),N=O(w),M=I(),D=p("div"),x=p("button"),L=O("All"),C=I(),y=p("button"),T=O("Err"),U=I(),q=p("button"),G=O("Warn"),Q=I(),te=p("button"),he=O("Info"),ee=I(),ue=p("div"),le=I(),fe=p("button"),B=O(Z),_e=I(),j=p("button"),j.textContent=H,X=I(),J=p("div"),me=p("div"),we=p("span"),K=O(" Builder"),se=I(),pe=p("span"),pe.textContent=be,Ee=I(),ie=p("div"),$=p("span"),ye=O(" Approval"),ge=I(),Y=p("span"),Y.textContent=de,Se=I(),Ae=p("div"),Ce=p("span"),lt=O(" Training"),Ve=I(),He=p("span"),He.textContent=dt,st=I(),Je=p("div"),je=p("span"),Dt=O(" Eval"),At=I(),at=p("span"),at.textContent=Ht,It=I(),Ze=p("div"),nt=p("span"),Nt=O(" Activate"),Tt=I(),Ue=p("div"),Oe&&Oe.c(),_t=I();for(let ce=0;ce<Te.length;ce+=1)Te[ce].c();mt=I(),rt=p("div"),gt=I(),Le&&Le.c(),it=Qe(),this.h()},l(ce){e=v(ce,"DIV",{class:!0});var ke=g(e);t=v(ke,"DIV",{class:!0});var De=g(t);s=v(De,"DIV",{class:!0});var et=g(s);a=v(et,"H3",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-11lzcrg"&&(a.textContent=n),i=A(et),o=v(et,"DIV",{class:!0});var Ye=g(o);d=v(Ye,"SPAN",{class:!0});var Xt=g(d);c=P(Xt,l[3]),Xt.forEach(u),h=A(Ye),Pe&&Pe.l(Ye),E=A(Ye),m=v(Ye,"SPAN",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-1nuq05x"&&(m.textContent=_),b=A(Ye),S=v(Ye,"SPAN",{class:!0});var Kt=g(S);N=P(Kt,w),Kt.forEach(u),Ye.forEach(u),et.forEach(u),M=A(De),D=v(De,"DIV",{class:!0});var xe=g(D);x=v(xe,"BUTTON",{class:!0});var Yt=g(x);L=P(Yt,"All"),Yt.forEach(u),C=A(xe),y=v(xe,"BUTTON",{class:!0});var Qt=g(y);T=P(Qt,"Err"),Qt.forEach(u),U=A(xe),q=v(xe,"BUTTON",{class:!0});var Zt=g(q);G=P(Zt,"Warn"),Zt.forEach(u),Q=A(xe),te=v(xe,"BUTTON",{class:!0});var el=g(te);he=P(el,"Info"),el.forEach(u),ee=A(xe),ue=v(xe,"DIV",{class:!0}),g(ue).forEach(u),le=A(xe),fe=v(xe,"BUTTON",{class:!0,title:!0});var tl=g(fe);B=P(tl,Z),tl.forEach(u),_e=A(xe),j=v(xe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),ne(j)!=="svelte-jl9lpm"&&(j.textContent=H),xe.forEach(u),De.forEach(u),X=A(ke),J=v(ke,"DIV",{class:!0});var Ie=g(J);me=v(Ie,"DIV",{class:!0});var Pt=g(me);we=v(Pt,"SPAN",{class:!0}),g(we).forEach(u),K=P(Pt," Builder"),Pt.forEach(u),se=A(Ie),pe=v(Ie,"SPAN",{"data-svelte-h":!0}),ne(pe)!=="svelte-1xb5tc"&&(pe.textContent=be),Ee=A(Ie),ie=v(Ie,"DIV",{class:!0});var Ot=g(ie);$=v(Ot,"SPAN",{class:!0}),g($).forEach(u),ye=P(Ot," Approval"),Ot.forEach(u),ge=A(Ie),Y=v(Ie,"SPAN",{"data-svelte-h":!0}),ne(Y)!=="svelte-1xb5tc"&&(Y.textContent=de),Se=A(Ie),Ae=v(Ie,"DIV",{class:!0});var Lt=g(Ae);Ce=v(Lt,"SPAN",{class:!0}),g(Ce).forEach(u),lt=P(Lt," Training"),Lt.forEach(u),Ve=A(Ie),He=v(Ie,"SPAN",{"data-svelte-h":!0}),ne(He)!=="svelte-1xb5tc"&&(He.textContent=dt),st=A(Ie),Je=v(Ie,"DIV",{class:!0});var Mt=g(Je);je=v(Mt,"SPAN",{class:!0}),g(je).forEach(u),Dt=P(Mt," Eval"),Mt.forEach(u),At=A(Ie),at=v(Ie,"SPAN",{"data-svelte-h":!0}),ne(at)!=="svelte-1xb5tc"&&(at.textContent=Ht),It=A(Ie),Ze=v(Ie,"DIV",{class:!0});var xt=g(Ze);nt=v(xt,"SPAN",{class:!0}),g(nt).forEach(u),Nt=P(xt," Activate"),xt.forEach(u),Ie.forEach(u),Tt=A(ke),Ue=v(ke,"DIV",{class:!0});var ct=g(Ue);Oe&&Oe.l(ct),_t=A(ct);for(let jt=0;jt<Te.length;jt+=1)Te[jt].l(ct);mt=A(ct),rt=v(ct,"DIV",{style:!0}),g(rt).forEach(u),ct.forEach(u),ke.forEach(u),gt=A(ce),Le&&Le.l(ce),it=Qe(),this.h()},h(){f(a,"class","font-semibold text-white text-sm"),f(d,"class","text-xs text-gray-400"),f(m,"class","text-xs text-gray-400"),f(S,"class","text-xs text-gray-400"),f(o,"class","flex items-center gap-2"),f(s,"class","flex justify-between items-center mb-2"),f(x,"class",k="filter-pill "+(l[2]==="all"?"active":"")+" svelte-p71bx4"),f(y,"class",V="filter-pill error "+(l[2]==="error"?"active":"")+" svelte-p71bx4"),f(q,"class",z="filter-pill warn "+(l[2]==="warn"?"active":"")+" svelte-p71bx4"),f(te,"class",re="filter-pill info "+(l[2]==="info"?"active":"")+" svelte-p71bx4"),f(ue,"class","flex-1"),f(fe,"class","filter-pill svelte-p71bx4"),fe.disabled=l[5],f(fe,"title","Refresh audit logs"),f(j,"class","filter-pill svelte-p71bx4"),f(j,"title","Clear all messages"),f(D,"class","flex gap-1 flex-wrap"),f(t,"class","p-2 border-b border-gray-700"),f(we,"class",ve=$e("dot "+l[9].builder)+" svelte-p71bx4"),f(me,"class","stage svelte-p71bx4"),f($,"class",oe=$e("dot "+l[9].approval)+" svelte-p71bx4"),f(ie,"class","stage svelte-p71bx4"),f(Ce,"class",Be=$e("dot "+l[9].training)+" svelte-p71bx4"),f(Ae,"class","stage svelte-p71bx4"),f(je,"class",Ke=$e("dot "+l[9].evaluation)+" svelte-p71bx4"),f(Je,"class","stage svelte-p71bx4"),f(nt,"class",ht=$e("dot "+l[9].activation)+" svelte-p71bx4"),f(Ze,"class","stage svelte-p71bx4"),f(J,"class","px-3 py-2 border-b border-gray-800 text-xs text-gray-300 flex items-center gap-3 flex-wrap"),ze(rt,"height","1px"),f(Ue,"class","flex-1 overflow-y-auto p-4 min-h-0"),f(e,"class","log-stream-container h-full flex flex-col bg-black font-mono text-[10px]")},m(ce,ke){R(ce,e,ke),r(e,t),r(t,s),r(s,a),r(s,i),r(s,o),r(o,d),r(d,c),r(o,h),Pe&&Pe.m(o,null),r(o,E),r(o,m),r(o,b),r(o,S),r(S,N),r(t,M),r(t,D),r(D,x),r(x,L),r(D,C),r(D,y),r(y,T),r(D,U),r(D,q),r(q,G),r(D,Q),r(D,te),r(te,he),r(D,ee),r(D,ue),r(D,le),r(D,fe),r(fe,B),r(D,_e),r(D,j),r(e,X),r(e,J),r(J,me),r(me,we),r(me,K),r(J,se),r(J,pe),r(J,Ee),r(J,ie),r(ie,$),r(ie,ye),r(J,ge),r(J,Y),r(J,Se),r(J,Ae),r(Ae,Ce),r(Ae,lt),r(J,Ve),r(J,He),r(J,st),r(J,Je),r(Je,je),r(Je,Dt),r(J,At),r(J,at),r(J,It),r(J,Ze),r(Ze,nt),r(Ze,Nt),r(e,Tt),r(e,Ue),Oe&&Oe.m(Ue,null),r(Ue,_t);for(let De=0;De<Te.length;De+=1)Te[De]&&Te[De].m(Ue,null);r(Ue,mt),r(Ue,rt),l[23](rt),l[24](Ue),R(ce,gt,ke),Le&&Le.m(ce,ke),R(ce,it,ke),Vt||(Wt=[ae(x,"click",l[18]),ae(y,"click",l[19]),ae(q,"click",l[20]),ae(te,"click",l[21]),ae(fe,"click",l[10]),ae(j,"click",l[0]),ae(e,"click",l[12])],Vt=!0)},p(ce,ke){if(ke[0]&8&&F(c,ce[3]),ce[6]?Pe?Pe.p(ce,ke):(Pe=rl(ce),Pe.c(),Pe.m(o,E)):Pe&&(Pe.d(1),Pe=null),ke[0]&256&&w!==(w=ce[8].length+"")&&F(N,w),ke[0]&4&&k!==(k="filter-pill "+(ce[2]==="all"?"active":"")+" svelte-p71bx4")&&f(x,"class",k),ke[0]&4&&V!==(V="filter-pill error "+(ce[2]==="error"?"active":"")+" svelte-p71bx4")&&f(y,"class",V),ke[0]&4&&z!==(z="filter-pill warn "+(ce[2]==="warn"?"active":"")+" svelte-p71bx4")&&f(q,"class",z),ke[0]&4&&re!==(re="filter-pill info "+(ce[2]==="info"?"active":"")+" svelte-p71bx4")&&f(te,"class",re),ke[0]&32&&Z!==(Z=ce[5]?"...":"Refresh")&&F(B,Z),ke[0]&32&&(fe.disabled=ce[5]),ke[0]&512&&ve!==(ve=$e("dot "+ce[9].builder)+" svelte-p71bx4")&&f(we,"class",ve),ke[0]&512&&oe!==(oe=$e("dot "+ce[9].approval)+" svelte-p71bx4")&&f($,"class",oe),ke[0]&512&&Be!==(Be=$e("dot "+ce[9].training)+" svelte-p71bx4")&&f(Ce,"class",Be),ke[0]&512&&Ke!==(Ke=$e("dot "+ce[9].evaluation)+" svelte-p71bx4")&&f(je,"class",Ke),ke[0]&512&&ht!==(ht=$e("dot "+ce[9].activation)+" svelte-p71bx4")&&f(nt,"class",ht),ce[8].length===0?Oe?Oe.p(ce,ke):(Oe=il(ce),Oe.c(),Oe.m(Ue,_t)):Oe&&(Oe.d(1),Oe=null),ke[0]&2304){ot=Ne(ce[8]);let De;for(De=0;De<ot.length;De+=1){const et=nl(ce,ot,De);Te[De]?Te[De].p(et,ke):(Te[De]=cl(et),Te[De].c(),Te[De].m(Ue,mt))}for(;De<Te.length;De+=1)Te[De].d(1);Te.length=ot.length}ce[7]?Le?Le.p(ce,ke):(Le=ul(ce),Le.c(),Le.m(it.parentNode,it)):Le&&(Le.d(1),Le=null)},i:Me,o:Me,d(ce){ce&&(u(e),u(gt),u(it)),Pe&&Pe.d(),Oe&&Oe.d(),ut(Te,ce),l[23](null),l[24](null),Le&&Le.d(ce),Vt=!1,Xe(Wt)}}}const bs=500;function dl(l){switch(l){case"info":return"text-blue-400";case"warn":return"text-yellow-400";case"error":return"text-red-400";default:return"text-gray-400"}}function ks(l){const e=`[${new Date(l.timestamp).toLocaleTimeString()}] ${l.event||l.message||"Unknown"} (${l.actor} via ${l.category})`;navigator.clipboard.writeText(e)}function fl(l,e){const t=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e,a.click(),URL.revokeObjectURL(s)}function ys(l,e,t){let s,a,n;$t(l,hs,Z=>t(16,n=Z));let i=[],o="Ready",d,c=!0,h,E=null,m=!1,_=null,b=null,S="all";async function w(){if(!m){t(5,m=!0),t(3,o="Loading...");try{const B=await Re(`/api/audit?date=${new Date().toISOString().slice(0,10)}`);if(!B.ok)throw new Error("Failed to fetch audit logs");const _e=await B.json();t(14,i=(_e.entries||[]).slice(-bs)),t(6,_=new Date().toLocaleTimeString()),t(3,o=`Loaded ${i.length} entries`)}catch(Z){console.error("[LogStream] Failed to load audit logs:",Z),t(3,o="Failed to load")}finally{t(5,m=!1)}}}function N(){document.hidden||(console.log("[LogStream] Tab visible, refreshing audit logs"),w())}tt(()=>{d&&h&&(E=new IntersectionObserver(Z=>{const B=Z[0];t(15,c=B.isIntersecting)},{root:d,threshold:.99}),E.observe(h)),window.addEventListener("keydown",T),document.addEventListener("visibilitychange",N),w()}),yt(()=>{E?.disconnect(),E=null,window.removeEventListener("keydown",T),document.removeEventListener("visibilitychange",N)});function M(Z){for(let B=i.length-1;B>=0;B--)if(Z.includes(i[B].event))return i[B];return null}function D(Z,B,_e){const j=M(Z),H=M(B),X=M(_e),J=j?new Date(j.timestamp).getTime():-1,me=H?new Date(H.timestamp).getTime():-1,we=X?new Date(X.timestamp).getTime():-1,ve=Math.max(J,me,we);return ve===-1?"idle":ve===we?"failed":ve===me?"completed":"in_progress"}function x(){t(14,i=[])}function L(){const Z=a.map(B=>`[${new Date(B.timestamp).toLocaleTimeString()}] ${B.event||B.message||"Unknown"} (${B.actor} via ${B.category})`).join(`
`);navigator.clipboard.writeText(Z)}function k(Z,B){Z.preventDefault(),t(7,b={x:Z.clientX,y:Z.clientY,log:B})}function C(){t(7,b=null)}function y(Z){if(!b)return;const{log:B}=b;switch(Z){case"copy-message":B&&ks(B);break;case"copy-all":L();break;case"save-json":B&&fl(B,`audit-log-${Date.now()}.json`);break;case"save-all-json":fl(a,`audit-all-${Date.now()}.json`);break;case"clear":x();break}C()}function T(Z){Z.key==="Escape"&&b&&C()}function V(Z){Bt.call(this,l,Z)}const U=()=>t(2,S="all"),q=()=>t(2,S=S==="error"?"all":"error"),G=()=>t(2,S=S==="warn"?"all":"warn"),z=()=>t(2,S=S==="info"?"all":"info"),Q=(Z,B)=>k(B,Z);function te(Z){bt[Z?"unshift":"push"](()=>{h=Z,t(1,h)})}function he(Z){bt[Z?"unshift":"push"](()=>{d=Z,t(4,d)})}const re=()=>y("copy-message"),ee=()=>y("copy-all"),ue=()=>y("save-json"),le=()=>y("save-all-json"),fe=()=>y("clear");return l.$$.update=()=>{l.$$.dirty[0]&49154&&i.length>0&&c&&h&&requestAnimationFrame(()=>{h?.scrollIntoView({block:"end",inline:"nearest"})}),l.$$.dirty[0]&65536&&n>0&&x(),l.$$.dirty[0]&16388&&t(8,a=i.filter(Z=>S==="all"?!0:S==="error"?Z.level==="error":S==="warn"?Z.level==="warn":S==="info"?Z.level==="info":!0))},t(9,s={builder:D(["adapter_builder_started","lora_orchestration_started"],["adapter_builder_completed","lora_dataset_ready"],["adapter_builder_failed","lora_dataset_failed"]),approval:D(["lora_dataset_ready"],["lora_dataset_auto_approve","lora_dataset_approved"],["lora_dataset_auto_reject"]),training:D(["lora_training_started","adapter_training_queued"],["lora_training_completed"],["lora_training_failed"]),evaluation:D(["adapter_evaluation_started","adapter_evaluation_queued"],["adapter_evaluation_completed"],["adapter_evaluation_failed"]),activation:D(["adapter_activation_requested"],["lora_adapter_activated","adapter_activated"],[])}),[x,h,S,o,d,m,_,b,a,s,w,k,C,y,i,c,n,V,U,q,G,z,Q,te,he,re,ee,ue,le,fe]}class ws extends ft{constructor(e){super(),vt(this,e,ys,gs,pt,{clear:0},null,[-1,-1])}get clear(){return this.$$.ctx[0]}}function Es(l){const e=l-1;return e*e*e+1}function vl(l,{delay:e=0,duration:t=400,easing:s=Es,axis:a="y"}={}){const n=getComputedStyle(l),i=+n.opacity,o=a==="y"?"height":"width",d=parseFloat(n[o]),c=a==="y"?["top","bottom"]:["left","right"],h=c.map(N=>`${N[0].toUpperCase()}${N.slice(1)}`),E=parseFloat(n[`padding${h[0]}`]),m=parseFloat(n[`padding${h[1]}`]),_=parseFloat(n[`margin${h[0]}`]),b=parseFloat(n[`margin${h[1]}`]),S=parseFloat(n[`border${h[0]}Width`]),w=parseFloat(n[`border${h[1]}Width`]);return{delay:e,duration:t,easing:s,css:N=>`overflow: hidden;opacity: ${Math.min(N*20,1)*i};${o}: ${N*d}px;padding-${c[0]}: ${N*E}px;padding-${c[1]}: ${N*m}px;margin-${c[0]}: ${N*_}px;margin-${c[1]}: ${N*b}px;border-${c[0]}-width: ${N*S}px;border-${c[1]}-width: ${N*w}px;`}}function pl(l,e,t){const s=l.slice();return s[40]=e[t],s}function hl(l,e,t){const s=l.slice();return s[43]=e[t],s}function _l(l){let e,t=l[2]!=="all"?"No matching events":"Awaiting real-time system events...",s;return{c(){e=p("div"),s=O(t),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);s=P(n,t),n.forEach(u),this.h()},h(){f(e,"class","p-6 text-center text-gray-500 dark:text-gray-400 text-sm")},m(a,n){R(a,e,n),r(e,s)},p(a,n){n[0]&4&&t!==(t=a[2]!=="all"?"No matching events":"Awaiting real-time system events...")&&F(s,t)},d(a){a&&u(e)}}}function ml(l){let e,t=l[40].count+"",s,a;return{c(){e=p("span"),s=O(t),a=O(" events"),this.h()},l(n){e=v(n,"SPAN",{class:!0});var i=g(e);s=P(i,t),a=P(i," events"),i.forEach(u),this.h()},h(){f(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(n,i){R(n,e,i),r(e,s),r(e,a)},p(n,i){i[0]&256&&t!==(t=n[40].count+"")&&F(s,t)},d(n){n&&u(e)}}}function gl(l){let e,t,s,a=Ne(l[40].events),n=[];for(let i=0;i<a.length;i+=1)n[i]=kl(hl(l,a,i));return{c(){e=p("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var o=g(e);for(let d=0;d<n.length;d+=1)n[d].l(o);o.forEach(u),this.h()},h(){f(e,"class","bg-gray-50 dark:bg-gray-800/50 px-4 py-3 space-y-2")},m(i,o){R(i,e,o);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);s=!0},p(i,o){if(o[0]&2304){a=Ne(i[40].events);let d;for(d=0;d<a.length;d+=1){const c=hl(i,a,d);n[d]?n[d].p(c,o):(n[d]=kl(c),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=a.length}},i(i){s||(i&&_s(()=>{s&&(t||(t=ll(e,vl,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=ll(e,vl,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&u(e),ut(n,i),i&&t&&t.end()}}}function bl(l){let e,t,s="Details",a,n,i=JSON.stringify(l[43].details,null,2)+"",o;return{c(){e=p("details"),t=p("summary"),t.textContent=s,a=I(),n=p("pre"),o=O(i),this.h()},l(d){e=v(d,"DETAILS",{class:!0});var c=g(e);t=v(c,"SUMMARY",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1yfl1l6"&&(t.textContent=s),a=A(c),n=v(c,"PRE",{class:!0});var h=g(n);o=P(h,i),h.forEach(u),c.forEach(u),this.h()},h(){f(t,"class","cursor-pointer text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"),f(n,"class","mt-1 text-[9px] bg-gray-100 dark:bg-gray-900 p-2 rounded overflow-x-auto text-gray-700 dark:text-gray-300"),f(e,"class","mt-1")},m(d,c){R(d,e,c),r(e,t),r(e,a),r(e,n),r(n,o)},p(d,c){c[0]&256&&i!==(i=JSON.stringify(d[43].details,null,2)+"")&&F(o,i)},d(d){d&&u(e)}}}function kl(l){let e,t,s,a=new Date(l[43].timestamp).toLocaleTimeString()+"",n,i,o,d=l[43].event+"",c,h,E,m,_,b=l[43].actor+"",S,w,N,M,D=l[43].details&&bl(l);function x(...L){return l[25](l[40],l[43],...L)}return{c(){e=p("div"),t=p("div"),s=p("span"),n=O(a),i=I(),o=p("span"),c=O(d),E=I(),m=p("span"),_=O("by "),S=O(b),w=I(),D&&D.c(),this.h()},l(L){e=v(L,"DIV",{class:!0});var k=g(e);t=v(k,"DIV",{class:!0});var C=g(t);s=v(C,"SPAN",{class:!0});var y=g(s);n=P(y,a),y.forEach(u),i=A(C),o=v(C,"SPAN",{class:!0});var T=g(o);c=P(T,d),T.forEach(u),E=A(C),m=v(C,"SPAN",{class:!0});var V=g(m);_=P(V,"by "),S=P(V,b),V.forEach(u),C.forEach(u),w=A(k),D&&D.l(k),k.forEach(u),this.h()},h(){f(s,"class","font-mono text-gray-500 dark:text-gray-400"),f(o,"class",h=$e(kt(l[43].level))+" svelte-1z1rly"),f(m,"class","text-gray-500 dark:text-gray-400"),f(t,"class","flex items-center gap-2 mb-1"),f(e,"class","text-[10px] border-l-2 border-gray-300 dark:border-gray-600 pl-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-context-menu")},m(L,k){R(L,e,k),r(e,t),r(t,s),r(s,n),r(t,i),r(t,o),r(o,c),r(t,E),r(t,m),r(m,_),r(m,S),r(e,w),D&&D.m(e,null),N||(M=ae(e,"contextmenu",x),N=!0)},p(L,k){l=L,k[0]&256&&a!==(a=new Date(l[43].timestamp).toLocaleTimeString()+"")&&F(n,a),k[0]&256&&d!==(d=l[43].event+"")&&F(c,d),k[0]&256&&h!==(h=$e(kt(l[43].level))+" svelte-1z1rly")&&f(o,"class",h),k[0]&256&&b!==(b=l[43].actor+"")&&F(S,b),l[43].details?D?D.p(l,k):(D=bl(l),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(L){L&&u(e),D&&D.d(),N=!1,M()}}}function yl(l,e){let t,s,a,n=Il(e[40].status)+"",i,o,d,c,h,E,m=e[40].category+"",_,b,S,w,N=e[40].level.toUpperCase()+"",M,D,x,L,k,C=e[40].summary+"",y,T,V,U=new Date(e[40].lastTimestamp).toLocaleTimeString()+"",q,G,z,Q,te=e[40].expanded?"‚ñº":"‚ñ∂",he,re,ee,ue,le=e[40].count>1&&ml(e);function fe(){return e[23](e[40])}function Z(..._e){return e[24](e[40],..._e)}let B=e[40].expanded&&gl(e);return{key:l,first:null,c(){t=p("div"),s=p("button"),a=p("span"),i=O(n),d=I(),c=p("div"),h=p("div"),E=p("span"),_=O(m),S=I(),w=p("span"),M=O(N),x=I(),le&&le.c(),L=I(),k=p("div"),y=O(C),T=I(),V=p("div"),q=O(U),G=I(),z=p("div"),Q=p("span"),he=O(te),re=I(),B&&B.c(),this.h()},l(_e){t=v(_e,"DIV",{class:!0});var j=g(t);s=v(j,"BUTTON",{class:!0});var H=g(s);a=v(H,"SPAN",{class:!0});var X=g(a);i=P(X,n),X.forEach(u),d=A(H),c=v(H,"DIV",{class:!0});var J=g(c);h=v(J,"DIV",{class:!0});var me=g(h);E=v(me,"SPAN",{class:!0});var we=g(E);_=P(we,m),we.forEach(u),S=A(me),w=v(me,"SPAN",{class:!0});var ve=g(w);M=P(ve,N),ve.forEach(u),x=A(me),le&&le.l(me),me.forEach(u),L=A(J),k=v(J,"DIV",{class:!0});var K=g(k);y=P(K,C),K.forEach(u),T=A(J),V=v(J,"DIV",{class:!0});var se=g(V);q=P(se,U),se.forEach(u),J.forEach(u),G=A(H),z=v(H,"DIV",{class:!0});var pe=g(z);Q=v(pe,"SPAN",{class:!0});var be=g(Q);he=P(be,te),be.forEach(u),pe.forEach(u),H.forEach(u),re=A(j),B&&B.l(j),j.forEach(u),this.h()},h(){f(a,"class",o="mt-0.5 "+Nl(e[40].status)+" text-lg svelte-1z1rly"),f(E,"class",b="text-xs px-2 py-0.5 rounded-full font-semibold "+Al(e[40].category)+" svelte-1z1rly"),f(w,"class",D="text-xs "+kt(e[40].level)+" svelte-1z1rly"),f(h,"class","flex items-center gap-2 mb-1"),f(k,"class","font-medium text-sm text-gray-900 dark:text-white truncate"),f(V,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),f(c,"class","flex-1 min-w-0"),f(Q,"class","text-gray-400 dark:text-gray-600"),f(z,"class","flex items-center"),f(s,"class","w-full px-4 py-3 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors text-left"),f(t,"class","border-b border-gray-200 dark:border-gray-700"),this.first=t},m(_e,j){R(_e,t,j),r(t,s),r(s,a),r(a,i),r(s,d),r(s,c),r(c,h),r(h,E),r(E,_),r(h,S),r(h,w),r(w,M),r(h,x),le&&le.m(h,null),r(c,L),r(c,k),r(k,y),r(c,T),r(c,V),r(V,q),r(s,G),r(s,z),r(z,Q),r(Q,he),r(t,re),B&&B.m(t,null),ee||(ue=[ae(s,"click",fe),ae(s,"contextmenu",Z)],ee=!0)},p(_e,j){e=_e,j[0]&256&&n!==(n=Il(e[40].status)+"")&&F(i,n),j[0]&256&&o!==(o="mt-0.5 "+Nl(e[40].status)+" text-lg svelte-1z1rly")&&f(a,"class",o),j[0]&256&&m!==(m=e[40].category+"")&&F(_,m),j[0]&256&&b!==(b="text-xs px-2 py-0.5 rounded-full font-semibold "+Al(e[40].category)+" svelte-1z1rly")&&f(E,"class",b),j[0]&256&&N!==(N=e[40].level.toUpperCase()+"")&&F(M,N),j[0]&256&&D!==(D="text-xs "+kt(e[40].level)+" svelte-1z1rly")&&f(w,"class",D),e[40].count>1?le?le.p(e,j):(le=ml(e),le.c(),le.m(h,null)):le&&(le.d(1),le=null),j[0]&256&&C!==(C=e[40].summary+"")&&F(y,C),j[0]&256&&U!==(U=new Date(e[40].lastTimestamp).toLocaleTimeString()+"")&&F(q,U),j[0]&256&&te!==(te=e[40].expanded?"‚ñº":"‚ñ∂")&&F(he,te),e[40].expanded?B?(B.p(e,j),j[0]&256&&Ge(B,1)):(B=gl(e),B.c(),Ge(B,1),B.m(t,null)):B&&(Jt(),We(B,1,1,()=>{B=null}),Gt())},d(_e){_e&&u(t),le&&le.d(),B&&B.d(),ee=!1,Xe(ue)}}}function wl(l){let e,t,s,a,n="üìã Copy Message",i,o,d="üìã Copy All Messages",c,h,E="üíæ Save Message as JSON",m,_,b="üíæ Save All as JSON",S,w,N,M,D="üóëÔ∏è Clear Messages",x,L;return{c(){e=p("div"),t=I(),s=p("div"),a=p("button"),a.textContent=n,i=I(),o=p("button"),o.textContent=d,c=I(),h=p("button"),h.textContent=E,m=I(),_=p("button"),_.textContent=b,S=I(),w=p("div"),N=I(),M=p("button"),M.textContent=D,this.h()},l(k){e=v(k,"DIV",{class:!0}),g(e).forEach(u),t=A(k),s=v(k,"DIV",{class:!0,style:!0});var C=g(s);a=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-1m8ixcl"&&(a.textContent=n),i=A(C),o=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-1pq7jjt"&&(o.textContent=d),c=A(C),h=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-197dhnb"&&(h.textContent=E),m=A(C),_=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-1nhpmt1"&&(_.textContent=b),S=A(C),w=v(C,"DIV",{class:!0}),g(w).forEach(u),N=A(C),M=v(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(M)!=="svelte-11l854z"&&(M.textContent=D),C.forEach(u),this.h()},h(){f(e,"class","context-menu-backdrop svelte-1z1rly"),f(a,"class","context-menu-item svelte-1z1rly"),f(o,"class","context-menu-item svelte-1z1rly"),f(h,"class","context-menu-item svelte-1z1rly"),f(_,"class","context-menu-item svelte-1z1rly"),f(w,"class","context-menu-divider svelte-1z1rly"),f(M,"class","context-menu-item svelte-1z1rly"),f(s,"class","context-menu svelte-1z1rly"),ze(s,"left",l[7].x+"px"),ze(s,"top",l[7].y+"px")},m(k,C){R(k,e,C),R(k,t,C),R(k,s,C),r(s,a),r(s,i),r(s,o),r(s,c),r(s,h),r(s,m),r(s,_),r(s,S),r(s,w),r(s,N),r(s,M),x||(L=[ae(e,"click",l[12]),ae(e,"contextmenu",ps(l[12])),ae(a,"click",l[28]),ae(o,"click",l[29]),ae(h,"click",l[30]),ae(_,"click",l[31]),ae(M,"click",l[32]),ae(s,"click",zt(l[18]))],x=!0)},p(k,C){C[0]&128&&ze(s,"left",k[7].x+"px"),C[0]&128&&ze(s,"top",k[7].y+"px")},d(k){k&&(u(e),u(t),u(s)),x=!1,Xe(L)}}}function El(l){let e,t,s,a,n,i=l[5].summary+"",o,d,c,h,E="Copy JSON",m,_,b="‚úï",S,w,N,M=JSON.stringify(l[5].events,null,2)+"",D,x,L;return{c(){e=p("div"),t=p("div"),s=p("div"),a=p("h3"),n=O("Task Details: "),o=O(i),d=I(),c=p("div"),h=p("button"),h.textContent=E,m=I(),_=p("button"),_.textContent=b,S=I(),w=p("div"),N=p("pre"),D=O(M),this.h()},l(k){e=v(k,"DIV",{class:!0});var C=g(e);t=v(C,"DIV",{class:!0});var y=g(t);s=v(y,"DIV",{class:!0});var T=g(s);a=v(T,"H3",{class:!0});var V=g(a);n=P(V,"Task Details: "),o=P(V,i),V.forEach(u),d=A(T),c=v(T,"DIV",{class:!0});var U=g(c);h=v(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-ow2fgq"&&(h.textContent=E),m=A(U),_=v(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-1c8ib3"&&(_.textContent=b),U.forEach(u),T.forEach(u),S=A(y),w=v(y,"DIV",{class:!0});var q=g(w);N=v(q,"PRE",{class:!0});var G=g(N);D=P(G,M),G.forEach(u),q.forEach(u),y.forEach(u),C.forEach(u),this.h()},h(){f(a,"class","font-semibold text-gray-900 dark:text-white"),f(h,"class","px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"),f(_,"class","w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400"),f(c,"class","flex items-center gap-2"),f(s,"class","p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"),f(N,"class","text-xs font-mono bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-x-auto text-gray-800 dark:text-gray-200"),f(w,"class","flex-1 overflow-y-auto p-4"),f(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[80vh] flex flex-col"),f(e,"class","fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4")},m(k,C){R(k,e,C),r(e,t),r(t,s),r(s,a),r(a,n),r(a,o),r(s,d),r(s,c),r(c,h),r(c,m),r(c,_),r(t,S),r(t,w),r(w,N),r(N,D),x||(L=[ae(h,"click",l[33]),ae(_,"click",l[10]),ae(t,"click",zt(l[17])),ae(e,"click",l[10])],x=!0)},p(k,C){C[0]&32&&i!==(i=k[5].summary+"")&&F(o,i),C[0]&32&&M!==(M=JSON.stringify(k[5].events,null,2)+"")&&F(D,M)},d(k){k&&u(e),x=!1,Xe(L)}}}function Ss(l){let e,t,s,a,n="Audit Stream",i,o,d,c,h,E,m,_,b,S="¬∑",w,N,M=l[8].length+"",D,x,L,k,C,y,T,V,U,q,G,z,Q,te,he,re,ee,ue,le,fe,Z,B,_e="Clear",j,H,X,J=[],me=new Map,we,ve,K,se,pe,be,Ee,ie=l[8].length===0&&_l(l),$=Ne(l[8].slice().reverse());const oe=Y=>Y[40].id;for(let Y=0;Y<$.length;Y+=1){let de=pl(l,$,Y),Se=oe(de);me.set(Se,J[Y]=yl(Se,de))}let ye=l[7]&&wl(l),ge=l[6]&&l[5]&&El(l);return{c(){e=p("div"),t=p("div"),s=p("div"),a=p("h3"),a.textContent=n,i=I(),o=p("div"),d=p("div"),h=I(),E=p("span"),m=O(l[3]),_=I(),b=p("span"),b.textContent=S,w=I(),N=p("span"),D=O(M),x=I(),L=p("div"),k=p("button"),C=O("All"),T=I(),V=p("button"),U=O("Err"),G=I(),z=p("button"),Q=O("Warn"),he=I(),re=p("button"),ee=O("Info"),le=I(),fe=p("div"),Z=I(),B=p("button"),B.textContent=_e,j=I(),H=p("div"),ie&&ie.c(),X=I();for(let Y=0;Y<J.length;Y+=1)J[Y].c();we=I(),ve=p("div"),K=I(),ye&&ye.c(),se=I(),ge&&ge.c(),pe=Qe(),this.h()},l(Y){e=v(Y,"DIV",{class:!0});var de=g(e);t=v(de,"DIV",{class:!0});var Se=g(t);s=v(Se,"DIV",{class:!0});var Ae=g(s);a=v(Ae,"H3",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-1fw6ukb"&&(a.textContent=n),i=A(Ae),o=v(Ae,"DIV",{class:!0});var Ce=g(o);d=v(Ce,"DIV",{class:!0}),g(d).forEach(u),h=A(Ce),E=v(Ce,"SPAN",{class:!0});var Be=g(E);m=P(Be,l[3]),Be.forEach(u),_=A(Ce),b=v(Ce,"SPAN",{class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-11iodl2"&&(b.textContent=S),w=A(Ce),N=v(Ce,"SPAN",{class:!0});var lt=g(N);D=P(lt,M),lt.forEach(u),Ce.forEach(u),Ae.forEach(u),x=A(Se),L=v(Se,"DIV",{class:!0});var Ve=g(L);k=v(Ve,"BUTTON",{class:!0});var He=g(k);C=P(He,"All"),He.forEach(u),T=A(Ve),V=v(Ve,"BUTTON",{class:!0});var dt=g(V);U=P(dt,"Err"),dt.forEach(u),G=A(Ve),z=v(Ve,"BUTTON",{class:!0});var st=g(z);Q=P(st,"Warn"),st.forEach(u),he=A(Ve),re=v(Ve,"BUTTON",{class:!0});var Je=g(re);ee=P(Je,"Info"),Je.forEach(u),le=A(Ve),fe=v(Ve,"DIV",{class:!0}),g(fe).forEach(u),Z=A(Ve),B=v(Ve,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),ne(B)!=="svelte-jl9lpm"&&(B.textContent=_e),Ve.forEach(u),Se.forEach(u),j=A(de),H=v(de,"DIV",{class:!0});var je=g(H);ie&&ie.l(je),X=A(je);for(let Ke=0;Ke<J.length;Ke+=1)J[Ke].l(je);we=A(je),ve=v(je,"DIV",{style:!0}),g(ve).forEach(u),je.forEach(u),de.forEach(u),K=A(Y),ye&&ye.l(Y),se=A(Y),ge&&ge.l(Y),pe=Qe(),this.h()},h(){f(a,"class","font-semibold text-gray-900 dark:text-white text-sm"),f(d,"class",c="w-2 h-2 rounded-full "+(l[3]==="Connected"?"bg-green-500":"bg-yellow-500")),f(E,"class","text-xs text-gray-500 dark:text-gray-400"),f(b,"class","text-xs text-gray-500 dark:text-gray-400"),f(N,"class","text-xs text-gray-500 dark:text-gray-400"),f(o,"class","flex items-center gap-2"),f(s,"class","flex justify-between items-center mb-2"),f(k,"class",y="filter-pill "+(l[2]==="all"?"active":"")+" svelte-1z1rly"),f(V,"class",q="filter-pill error "+(l[2]==="error"||l[2]==="critical"?"active":"")+" svelte-1z1rly"),f(z,"class",te="filter-pill warn "+(l[2]==="warn"?"active":"")+" svelte-1z1rly"),f(re,"class",ue="filter-pill info "+(l[2]==="info"?"active":"")+" svelte-1z1rly"),f(fe,"class","flex-1"),f(B,"class","filter-pill svelte-1z1rly"),f(B,"title","Clear all messages"),f(L,"class","flex gap-1 flex-wrap"),f(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),ze(ve,"height","1px"),f(H,"class","flex-1 overflow-y-auto min-h-0"),f(e,"class","audit-stream-container h-full flex flex-col bg-white dark:bg-gray-900 svelte-1z1rly")},m(Y,de){R(Y,e,de),r(e,t),r(t,s),r(s,a),r(s,i),r(s,o),r(o,d),r(o,h),r(o,E),r(E,m),r(o,_),r(o,b),r(o,w),r(o,N),r(N,D),r(t,x),r(t,L),r(L,k),r(k,C),r(L,T),r(L,V),r(V,U),r(L,G),r(L,z),r(z,Q),r(L,he),r(L,re),r(re,ee),r(L,le),r(L,fe),r(L,Z),r(L,B),r(e,j),r(e,H),ie&&ie.m(H,null),r(H,X);for(let Se=0;Se<J.length;Se+=1)J[Se]&&J[Se].m(H,null);r(H,we),r(H,ve),l[26](ve),l[27](H),R(Y,K,de),ye&&ye.m(Y,de),R(Y,se,de),ge&&ge.m(Y,de),R(Y,pe,de),be||(Ee=[ae(k,"click",l[19]),ae(V,"click",l[20]),ae(z,"click",l[21]),ae(re,"click",l[22]),ae(B,"click",l[0]),ae(e,"click",l[12])],be=!0)},p(Y,de){de[0]&8&&c!==(c="w-2 h-2 rounded-full "+(Y[3]==="Connected"?"bg-green-500":"bg-yellow-500"))&&f(d,"class",c),de[0]&8&&F(m,Y[3]),de[0]&256&&M!==(M=Y[8].length+"")&&F(D,M),de[0]&4&&y!==(y="filter-pill "+(Y[2]==="all"?"active":"")+" svelte-1z1rly")&&f(k,"class",y),de[0]&4&&q!==(q="filter-pill error "+(Y[2]==="error"||Y[2]==="critical"?"active":"")+" svelte-1z1rly")&&f(V,"class",q),de[0]&4&&te!==(te="filter-pill warn "+(Y[2]==="warn"?"active":"")+" svelte-1z1rly")&&f(z,"class",te),de[0]&4&&ue!==(ue="filter-pill info "+(Y[2]==="info"?"active":"")+" svelte-1z1rly")&&f(re,"class",ue),Y[8].length===0?ie?ie.p(Y,de):(ie=_l(Y),ie.c(),ie.m(H,X)):ie&&(ie.d(1),ie=null),de[0]&2816&&($=Ne(Y[8].slice().reverse()),J=Ft(J,de,oe,1,Y,$,me,H,qt,yl,we,pl)),Y[7]?ye?ye.p(Y,de):(ye=wl(Y),ye.c(),ye.m(se.parentNode,se)):ye&&(ye.d(1),ye=null),Y[6]&&Y[5]?ge?ge.p(Y,de):(ge=El(Y),ge.c(),ge.m(pe.parentNode,pe)):ge&&(ge.d(1),ge=null)},i:Me,o:Me,d(Y){Y&&(u(e),u(K),u(se),u(pe)),ie&&ie.d();for(let de=0;de<J.length;de+=1)J[de].d();l[26](null),l[27](null),ye&&ye.d(Y),ge&&ge.d(Y),be=!1,Xe(Ee)}}}const Sl=200;function Cl(l){return{timestamp:l.timestamp||new Date().toISOString(),level:l.level||"info",category:l.category||"system",event:l.event||l.message||"unknown",actor:l.actor||"system",details:l.details||l.metadata||l.data}}function Cs(l){return l.details?.taskId?l.details.taskId:l.details?.conversationId?l.details.conversationId:l.details?.sessionId?l.details.sessionId:l.details?.agentId?l.details.agentId:`${l.event}_${l.actor}`}function Ds(l){if(l.length===0)return"Empty group";const e=l[0],t=e.details?.skill||e.details?.toolName,s=e.details?.mode||e.details?.cognitiveMode;return e.details?.username||e.details?.userId,e.event.includes("react_")||e.event.includes("operator")?t?`Operator: ${t}`:"Operator task":e.event.includes("lora")||e.event.includes("adapter")?`LoRA: ${e.event.replace(/_/g," ")}`:e.event.includes("agent")?`Agent: ${e.details?.agent||e.actor}`:e.event.includes("memory")||e.event.includes("context")?s?`Memory (${s})`:"Memory operation":e.event.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}function Dl(l){const e=l[l.length-1];return e.level==="error"||e.level==="critical"||e.event.includes("failed")||e.event.includes("error")?"failed":e.event.includes("completed")||e.event.includes("finished")||e.event.includes("success")?"completed":"in_progress"}function kt(l){switch(l){case"info":return"text-blue-600 dark:text-blue-400";case"warn":return"text-yellow-600 dark:text-yellow-400";case"error":return"text-red-600 dark:text-red-400";case"critical":return"text-red-800 dark:text-red-300 font-bold";default:return"text-gray-600 dark:text-gray-400"}}function Al(l){switch(l){case"system":return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-200";case"decision":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-200";case"action":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200";case"security":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200";case"data":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}function Il(l){switch(l){case"completed":return"‚úì";case"failed":return"‚úó";case"in_progress":return"‚ü≥";default:return"‚óã"}}function Nl(l){switch(l){case"completed":return"text-green-600 dark:text-green-400";case"failed":return"text-red-600 dark:text-red-400";case"in_progress":return"text-blue-600 dark:text-blue-400";default:return"text-gray-600 dark:text-gray-400"}}function As(l){navigator.clipboard.writeText(JSON.stringify(l.events,null,2)),alert("Copied to clipboard!")}function Is(l){const e=`[${new Date(l.timestamp).toLocaleTimeString()}] ${l.event} by ${l.actor}`;navigator.clipboard.writeText(e)}function Ut(l,e){const t=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e,a.click(),URL.revokeObjectURL(s)}function Ns(l,e,t){let s,a;$t(l,hs,j=>t(16,a=j));let n=[],i="Connecting...",o,d=!0,c,h=null,E=null,m=null,_=!1,b="all",S=null;function w(j){const H=Cs(j),X=n.find(J=>J.taskId===H);if(X)X.events.push(j),X.lastTimestamp=j.timestamp,X.count=X.events.length,X.status=Dl(X.events),X.level=Math.max(X.level==="critical"?4:X.level==="error"?3:X.level==="warn"?2:1,j.level==="critical"?4:j.level==="error"?3:j.level==="warn"?2:1)===4?"critical":Math.max(X.level==="critical"?4:X.level==="error"?3:X.level==="warn"?2:1,j.level==="critical"?4:j.level==="error"?3:j.level==="warn"?2:1)===3?"error":Math.max(X.level==="critical"?4:X.level==="error"?3:X.level==="warn"?2:1,j.level==="critical"?4:j.level==="error"?3:j.level==="warn"?2:1)===2?"warn":"info",t(14,n=[...n.filter(J=>J.taskId!==H),X]);else{const J={id:`group-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,taskId:H,summary:Ds([j]),status:Dl([j]),category:j.category,level:j.level,events:[j],firstTimestamp:j.timestamp,lastTimestamp:j.timestamp,count:1,expanded:!1};t(14,n=[...n,J])}n.length>Sl&&t(14,n=n.slice(-Sl))}tt(()=>{o&&c&&(h=new IntersectionObserver(j=>{const H=j[0];t(15,d=H.isIntersecting)},{root:o,threshold:.99}),h.observe(c)),E=new EventSource("/api/monitor/stream"),E.onopen=()=>{t(3,i="Connected")},E.onmessage=j=>{try{const H=JSON.parse(j.data);H.type==="connected"?w(Cl({timestamp:new Date().toISOString(),level:"info",category:"system",event:"stream_connected",actor:"system"})):w(Cl(H))}catch(H){console.error("Failed to parse audit event:",H)}},E.onerror=()=>{t(3,i="Disconnected. Reconnecting...")}}),tt(()=>{window.addEventListener("keydown",C)}),yt(()=>{E?.close(),h?.disconnect(),h=null,window.removeEventListener("keydown",C)});function N(j){j.expanded=!j.expanded,t(14,n=[...n])}function M(){t(6,_=!1)}function D(){const j=s.map(H=>H.events.map(X=>`[${new Date(X.timestamp).toLocaleTimeString()}] ${X.event} by ${X.actor}`).join(`
`)).join(`
---
`);navigator.clipboard.writeText(j)}function x(j,H,X){j.preventDefault(),t(7,S={x:j.clientX,y:j.clientY,group:H,event:X})}function L(){t(7,S=null)}function k(j){if(!S)return;const{group:H,event:X}=S;switch(j){case"copy-message":if(X)Is(X);else if(H){const J=H.events.map(me=>`[${new Date(me.timestamp).toLocaleTimeString()}] ${me.event} by ${me.actor}`).join(`
`);navigator.clipboard.writeText(J)}break;case"copy-all":D();break;case"save-json":X?Ut(X,`audit-event-${Date.now()}.json`):H&&Ut(H.events,`audit-group-${Date.now()}.json`);break;case"save-all-json":Ut(s.flatMap(J=>J.events),`audit-all-${Date.now()}.json`);break;case"clear":y();break}L()}function C(j){j.key==="Escape"&&S&&L()}function y(){t(14,n=[])}function T(j){Bt.call(this,l,j)}function V(j){Bt.call(this,l,j)}const U=()=>t(2,b="all"),q=()=>t(2,b=b==="error"?"all":"error"),G=()=>t(2,b=b==="warn"?"all":"warn"),z=()=>t(2,b=b==="info"?"all":"info"),Q=j=>N(j),te=(j,H)=>x(H,j),he=(j,H,X)=>x(X,j,H);function re(j){bt[j?"unshift":"push"](()=>{c=j,t(1,c)})}function ee(j){bt[j?"unshift":"push"](()=>{o=j,t(4,o)})}const ue=()=>k("copy-message"),le=()=>k("copy-all"),fe=()=>k("save-json"),Z=()=>k("save-all-json"),B=()=>k("clear"),_e=()=>As(m);return l.$$.update=()=>{l.$$.dirty[0]&16388&&t(8,s=n.filter(j=>!(b!=="all"&&j.level!==b))),l.$$.dirty[0]&65536&&a>0&&y(),l.$$.dirty[0]&49154&&n.length>0&&d&&c&&requestAnimationFrame(()=>{c?.scrollIntoView({block:"end",inline:"nearest",behavior:"smooth"})})},[y,c,b,i,o,m,_,S,s,N,M,x,L,k,n,d,a,T,V,U,q,G,z,Q,te,he,re,ee,ue,le,fe,Z,B,_e]}class Ts extends ft{constructor(e){super(),vt(this,e,Ns,Ss,pt,{clear:0},null,[-1,-1])}get clear(){return this.$$.ctx[0]}}function Tl(l,e,t){const s=l.slice();s[19]=e[t];const a=s[3].has(s[19].name);return s[20]=a,s}function Vl(l,e,t){const s=l.slice();return s[23]=e[t],s}function Pl(l,e,t){const s=l.slice();return s[28]=e[t],s[30]=t,s}function Rt(l){const e=l.slice(),t=js(e[19]);e[26]=t;const s=Math.max(...e[26],1);return e[27]=s,e}function Ol(l){let e,t,s=l[6].status==="awake"?"‚òÄÔ∏è":l[6].status==="sleeping"?"üò¥":"üåô",a,n,i,o=l[6].status==="awake"?"Awake":l[6].status==="sleeping"?"Sleeping":"Dreaming",d;return{c(){e=p("div"),t=p("span"),a=O(s),n=I(),i=p("span"),d=O(o),this.h()},l(c){e=v(c,"DIV",{class:!0});var h=g(e);t=v(h,"SPAN",{class:!0});var E=g(t);a=P(E,s),E.forEach(u),n=A(h),i=v(h,"SPAN",{class:!0});var m=g(i);d=P(m,o),m.forEach(u),h.forEach(u),this.h()},h(){f(t,"class","text-sm leading-none"),f(i,"class","text-gray-500 dark:text-gray-400 whitespace-nowrap"),f(e,"class","flex items-center gap-1.5 text-[0.7rem] font-medium px-2 py-1 rounded-md bg-black/[0.03] dark:bg-white/[0.03]")},m(c,h){R(c,e,h),r(e,t),r(t,a),r(e,n),r(e,i),r(i,d)},p(c,h){h&64&&s!==(s=c[6].status==="awake"?"‚òÄÔ∏è":c[6].status==="sleeping"?"üò¥":"üåô")&&F(a,s),h&64&&o!==(o=c[6].status==="awake"?"Awake":c[6].status==="sleeping"?"Sleeping":"Dreaming")&&F(d,o)},d(c){c&&u(e)}}}function Ll(l){let e,t=l[5].text+"",s;return{c(){e=p("div"),s=O(t),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);s=P(n,t),n.forEach(u),this.h()},h(){f(e,"class","text-[0.7rem] px-2 py-1.5 rounded-md transition-all"),W(e,"bg-green-600",l[5].type==="success"),W(e,"text-white",l[5].type==="success"),W(e,"bg-red-600",l[5].type==="error")},m(a,n){R(a,e,n),r(e,s)},p(a,n){n&32&&t!==(t=a[5].text+"")&&F(s,t),n&32&&W(e,"bg-green-600",a[5].type==="success"),n&32&&W(e,"text-white",a[5].type==="success"),n&32&&W(e,"bg-red-600",a[5].type==="error")},d(a){a&&u(e)}}}function Vs(l){let e,t=Ne(l[1]),s=[];for(let a=0;a<t.length;a+=1)s[a]=Jl(Tl(l,t,a));return{c(){e=p("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);for(let i=0;i<s.length;i+=1)s[i].l(n);n.forEach(u),this.h()},h(){f(e,"class","flex flex-col gap-3 overflow-y-auto")},m(a,n){R(a,e,n);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(a,n){if(n&1931){t=Ne(a[1]);let i;for(i=0;i<t.length;i+=1){const o=Tl(a,t,i);s[i]?s[i].p(o,n):(s[i]=Jl(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(a){a&&u(e),ut(s,a)}}}function Ps(l){let e,t="No agents available";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-si3rfs"&&(e.textContent=t),this.h()},h(){f(e,"class","py-8 px-4 text-center text-gray-500 dark:text-gray-400 text-sm")},m(s,a){R(s,e,a)},p:Me,d(s){s&&u(e)}}}function Os(l){let e,t=l[19].status==="error"?"‚ö†":l[19].status==="running"?Fe(l[19])?"‚èπ":"‚è∏":"‚ñ∂",s,a,n,i;function o(){return l[15](l[19])}return{c(){e=p("button"),s=O(t),this.h()},l(d){e=v(d,"BUTTON",{class:!0,title:!0});var c=g(e);s=P(c,t),c.forEach(u),this.h()},h(){f(e,"class","agent-action-btn"),f(e,"title",a=l[19].status==="error"?"Error - click to retry":l[19].status==="running"?"Running - click to stop":"Stopped - click to start"),W(e,"running",l[19].status==="running"),W(e,"error",l[19].status==="error"),W(e,"active",Fe(l[19]))},m(d,c){R(d,e,c),r(e,s),n||(i=ae(e,"click",o),n=!0)},p(d,c){l=d,c&2&&t!==(t=l[19].status==="error"?"‚ö†":l[19].status==="running"?Fe(l[19])?"‚èπ":"‚è∏":"‚ñ∂")&&F(s,t),c&2&&a!==(a=l[19].status==="error"?"Error - click to retry":l[19].status==="running"?"Running - click to stop":"Stopped - click to start")&&f(e,"title",a),c&2&&W(e,"running",l[19].status==="running"),c&2&&W(e,"error",l[19].status==="error"),c&2&&W(e,"active",Fe(l[19]))},d(d){d&&u(e),n=!1,i()}}}function Ls(l){let e,t=l[19].status==="error"?"‚ö†":l[19].status==="running"?Fe(l[19])?"‚óè":"‚è∏":"‚óã",s;return{c(){e=p("span"),s=O(t),this.h()},l(a){e=v(a,"SPAN",{class:!0,title:!0});var n=g(e);s=P(n,t),n.forEach(u),this.h()},h(){f(e,"class","agent-action-btn"),f(e,"title","Service (managed by 'mh start')"),W(e,"running",l[19].status==="running"),W(e,"error",l[19].status==="error"),W(e,"active",Fe(l[19]))},m(a,n){R(a,e,n),r(e,s)},p(a,n){n&2&&t!==(t=a[19].status==="error"?"‚ö†":a[19].status==="running"?Fe(a[19])?"‚óè":"‚è∏":"‚óã")&&F(s,t),n&2&&W(e,"running",a[19].status==="running"),n&2&&W(e,"error",a[19].status==="error"),n&2&&W(e,"active",Fe(a[19]))},d(a){a&&u(e)}}}function Ml(l){let e,t=l[8](l[19].name)+"",s,a,n,i=l[9](l[19].name)+"",o,d,c,h,E,m,_,b="Recent (5m):",S,w,N=l[19].metrics.recentActivity.last5m+"",M,D,x=qe(l[19].name)?"triggers":"runs",L,k,C,y,T="Last Hour:",V,U,q=l[19].metrics.recentActivity.last1h+"",G,z,Q=qe(l[19].name)?"triggers":"runs",te,he,re,ee,ue="Today:",le,fe,Z=l[19].metrics.recentActivity.today+"",B,_e,j=qe(l[19].name)?"triggers":"runs",H,X,J=!qe(l[19].name)&&l[19].metrics.totalRuns>0,me,we=!qe(l[19].name)&&l[19].metrics.failedRuns>0,ve,K,se=!l[0]&&xl(l),pe=!l[0]&&Rl(Rt(l)),be=J&&$l(l),Ee=we&&zl(l),ie=!l[0]&&l[19].errors.length>0&&Fl(l);return{c(){e=p("div"),s=O(t),a=I(),n=p("div"),o=O(i),d=I(),se&&se.c(),c=I(),pe&&pe.c(),h=I(),E=p("div"),m=p("div"),_=p("span"),_.textContent=b,S=I(),w=p("span"),M=O(N),D=I(),L=O(x),k=I(),C=p("div"),y=p("span"),y.textContent=T,V=I(),U=p("span"),G=O(q),z=I(),te=O(Q),he=I(),re=p("div"),ee=p("span"),ee.textContent=ue,le=I(),fe=p("span"),B=O(Z),_e=I(),H=O(j),X=I(),be&&be.c(),me=I(),Ee&&Ee.c(),ve=I(),ie&&ie.c(),K=Qe(),this.h()},l($){e=v($,"DIV",{class:!0});var oe=g(e);s=P(oe,t),oe.forEach(u),a=A($),n=v($,"DIV",{class:!0});var ye=g(n);o=P(ye,i),ye.forEach(u),d=A($),se&&se.l($),c=A($),pe&&pe.l($),h=A($),E=v($,"DIV",{class:!0});var ge=g(E);m=v(ge,"DIV",{class:!0});var Y=g(m);_=v(Y,"SPAN",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-15rjn7m"&&(_.textContent=b),S=A(Y),w=v(Y,"SPAN",{class:!0});var de=g(w);M=P(de,N),D=A(de),L=P(de,x),de.forEach(u),Y.forEach(u),k=A(ge),C=v(ge,"DIV",{class:!0});var Se=g(C);y=v(Se,"SPAN",{class:!0,"data-svelte-h":!0}),ne(y)!=="svelte-lqds8s"&&(y.textContent=T),V=A(Se),U=v(Se,"SPAN",{class:!0});var Ae=g(U);G=P(Ae,q),z=A(Ae),te=P(Ae,Q),Ae.forEach(u),Se.forEach(u),he=A(ge),re=v(ge,"DIV",{class:!0});var Ce=g(re);ee=v(Ce,"SPAN",{class:!0,"data-svelte-h":!0}),ne(ee)!=="svelte-zo9jsb"&&(ee.textContent=ue),le=A(Ce),fe=v(Ce,"SPAN",{class:!0});var Be=g(fe);B=P(Be,Z),_e=A(Be),H=P(Be,j),Be.forEach(u),Ce.forEach(u),X=A(ge),be&&be.l(ge),ge.forEach(u),me=A($),Ee&&Ee.l($),ve=A($),ie&&ie.l($),K=Qe(),this.h()},h(){f(e,"class","text-xs font-semibold text-violet-600 dark:text-violet-400 uppercase tracking-wide mb-2 py-1"),f(n,"class","text-xs leading-relaxed text-gray-500 dark:text-gray-400 px-3 py-2 mb-3 rounded-md border-l-2 border-violet-600/30 dark:border-violet-400/40 bg-black/[0.02] dark:bg-white/[0.02]"),f(_,"class","text-gray-500 dark:text-gray-400"),f(w,"class","font-semibold text-gray-900 dark:text-gray-100"),f(m,"class","flex justify-between"),f(y,"class","text-gray-500 dark:text-gray-400"),f(U,"class","font-semibold text-gray-900 dark:text-gray-100"),f(C,"class","flex justify-between"),f(ee,"class","text-gray-500 dark:text-gray-400"),f(fe,"class","font-semibold text-gray-900 dark:text-gray-100"),f(re,"class","flex justify-between"),f(E,"class","grid grid-cols-2 gap-2 text-xs")},m($,oe){R($,e,oe),r(e,s),R($,a,oe),R($,n,oe),r(n,o),R($,d,oe),se&&se.m($,oe),R($,c,oe),pe&&pe.m($,oe),R($,h,oe),R($,E,oe),r(E,m),r(m,_),r(m,S),r(m,w),r(w,M),r(w,D),r(w,L),r(E,k),r(E,C),r(C,y),r(C,V),r(C,U),r(U,G),r(U,z),r(U,te),r(E,he),r(E,re),r(re,ee),r(re,le),r(re,fe),r(fe,B),r(fe,_e),r(fe,H),r(E,X),be&&be.m(E,null),R($,me,oe),Ee&&Ee.m($,oe),R($,ve,oe),ie&&ie.m($,oe),R($,K,oe)},p($,oe){oe&2&&t!==(t=$[8]($[19].name)+"")&&F(s,t),oe&2&&i!==(i=$[9]($[19].name)+"")&&F(o,i),$[0]?se&&(se.d(1),se=null):se?se.p($,oe):(se=xl($),se.c(),se.m(c.parentNode,c)),$[0]?pe&&(pe.d(1),pe=null):pe?pe.p(Rt($),oe):(pe=Rl(Rt($)),pe.c(),pe.m(h.parentNode,h)),oe&2&&N!==(N=$[19].metrics.recentActivity.last5m+"")&&F(M,N),oe&2&&x!==(x=qe($[19].name)?"triggers":"runs")&&F(L,x),oe&2&&q!==(q=$[19].metrics.recentActivity.last1h+"")&&F(G,q),oe&2&&Q!==(Q=qe($[19].name)?"triggers":"runs")&&F(te,Q),oe&2&&Z!==(Z=$[19].metrics.recentActivity.today+"")&&F(B,Z),oe&2&&j!==(j=qe($[19].name)?"triggers":"runs")&&F(H,j),oe&2&&(J=!qe($[19].name)&&$[19].metrics.totalRuns>0),J?be?be.p($,oe):(be=$l($),be.c(),be.m(E,null)):be&&(be.d(1),be=null),oe&2&&(we=!qe($[19].name)&&$[19].metrics.failedRuns>0),we?Ee?Ee.p($,oe):(Ee=zl($),Ee.c(),Ee.m(ve.parentNode,ve)):Ee&&(Ee.d(1),Ee=null),!$[0]&&$[19].errors.length>0?ie?ie.p($,oe):(ie=Fl($),ie.c(),ie.m(K.parentNode,K)):ie&&(ie.d(1),ie=null)},d($){$&&(u(e),u(a),u(n),u(d),u(c),u(h),u(E),u(me),u(ve),u(K)),se&&se.d($),pe&&pe.d($),be&&be.d(),Ee&&Ee.d($),ie&&ie.d($)}}}function xl(l){let e,t,s,a="Status:",n,i,o=l[19].status+"",d,c,h,E,m,_,b="Last Activity:",S,w,N=Gl(l[19].lastActivity)+"",M,D=l[19].pid&&jl(l),x=l[19].uptime&&Ul(l);return{c(){e=p("div"),t=p("div"),s=p("span"),s.textContent=a,n=I(),i=p("span"),d=O(o),c=I(),D&&D.c(),h=I(),x&&x.c(),E=I(),m=p("div"),_=p("span"),_.textContent=b,S=I(),w=p("span"),M=O(N),this.h()},l(L){e=v(L,"DIV",{class:!0});var k=g(e);t=v(k,"DIV",{class:!0});var C=g(t);s=v(C,"SPAN",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-4eyvup"&&(s.textContent=a),n=A(C),i=v(C,"SPAN",{class:!0});var y=g(i);d=P(y,o),y.forEach(u),C.forEach(u),c=A(k),D&&D.l(k),h=A(k),x&&x.l(k),E=A(k),m=v(k,"DIV",{class:!0});var T=g(m);_=v(T,"SPAN",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-klo55i"&&(_.textContent=b),S=A(T),w=v(T,"SPAN",{class:!0});var V=g(w);M=P(V,N),V.forEach(u),T.forEach(u),k.forEach(u),this.h()},h(){f(s,"class","text-gray-500 dark:text-gray-400 font-medium"),f(i,"class","font-semibold"),W(i,"text-green-600",l[19].status==="running"),W(i,"dark:text-green-300",l[19].status==="running"),W(i,"text-red-600",l[19].status==="error"),W(i,"dark:text-red-300",l[19].status==="error"),f(t,"class","flex justify-between text-xs"),f(_,"class","text-gray-500 dark:text-gray-400 font-medium"),f(w,"class","font-semibold text-gray-900 dark:text-gray-100"),f(m,"class","flex justify-between text-xs"),f(e,"class","flex flex-col gap-1 mb-2 p-2 rounded-md bg-black/[0.03] dark:bg-white/[0.03]")},m(L,k){R(L,e,k),r(e,t),r(t,s),r(t,n),r(t,i),r(i,d),r(e,c),D&&D.m(e,null),r(e,h),x&&x.m(e,null),r(e,E),r(e,m),r(m,_),r(m,S),r(m,w),r(w,M)},p(L,k){k&2&&o!==(o=L[19].status+"")&&F(d,o),k&2&&W(i,"text-green-600",L[19].status==="running"),k&2&&W(i,"dark:text-green-300",L[19].status==="running"),k&2&&W(i,"text-red-600",L[19].status==="error"),k&2&&W(i,"dark:text-red-300",L[19].status==="error"),L[19].pid?D?D.p(L,k):(D=jl(L),D.c(),D.m(e,h)):D&&(D.d(1),D=null),L[19].uptime?x?x.p(L,k):(x=Ul(L),x.c(),x.m(e,E)):x&&(x.d(1),x=null),k&2&&N!==(N=Gl(L[19].lastActivity)+"")&&F(M,N)},d(L){L&&u(e),D&&D.d(),x&&x.d()}}}function jl(l){let e,t,s="PID:",a,n,i=l[19].pid+"",o;return{c(){e=p("div"),t=p("span"),t.textContent=s,a=I(),n=p("span"),o=O(i),this.h()},l(d){e=v(d,"DIV",{class:!0});var c=g(e);t=v(c,"SPAN",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1rpsp0a"&&(t.textContent=s),a=A(c),n=v(c,"SPAN",{class:!0});var h=g(n);o=P(h,i),h.forEach(u),c.forEach(u),this.h()},h(){f(t,"class","text-gray-500 dark:text-gray-400 font-medium"),f(n,"class","font-semibold text-gray-900 dark:text-gray-100"),f(e,"class","flex justify-between text-xs")},m(d,c){R(d,e,c),r(e,t),r(e,a),r(e,n),r(n,o)},p(d,c){c&2&&i!==(i=d[19].pid+"")&&F(o,i)},d(d){d&&u(e)}}}function Ul(l){let e,t,s="Uptime:",a,n,i=Hl(l[19].uptime)+"",o;return{c(){e=p("div"),t=p("span"),t.textContent=s,a=I(),n=p("span"),o=O(i),this.h()},l(d){e=v(d,"DIV",{class:!0});var c=g(e);t=v(c,"SPAN",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-11ycjh3"&&(t.textContent=s),a=A(c),n=v(c,"SPAN",{class:!0});var h=g(n);o=P(h,i),h.forEach(u),c.forEach(u),this.h()},h(){f(t,"class","text-gray-500 dark:text-gray-400 font-medium"),f(n,"class","font-semibold text-gray-900 dark:text-gray-100"),f(e,"class","flex justify-between text-xs")},m(d,c){R(d,e,c),r(e,t),r(e,a),r(e,n),r(n,o)},p(d,c){c&2&&i!==(i=Hl(d[19].uptime)+"")&&F(o,i)},d(d){d&&u(e)}}}function Rl(l){let e,t,s,a="Activity (last hour)",n,i,o=l[19].metrics.recentActivity.last1h+"",d,c,h,E,m=Ne(l[26]),_=[];for(let b=0;b<m.length;b+=1)_[b]=Bl(Pl(l,m,b));return{c(){e=p("div"),t=p("div"),s=p("span"),s.textContent=a,n=I(),i=p("span"),d=O(o),c=O(" runs"),h=I(),E=p("div");for(let b=0;b<_.length;b+=1)_[b].c();this.h()},l(b){e=v(b,"DIV",{class:!0});var S=g(e);t=v(S,"DIV",{class:!0});var w=g(t);s=v(w,"SPAN",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-ulfr0"&&(s.textContent=a),n=A(w),i=v(w,"SPAN",{class:!0});var N=g(i);d=P(N,o),c=P(N," runs"),N.forEach(u),w.forEach(u),h=A(S),E=v(S,"DIV",{class:!0});var M=g(E);for(let D=0;D<_.length;D+=1)_[D].l(M);M.forEach(u),S.forEach(u),this.h()},h(){f(s,"class","text-[0.7rem] font-semibold text-gray-500 dark:text-gray-400"),f(i,"class","text-[0.7rem] font-medium text-violet-600 dark:text-violet-400"),f(t,"class","flex justify-between items-center mb-2"),f(E,"class","agent-sparkline"),f(e,"class","mt-3 p-3 rounded-md border bg-black/[0.02] dark:bg-white/[0.02] border-black/[0.05] dark:border-white/[0.05]")},m(b,S){R(b,e,S),r(e,t),r(t,s),r(t,n),r(t,i),r(i,d),r(i,c),r(e,h),r(e,E);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(E,null)},p(b,S){if(S&2&&o!==(o=b[19].metrics.recentActivity.last1h+"")&&F(d,o),S&2){m=Ne(b[26]);let w;for(w=0;w<m.length;w+=1){const N=Pl(b,m,w);_[w]?_[w].p(N,S):(_[w]=Bl(N),_[w].c(),_[w].m(E,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}},d(b){b&&u(e),ut(_,b)}}}function Bl(l){let e,t;return{c(){e=p("div"),this.h()},l(s){e=v(s,"DIV",{class:!0,style:!0,title:!0}),g(e).forEach(u),this.h()},h(){f(e,"class","agent-sparkline-bar"),ze(e,"height",(l[28]>0?l[28]/l[27]*100:2)+"%"),f(e,"title",t=l[28]+" runs ("+(60-(11-l[30])*5)+"m ago)"),W(e,"active",l[30]===l[26].length-1&&l[28]>0)},m(s,a){R(s,e,a)},p(s,a){a&2&&ze(e,"height",(s[28]>0?s[28]/s[27]*100:2)+"%"),a&2&&t!==(t=s[28]+" runs ("+(60-(11-s[30])*5)+"m ago)")&&f(e,"title",t),a&2&&W(e,"active",s[30]===s[26].length-1&&s[28]>0)},d(s){s&&u(e)}}}function $l(l){let e,t,s="Lifetime:",a,n,i=l[19].metrics.totalRuns+"",o,d;return{c(){e=p("div"),t=p("span"),t.textContent=s,a=I(),n=p("span"),o=O(i),d=O(" runs"),this.h()},l(c){e=v(c,"DIV",{class:!0});var h=g(e);t=v(h,"SPAN",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-wt30gr"&&(t.textContent=s),a=A(h),n=v(h,"SPAN",{class:!0});var E=g(n);o=P(E,i),d=P(E," runs"),E.forEach(u),h.forEach(u),this.h()},h(){f(t,"class","text-gray-500 dark:text-gray-400"),f(n,"class","font-semibold text-gray-900 dark:text-gray-100"),f(e,"class","flex justify-between")},m(c,h){R(c,e,h),r(e,t),r(e,a),r(e,n),r(n,o),r(n,d)},p(c,h){h&2&&i!==(i=c[19].metrics.totalRuns+"")&&F(o,i)},d(c){c&&u(e)}}}function zl(l){let e,t,s="‚ö†Ô∏è",a,n,i=l[19].metrics.failedRuns+"",o,d,c=l[19].metrics.failedRuns===1?"":"s",h,E,m=l[19].metrics.totalRuns+"",_,b,S=l[19].metrics.successRate.overall+"",w,N;return{c(){e=p("div"),t=p("span"),t.textContent=s,a=I(),n=p("span"),o=O(i),d=O(" failed run"),h=O(c),E=O(" out of "),_=O(m),b=O(` total
                  (`),w=O(S),N=O("% success rate)"),this.h()},l(M){e=v(M,"DIV",{class:!0});var D=g(e);t=v(D,"SPAN",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-xroj8x"&&(t.textContent=s),a=A(D),n=v(D,"SPAN",{class:!0});var x=g(n);o=P(x,i),d=P(x," failed run"),h=P(x,c),E=P(x," out of "),_=P(x,m),b=P(x,` total
                  (`),w=P(x,S),N=P(x,"% success rate)"),x.forEach(u),D.forEach(u),this.h()},h(){f(t,"class","text-sm leading-none"),f(n,"class","flex-1 text-yellow-800 dark:text-yellow-200"),f(e,"class","flex items-center gap-2 mt-3 px-3 py-2 rounded-md border text-[0.7rem] bg-yellow-600/8 border-yellow-600/25 dark:bg-yellow-600/12 dark:border-yellow-600/35")},m(M,D){R(M,e,D),r(e,t),r(e,a),r(e,n),r(n,o),r(n,d),r(n,h),r(n,E),r(n,_),r(n,b),r(n,w),r(n,N)},p(M,D){D&2&&i!==(i=M[19].metrics.failedRuns+"")&&F(o,i),D&2&&c!==(c=M[19].metrics.failedRuns===1?"":"s")&&F(h,c),D&2&&m!==(m=M[19].metrics.totalRuns+"")&&F(_,m),D&2&&S!==(S=M[19].metrics.successRate.overall+"")&&F(w,S)},d(M){M&&u(e)}}}function Fl(l){let e,t,s="Recent Errors:",a,n=Ne(l[19].errors),i=[];for(let o=0;o<n.length;o+=1)i[o]=ql(Vl(l,n,o));return{c(){e=p("div"),t=p("div"),t.textContent=s,a=I();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var d=g(e);t=v(d,"DIV",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1g8460k"&&(t.textContent=s),a=A(d);for(let c=0;c<i.length;c+=1)i[c].l(d);d.forEach(u),this.h()},h(){f(t,"class","text-[0.7rem] font-semibold text-red-700 dark:text-red-300 mb-1"),f(e,"class","mt-2 p-2 rounded-md border bg-red-600/5 border-red-600/20 dark:bg-red-600/10 dark:border-red-600/25")},m(o,d){R(o,e,d),r(e,t),r(e,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null)},p(o,d){if(d&2){n=Ne(o[19].errors);let c;for(c=0;c<n.length;c+=1){const h=Vl(o,n,c);i[c]?i[c].p(h,d):(i[c]=ql(h),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}},d(o){o&&u(e),ut(i,o)}}}function ql(l){let e,t=l[23]+"",s,a;return{c(){e=p("div"),s=O(t),a=I(),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=g(e);s=P(i,t),a=A(i),i.forEach(u),this.h()},h(){f(e,"class","text-[0.7rem] text-gray-500 dark:text-gray-400 mt-1 pl-2 border-l-2 border-red-600/30 dark:border-red-400/30")},m(n,i){R(n,e,i),r(e,s),r(e,a)},p(n,i){i&2&&t!==(t=n[23]+"")&&F(s,t)},d(n){n&&u(e)}}}function Jl(l){let e,t,s,a,n,i,o,d,c,h=l[19].name+"",E,m,_,b,S,w,N;function M(){return l[14](l[19])}function D(C,y){return y&2&&(_=null),_==null&&(_=!!qe(C[19].name)),_?Ls:Os}let x=D(l,-1),L=x(l),k=l[20]&&Ml(l);return{c(){e=p("div"),t=p("button"),s=al("svg"),a=al("path"),i=I(),o=p("div"),d=p("div"),c=p("span"),E=O(h),m=I(),L.c(),b=I(),k&&k.c(),S=I(),this.h()},l(C){e=v(C,"DIV",{class:!0});var y=g(e);t=v(y,"BUTTON",{class:!0,title:!0});var T=g(t);s=sl(T,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var V=g(s);a=sl(V,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(a).forEach(u),V.forEach(u),T.forEach(u),i=A(y),o=v(y,"DIV",{class:!0});var U=g(o);d=v(U,"DIV",{class:!0});var q=g(d);c=v(q,"SPAN",{class:!0});var G=g(c);E=P(G,h),G.forEach(u),m=A(q),L.l(q),q.forEach(u),U.forEach(u),b=A(y),k&&k.l(y),S=A(y),y.forEach(u),this.h()},h(){f(a,"d","M4 6l4 4 4-4"),f(a,"stroke-width","2"),f(a,"stroke-linecap","round"),f(a,"stroke-linejoin","round"),f(s,"class","w-3 h-3 transition-transform duration-200"),f(s,"fill","none"),f(s,"stroke","currentColor"),f(s,"viewBox","0 0 16 16"),W(s,"rotate-180",l[20]),f(t,"class","agent-expand-toggle"),f(t,"title",n=l[20]?"Collapse":"Expand"),W(t,"running",l[19].status==="running"),W(t,"error",l[19].status==="error"),W(t,"active",Fe(l[19])),f(c,"class","text-sm font-semibold"),f(d,"class","flex items-center gap-2 flex-1"),f(o,"class","flex justify-between items-center mb-2 pr-8"),f(e,"class","agent-card"),W(e,"running",l[19].status==="running"),W(e,"error",l[19].status==="error"),W(e,"active",Fe(l[19]))},m(C,y){R(C,e,y),r(e,t),r(t,s),r(s,a),r(e,i),r(e,o),r(o,d),r(d,c),r(c,E),r(d,m),L.m(d,null),r(e,b),k&&k.m(e,null),r(e,S),w||(N=ae(t,"click",M),w=!0)},p(C,y){l=C,y&10&&W(s,"rotate-180",l[20]),y&10&&n!==(n=l[20]?"Collapse":"Expand")&&f(t,"title",n),y&2&&W(t,"running",l[19].status==="running"),y&2&&W(t,"error",l[19].status==="error"),y&2&&W(t,"active",Fe(l[19])),y&2&&h!==(h=l[19].name+"")&&F(E,h),x===(x=D(l,y))&&L?L.p(l,y):(L.d(1),L=x(l),L&&(L.c(),L.m(d,null))),l[20]?k?k.p(l,y):(k=Ml(l),k.c(),k.m(e,S)):k&&(k.d(1),k=null),y&2&&W(e,"running",l[19].status==="running"),y&2&&W(e,"error",l[19].status==="error"),y&2&&W(e,"active",Fe(l[19]))},d(C){C&&u(e),L.d(),k&&k.d(),w=!1,N()}}}function Ms(l){let e,t,s,a,n,i,o=l[2]?"Live":"Connecting...",d,c,h,E,m,_=l[4]==="stop"?"Stopping‚Ä¶":"Stop All",b,S,w,N,M=l[4]==="restart"?"Restarting‚Ä¶":"Restart",D,x,L,k,C,y,T=l[6]&&Ol(l),V=l[5]&&Ll(l);function U(z,Q){return z[1].length===0?Ps:Vs}let q=U(l),G=q(l);return{c(){e=p("div"),t=p("div"),s=p("div"),a=p("span"),n=I(),i=p("span"),d=O(o),c=I(),T&&T.c(),h=I(),E=p("div"),m=p("button"),b=O(_),w=I(),N=p("button"),D=O(M),L=I(),V&&V.c(),k=I(),G.c(),this.h()},l(z){e=v(z,"DIV",{class:!0});var Q=g(e);t=v(Q,"DIV",{class:!0});var te=g(t);s=v(te,"DIV",{class:!0});var he=g(s);a=v(he,"SPAN",{class:!0}),g(a).forEach(u),n=A(he),i=v(he,"SPAN",{class:!0});var re=g(i);d=P(re,o),re.forEach(u),he.forEach(u),c=A(te),T&&T.l(te),h=A(te),E=v(te,"DIV",{class:!0});var ee=g(E);m=v(ee,"BUTTON",{class:!0,title:!0});var ue=g(m);b=P(ue,_),ue.forEach(u),w=A(ee),N=v(ee,"BUTTON",{class:!0,title:!0});var le=g(N);D=P(le,M),le.forEach(u),ee.forEach(u),te.forEach(u),L=A(Q),V&&V.l(Q),k=A(Q),G.l(Q),Q.forEach(u),this.h()},h(){f(a,"class","agent-status-dot"),W(a,"connected",l[2]),f(i,"class","text-gray-500 dark:text-gray-400"),W(i,"text-green-500",l[2]),W(i,"dark:text-green-300",l[2]),f(s,"class","flex items-center gap-1.5 text-[0.7rem] font-medium"),f(m,"class","px-2 py-1 rounded-md border text-[0.7rem] font-semibold cursor-pointer transition-all whitespace-nowrap disabled:opacity-60 disabled:cursor-not-allowed"),m.disabled=S=l[4]==="stop",f(m,"title","Stop All Services"),W(m,"border-red-600",!l[4]),W(m,"bg-red-600",!l[4]),W(m,"text-white",!l[4]),W(m,"hover:bg-red-700",!l[4]),f(N,"class","px-2 py-1 rounded-md border border-blue-600/40 bg-blue-600/8 text-blue-700 dark:bg-blue-600/15 dark:text-blue-300 text-[0.7rem] font-semibold cursor-pointer transition-all whitespace-nowrap hover:bg-blue-600/15 disabled:opacity-60 disabled:cursor-not-allowed"),N.disabled=x=l[4]==="restart",f(N,"title","Restart Core Services"),f(E,"class","flex gap-1.5 ml-auto"),f(t,"class","agent-monitor-header"),f(e,"class","agent-monitor-container"),W(e,"compact",l[0])},m(z,Q){R(z,e,Q),r(e,t),r(t,s),r(s,a),r(s,n),r(s,i),r(i,d),r(t,c),T&&T.m(t,null),r(t,h),r(t,E),r(E,m),r(m,b),r(E,w),r(E,N),r(N,D),r(e,L),V&&V.m(e,null),r(e,k),G.m(e,null),C||(y=[ae(m,"click",l[12]),ae(N,"click",l[13])],C=!0)},p(z,[Q]){Q&4&&W(a,"connected",z[2]),Q&4&&o!==(o=z[2]?"Live":"Connecting...")&&F(d,o),Q&4&&W(i,"text-green-500",z[2]),Q&4&&W(i,"dark:text-green-300",z[2]),z[6]?T?T.p(z,Q):(T=Ol(z),T.c(),T.m(t,h)):T&&(T.d(1),T=null),Q&16&&_!==(_=z[4]==="stop"?"Stopping‚Ä¶":"Stop All")&&F(b,_),Q&16&&S!==(S=z[4]==="stop")&&(m.disabled=S),Q&16&&W(m,"border-red-600",!z[4]),Q&16&&W(m,"bg-red-600",!z[4]),Q&16&&W(m,"text-white",!z[4]),Q&16&&W(m,"hover:bg-red-700",!z[4]),Q&16&&M!==(M=z[4]==="restart"?"Restarting‚Ä¶":"Restart")&&F(D,M),Q&16&&x!==(x=z[4]==="restart")&&(N.disabled=x),z[5]?V?V.p(z,Q):(V=Ll(z),V.c(),V.m(e,k)):V&&(V.d(1),V=null),q===(q=U(z))&&G?G.p(z,Q):(G.d(1),G=q(z),G&&(G.c(),G.m(e,null))),Q&1&&W(e,"compact",z[0])},i:Me,o:Me,d(z){z&&u(e),T&&T.d(),V&&V.d(),G.d(),C=!1,Xe(y)}}}function Gl(l){if(!l)return"Never";const e=new Date(l),s=new Date().getTime()-e.getTime(),a=Math.floor(s/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:`${Math.floor(a/1440)}d ago`}function Hl(l){const e=Math.floor(l/3600),t=Math.floor(l%3600/60);return e>0?`${e}h ${t}m`:`${t}m`}function Fe(l){if(l.status!=="running"||!l.lastActivity)return!1;const e=new Date(l.lastActivity).getTime(),t=Date.now()-5*60*1e3;return e>t}function xs(l){return[...l].sort((e,t)=>{const s=e.lastActivity?new Date(e.lastActivity).getTime():0,a=t.lastActivity?new Date(t.lastActivity).getTime():0;return a!==s?a-s:e.status==="running"&&t.status!=="running"?-1:t.status==="running"&&e.status!=="running"?1:e.name.localeCompare(t.name)})}function js(l){const e=l.metrics.recentActivity,t=e.last5m,s=e.last1h,a=new Array(12).fill(0);t>0&&(a[11]=t);const n=s-t;if(n>0){const i=n/11;for(let o=0;o<11;o++)a[o]=Math.ceil(i*(1-o*.1))}return a}function qe(l){return["scheduler-service","boredom-service","sleep-service"].includes(l)}function Us(l,e,t){let s;$t(l,ms,k=>t(6,s=k));let{compact:a=!1}=e,n=[],i=!1,o=null,d=new Set,c=null,h=null,E=null;async function m(k){try{if(!(await Re("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentName:k})})).ok)throw new Error("Failed to run agent")}catch(C){console.error("Error running agent:",C)}}const _={organizer:{description:"Memory Enrichment Agent",purpose:"Scans episodic memories and uses LLM to extract tags, entities, and metadata. Processes all users sequentially with isolated context."},reflector:{description:"Contemplative Reflection Agent",purpose:"Generates thoughtful reflections by building chains of associated memories. Considers entire lifetime of memories using weighted selection."},dreamer:{description:"Dream Generation Agent",purpose:"Creates surreal dream narratives from lifetime memory fragments using reflective exponential decay weighting. Runs during sleep hours."},"boredom-service":{description:"Mind Wandering Service",purpose:"Triggers the reflector agent at configurable intervals based on boredom level. Manages reflection frequency."},"sleep-service":{description:"Nightly Pipeline Orchestrator",purpose:"Orchestrates overnight processing: dream generation, audio transcription, and LoRA adapter training during idle sleep hours."},ingestor:{description:"File Ingestion Agent",purpose:"Converts raw files from memory/inbox into episodic memories. Chunks long content and archives processed files."},"scheduler-service":{description:"Agent Scheduler",purpose:"Manages scheduled execution of autonomous agents based on time intervals and system conditions."},curator:{description:"Memory Curator",purpose:"Prepares and organizes memory context for conversations by selecting relevant memories and formatting them for LLM."},summarizer:{description:"Memory Summarizer",purpose:"Creates concise summaries of long conversations and memory sequences for efficient context management."},transcriber:{description:"Audio Transcription Agent",purpose:"Converts audio recordings to text using speech-to-text models. Processes audio backlog during overnight pipeline."},"curiosity-service":{description:"Curiosity Question Generator",purpose:"Asks thoughtful questions during idle periods based on recent memories. Expires old unanswered questions after 7 days. Controlled by per-user curiosity.json config."},"curiosity-answer-watcher":{description:"Curiosity Answer Detector",purpose:"Watches for episodic events with answerTo metadata and marks corresponding questions as answered. Runs every 5 minutes."},"curiosity-researcher":{description:"Curiosity Research Agent",purpose:"Performs deeper research on curiosity questions by sampling related memories and running semantic searches. Processes one question per cycle (hourly)."}};function b(k){return _[k]?.description||"Autonomous Agent"}function S(k){return _[k]?.purpose||"Performs automated background tasks for the MetaHuman OS system."}function w(k){d.has(k)?d.delete(k):d.add(k),t(3,d)}async function N(k){t(4,c=k==="stop-all"?"stop":"restart"),t(5,h=null);try{const C=await Re("/api/agents/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:k})});if(!C.ok)throw new Error("Bulk action failed");const y=await C.json();t(5,h={type:"success",text:y.message||`${k==="stop-all"?"Stopped":"Restarted"} successfully`})}catch(C){t(5,h={type:"error",text:C instanceof Error?C.message:"Action failed"})}finally{t(4,c=null),E&&clearTimeout(E),E=setTimeout(()=>{t(5,h=null)},3e3)}}tt(()=>{o=new EventSource("/api/monitor/stream"),o.addEventListener("message",k=>{try{const C=JSON.parse(k.data);C.type==="connected"?t(2,i=!0):C.type==="metrics"&&t(1,n=xs(C.agents||[]))}catch(C){console.error("Failed to parse SSE event:",C)}}),o.addEventListener("error",()=>{t(2,i=!1)})}),yt(()=>{o&&o.close(),E&&clearTimeout(E)});const M=()=>N("stop-all"),D=()=>N("restart-core"),x=k=>w(k.name),L=k=>m(k.name);return l.$$set=k=>{"compact"in k&&t(0,a=k.compact)},[a,n,i,d,c,h,s,m,b,S,w,N,M,D,x,L]}class Rs extends ft{constructor(e){super(),vt(this,e,Us,Ms,pt,{compact:0})}}function Wl(l,e,t){const s=l.slice();return s[21]=e[t],s}function Xl(l,e,t){const s=l.slice();return s[24]=e[t],s}function Bs(l){let e,t,s,a,n=[],i=new Map,o=l[2]&&Kl(l),d=l[1].length>0&&ts(l),c=l[0].length>0&&as(),h=Ne(l[0]);const E=m=>m[21].name;for(let m=0;m<h.length;m+=1){let _=Wl(l,h,m),b=E(_);i.set(b,n[m]=cs(b,_))}return{c(){e=p("div"),o&&o.c(),t=I(),d&&d.c(),s=I(),c&&c.c(),a=I();for(let m=0;m<n.length;m+=1)n[m].c();this.h()},l(m){e=v(m,"DIV",{class:!0});var _=g(e);o&&o.l(_),t=A(_),d&&d.l(_),s=A(_),c&&c.l(_),a=A(_);for(let b=0;b<n.length;b+=1)n[b].l(_);_.forEach(u),this.h()},h(){f(e,"class","server-list svelte-v5ipua")},m(m,_){R(m,e,_),o&&o.m(e,null),r(e,t),d&&d.m(e,null),r(e,s),c&&c.m(e,null),r(e,a);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(e,null)},p(m,_){m[2]?o?o.p(m,_):(o=Kl(m),o.c(),o.m(e,t)):o&&(o.d(1),o=null),m[1].length>0?d?d.p(m,_):(d=ts(m),d.c(),d.m(e,s)):d&&(d.d(1),d=null),m[0].length>0?c||(c=as(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),_&273&&(h=Ne(m[0]),n=Ft(n,_,E,1,m,h,i,e,qt,cs,null,Wl))},d(m){m&&u(e),o&&o.d(),d&&d.d(),c&&c.d();for(let _=0;_<n.length;_+=1)n[_].d()}}}function $s(l){let e,t="Loading server status...";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-puxlas"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-v5ipua")},m(s,a){R(s,e,a)},p:Me,d(s){s&&u(e)}}}function Kl(l){let e,t='<span class="section-icon svelte-v5ipua">üß†</span> <span class="section-title svelte-v5ipua">LLM Backend</span>',s,a,n,i,o,d,c,h,E,m,_,b=l[2].ollama.endpoint+"",S,w,N,M,D,x,L,k,C,y,T,V,U,q,G=l[2].vllm.endpoint+"",z,Q,te;function he(K,se){return K[2].ollama.installed?K[2].ollama.running?Fs:zs:qs}let re=he(l),ee=re(l),ue=l[2].activeBackend==="ollama"&&Yl(),le=l[2].ollama.running&&l[2].ollama.model&&Ql(l);function fe(K,se){return K[2].ollama.installed?Gs:Js}let Z=fe(l),B=Z(l);function _e(K,se){return K[2].vllm.installed?K[2].vllm.running?Ks:Xs:Ys}let j=_e(l),H=j(l),X=l[2].activeBackend==="vllm"&&Zl(),J=l[2].vllm.model&&es(l);function me(K,se){return K[2].vllm.installed?Zs:Qs}let we=me(l),ve=we(l);return{c(){e=p("div"),e.innerHTML=t,s=I(),a=p("div"),n=p("div"),i=p("div"),o=p("span"),ee.c(),d=I(),c=p("div"),h=p("div"),E=O(`Ollama
                  `),ue&&ue.c(),m=I(),_=p("div"),S=O(b),w=I(),le&&le.c(),N=I(),B.c(),M=I(),D=p("div"),x=p("div"),L=p("div"),k=p("span"),H.c(),C=I(),y=p("div"),T=p("div"),V=O(`vLLM
                  `),X&&X.c(),U=I(),q=p("div"),z=O(G),Q=I(),J&&J.c(),te=I(),ve.c(),this.h()},l(K){e=v(K,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-151cf5c"&&(e.innerHTML=t),s=A(K),a=v(K,"DIV",{class:!0});var se=g(a);n=v(se,"DIV",{class:!0});var pe=g(n);i=v(pe,"DIV",{class:!0});var be=g(i);o=v(be,"SPAN",{class:!0});var Ee=g(o);ee.l(Ee),Ee.forEach(u),d=A(be),c=v(be,"DIV",{class:!0});var ie=g(c);h=v(ie,"DIV",{class:!0});var $=g(h);E=P($,`Ollama
                  `),ue&&ue.l($),$.forEach(u),m=A(ie),_=v(ie,"DIV",{class:!0});var oe=g(_);S=P(oe,b),w=A(oe),le&&le.l(oe),oe.forEach(u),ie.forEach(u),be.forEach(u),pe.forEach(u),N=A(se),B.l(se),se.forEach(u),M=A(K),D=v(K,"DIV",{class:!0});var ye=g(D);x=v(ye,"DIV",{class:!0});var ge=g(x);L=v(ge,"DIV",{class:!0});var Y=g(L);k=v(Y,"SPAN",{class:!0});var de=g(k);H.l(de),de.forEach(u),C=A(Y),y=v(Y,"DIV",{class:!0});var Se=g(y);T=v(Se,"DIV",{class:!0});var Ae=g(T);V=P(Ae,`vLLM
                  `),X&&X.l(Ae),Ae.forEach(u),U=A(Se),q=v(Se,"DIV",{class:!0});var Ce=g(q);z=P(Ce,G),Q=A(Ce),J&&J.l(Ce),Ce.forEach(u),Se.forEach(u),Y.forEach(u),ge.forEach(u),te=A(ye),ve.l(ye),ye.forEach(u),this.h()},h(){f(e,"class","section-header svelte-v5ipua"),f(o,"class","status-icon svelte-v5ipua"),f(h,"class","server-name svelte-v5ipua"),f(_,"class","server-meta svelte-v5ipua"),f(c,"class","server-details svelte-v5ipua"),f(i,"class","server-info svelte-v5ipua"),f(n,"class","server-header svelte-v5ipua"),f(a,"class","server-card llm-card svelte-v5ipua"),W(a,"active-backend",l[6]("ollama")),f(k,"class","status-icon svelte-v5ipua"),f(T,"class","server-name svelte-v5ipua"),f(q,"class","server-meta svelte-v5ipua"),f(y,"class","server-details svelte-v5ipua"),f(L,"class","server-info svelte-v5ipua"),f(x,"class","server-header svelte-v5ipua"),f(D,"class","server-card llm-card svelte-v5ipua"),W(D,"active-backend",l[2].activeBackend==="vllm")},m(K,se){R(K,e,se),R(K,s,se),R(K,a,se),r(a,n),r(n,i),r(i,o),ee.m(o,null),r(i,d),r(i,c),r(c,h),r(h,E),ue&&ue.m(h,null),r(c,m),r(c,_),r(_,S),r(_,w),le&&le.m(_,null),r(a,N),B.m(a,null),R(K,M,se),R(K,D,se),r(D,x),r(x,L),r(L,k),H.m(k,null),r(L,C),r(L,y),r(y,T),r(T,V),X&&X.m(T,null),r(y,U),r(y,q),r(q,z),r(q,Q),J&&J.m(q,null),r(D,te),ve.m(D,null)},p(K,se){re!==(re=he(K))&&(ee.d(1),ee=re(K),ee&&(ee.c(),ee.m(o,null))),K[2].activeBackend==="ollama"?ue||(ue=Yl(),ue.c(),ue.m(h,null)):ue&&(ue.d(1),ue=null),se&4&&b!==(b=K[2].ollama.endpoint+"")&&F(S,b),K[2].ollama.running&&K[2].ollama.model?le?le.p(K,se):(le=Ql(K),le.c(),le.m(_,null)):le&&(le.d(1),le=null),Z===(Z=fe(K))&&B?B.p(K,se):(B.d(1),B=Z(K),B&&(B.c(),B.m(a,null))),j!==(j=_e(K))&&(H.d(1),H=j(K),H&&(H.c(),H.m(k,null))),K[2].activeBackend==="vllm"?X||(X=Zl(),X.c(),X.m(T,null)):X&&(X.d(1),X=null),se&4&&G!==(G=K[2].vllm.endpoint+"")&&F(z,G),K[2].vllm.model?J?J.p(K,se):(J=es(K),J.c(),J.m(q,null)):J&&(J.d(1),J=null),we===(we=me(K))&&ve?ve.p(K,se):(ve.d(1),ve=we(K),ve&&(ve.c(),ve.m(D,null))),se&4&&W(D,"active-backend",K[2].activeBackend==="vllm")},d(K){K&&(u(e),u(s),u(a),u(M),u(D)),ee.d(),ue&&ue.d(),le&&le.d(),B.d(),H.d(),X&&X.d(),J&&J.d(),ve.d()}}}function zs(l){let e;return{c(){e=O("üî¥")},l(t){e=P(t,"üî¥")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function Fs(l){let e;return{c(){e=O("üü¢")},l(t){e=P(t,"üü¢")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function qs(l){let e;return{c(){e=O("‚ö†Ô∏è")},l(t){e=P(t,"‚ö†Ô∏è")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function Yl(l){let e,t="ACTIVE";return{c(){e=p("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-yku8ir"&&(e.textContent=t),this.h()},h(){f(e,"class","active-badge svelte-v5ipua")},m(s,a){R(s,e,a)},d(s){s&&u(e)}}}function Ql(l){let e,t=l[2].ollama.model+"",s;return{c(){e=O("‚Ä¢ "),s=O(t)},l(a){e=P(a,"‚Ä¢ "),s=P(a,t)},m(a,n){R(a,e,n),R(a,s,n)},p(a,n){n&4&&t!==(t=a[2].ollama.model+"")&&F(s,t)},d(a){a&&(u(e),u(s))}}}function Js(l){let e,t="Not installed";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-13d7q9u"&&(e.textContent=t),this.h()},h(){f(e,"class","not-installed-msg svelte-v5ipua")},m(s,a){R(s,e,a)},p:Me,d(s){s&&u(e)}}}function Gs(l){let e;function t(n,i){return n[2].ollama.running?Ws:Hs}let s=t(l),a=s(l);return{c(){e=p("div"),a.c(),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=g(e);a.l(i),i.forEach(u),this.h()},h(){f(e,"class","server-actions svelte-v5ipua")},m(n,i){R(n,e,i),a.m(e,null)},p(n,i){s===(s=t(n))&&a?a.p(n,i):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null)))},d(n){n&&u(e),a.d()}}}function Hs(l){let e,t=l[4]==="ollama-start"?"...":"Start",s,a,n,i;return{c(){e=p("button"),s=O(t),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var d=g(e);s=P(d,t),d.forEach(u),this.h()},h(){f(e,"class","action-btn start svelte-v5ipua"),e.disabled=a=l[4]!==null},m(o,d){R(o,e,d),r(e,s),n||(i=ae(e,"click",l[11]),n=!0)},p(o,d){d&16&&t!==(t=o[4]==="ollama-start"?"...":"Start")&&F(s,t),d&16&&a!==(a=o[4]!==null)&&(e.disabled=a)},d(o){o&&u(e),n=!1,i()}}}function Ws(l){let e,t=l[4]==="ollama-stop"?"...":"Stop",s,a,n,i;return{c(){e=p("button"),s=O(t),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var d=g(e);s=P(d,t),d.forEach(u),this.h()},h(){f(e,"class","action-btn stop svelte-v5ipua"),e.disabled=a=l[4]!==null},m(o,d){R(o,e,d),r(e,s),n||(i=ae(e,"click",l[10]),n=!0)},p(o,d){d&16&&t!==(t=o[4]==="ollama-stop"?"...":"Stop")&&F(s,t),d&16&&a!==(a=o[4]!==null)&&(e.disabled=a)},d(o){o&&u(e),n=!1,i()}}}function Xs(l){let e;return{c(){e=O("üî¥")},l(t){e=P(t,"üî¥")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function Ks(l){let e;return{c(){e=O("üü¢")},l(t){e=P(t,"üü¢")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function Ys(l){let e;return{c(){e=O("‚ö†Ô∏è")},l(t){e=P(t,"‚ö†Ô∏è")},m(t,s){R(t,e,s)},d(t){t&&u(e)}}}function Zl(l){let e,t="ACTIVE";return{c(){e=p("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-yku8ir"&&(e.textContent=t),this.h()},h(){f(e,"class","active-badge svelte-v5ipua")},m(s,a){R(s,e,a)},d(s){s&&u(e)}}}function es(l){let e,t=l[2].vllm.model+"",s;return{c(){e=O("‚Ä¢ "),s=O(t)},l(a){e=P(a,"‚Ä¢ "),s=P(a,t)},m(a,n){R(a,e,n),R(a,s,n)},p(a,n){n&4&&t!==(t=a[2].vllm.model+"")&&F(s,t)},d(a){a&&(u(e),u(s))}}}function Qs(l){let e,t="Not installed - requires Python vLLM package";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-15bs51q"&&(e.textContent=t),this.h()},h(){f(e,"class","not-installed-msg svelte-v5ipua")},m(s,a){R(s,e,a)},p:Me,d(s){s&&u(e)}}}function Zs(l){let e;function t(n,i){return n[2].vllm.running?ta:ea}let s=t(l),a=s(l);return{c(){e=p("div"),a.c(),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=g(e);a.l(i),i.forEach(u),this.h()},h(){f(e,"class","server-actions svelte-v5ipua")},m(n,i){R(n,e,i),a.m(e,null)},p(n,i){s===(s=t(n))&&a?a.p(n,i):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null)))},d(n){n&&u(e),a.d()}}}function ea(l){let e,t=l[4]==="vllm-start"?"...":"Start",s,a,n,i;return{c(){e=p("button"),s=O(t),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var d=g(e);s=P(d,t),d.forEach(u),this.h()},h(){f(e,"class","action-btn start svelte-v5ipua"),e.disabled=a=l[4]!==null},m(o,d){R(o,e,d),r(e,s),n||(i=ae(e,"click",l[14]),n=!0)},p(o,d){d&16&&t!==(t=o[4]==="vllm-start"?"...":"Start")&&F(s,t),d&16&&a!==(a=o[4]!==null)&&(e.disabled=a)},d(o){o&&u(e),n=!1,i()}}}function ta(l){let e,t=l[4]==="vllm-stop"?"...":"Stop",s,a,n,i,o=l[4]==="vllm-restart"?"...":"Restart",d,c,h,E;return{c(){e=p("button"),s=O(t),n=I(),i=p("button"),d=O(o),this.h()},l(m){e=v(m,"BUTTON",{class:!0});var _=g(e);s=P(_,t),_.forEach(u),n=A(m),i=v(m,"BUTTON",{class:!0});var b=g(i);d=P(b,o),b.forEach(u),this.h()},h(){f(e,"class","action-btn stop svelte-v5ipua"),e.disabled=a=l[4]!==null,f(i,"class","action-btn restart svelte-v5ipua"),i.disabled=c=l[4]!==null},m(m,_){R(m,e,_),r(e,s),R(m,n,_),R(m,i,_),r(i,d),h||(E=[ae(e,"click",l[12]),ae(i,"click",l[13])],h=!0)},p(m,_){_&16&&t!==(t=m[4]==="vllm-stop"?"...":"Stop")&&F(s,t),_&16&&a!==(a=m[4]!==null)&&(e.disabled=a),_&16&&o!==(o=m[4]==="vllm-restart"?"...":"Restart")&&F(d,o),_&16&&c!==(c=m[4]!==null)&&(i.disabled=c)},d(m){m&&(u(e),u(n),u(i)),h=!1,Xe(E)}}}function ts(l){let e,t='<span class="section-icon svelte-v5ipua">üöÄ</span> <span class="section-title svelte-v5ipua">Astro Dev Servers</span>',s,a=[],n=new Map,i,o=Ne(l[1]);const d=c=>c[24].port;for(let c=0;c<o.length;c+=1){let h=Xl(l,o,c),E=d(h);n.set(E,a[c]=ss(E,h))}return{c(){e=p("div"),e.innerHTML=t,s=I();for(let c=0;c<a.length;c+=1)a[c].c();i=Qe(),this.h()},l(c){e=v(c,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-dixieq"&&(e.innerHTML=t),s=A(c);for(let h=0;h<a.length;h+=1)a[h].l(c);i=Qe(),this.h()},h(){f(e,"class","section-header svelte-v5ipua")},m(c,h){R(c,e,h),R(c,s,h);for(let E=0;E<a.length;E+=1)a[E]&&a[E].m(c,h);R(c,i,h)},p(c,h){h&530&&(o=Ne(c[1]),a=Ft(a,h,d,1,c,o,n,i.parentNode,qt,ss,i,Xl))},d(c){c&&(u(e),u(s),u(i));for(let h=0;h<a.length;h+=1)a[h].d(c)}}}function ls(l){let e,t="CURRENT";return{c(){e=p("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-8nzkbp"&&(e.textContent=t),this.h()},h(){f(e,"class","current-badge svelte-v5ipua")},m(s,a){R(s,e,a)},d(s){s&&u(e)}}}function ss(l,e){let t,s,a,n,i="üü¢",o,d,c,h,E,m,_,b=e[24].port+"",S,w,N=e[24].pid+"",M,D,x,L=e[24].command+"",k,C,y,T,V=e[4]===`astro-${e[24].port}`?"...":"Stop",U,q,G,z,Q,te=e[24].isCurrentServer&&ls();function he(){return e[15](e[24])}return{key:l,first:null,c(){t=p("div"),s=p("div"),a=p("div"),n=p("span"),n.textContent=i,o=I(),d=p("div"),c=p("div"),h=O(`Astro Dev Server
                    `),te&&te.c(),E=I(),m=p("div"),_=O("Port: "),S=O(b),w=O(" ‚Ä¢ PID: "),M=O(N),D=I(),x=p("div"),k=O(L),C=I(),y=p("div"),T=p("button"),U=O(V),G=I(),this.h()},l(re){t=v(re,"DIV",{class:!0});var ee=g(t);s=v(ee,"DIV",{class:!0});var ue=g(s);a=v(ue,"DIV",{class:!0});var le=g(a);n=v(le,"SPAN",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-139a36q"&&(n.textContent=i),o=A(le),d=v(le,"DIV",{class:!0});var fe=g(d);c=v(fe,"DIV",{class:!0});var Z=g(c);h=P(Z,`Astro Dev Server
                    `),te&&te.l(Z),Z.forEach(u),E=A(fe),m=v(fe,"DIV",{class:!0});var B=g(m);_=P(B,"Port: "),S=P(B,b),w=P(B," ‚Ä¢ PID: "),M=P(B,N),B.forEach(u),D=A(fe),x=v(fe,"DIV",{class:!0});var _e=g(x);k=P(_e,L),_e.forEach(u),fe.forEach(u),le.forEach(u),ue.forEach(u),C=A(ee),y=v(ee,"DIV",{class:!0});var j=g(y);T=v(j,"BUTTON",{class:!0});var H=g(T);U=P(H,V),H.forEach(u),j.forEach(u),G=A(ee),ee.forEach(u),this.h()},h(){f(n,"class","status-icon svelte-v5ipua"),f(c,"class","server-name svelte-v5ipua"),f(m,"class","server-meta svelte-v5ipua"),f(x,"class","server-command svelte-v5ipua"),f(d,"class","server-details svelte-v5ipua"),f(a,"class","server-info svelte-v5ipua"),f(s,"class","server-header svelte-v5ipua"),f(T,"class","action-btn stop svelte-v5ipua"),T.disabled=q=e[4]!==null,W(T,"danger",e[24].isCurrentServer),f(y,"class","server-actions svelte-v5ipua"),f(t,"class","server-card astro-card svelte-v5ipua"),W(t,"current-server",e[24].isCurrentServer),this.first=t},m(re,ee){R(re,t,ee),r(t,s),r(s,a),r(a,n),r(a,o),r(a,d),r(d,c),r(c,h),te&&te.m(c,null),r(d,E),r(d,m),r(m,_),r(m,S),r(m,w),r(m,M),r(d,D),r(d,x),r(x,k),r(t,C),r(t,y),r(y,T),r(T,U),r(t,G),z||(Q=ae(T,"click",he),z=!0)},p(re,ee){e=re,e[24].isCurrentServer?te||(te=ls(),te.c(),te.m(c,null)):te&&(te.d(1),te=null),ee&2&&b!==(b=e[24].port+"")&&F(S,b),ee&2&&N!==(N=e[24].pid+"")&&F(M,N),ee&2&&L!==(L=e[24].command+"")&&F(k,L),ee&18&&V!==(V=e[4]===`astro-${e[24].port}`?"...":"Stop")&&F(U,V),ee&16&&q!==(q=e[4]!==null)&&(T.disabled=q),ee&2&&W(T,"danger",e[24].isCurrentServer),ee&2&&W(t,"current-server",e[24].isCurrentServer)},d(re){re&&u(t),te&&te.d(),z=!1,Q()}}}function as(l){let e,t='<span class="section-icon svelte-v5ipua">üîß</span> <span class="section-title svelte-v5ipua">Backend Services</span>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1ajesz7"&&(e.innerHTML=t),this.h()},h(){f(e,"class","section-header svelte-v5ipua")},m(s,a){R(s,e,a)},d(s){s&&u(e)}}}function la(l){let e,t="Not installed or configured";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-cs9ybl"&&(e.textContent=t),this.h()},h(){f(e,"class","not-installed-msg svelte-v5ipua")},m(s,a){R(s,e,a)},p:Me,d(s){s&&u(e)}}}function sa(l){let e;function t(n,i){return n[21].status==="running"?na:aa}let s=t(l),a=s(l);return{c(){e=p("div"),a.c(),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=g(e);a.l(i),i.forEach(u),this.h()},h(){f(e,"class","server-actions svelte-v5ipua")},m(n,i){R(n,e,i),a.m(e,null)},p(n,i){s===(s=t(n))&&a?a.p(n,i):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null)))},d(n){n&&u(e),a.d()}}}function aa(l){let e,t=l[4]===`${l[21].name}-start`?"...":"Start",s,a,n,i;function o(){return l[18](l[21])}return{c(){e=p("button"),s=O(t),this.h()},l(d){e=v(d,"BUTTON",{class:!0});var c=g(e);s=P(c,t),c.forEach(u),this.h()},h(){f(e,"class","action-btn start svelte-v5ipua"),e.disabled=a=l[4]!==null},m(d,c){R(d,e,c),r(e,s),n||(i=ae(e,"click",o),n=!0)},p(d,c){l=d,c&17&&t!==(t=l[4]===`${l[21].name}-start`?"...":"Start")&&F(s,t),c&16&&a!==(a=l[4]!==null)&&(e.disabled=a)},d(d){d&&u(e),n=!1,i()}}}function na(l){let e,t=l[4]===`${l[21].name}-stop`?"...":"Stop",s,a,n,i,o=l[4]===`${l[21].name}-restart`?"...":"Restart",d,c,h,E;function m(){return l[16](l[21])}function _(){return l[17](l[21])}return{c(){e=p("button"),s=O(t),n=I(),i=p("button"),d=O(o),this.h()},l(b){e=v(b,"BUTTON",{class:!0});var S=g(e);s=P(S,t),S.forEach(u),n=A(b),i=v(b,"BUTTON",{class:!0});var w=g(i);d=P(w,o),w.forEach(u),this.h()},h(){f(e,"class","action-btn stop svelte-v5ipua"),e.disabled=a=l[4]!==null,f(i,"class","action-btn restart svelte-v5ipua"),i.disabled=c=l[4]!==null},m(b,S){R(b,e,S),r(e,s),R(b,n,S),R(b,i,S),r(i,d),h||(E=[ae(e,"click",m),ae(i,"click",_)],h=!0)},p(b,S){l=b,S&17&&t!==(t=l[4]===`${l[21].name}-stop`?"...":"Stop")&&F(s,t),S&16&&a!==(a=l[4]!==null)&&(e.disabled=a),S&17&&o!==(o=l[4]===`${l[21].name}-restart`?"...":"Restart")&&F(d,o),S&16&&c!==(c=l[4]!==null)&&(i.disabled=c)},d(b){b&&(u(e),u(n),u(i)),h=!1,Xe(E)}}}function ns(l){let e,t,s,a=l[21].details.model&&rs(l),n=l[21].details.device&&is(l),i=l[21].details.voice&&os(l);return{c(){e=p("div"),a&&a.c(),t=I(),n&&n.c(),s=I(),i&&i.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var d=g(e);a&&a.l(d),t=A(d),n&&n.l(d),s=A(d),i&&i.l(d),d.forEach(u),this.h()},h(){f(e,"class","server-details-extra svelte-v5ipua")},m(o,d){R(o,e,d),a&&a.m(e,null),r(e,t),n&&n.m(e,null),r(e,s),i&&i.m(e,null)},p(o,d){o[21].details.model?a?a.p(o,d):(a=rs(o),a.c(),a.m(e,t)):a&&(a.d(1),a=null),o[21].details.device?n?n.p(o,d):(n=is(o),n.c(),n.m(e,s)):n&&(n.d(1),n=null),o[21].details.voice?i?i.p(o,d):(i=os(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&u(e),a&&a.d(),n&&n.d(),i&&i.d()}}}function rs(l){let e,t,s=l[21].details.model+"",a;return{c(){e=p("span"),t=O("Model: "),a=O(s),this.h()},l(n){e=v(n,"SPAN",{class:!0});var i=g(e);t=P(i,"Model: "),a=P(i,s),i.forEach(u),this.h()},h(){f(e,"class","detail-badge svelte-v5ipua")},m(n,i){R(n,e,i),r(e,t),r(e,a)},p(n,i){i&1&&s!==(s=n[21].details.model+"")&&F(a,s)},d(n){n&&u(e)}}}function is(l){let e,t,s=l[21].details.device+"",a;return{c(){e=p("span"),t=O("Device: "),a=O(s),this.h()},l(n){e=v(n,"SPAN",{class:!0});var i=g(e);t=P(i,"Device: "),a=P(i,s),i.forEach(u),this.h()},h(){f(e,"class","detail-badge svelte-v5ipua")},m(n,i){R(n,e,i),r(e,t),r(e,a)},p(n,i){i&1&&s!==(s=n[21].details.device+"")&&F(a,s)},d(n){n&&u(e)}}}function os(l){let e,t,s=l[21].details.voice+"",a;return{c(){e=p("span"),t=O("Voice: "),a=O(s),this.h()},l(n){e=v(n,"SPAN",{class:!0});var i=g(e);t=P(i,"Voice: "),a=P(i,s),i.forEach(u),this.h()},h(){f(e,"class","detail-badge svelte-v5ipua")},m(n,i){R(n,e,i),r(e,t),r(e,a)},p(n,i){i&1&&s!==(s=n[21].details.voice+"")&&F(a,s)},d(n){n&&u(e)}}}function cs(l,e){let t,s,a,n,i=us(e[21])+"",o,d,c,h,E=e[21].displayName+"",m,_,b,S,w=e[21].port+"",N,M,D=ds(e[21])+"",x,L,k,C;function y(q,G){return q[21].installed?sa:la}let T=y(e),V=T(e),U=e[21].details&&e[21].status==="running"&&ns(e);return{key:l,first:null,c(){t=p("div"),s=p("div"),a=p("div"),n=p("span"),o=O(i),d=I(),c=p("div"),h=p("div"),m=O(E),_=I(),b=p("div"),S=O("Port: "),N=O(w),M=O(" ‚Ä¢ "),x=O(D),L=I(),V.c(),k=I(),U&&U.c(),C=I(),this.h()},l(q){t=v(q,"DIV",{class:!0});var G=g(t);s=v(G,"DIV",{class:!0});var z=g(s);a=v(z,"DIV",{class:!0});var Q=g(a);n=v(Q,"SPAN",{class:!0});var te=g(n);o=P(te,i),te.forEach(u),d=A(Q),c=v(Q,"DIV",{class:!0});var he=g(c);h=v(he,"DIV",{class:!0});var re=g(h);m=P(re,E),re.forEach(u),_=A(he),b=v(he,"DIV",{class:!0});var ee=g(b);S=P(ee,"Port: "),N=P(ee,w),M=P(ee," ‚Ä¢ "),x=P(ee,D),ee.forEach(u),he.forEach(u),Q.forEach(u),z.forEach(u),L=A(G),V.l(G),k=A(G),U&&U.l(G),C=A(G),G.forEach(u),this.h()},h(){f(n,"class","status-icon svelte-v5ipua"),f(h,"class","server-name svelte-v5ipua"),f(b,"class","server-meta svelte-v5ipua"),f(c,"class","server-details svelte-v5ipua"),f(a,"class","server-info svelte-v5ipua"),f(s,"class","server-header svelte-v5ipua"),f(t,"class","server-card svelte-v5ipua"),this.first=t},m(q,G){R(q,t,G),r(t,s),r(s,a),r(a,n),r(n,o),r(a,d),r(a,c),r(c,h),r(h,m),r(c,_),r(c,b),r(b,S),r(b,N),r(b,M),r(b,x),r(t,L),V.m(t,null),r(t,k),U&&U.m(t,null),r(t,C)},p(q,G){e=q,G&1&&i!==(i=us(e[21])+"")&&F(o,i),G&1&&E!==(E=e[21].displayName+"")&&F(m,E),G&1&&w!==(w=e[21].port+"")&&F(N,w),G&1&&D!==(D=ds(e[21])+"")&&F(x,D),T===(T=y(e))&&V?V.p(e,G):(V.d(1),V=T(e),V&&(V.c(),V.m(t,k))),e[21].details&&e[21].status==="running"?U?U.p(e,G):(U=ns(e),U.c(),U.m(t,C)):U&&(U.d(1),U=null)},d(q){q&&u(t),V.d(),U&&U.d()}}}function ra(l){let e,t,s,a="Server Status",n,i,o=l[3]?"‚è≥":"üîÑ",d,c,h,E;function m(S,w){return S[3]&&S[0].length===0&&S[1].length===0?$s:Bs}let _=m(l),b=_(l);return{c(){e=p("div"),t=p("div"),s=p("h3"),s.textContent=a,n=I(),i=p("button"),d=O(o),c=I(),b.c(),this.h()},l(S){e=v(S,"DIV",{class:!0});var w=g(e);t=v(w,"DIV",{class:!0});var N=g(t);s=v(N,"H3",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-fctcz2"&&(s.textContent=a),n=A(N),i=v(N,"BUTTON",{class:!0});var M=g(i);d=P(M,o),M.forEach(u),N.forEach(u),c=A(w),b.l(w),w.forEach(u),this.h()},h(){f(s,"class","title svelte-v5ipua"),f(i,"class","refresh-btn svelte-v5ipua"),i.disabled=l[3],f(t,"class","header svelte-v5ipua"),f(e,"class","server-status-container svelte-v5ipua")},m(S,w){R(S,e,w),r(e,t),r(t,s),r(t,n),r(t,i),r(i,d),r(e,c),b.m(e,null),h||(E=ae(i,"click",l[5]),h=!0)},p(S,[w]){w&8&&o!==(o=S[3]?"‚è≥":"üîÑ")&&F(d,o),w&8&&(i.disabled=S[3]),_===(_=m(S))&&b?b.p(S,w):(b.d(1),b=_(S),b&&(b.c(),b.m(e,null)))},i:Me,o:Me,d(S){S&&u(e),b.d(),h=!1,E()}}}function us(l){return l.installed?l.status==="running"&&l.healthy?"üü¢":l.status==="running"&&!l.healthy?"üü°":l.status==="stopped"?"üî¥":"‚ö™":"‚ö†Ô∏è"}function ds(l){return l.installed?l.status==="running"&&l.healthy?"Running":l.status==="running"&&!l.healthy?"Unhealthy":l.status==="stopped"?"Stopped":"Unknown":"Not Installed"}function ia(l,e,t){let s=[],a=[],n=null,i=!0,o=null,d;const c=[{name:"whisper",displayName:"Whisper STT",endpoint:"/api/whisper-server",port:9883},{name:"kokoro",displayName:"Kokoro TTS",endpoint:"/api/kokoro-server",port:9882},{name:"rvc",displayName:"RVC Voice",endpoint:"/api/rvc-server",port:9881},{name:"sovits",displayName:"GPT-SoVITS",endpoint:"/api/sovits-server",port:9880}];async function h(){const y=[];try{const T=await Re("/api/llm-backend/status");if(T.ok){const V=await T.json();t(2,n={activeBackend:V.config.activeBackend,ollama:{installed:V.available.ollama.installed,running:V.available.ollama.running,model:V.available.ollama.model,endpoint:V.config.ollama.endpoint},vllm:{installed:V.available.vllm.installed,running:V.available.vllm.running,model:V.available.vllm.model||V.config.vllm.model,endpoint:V.config.vllm.endpoint}})}}catch(T){console.error("Failed to fetch LLM backend status:",T)}for(const T of c)try{const V=await Re(T.endpoint);if(V.ok){const U=await V.json();y.push({name:T.name,displayName:T.displayName,endpoint:T.endpoint,port:T.port,status:U.running?"running":"stopped",healthy:U.healthy??U.running,installed:U.installed??!0,details:U})}else y.push({name:T.name,displayName:T.displayName,endpoint:T.endpoint,port:T.port,status:"unknown",healthy:!1,installed:!1})}catch{y.push({name:T.name,displayName:T.displayName,endpoint:T.endpoint,port:T.port,status:"unknown",healthy:!1,installed:!1})}try{const T=await Re("/api/astro-servers");if(T.ok){const V=await T.json();t(1,a=V.servers||[])}}catch(T){console.error("Failed to fetch Astro servers:",T),t(1,a=[])}t(0,s=y),t(3,i=!1)}function E(y){return n?.activeBackend===y}async function m(y,T){t(4,o=`${y}-${T}`);try{const U=await Re(y==="ollama"?"/api/llm-backend/ollama":"/api/llm-backend/vllm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:T})}),q=await U.json();!U.ok||!q.success?alert(`Failed to ${T} ${y}: ${q.error||"Unknown error"}`):setTimeout(h,2e3)}catch(V){alert(`Error ${T}ing ${y}: ${V.message}`)}finally{t(4,o=null)}}async function _(y,T){t(4,o=`${y.name}-${T}`);try{const V=await Re(y.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:T})}),U=await V.json();!V.ok||!U.success?alert(`Failed to ${T} ${y.displayName}: ${U.error||"Unknown error"}`):setTimeout(h,1e3)}catch(V){alert(`Error ${T}ing ${y.displayName}: ${V.message}`)}finally{t(4,o=null)}}async function b(y,T){if(!(T&&!confirm(`‚ö†Ô∏è Warning: This will stop the current Astro dev server.

The UI will disconnect and you'll need to restart the server manually.

Continue?`))){t(4,o=`astro-${y}`);try{const V=await Re("/api/astro-servers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"stop",port:y})}),U=await V.json();!V.ok||!U.success?alert(`Failed to stop Astro server: ${U.error||"Unknown error"}`):T?alert("Server stopped. You will need to restart it manually."):setTimeout(h,1e3)}catch(V){alert(`Error stopping Astro server: ${V.message}`)}finally{t(4,o=null)}}}return tt(()=>{h(),d=setInterval(h,1e4)}),yt(()=>{d&&clearInterval(d)}),[s,a,n,i,o,h,E,m,_,b,()=>m("ollama","stop"),()=>m("ollama","start"),()=>m("vllm","stop"),()=>m("vllm","restart"),()=>m("vllm","start"),y=>b(y.port,y.isCurrentServer),y=>_(y,"stop"),y=>_(y,"restart"),y=>_(y,"start")]}class oa extends ft{constructor(e){super(),vt(this,e,ia,ra,pt,{})}}function fs(l,e,t){const s=l.slice();return s[29]=e[t],s}function vs(l){let e,t,s=l[29].icon+"",a,n,i,o=l[29].label+"",d,c,h,E;function m(){return l[3](l[29])}return{c(){e=p("button"),t=p("span"),a=O(s),n=I(),i=p("span"),d=O(o),c=I(),this.h()},l(_){e=v(_,"BUTTON",{class:!0});var b=g(e);t=v(b,"SPAN",{class:!0});var S=g(t);a=P(S,s),S.forEach(u),n=A(b),i=v(b,"SPAN",{class:!0});var w=g(i);d=P(w,o),w.forEach(u),c=A(b),b.forEach(u),this.h()},h(){f(t,"class","tab-icon svelte-1t89qhr"),f(i,"class","tab-label svelte-1t89qhr"),f(e,"class","tab svelte-1t89qhr"),W(e,"active",l[0]===l[29].id)},m(_,b){R(_,e,b),r(e,t),r(t,a),r(e,n),r(e,i),r(i,d),r(e,c),h||(E=ae(e,"click",m),h=!0)},p(_,b){l=_,b[0]&5&&W(e,"active",l[0]===l[29].id)},d(_){_&&u(e),h=!1,E()}}}function ca(l){let e,t,s;return t=new oa({}),{c(){e=p("div"),Ct(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);St(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"class","servers-container svelte-1t89qhr")},m(a,n){R(a,e,n),Et(t,e,null),s=!0},p:Me,i(a){s||(Ge(t.$$.fragment,a),s=!0)},o(a){We(t.$$.fragment,a),s=!1},d(a){a&&u(e),wt(t)}}}function ua(l){let e,t,s;return t=new Rs({props:{compact:!0}}),{c(){e=p("div"),Ct(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=g(e);St(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"class","monitor-container svelte-1t89qhr")},m(a,n){R(a,e,n),Et(t,e,null),s=!0},p:Me,i(a){s||(Ge(t.$$.fragment,a),s=!0)},o(a){We(t.$$.fragment,a),s=!1},d(a){a&&u(e),wt(t)}}}function da(l){let e,t,s,a="View Mode:",n,i,o,d="Terminal",c,h,E,m,_="Grouped",b,S,w,N,M,D,x;const L=[va,fa],k=[];function C(y,T){return y[1]?0:1}return w=C(l),N=k[w]=L[w](l),{c(){e=p("div"),t=p("div"),s=p("span"),s.textContent=a,n=I(),i=p("label"),o=p("span"),o.textContent=d,c=I(),h=p("input"),E=I(),m=p("span"),m.textContent=_,b=I(),S=p("div"),N.c(),this.h()},l(y){e=v(y,"DIV",{class:!0});var T=g(e);t=v(T,"DIV",{class:!0});var V=g(t);s=v(V,"SPAN",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-11gi1eg"&&(s.textContent=a),n=A(V),i=v(V,"LABEL",{class:!0});var U=g(i);o=v(U,"SPAN",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-8v4q1i"&&(o.textContent=d),c=A(U),h=v(U,"INPUT",{type:!0,class:!0}),E=A(U),m=v(U,"SPAN",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-1ft306s"&&(m.textContent=_),U.forEach(u),V.forEach(u),b=A(T),S=v(T,"DIV",{class:!0});var q=g(S);N.l(q),q.forEach(u),T.forEach(u),this.h()},h(){f(s,"class","text-xs text-gray-600 dark:text-gray-400"),f(o,"class","text-xs text-gray-600 dark:text-gray-400"),f(h,"type","checkbox"),f(h,"class","toggle-checkbox svelte-1t89qhr"),f(m,"class","text-xs text-gray-600 dark:text-gray-400"),f(i,"class","flex items-center gap-2 cursor-pointer"),f(t,"class","p-2 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gray-50 dark:bg-gray-800"),f(S,"class","flex-1 min-h-0"),f(e,"class","audit-container svelte-1t89qhr")},m(y,T){R(y,e,T),r(e,t),r(t,s),r(t,n),r(t,i),r(i,o),r(i,c),r(i,h),h.checked=l[1],r(i,E),r(i,m),r(e,b),r(e,S),k[w].m(S,null),M=!0,D||(x=ae(h,"change",l[4]),D=!0)},p(y,T){T[0]&2&&(h.checked=y[1]);let V=w;w=C(y),w!==V&&(Jt(),We(k[V],1,1,()=>{k[V]=null}),Gt(),N=k[w],N||(N=k[w]=L[w](y),N.c()),Ge(N,1),N.m(S,null))},i(y){M||(Ge(N),M=!0)},o(y){We(N),M=!1},d(y){y&&u(e),k[w].d(),D=!1,x()}}}function fa(l){let e,t;return e=new ws({}),{c(){Ct(e.$$.fragment)},l(s){St(e.$$.fragment,s)},m(s,a){Et(e,s,a),t=!0},i(s){t||(Ge(e.$$.fragment,s),t=!0)},o(s){We(e.$$.fragment,s),t=!1},d(s){wt(e,s)}}}function va(l){let e,t;return e=new Ts({}),{c(){Ct(e.$$.fragment)},l(s){St(e.$$.fragment,s)},m(s,a){Et(e,s,a),t=!0},i(s){t||(Ge(e.$$.fragment,s),t=!0)},o(s){We(e.$$.fragment,s),t=!1},d(s){wt(e,s)}}}function pa(l){let e,t,s,a,n,i,o,d=Ne(l[2]),c=[];for(let _=0;_<d.length;_+=1)c[_]=vs(fs(l,d,_));const h=[da,ua,ca],E=[];function m(_,b){return _[0]==="audit"?0:_[0]==="monitor"?1:_[0]==="servers"?2:-1}return~(n=m(l))&&(i=E[n]=h[n](l)),{c(){e=p("div"),t=p("div");for(let _=0;_<c.length;_+=1)c[_].c();s=I(),a=p("div"),i&&i.c(),this.h()},l(_){e=v(_,"DIV",{class:!0});var b=g(e);t=v(b,"DIV",{class:!0});var S=g(t);for(let N=0;N<c.length;N+=1)c[N].l(S);S.forEach(u),s=A(b),a=v(b,"DIV",{class:!0});var w=g(a);i&&i.l(w),w.forEach(u),b.forEach(u),this.h()},h(){f(t,"class","tabs svelte-1t89qhr"),f(a,"class","tab-content svelte-1t89qhr"),f(e,"class","right-sidebar-container svelte-1t89qhr")},m(_,b){R(_,e,b),r(e,t);for(let S=0;S<c.length;S+=1)c[S]&&c[S].m(t,null);r(e,s),r(e,a),~n&&E[n].m(a,null),o=!0},p(_,b){if(b[0]&5){d=Ne(_[2]);let w;for(w=0;w<d.length;w+=1){const N=fs(_,d,w);c[w]?c[w].p(N,b):(c[w]=vs(N),c[w].c(),c[w].m(t,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=d.length}let S=n;n=m(_),n===S?~n&&E[n].p(_,b):(i&&(Jt(),We(E[S],1,1,()=>{E[S]=null}),Gt()),~n?(i=E[n],i?i.p(_,b):(i=E[n]=h[n](_),i.c()),Ge(i,1),i.m(a,null)):i=null)},i(_){o||(Ge(i),o=!0)},o(_){We(i),o=!1},d(_){_&&u(e),ut(c,_),~n&&E[n].d()}}}function ha(l,e,t){let s="monitor",a=!0;tt(()=>{try{const C=localStorage.getItem("mh_right_sidebar_tab");C!==null&&t(0,s=C);const y=localStorage.getItem("mh_use_enhanced_audit");y!==null&&t(1,a=y==="true")}catch{}});const n=[{id:"audit",label:"Audit Stream",icon:"üìã"},{id:"monitor",label:"Agent Monitor",icon:"ü§ñ"},{id:"servers",label:"Server Status",icon:"üñ•Ô∏è"}];let i=8192,o=512,d=null,c=[],h=!1,E=!1,m="info",_=!0,b=!0,S=!0,w=1e3,N="/api/approvals, /api/status, /api/monitor, /api/sleep-status, /api/activity-ping";async function M(){try{const C=await Re("/api/model-info");C.ok&&(d=await C.json());const y=await Re("/api/models"),T=await y.json();y.ok&&T.success&&(c=Array.isArray(T.loras)?T.loras:[],h=!!T.dualAvailable)}catch(C){console.error("Failed to fetch model info:",C)}}async function D(){try{const C=await Re("/api/lora-toggle");C.ok&&(E=(await C.json()).enabled??!1)}catch(C){console.error("Failed to fetch LoRA config:",C)}}async function x(){try{const C=await Re("/api/logging-config");if(C.ok){const y=await C.json();m=y.level||"info",_=y.console?.colorize??!0,b=y.console?.timestamp??!0,S=y.logSlowRequests??!0,w=y.slowRequestThresholdMs||1e3,N=(y.suppressPatterns||[]).join(", ")}}catch(C){console.error("Failed to fetch logging config:",C)}}tt(()=>{try{const C=localStorage.getItem("llmOptions");if(!C)return;const y=JSON.parse(C);typeof y.num_ctx=="number"&&(i=y.num_ctx),typeof y.num_predict=="number"&&(o=y.num_predict)}catch{}M(),D(),x()});const L=C=>t(0,s=C.id);function k(){a=this.checked,t(1,a)}return l.$$.update=()=>{if(l.$$.dirty[0]&1&&typeof s<"u")try{localStorage.setItem("mh_right_sidebar_tab",s)}catch{}if(l.$$.dirty[0]&2&&typeof a<"u")try{localStorage.setItem("mh_use_enhanced_audit",String(a))}catch{}},[s,a,n,L,k]}class ya extends ft{constructor(e){super(),vt(this,e,ha,pa,pt,{},null,[-1,-1])}}export{ya as default};
