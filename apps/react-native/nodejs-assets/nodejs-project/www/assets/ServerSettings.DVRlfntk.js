const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/native-llm.Sn3FR0s1.js","assets/api-config.BAZ_dc_Y.js","assets/native-updater.C1sriZ06.js"])))=>i.map(i=>d[i]);
import{S as gt,i as jt,s as Et,n as de,d as i,a as A,P as Ue,o as yt,U as qt,c,e as d,g as R,j as v,p as $,b as n,x as ue,f as w,q as B,h as y,t as O,k as S,r as Fe,u as St,v as Dt,R as Re,O as ie,A as Nt,_ as Yt,l as Xt,ah as Jl,N as xl,z as Tt,Q as es,$ as ts,I as Ge,J as Qe,a4 as Wl,a5 as Yl,ai as ls,aj as ss,ak as Qt,al as ns,H as mt,K as bt,L as kt,M as wt}from"./api-config.BAZ_dc_Y.js";import{h as Xl}from"./server-health.C6FYljDX.js";import{s as as,t as rs,a as os,d as is,i as cs,b as Kt,e as il,g as Jt,T as Ut,f as fs,h as us}from"./CenterContent.Bj27L_z_.js";import{S as ds}from"./SyncStatus.DyP8ueQL.js";import{w as vs,d as Zt}from"./index.enr_Xien.js";import{h as hs,i as ps,j as _s,k as ms,l as bs,u as ks,m as ws,n as Cs,o as gs,p as js}from"./profile-sync.fcLjFkDy.js";import"./node-bridge.CdnDofoo.js";import"./navigation.BajXnvhT.js";import"./security-policy.CnYnD1q2.js";import"./clear-events.DBrEJJ6T.js";import"./local-memory.qidMz0ak.js";function cl(s,e,t){const l=s.slice();l[23]=e[t];const a=l[1]?.tierStatuses[l[23].id];l[24]=a;const o=l[4]===l[23].id;return l[25]=o,l}function fl(s,e,t){const l=s.slice();return l[28]=e[t],l}function Es(s){let e,t,l,a="Compute Tier",o,r,f,h,u,_=s[11]()+"",p,b,m=s[6].batteryLevel+"",g,k,C,P,I=s[12]()+"",D,z,N=s[6].networkType+"",M,j,V,E,T,H,L,F,X,J,ee,U,K,x,Z,te,he,oe,me,le,ke,pe,_e,Q,Y,ce,ye,Ae;function Ce(q,W){return q[3]?Ns:Ds}let Se=Ce(s),ve=Se(s),re=s[6].saveDataMode&&ul(),be=Fe(Object.values(Ut)),ne=[];for(let q=0;q<be.length;q+=1)ne[q]=hl(cl(s,be,q));let se=s[1]?.reason&&pl(s);return{c(){e=v("div"),t=v("div"),l=v("h3"),l.textContent=a,o=S(),r=v("button"),ve.c(),f=S(),h=v("div"),u=v("span"),p=O(_),b=S(),g=O(m),k=O("%"),C=S(),P=v("span"),D=O(I),z=S(),M=O(N),j=S(),re&&re.c(),V=S(),E=v("div"),T=v("label"),H=v("input"),F=O(`
        Auto`),X=S(),J=v("label"),ee=v("input"),K=O(`
        Prefer Offline`),x=S(),Z=v("label"),te=v("input"),oe=O(`
        Prefer Server`),me=S(),le=v("label"),ke=v("input"),_e=O(`
        Manual`),Q=S(),Y=v("div");for(let q=0;q<ne.length;q+=1)ne[q].c();ce=S(),se&&se.c(),this.h()},l(q){e=d(q,"DIV",{class:!0});var W=w(e);t=d(W,"DIV",{class:!0});var ae=w(t);l=d(ae,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1occmxv"&&(l.textContent=a),o=y(ae),r=d(ae,"BUTTON",{class:!0});var ge=w(r);ve.l(ge),ge.forEach(i),ae.forEach(i),f=y(W),h=d(W,"DIV",{class:!0});var Ee=w(h);u=d(Ee,"SPAN",{class:!0,title:!0});var Le=w(u);p=B(Le,_),b=y(Le),g=B(Le,m),k=B(Le,"%"),Le.forEach(i),C=y(Ee),P=d(Ee,"SPAN",{class:!0,title:!0});var Me=w(P);D=B(Me,I),z=y(Me),M=B(Me,N),Me.forEach(i),j=y(Ee),re&&re.l(Ee),Ee.forEach(i),V=y(W),E=d(W,"DIV",{class:!0});var we=w(E);T=d(we,"LABEL",{class:!0});var De=w(T);H=d(De,"INPUT",{type:!0,name:!0}),F=B(De,`
        Auto`),De.forEach(i),X=y(we),J=d(we,"LABEL",{class:!0});var nt=w(J);ee=d(nt,"INPUT",{type:!0,name:!0}),K=B(nt,`
        Prefer Offline`),nt.forEach(i),x=y(we),Z=d(we,"LABEL",{class:!0});var Ke=w(Z);te=d(Ke,"INPUT",{type:!0,name:!0}),oe=B(Ke,`
        Prefer Server`),Ke.forEach(i),me=y(we),le=d(we,"LABEL",{class:!0});var qe=w(le);ke=d(qe,"INPUT",{type:!0,name:!0}),_e=B(qe,`
        Manual`),qe.forEach(i),we.forEach(i),Q=y(W),Y=d(W,"DIV",{class:!0});var _t=w(Y);for(let Je=0;Je<ne.length;Je+=1)ne[Je].l(_t);_t.forEach(i),ce=y(W),se&&se.l(W),W.forEach(i),this.h()},h(){c(l,"class","svelte-1loaz6j"),c(r,"class","refresh-btn svelte-1loaz6j"),r.disabled=s[3],c(t,"class","tier-header svelte-1loaz6j"),c(u,"class","status-item svelte-1loaz6j"),c(u,"title","Battery"),c(P,"class","status-item svelte-1loaz6j"),c(P,"title","Network"),c(h,"class","device-status svelte-1loaz6j"),c(H,"type","radio"),c(H,"name","mode"),H.value="auto",H.checked=L=s[5].mode==="auto",c(T,"class","svelte-1loaz6j"),c(ee,"type","radio"),c(ee,"name","mode"),ee.value="prefer-offline",ee.checked=U=s[5].mode==="prefer-offline",c(J,"class","svelte-1loaz6j"),c(te,"type","radio"),c(te,"name","mode"),te.value="prefer-server",te.checked=he=s[5].mode==="prefer-server",c(Z,"class","svelte-1loaz6j"),c(ke,"type","radio"),c(ke,"name","mode"),ke.value="manual",ke.checked=pe=s[5].mode==="manual",c(le,"class","svelte-1loaz6j"),c(E,"class","mode-selector svelte-1loaz6j"),c(Y,"class","tier-cards svelte-1loaz6j"),c(e,"class","tier-selector svelte-1loaz6j")},m(q,W){A(q,e,W),n(e,t),n(t,l),n(t,o),n(t,r),ve.m(r,null),n(e,f),n(e,h),n(h,u),n(u,p),n(u,b),n(u,g),n(u,k),n(h,C),n(h,P),n(P,D),n(P,z),n(P,M),n(h,j),re&&re.m(h,null),n(e,V),n(e,E),n(E,T),n(T,H),n(T,F),n(E,X),n(E,J),n(J,ee),n(J,K),n(E,x),n(E,Z),n(Z,te),n(Z,oe),n(E,me),n(E,le),n(le,ke),n(le,_e),n(e,Q),n(e,Y);for(let ae=0;ae<ne.length;ae+=1)ne[ae]&&ne[ae].m(Y,null);n(e,ce),se&&se.m(e,null),ye||(Ae=[ue(r,"click",s[7]),ue(H,"change",s[13]),ue(ee,"change",s[14]),ue(te,"change",s[15]),ue(ke,"change",s[16])],ye=!0)},p(q,W){if(Se!==(Se=Ce(q))&&(ve.d(1),ve=Se(q),ve&&(ve.c(),ve.m(r,null))),W&8&&(r.disabled=q[3]),W&64&&m!==(m=q[6].batteryLevel+"")&&$(g,m),W&64&&N!==(N=q[6].networkType+"")&&$(M,N),q[6].saveDataMode?re||(re=ul(),re.c(),re.m(h,null)):re&&(re.d(1),re=null),W&32&&L!==(L=q[5].mode==="auto")&&(H.checked=L),W&32&&U!==(U=q[5].mode==="prefer-offline")&&(ee.checked=U),W&32&&he!==(he=q[5].mode==="prefer-server")&&(te.checked=he),W&32&&pe!==(pe=q[5].mode==="manual")&&(ke.checked=pe),W&1586){be=Fe(Object.values(Ut));let ae;for(ae=0;ae<be.length;ae+=1){const ge=cl(q,be,ae);ne[ae]?ne[ae].p(ge,W):(ne[ae]=hl(ge),ne[ae].c(),ne[ae].m(Y,null))}for(;ae<ne.length;ae+=1)ne[ae].d(1);ne.length=be.length}q[1]?.reason?se?se.p(q,W):(se=pl(q),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},d(q){q&&i(e),ve.d(),re&&re.d(),St(ne,q),se&&se.d(),ye=!1,Dt(Ae)}}}function ys(s){let e,t,l=Jt(s[4])+"",a,o,r,f=Ut[s[4]].name+"",h,u,_,p,b=s[3]&&_l();return{c(){e=v("button"),t=v("span"),a=O(l),o=S(),r=v("span"),h=O(f),u=S(),b&&b.c(),this.h()},l(m){e=d(m,"BUTTON",{class:!0});var g=w(e);t=d(g,"SPAN",{class:!0});var k=w(t);a=B(k,l),k.forEach(i),o=y(g),r=d(g,"SPAN",{class:!0});var C=w(r);h=B(C,f),C.forEach(i),u=y(g),b&&b.l(g),g.forEach(i),this.h()},h(){c(t,"class","tier-icon svelte-1loaz6j"),c(r,"class","tier-name svelte-1loaz6j"),c(e,"class","tier-compact svelte-1loaz6j"),e.disabled=s[3]},m(m,g){A(m,e,g),n(e,t),n(t,a),n(e,o),n(e,r),n(r,h),n(e,u),b&&b.m(e,null),_||(p=ue(e,"click",s[7]),_=!0)},p(m,g){g&16&&l!==(l=Jt(m[4])+"")&&$(a,l),g&16&&f!==(f=Ut[m[4]].name+"")&&$(h,f),m[3]?b||(b=_l(),b.c(),b.m(e,null)):b&&(b.d(1),b=null),g&8&&(e.disabled=m[3])},d(m){m&&i(e),b&&b.d(),_=!1,p()}}}function Ss(s){let e,t='<span class="spinner svelte-1loaz6j"></span> <span>Detecting tiers...</span>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-j9sa9v"&&(e.innerHTML=t),this.h()},h(){c(e,"class","tier-selector loading svelte-1loaz6j")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function Ds(s){let e;return{c(){e=O("üîÑ")},l(t){e=B(t,"üîÑ")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function Ns(s){let e;return{c(){e=v("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),w(e).forEach(i),this.h()},h(){c(e,"class","spinner small svelte-1loaz6j")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function ul(s){let e,t="üíæ Saver";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),R(e)!=="svelte-5s7pax"&&(e.textContent=t),this.h()},h(){c(e,"class","status-item warning svelte-1loaz6j"),c(e,"title","Data Saver Active")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function dl(s){let e,t=fs(s[28])+"",l;return{c(){e=v("span"),l=O(t),this.h()},l(a){e=d(a,"SPAN",{class:!0,title:!0});var o=w(e);l=B(o,t),o.forEach(i),this.h()},h(){c(e,"class","capability svelte-1loaz6j"),c(e,"title",s[28])},m(a,o){A(a,e,o),n(e,l)},p:de,d(a){a&&i(e)}}}function Ps(s){let e,t,l=s[23].capabilities.length-4+"",a;return{c(){e=v("span"),t=O("+"),a=O(l),this.h()},l(o){e=d(o,"SPAN",{class:!0});var r=w(e);t=B(r,"+"),a=B(r,l),r.forEach(i),this.h()},h(){c(e,"class","capability more svelte-1loaz6j")},m(o,r){A(o,e,r),n(e,t),n(e,a)},p:de,d(o){o&&i(e)}}}function vl(s){let e,t="Active";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-59e60i"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-1loaz6j")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function hl(s){let e,t,l,a=Jt(s[23].id)+"",o,r,f,h=s[23].name+"",u,_,p,b,m,g=s[23].model+"",k,C,P,I=s[10](s[23].id)+"",D,z,N,M,j,V,E,T,H,L=Fe(s[23].capabilities.slice(0,4)),F=[];for(let U=0;U<L.length;U+=1)F[U]=dl(fl(s,L,U));let X=s[23].capabilities.length>4&&Ps(s),J=s[25]&&vl();function ee(){return s[17](s[23])}return{c(){e=v("button"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),u=O(h),_=S(),p=v("span"),b=S(),m=v("div"),k=O(g),C=S(),P=v("div"),D=O(I),z=S(),N=v("div");for(let U=0;U<F.length;U+=1)F[U].c();M=S(),X&&X.c(),j=S(),J&&J.c(),V=S(),this.h()},l(U){e=d(U,"BUTTON",{class:!0});var K=w(e);t=d(K,"DIV",{class:!0});var x=w(t);l=d(x,"SPAN",{class:!0});var Z=w(l);o=B(Z,a),Z.forEach(i),r=y(x),f=d(x,"SPAN",{class:!0});var te=w(f);u=B(te,h),te.forEach(i),_=y(x),p=d(x,"SPAN",{class:!0,style:!0}),w(p).forEach(i),x.forEach(i),b=y(K),m=d(K,"DIV",{class:!0});var he=w(m);k=B(he,g),he.forEach(i),C=y(K),P=d(K,"DIV",{class:!0});var oe=w(P);D=B(oe,I),oe.forEach(i),z=y(K),N=d(K,"DIV",{class:!0});var me=w(N);for(let le=0;le<F.length;le+=1)F[le].l(me);M=y(me),X&&X.l(me),me.forEach(i),j=y(K),J&&J.l(K),V=y(K),K.forEach(i),this.h()},h(){c(l,"class","tier-icon large svelte-1loaz6j"),c(f,"class","tier-name svelte-1loaz6j"),c(p,"class","status-dot svelte-1loaz6j"),Re(p,"background-color",ml(s[24]?.available||!1)),c(t,"class","tier-card-header svelte-1loaz6j"),c(m,"class","tier-model svelte-1loaz6j"),c(P,"class","tier-status svelte-1loaz6j"),c(N,"class","tier-capabilities svelte-1loaz6j"),c(e,"class","tier-card svelte-1loaz6j"),e.disabled=E=s[5].mode!=="manual",ie(e,"selected",s[25]),ie(e,"available",s[24]?.available),ie(e,"unavailable",!s[24]?.available)},m(U,K){A(U,e,K),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),n(f,u),n(t,_),n(t,p),n(e,b),n(e,m),n(m,k),n(e,C),n(e,P),n(P,D),n(e,z),n(e,N);for(let x=0;x<F.length;x+=1)F[x]&&F[x].m(N,null);n(N,M),X&&X.m(N,null),n(e,j),J&&J.m(e,null),n(e,V),T||(H=ue(e,"click",ee),T=!0)},p(U,K){if(s=U,K&2&&Re(p,"background-color",ml(s[24]?.available||!1)),K&0){L=Fe(s[23].capabilities.slice(0,4));let x;for(x=0;x<L.length;x+=1){const Z=fl(s,L,x);F[x]?F[x].p(Z,K):(F[x]=dl(Z),F[x].c(),F[x].m(N,M))}for(;x<F.length;x+=1)F[x].d(1);F.length=L.length}s[23].capabilities.length>4&&X.p(s,K),s[25]?J||(J=vl(),J.c(),J.m(e,V)):J&&(J.d(1),J=null),K&32&&E!==(E=s[5].mode!=="manual")&&(e.disabled=E),K&16&&ie(e,"selected",s[25]),K&2&&ie(e,"available",s[24]?.available),K&2&&ie(e,"unavailable",!s[24]?.available)},d(U){U&&i(e),St(F,U),X&&X.d(),J&&J.d(),T=!1,H()}}}function pl(s){let e,t,l="Why:",a,o=s[1].reason+"",r;return{c(){e=v("div"),t=v("strong"),t.textContent=l,a=S(),r=O(o),this.h()},l(f){e=d(f,"DIV",{class:!0});var h=w(e);t=d(h,"STRONG",{"data-svelte-h":!0}),R(t)!=="svelte-shvnp0"&&(t.textContent=l),a=y(h),r=B(h,o),h.forEach(i),this.h()},h(){c(e,"class","selection-reason svelte-1loaz6j")},m(f,h){A(f,e,h),n(e,t),n(e,a),n(e,r)},p(f,h){h&2&&o!==(o=f[1].reason+"")&&$(r,o)},d(f){f&&i(e)}}}function _l(s){let e;return{c(){e=v("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),w(e).forEach(i),this.h()},h(){c(e,"class","spinner small svelte-1loaz6j")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function Is(s){let e;function t(o,r){return o[2]?Ss:o[0]?ys:Es}let l=t(s),a=l(s);return{c(){a.c(),e=Ue()},l(o){a.l(o),e=Ue()},m(o,r){a.m(o,r),A(o,e,r)},p(o,[r]){l===(l=t(o))&&a?a.p(o,r):(a.d(1),a=l(o),a&&(a.c(),a.m(e.parentNode,e)))},i:de,o:de,d(o){o&&i(e),a.d(o)}}}function ml(s){return s?"#22c55e":"#ef4444"}function Vs(s,e,t){let{compact:l=!1}=e,a=null,o=!0,r=!1,f="server",h={mode:"auto"},u={batteryLevel:100,batteryCharging:!1,networkType:"unknown",saveDataMode:!1};const _=as.subscribe(E=>t(4,f=E)),p=rs.subscribe(E=>t(5,h=E)),b=os.subscribe(E=>E),m=is.subscribe(E=>t(6,u=E));yt(async()=>{try{t(1,a=await cs())}catch(E){console.error("Tier selection init failed:",E)}t(2,o=!1)}),qt(()=>{_(),p(),b(),m(),us()});async function g(){t(3,r=!0);try{t(1,a=await Kt())}catch(E){console.error("Tier refresh failed:",E)}t(3,r=!1)}async function k(E){await il(E),t(1,a=await Kt())}async function C(E){await il("manual",E),t(1,a=await Kt())}function P(E){const T=a?.tierStatuses[E];return T?T.available?T.latencyMs?`${T.latencyMs}ms`:"Available":T.error||"Unavailable":"Unknown"}function I(){return u.batteryCharging?"üîå":u.batteryLevel>75?"üîã":u.batteryLevel>25?"ü™´":"üî¥"}function D(){switch(u.networkType){case"wifi":return"üì∂";case"cellular":return"üì±";case"ethernet":return"üîå";case"none":return"üìµ";default:return"‚ùì"}}const z=()=>k("auto"),N=()=>k("prefer-offline"),M=()=>k("prefer-server"),j=()=>k("manual"),V=E=>C(E.id);return s.$$set=E=>{"compact"in E&&t(0,l=E.compact)},[l,a,o,r,f,h,u,g,k,C,P,I,D,z,N,M,j,V]}class As extends gt{constructor(e){super(),jt(this,e,Vs,Is,Et,{compact:0})}}function bl(s,e,t){const l=s.slice();l[18]=e[t];const a=l[14](l[18].name);return l[19]=a,l}function kl(s,e,t){const l=s.slice();return l[18]=e[t],l}function Ms(s){let e;return{c(){e=O("‚Üª Refresh")},l(t){e=B(t,"‚Üª Refresh")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function Ts(s){let e,t="‚Üª";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ul7xd3"&&(e.textContent=t),this.h()},h(){c(e,"class","spinner svelte-6nkjfg")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Us(s){let e,t,l,a="Downloaded Models",o,r,f,h,u="Available for Download",_,p,b,m;function g(j,V){return j[1]?Bs:zs}let k=g(s),C=k(s);function P(j,V){return j[0].length===0?Hs:Os}let I=P(s),D=I(s),z=Fe(s[9]),N=[];for(let j=0;j<z.length;j+=1)N[j]=Cl(bl(s,z,j));let M=s[7]&&gl(s);return{c(){C.c(),e=S(),t=v("div"),l=v("h4"),l.textContent=a,o=S(),D.c(),r=S(),f=v("div"),h=v("h4"),h.textContent=u,_=S(),p=v("div");for(let j=0;j<N.length;j+=1)N[j].c();b=S(),M&&M.c(),m=Ue(),this.h()},l(j){C.l(j),e=y(j),t=d(j,"DIV",{class:!0});var V=w(t);l=d(V,"H4",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1985yh"&&(l.textContent=a),o=y(V),D.l(V),V.forEach(i),r=y(j),f=d(j,"DIV",{class:!0});var E=w(f);h=d(E,"H4",{class:!0,"data-svelte-h":!0}),R(h)!=="svelte-133p02m"&&(h.textContent=u),_=y(E),p=d(E,"DIV",{class:!0});var T=w(p);for(let H=0;H<N.length;H+=1)N[H].l(T);T.forEach(i),E.forEach(i),b=y(j),M&&M.l(j),m=Ue(),this.h()},h(){c(l,"class","svelte-6nkjfg"),c(t,"class","model-section svelte-6nkjfg"),c(h,"class","svelte-6nkjfg"),c(p,"class","model-list svelte-6nkjfg"),c(f,"class","model-section svelte-6nkjfg")},m(j,V){C.m(j,V),A(j,e,V),A(j,t,V),n(t,l),n(t,o),D.m(t,null),A(j,r,V),A(j,f,V),n(f,h),n(f,_),n(f,p);for(let E=0;E<N.length;E+=1)N[E]&&N[E].m(p,null);A(j,b,V),M&&M.m(j,V),A(j,m,V)},p(j,V){if(k===(k=g(j))&&C?C.p(j,V):(C.d(1),C=k(j),C&&(C.c(),C.m(e.parentNode,e))),I===(I=P(j))&&D?D.p(j,V):(D.d(1),D=I(j),D&&(D.c(),D.m(t,null))),V&19e3){z=Fe(j[9]);let E;for(E=0;E<z.length;E+=1){const T=bl(j,z,E);N[E]?N[E].p(T,V):(N[E]=Cl(T),N[E].c(),N[E].m(p,null))}for(;E<N.length;E+=1)N[E].d(1);N.length=z.length}j[7]?M?M.p(j,V):(M=gl(j),M.c(),M.m(m.parentNode,m)):M&&(M.d(1),M=null)},d(j){j&&(i(e),i(t),i(r),i(f),i(b),i(m)),C.d(j),D.d(),St(N,j),M&&M.d(j)}}}function Ls(s){let e,t="Loading models...";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1aic6lj"&&(e.textContent=t),this.h()},h(){c(e,"class","loading svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function qs(s){let e,t='<p class="svelte-6nkjfg">On-device models are only available in the mobile app.</p> <p class="svelte-6nkjfg">Download the MetaHuman app to use offline AI features.</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1rr3943"&&(e.innerHTML=t),this.h()},h(){c(e,"class","info-box svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function zs(s){let e,t="No model loaded. Select a model below to enable offline AI.";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-11jso0j"&&(e.textContent=t),this.h()},h(){c(e,"class","no-model svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function Bs(s){let e,t,l,a="‚úì",o,r,f,h,u,_="Unload",p,b;return{c(){e=v("div"),t=v("div"),l=v("span"),l.textContent=a,o=S(),r=v("span"),f=O(s[1]),h=S(),u=v("button"),u.textContent=_,this.h()},l(m){e=d(m,"DIV",{class:!0});var g=w(e);t=d(g,"DIV",{class:!0});var k=w(t);l=d(k,"SPAN",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-enpll7"&&(l.textContent=a),o=y(k),r=d(k,"SPAN",{class:!0});var C=w(r);f=B(C,s[1]),C.forEach(i),k.forEach(i),h=y(g),u=d(g,"BUTTON",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-fz042m"&&(u.textContent=_),g.forEach(i),this.h()},h(){c(l,"class","loaded-icon svelte-6nkjfg"),c(r,"class","loaded-name svelte-6nkjfg"),c(t,"class","loaded-header svelte-6nkjfg"),c(u,"class","btn-unload svelte-6nkjfg"),c(e,"class","loaded-model svelte-6nkjfg")},m(m,g){A(m,e,g),n(e,t),n(t,l),n(t,o),n(t,r),n(r,f),n(e,h),n(e,u),p||(b=ue(u,"click",s[13]),p=!0)},p(m,g){g&2&&$(f,m[1])},d(m){m&&i(e),p=!1,b()}}}function Os(s){let e,t=Fe(s[0]),l=[];for(let a=0;a<t.length;a+=1)l[a]=wl(kl(s,t,a));return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var o=w(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(i),this.h()},h(){c(e,"class","model-list svelte-6nkjfg")},m(a,o){A(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&4163){t=Fe(a[0]);let r;for(r=0;r<t.length;r+=1){const f=kl(a,t,r);l[r]?l[r].p(f,o):(l[r]=wl(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&i(e),St(l,a)}}}function Hs(s){let e,t="No models downloaded yet. Download one below.";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-ddhnxp"&&(e.textContent=t),this.h()},h(){c(e,"class","empty-message svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function Fs(s){let e,t=s[6]===s[18].name?"Loading...":"Load",l,a,o,r;function f(){return s[15](s[18])}return{c(){e=v("button"),l=O(t),this.h()},l(h){e=d(h,"BUTTON",{class:!0});var u=w(e);l=B(u,t),u.forEach(i),this.h()},h(){c(e,"class","btn-load svelte-6nkjfg"),e.disabled=a=s[6]!==null},m(h,u){A(h,e,u),n(e,l),o||(r=ue(e,"click",f),o=!0)},p(h,u){s=h,u&65&&t!==(t=s[6]===s[18].name?"Loading...":"Load")&&$(l,t),u&64&&a!==(a=s[6]!==null)&&(e.disabled=a)},d(h){h&&i(e),o=!1,r()}}}function Rs(s){let e,t="Loaded";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-hmoycn"&&(e.textContent=t),this.h()},h(){c(e,"class","loaded-badge svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function wl(s){let e,t,l,a=s[18].name+"",o,r,f,h=Wt(s[18].sizeMB)+"",u,_,p,b=s[18].quantization+"",m,g,k,C;function P(z,N){return z[1]===z[18].name?Rs:Fs}let I=P(s),D=I(s);return{c(){e=v("div"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),u=O(h),_=S(),p=v("span"),m=O(b),g=S(),k=v("div"),D.c(),C=S(),this.h()},l(z){e=d(z,"DIV",{class:!0});var N=w(e);t=d(N,"DIV",{class:!0});var M=w(t);l=d(M,"SPAN",{class:!0});var j=w(l);o=B(j,a),j.forEach(i),r=y(M),f=d(M,"SPAN",{class:!0});var V=w(f);u=B(V,h),V.forEach(i),_=y(M),p=d(M,"SPAN",{class:!0});var E=w(p);m=B(E,b),E.forEach(i),M.forEach(i),g=y(N),k=d(N,"DIV",{class:!0});var T=w(k);D.l(T),T.forEach(i),C=y(N),N.forEach(i),this.h()},h(){c(l,"class","model-name svelte-6nkjfg"),c(f,"class","model-size svelte-6nkjfg"),c(p,"class","model-quant svelte-6nkjfg"),c(t,"class","model-info svelte-6nkjfg"),c(k,"class","model-actions svelte-6nkjfg"),c(e,"class","model-card svelte-6nkjfg"),ie(e,"loaded",s[1]===s[18].name)},m(z,N){A(z,e,N),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),n(f,u),n(t,_),n(t,p),n(p,m),n(e,g),n(e,k),D.m(k,null),n(e,C)},p(z,N){N&1&&a!==(a=z[18].name+"")&&$(o,a),N&1&&h!==(h=Wt(z[18].sizeMB)+"")&&$(u,h),N&1&&b!==(b=z[18].quantization+"")&&$(m,b),I===(I=P(z))&&D?D.p(z,N):(D.d(1),D=I(z),D&&(D.c(),D.m(k,null))),N&3&&ie(e,"loaded",z[1]===z[18].name)},d(z){z&&i(e),D.d()}}}function Gs(s){let e,t,l,a;function o(){return s[16](s[18])}return{c(){e=v("button"),t=O("Download"),this.h()},l(r){e=d(r,"BUTTON",{class:!0});var f=w(e);t=B(f,"Download"),f.forEach(i),this.h()},h(){c(e,"class","btn-download svelte-6nkjfg"),e.disabled=s[3]},m(r,f){A(r,e,f),n(e,t),l||(a=ue(e,"click",o),l=!0)},p(r,f){s=r,f&8&&(e.disabled=s[3])},d(r){r&&i(e),l=!1,a()}}}function Qs(s){let e,t,l,a,o,r;return{c(){e=v("div"),t=v("div"),l=S(),a=v("span"),o=O(s[4]),r=O("%"),this.h()},l(f){e=d(f,"DIV",{class:!0});var h=w(e);t=d(h,"DIV",{class:!0,style:!0}),w(t).forEach(i),l=y(h),a=d(h,"SPAN",{class:!0});var u=w(a);o=B(u,s[4]),r=B(u,"%"),u.forEach(i),h.forEach(i),this.h()},h(){c(t,"class","progress-bar svelte-6nkjfg"),Re(t,"width",s[4]+"%"),c(a,"class","progress-text svelte-6nkjfg"),c(e,"class","download-progress svelte-6nkjfg")},m(f,h){A(f,e,h),n(e,t),n(e,l),n(e,a),n(a,o),n(a,r)},p(f,h){h&16&&Re(t,"width",f[4]+"%"),h&16&&$(o,f[4])},d(f){f&&i(e)}}}function Ks(s){let e,t="Downloaded";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-4liin3"&&(e.textContent=t),this.h()},h(){c(e,"class","downloaded-badge svelte-6nkjfg")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function Cl(s){let e,t,l,a=s[18].displayName+"",o,r,f,h=Wt(s[18].sizeMB)+"",u,_,p,b=s[18].quantization+"",m,g,k,C=s[18].description+"",P,I,D,z;function N(V,E){return V[19]?Ks:V[5]===V[18].name?Qs:Gs}let M=N(s),j=M(s);return{c(){e=v("div"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),u=O(h),_=S(),p=v("span"),m=O(b),g=S(),k=v("p"),P=O(C),I=S(),D=v("div"),j.c(),z=S(),this.h()},l(V){e=d(V,"DIV",{class:!0});var E=w(e);t=d(E,"DIV",{class:!0});var T=w(t);l=d(T,"SPAN",{class:!0});var H=w(l);o=B(H,a),H.forEach(i),r=y(T),f=d(T,"SPAN",{class:!0});var L=w(f);u=B(L,h),L.forEach(i),_=y(T),p=d(T,"SPAN",{class:!0});var F=w(p);m=B(F,b),F.forEach(i),T.forEach(i),g=y(E),k=d(E,"P",{class:!0});var X=w(k);P=B(X,C),X.forEach(i),I=y(E),D=d(E,"DIV",{class:!0});var J=w(D);j.l(J),J.forEach(i),z=y(E),E.forEach(i),this.h()},h(){c(l,"class","model-name svelte-6nkjfg"),c(f,"class","model-size svelte-6nkjfg"),c(p,"class","model-quant svelte-6nkjfg"),c(t,"class","model-info svelte-6nkjfg"),c(k,"class","model-desc svelte-6nkjfg"),c(D,"class","model-actions svelte-6nkjfg"),c(e,"class","model-card svelte-6nkjfg"),ie(e,"downloaded",s[19])},m(V,E){A(V,e,E),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),n(f,u),n(t,_),n(t,p),n(p,m),n(e,g),n(e,k),n(k,P),n(e,I),n(e,D),j.m(D,null),n(e,z)},p(V,E){M===(M=N(V))&&j?j.p(V,E):(j.d(1),j=M(V),j&&(j.c(),j.m(D,null)))},d(V){V&&i(e),j.d()}}}function gl(s){let e,t;return{c(){e=v("div"),t=O(s[7]),this.h()},l(l){e=d(l,"DIV",{class:!0});var a=w(e);t=B(a,s[7]),a.forEach(i),this.h()},h(){c(e,"class","error-message svelte-6nkjfg")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&128&&$(t,l[7])},d(l){l&&i(e)}}}function Js(s){let e,t,l,a="On-Device Models",o,r,f,h,u;function _(C,P){return C[2]?Ts:Ms}let p=_(s),b=p(s);function m(C,P){return C[8]?C[2]?Ls:Us:qs}let g=m(s),k=g(s);return{c(){e=v("div"),t=v("div"),l=v("h3"),l.textContent=a,o=S(),r=v("button"),b.c(),f=S(),k.c(),this.h()},l(C){e=d(C,"DIV",{class:!0});var P=w(e);t=d(P,"DIV",{class:!0});var I=w(t);l=d(I,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-r4lnkc"&&(l.textContent=a),o=y(I),r=d(I,"BUTTON",{class:!0});var D=w(r);b.l(D),D.forEach(i),I.forEach(i),f=y(P),k.l(P),P.forEach(i),this.h()},h(){c(l,"class","svelte-6nkjfg"),c(r,"class","refresh-btn svelte-6nkjfg"),r.disabled=s[2],c(t,"class","section-header svelte-6nkjfg"),c(e,"class","model-manager svelte-6nkjfg")},m(C,P){A(C,e,P),n(e,t),n(t,l),n(t,o),n(t,r),b.m(r,null),n(e,f),k.m(e,null),h||(u=ue(r,"click",s[10]),h=!0)},p(C,[P]){p!==(p=_(C))&&(b.d(1),b=p(C),b&&(b.c(),b.m(r,null))),P&4&&(r.disabled=C[2]),g===(g=m(C))&&k?k.p(C,P):(k.d(1),k=g(C),k&&(k.c(),k.m(e,null)))},i:de,o:de,d(C){C&&i(e),b.d(),k.d(),h=!1,u()}}}async function Ct(){const{NativeLLM:s}=await Yt(async()=>{const{NativeLLM:e}=await import("./native-llm.Sn3FR0s1.js");return{NativeLLM:e}},__vite__mapDeps([0,1]));return s}function Wt(s){return s>=1024?`${(s/1024).toFixed(1)} GB`:`${s} MB`}function Ws(s,e,t){const l=[{name:"qwen3-1.7b-q4_k_m",displayName:"Qwen3 1.7B",description:"Fast, efficient model for basic chat. Good for low-power devices.",sizeMB:1100,url:"https://huggingface.co/Qwen/Qwen3-1.7B-GGUF/resolve/main/qwen3-1.7b-q4_k_m.gguf",quantization:"Q4_K_M"},{name:"qwen3-4b-q4_k_m",displayName:"Qwen3 4B",description:"Balanced model with good quality and speed.",sizeMB:2500,url:"https://huggingface.co/Qwen/Qwen3-4B-GGUF/resolve/main/qwen3-4b-q4_k_m.gguf",quantization:"Q4_K_M"}];let a=[],o=null,r=!0,f=!1,h=0,u=null,_=null,p=null,b=!1,m=null;yt(async()=>{if(t(8,b=Nt()),!b){t(2,r=!1);return}await g(),m=(await(await Ct()).addListener("downloadProgress",j=>{t(4,h=j.progress)})).remove,t(2,r=!1)}),qt(()=>{m&&m()});async function g(){try{const N=await Ct(),M=await N.listModels();t(0,a=M.models);const j=await N.isModelLoaded();t(1,o=j.loaded&&j.modelName||null)}catch(N){console.error("Failed to list models:",N),t(7,p=N instanceof Error?N.message:"Failed to list models")}}async function k(N){if(!f){t(3,f=!0),t(5,u=N.name),t(4,h=0),t(7,p=null);try{const j=await(await Ct()).downloadModel({url:N.url,filename:`${N.name}.gguf`});j.success?await g():t(7,p=j.error||"Download failed")}catch(M){t(7,p=M instanceof Error?M.message:"Download failed")}finally{t(3,f=!1),t(5,u=null)}}}async function C(N){if(!_){t(6,_=N.name),t(7,p=null);try{const j=await(await Ct()).loadModel({modelPath:N.path,contextSize:2048});j.success?t(1,o=N.name):t(7,p=j.error||"Failed to load model")}catch(M){t(7,p=M instanceof Error?M.message:"Failed to load model")}finally{t(6,_=null)}}}async function P(){try{await(await Ct()).unloadModel(),t(1,o=null)}catch(N){t(7,p=N instanceof Error?N.message:"Failed to unload model")}}function I(N){return a.some(M=>M.name.includes(N))}return[a,o,r,f,h,u,_,p,b,l,g,k,C,P,I,N=>C(N),N=>k(N)]}class Ys extends gt{constructor(e){super(),jt(this,e,Ws,Js,Et,{})}}const Xs={checking:!1,updating:!1,updateProgress:0,updateAvailable:!1,error:null,lastChecked:null,platform:"unknown",currentVersion:"0.0.0",currentVersionCode:0,latestMobileVersion:null,serverUpdateInfo:null},je=vs(Xs);Zt(je,s=>s.updateAvailable);Zt(je,s=>s.checking);Zt(je,s=>s.updating);function Zl(){return Nt()?"mobile":"server"}async function $l(){if(!Nt())return{version:"0.0.0",versionCode:0,packageName:"com.metahuman.os"};try{const{NativeUpdater:s}=await Yt(async()=>{const{NativeUpdater:t}=await import("./native-updater.C1sriZ06.js");return{NativeUpdater:t}},__vite__mapDeps([2,1]));return await s.getAppInfo()}catch{return{version:"1.0.0",versionCode:1,packageName:"com.metahuman.os"}}}async function Zs(){const s=Zl();je.update(e=>({...e,checking:!0,error:null,platform:s}));try{return s==="mobile"?await $s():await xs()}catch(e){const t=e instanceof Error?e.message:"Failed to check for updates";return je.update(l=>({...l,checking:!1,error:t})),!1}}async function $s(){const s=await $l();je.update(l=>({...l,currentVersion:s.version,currentVersionCode:s.versionCode}));const e=await Xt(`/api/mobile/version?current=${s.version}&versionCode=${s.versionCode}`);if(!e.ok){const l=await e.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||`Server returned ${e.status}`)}const t=await e.json();return je.update(l=>({...l,checking:!1,latestMobileVersion:t.latest,updateAvailable:t.updateAvailable,lastChecked:new Date().toISOString()})),t.updateAvailable}async function xs(){const s=await Xt("/api/server-update");if(!s.ok){const t=await s.json().catch(()=>({error:"Unknown error"}));throw new Error(t.error||`Server returned ${s.status}`)}const e=await s.json();return je.update(t=>({...t,checking:!1,serverUpdateInfo:e,updateAvailable:e.updateAvailable,currentVersion:e.currentVersion,lastChecked:new Date().toISOString()})),e.updateAvailable}async function en(){const s=await new Promise(e=>{je.subscribe(t=>e(t))()});if(!s.updateAvailable)throw new Error("No update available");return s.platform==="mobile"?await tn():await ln()}async function tn(){const s=await new Promise(e=>{je.subscribe(t=>e(t))()});if(!s.latestMobileVersion)throw new Error("No update available to download");je.update(e=>({...e,updating:!0,updateProgress:0,error:null}));try{const{NativeUpdater:e}=await Yt(async()=>{const{NativeUpdater:o}=await import("./native-updater.C1sriZ06.js");return{NativeUpdater:o}},__vite__mapDeps([2,1])),l=`${await Jl()||window.location.origin}${s.latestMobileVersion.downloadUrl}`;await e.addListener("downloadProgress",o=>{je.update(r=>({...r,updateProgress:o.progress}))});const a=await e.downloadAndInstall({url:l,version:s.latestMobileVersion.version});if(!a.success)throw new Error(a.error||"Download failed");je.update(o=>({...o,updating:!1,updateProgress:100}))}catch(e){const t=e instanceof Error?e.message:"Download failed";throw je.update(l=>({...l,updating:!1,error:t})),e}}async function ln(){const s=await new Promise(e=>{je.subscribe(t=>e(t))()});if(!s.serverUpdateInfo?.canUpdate)throw new Error(s.serverUpdateInfo?.reason||"Cannot update");je.update(e=>({...e,updating:!0,updateProgress:0,error:null}));try{je.update(l=>({...l,updateProgress:30}));const e=await Xt("/api/server-update",{method:"POST"});if(!e.ok){const l=await e.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||"Update failed")}const t=await e.json();if(je.update(l=>({...l,updateProgress:80})),!t.success)throw new Error(t.message||"Update failed");je.update(l=>({...l,updating:!1,updateProgress:100,updateAvailable:!1,serverUpdateInfo:{...l.serverUpdateInfo,updateAvailable:!1,currentVersion:t.newCommit,commitsBehind:0}})),t.restartMessage&&console.log("[app-updater]",t.restartMessage)}catch(e){const t=e instanceof Error?e.message:"Update failed";throw je.update(l=>({...l,updating:!1,error:t})),e}}async function sn(){return en()}function jl(s){return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`}function El(s){if(!s)return"Never";const e=new Date(s),l=new Date().getTime()-e.getTime(),a=Math.floor(l/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:e.toLocaleDateString()}async function nn(){const s=Zl();if(je.update(e=>({...e,platform:s})),s==="mobile"){const e=await $l();je.update(t=>({...t,currentVersion:e.version,currentVersionCode:e.versionCode}))}}function an(s){let e;return{c(){e=O("‚Üª Check for Updates")},l(t){e=B(t,"‚Üª Check for Updates")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function rn(s){let e,t="‚Üª",l;return{c(){e=v("span"),e.textContent=t,l=O(" Checking..."),this.h()},l(a){e=d(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ul7xd3"&&(e.textContent=t),l=B(a," Checking..."),this.h()},h(){c(e,"class","spinner svelte-raqknj")},m(a,o){A(a,e,o),A(a,l,o)},d(a){a&&(i(e),i(l))}}}function on(s){let e,t,l,a="Installed Version:",o,r,f=s[0].currentVersion+"",h,u,_,p,b=s[0].currentVersionCode+"",m,g,k,C,P,I,D,z='<p class="svelte-raqknj">Updates are downloaded from your connected server. Make sure you&#39;re connected to the correct server before updating.</p>',N=s[0].lastChecked&&yl(s);function M(T,H){if(T[0].latestVersion)return un;if(!T[0].checking&&!T[0].error)return fn}let j=M(s),V=j&&j(s),E=s[0].error&&Dl(s);return{c(){e=v("div"),t=v("div"),l=v("span"),l.textContent=a,o=S(),r=v("span"),h=O(f),u=S(),_=v("span"),p=O("(build "),m=O(b),g=O(")"),k=S(),N&&N.c(),C=S(),V&&V.c(),P=S(),E&&E.c(),I=S(),D=v("div"),D.innerHTML=z,this.h()},l(T){e=d(T,"DIV",{class:!0});var H=w(e);t=d(H,"DIV",{class:!0});var L=w(t);l=d(L,"SPAN",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-u4diij"&&(l.textContent=a),o=y(L),r=d(L,"SPAN",{class:!0});var F=w(r);h=B(F,f),F.forEach(i),u=y(L),_=d(L,"SPAN",{class:!0});var X=w(_);p=B(X,"(build "),m=B(X,b),g=B(X,")"),X.forEach(i),L.forEach(i),k=y(H),N&&N.l(H),H.forEach(i),C=y(T),V&&V.l(T),P=y(T),E&&E.l(T),I=y(T),D=d(T,"DIV",{class:!0,"data-svelte-h":!0}),R(D)!=="svelte-809y20"&&(D.innerHTML=z),this.h()},h(){c(l,"class","label svelte-raqknj"),c(r,"class","value svelte-raqknj"),c(_,"class","version-code svelte-raqknj"),c(t,"class","version-row svelte-raqknj"),c(e,"class","version-info svelte-raqknj"),c(D,"class","help-text svelte-raqknj")},m(T,H){A(T,e,H),n(e,t),n(t,l),n(t,o),n(t,r),n(r,h),n(t,u),n(t,_),n(_,p),n(_,m),n(_,g),n(e,k),N&&N.m(e,null),A(T,C,H),V&&V.m(T,H),A(T,P,H),E&&E.m(T,H),A(T,I,H),A(T,D,H)},p(T,H){H&1&&f!==(f=T[0].currentVersion+"")&&$(h,f),H&1&&b!==(b=T[0].currentVersionCode+"")&&$(m,b),T[0].lastChecked?N?N.p(T,H):(N=yl(T),N.c(),N.m(e,null)):N&&(N.d(1),N=null),j===(j=M(T))&&V?V.p(T,H):(V&&V.d(1),V=j&&j(T),V&&(V.c(),V.m(P.parentNode,P))),T[0].error?E?E.p(T,H):(E=Dl(T),E.c(),E.m(I.parentNode,I)):E&&(E.d(1),E=null)},d(T){T&&(i(e),i(C),i(P),i(I),i(D)),N&&N.d(),V&&V.d(T),E&&E.d(T)}}}function cn(s){let e,t='<p class="svelte-raqknj">App updates are only available in the mobile app.</p> <p class="svelte-raqknj">Use the server&#39;s releases page to download the latest APK.</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-aocxe9"&&(e.innerHTML=t),this.h()},h(){c(e,"class","info-box svelte-raqknj")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function yl(s){let e,t,l="Last Checked:",a,o,r=El(s[0].lastChecked)+"",f;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("span"),f=O(r),this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-16zkf08"&&(t.textContent=l),a=y(u),o=d(u,"SPAN",{class:!0});var _=w(o);f=B(_,r),_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","label svelte-raqknj"),c(o,"class","value svelte-raqknj"),c(e,"class","version-row svelte-raqknj")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o),n(o,f)},p(h,u){u&1&&r!==(r=El(h[0].lastChecked)+"")&&$(f,r)},d(h){h&&i(e)}}}function fn(s){let e,t='<p class="svelte-raqknj">Tap &quot;Check for Updates&quot; to see if a new version is available.</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-152k361"&&(e.innerHTML=t),this.h()},h(){c(e,"class","no-check svelte-raqknj")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function un(s){let e,t,l,a=s[4]()+"",o,r,f,h;function u(k,C){return k[0].updateAvailable?vn:dn}let _=u(s),p=_(s);function b(k,C){return k[0].updateAvailable?pn:hn}let m=b(s),g=m(s);return{c(){e=v("div"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),p.c(),h=S(),g.c(),this.h()},l(k){e=d(k,"DIV",{class:!0});var C=w(e);t=d(C,"DIV",{class:!0});var P=w(t);l=d(P,"SPAN",{class:!0,style:!0});var I=w(l);o=B(I,a),I.forEach(i),r=y(P),f=d(P,"SPAN",{class:!0});var D=w(f);p.l(D),D.forEach(i),P.forEach(i),h=y(C),g.l(C),C.forEach(i),this.h()},h(){c(l,"class","update-icon svelte-raqknj"),Re(l,"color",s[5]()),c(f,"class","update-title svelte-raqknj"),c(t,"class","update-header svelte-raqknj"),c(e,"class","update-card svelte-raqknj"),ie(e,"available",s[0].updateAvailable)},m(k,C){A(k,e,C),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),p.m(f,null),n(e,h),g.m(e,null)},p(k,C){_!==(_=u(k))&&(p.d(1),p=_(k),p&&(p.c(),p.m(f,null))),m===(m=b(k))&&g?g.p(k,C):(g.d(1),g=m(k),g&&(g.c(),g.m(e,null))),C&1&&ie(e,"available",k[0].updateAvailable)},d(k){k&&i(e),p.d(),g.d()}}}function dn(s){let e;return{c(){e=O("Up to Date")},l(t){e=B(t,"Up to Date")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function vn(s){let e;return{c(){e=O("Update Available")},l(t){e=B(t,"Update Available")},m(t,l){A(t,e,l)},d(t){t&&i(e)}}}function hn(s){let e,t="You're running the latest version of MetaHuman OS.";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1b1wcw0"&&(e.textContent=t),this.h()},h(){c(e,"class","up-to-date-msg svelte-raqknj")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function pn(s){let e,t,l,a="New Version:",o,r,f=s[0].latestVersion.version+"",h,u,_,p,b="Size:",m,g,k=jl(s[0].latestVersion.fileSize)+"",C,P,I,D,z="Released:",N,M,j=s[0].latestVersion.releaseDate+"",V,E,T,H,L=s[0].latestVersion.releaseNotes&&Sl(s);function F(ee,U){return ee[0].downloading?mn:_n}let X=F(s),J=X(s);return{c(){e=v("div"),t=v("div"),l=v("span"),l.textContent=a,o=S(),r=v("span"),h=O(f),u=S(),_=v("div"),p=v("span"),p.textContent=b,m=S(),g=v("span"),C=O(k),P=S(),I=v("div"),D=v("span"),D.textContent=z,N=S(),M=v("span"),V=O(j),E=S(),L&&L.c(),T=S(),H=v("div"),J.c(),this.h()},l(ee){e=d(ee,"DIV",{class:!0});var U=w(e);t=d(U,"DIV",{class:!0});var K=w(t);l=d(K,"SPAN",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1fi4wpz"&&(l.textContent=a),o=y(K),r=d(K,"SPAN",{class:!0});var x=w(r);h=B(x,f),x.forEach(i),K.forEach(i),u=y(U),_=d(U,"DIV",{class:!0});var Z=w(_);p=d(Z,"SPAN",{class:!0,"data-svelte-h":!0}),R(p)!=="svelte-pgvm1s"&&(p.textContent=b),m=y(Z),g=d(Z,"SPAN",{class:!0});var te=w(g);C=B(te,k),te.forEach(i),Z.forEach(i),P=y(U),I=d(U,"DIV",{class:!0});var he=w(I);D=d(he,"SPAN",{class:!0,"data-svelte-h":!0}),R(D)!=="svelte-yjw2oe"&&(D.textContent=z),N=y(he),M=d(he,"SPAN",{class:!0});var oe=w(M);V=B(oe,j),oe.forEach(i),he.forEach(i),E=y(U),L&&L.l(U),T=y(U),H=d(U,"DIV",{class:!0});var me=w(H);J.l(me),me.forEach(i),U.forEach(i),this.h()},h(){c(l,"class","label svelte-raqknj"),c(r,"class","value svelte-raqknj"),c(t,"class","detail-row svelte-raqknj"),c(p,"class","label svelte-raqknj"),c(g,"class","value svelte-raqknj"),c(_,"class","detail-row svelte-raqknj"),c(D,"class","label svelte-raqknj"),c(M,"class","value svelte-raqknj"),c(I,"class","detail-row svelte-raqknj"),c(H,"class","download-section svelte-raqknj"),c(e,"class","update-details svelte-raqknj")},m(ee,U){A(ee,e,U),n(e,t),n(t,l),n(t,o),n(t,r),n(r,h),n(e,u),n(e,_),n(_,p),n(_,m),n(_,g),n(g,C),n(e,P),n(e,I),n(I,D),n(I,N),n(I,M),n(M,V),n(e,E),L&&L.m(e,null),n(e,T),n(e,H),J.m(H,null)},p(ee,U){U&1&&f!==(f=ee[0].latestVersion.version+"")&&$(h,f),U&1&&k!==(k=jl(ee[0].latestVersion.fileSize)+"")&&$(C,k),U&1&&j!==(j=ee[0].latestVersion.releaseDate+"")&&$(V,j),ee[0].latestVersion.releaseNotes?L?L.p(ee,U):(L=Sl(ee),L.c(),L.m(e,T)):L&&(L.d(1),L=null),X===(X=F(ee))&&J?J.p(ee,U):(J.d(1),J=X(ee),J&&(J.c(),J.m(H,null)))},d(ee){ee&&i(e),L&&L.d(),J.d()}}}function Sl(s){let e,t,l="What's New:",a,o,r=s[0].latestVersion.releaseNotes+"",f;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("p"),f=O(r),this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1q9l4yz"&&(t.textContent=l),a=y(u),o=d(u,"P",{class:!0});var _=w(o);f=B(_,r),_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","label svelte-raqknj"),c(o,"class","svelte-raqknj"),c(e,"class","release-notes svelte-raqknj")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o),n(o,f)},p(h,u){u&1&&r!==(r=h[0].latestVersion.releaseNotes+"")&&$(f,r)},d(h){h&&i(e)}}}function _n(s){let e,t,l,a,o;return{c(){e=v("button"),t=O("‚¨á Download & Install"),this.h()},l(r){e=d(r,"BUTTON",{class:!0});var f=w(e);t=B(f,"‚¨á Download & Install"),f.forEach(i),this.h()},h(){c(e,"class","download-btn svelte-raqknj"),e.disabled=l=s[0].downloading},m(r,f){A(r,e,f),n(e,t),a||(o=ue(e,"click",s[3]),a=!0)},p(r,f){f&1&&l!==(l=r[0].downloading)&&(e.disabled=l)},d(r){r&&i(e),a=!1,o()}}}function mn(s){let e,t,l,a,o=s[0].downloadProgress+"",r,f,h,u,_="Download will open installer when complete";return{c(){e=v("div"),t=v("div"),l=S(),a=v("span"),r=O(o),f=O("%"),h=S(),u=v("p"),u.textContent=_,this.h()},l(p){e=d(p,"DIV",{class:!0});var b=w(e);t=d(b,"DIV",{class:!0,style:!0}),w(t).forEach(i),l=y(b),a=d(b,"SPAN",{class:!0});var m=w(a);r=B(m,o),f=B(m,"%"),m.forEach(i),b.forEach(i),h=y(p),u=d(p,"P",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-3e1qj2"&&(u.textContent=_),this.h()},h(){c(t,"class","progress-bar svelte-raqknj"),Re(t,"width",s[0].downloadProgress+"%"),c(a,"class","progress-text svelte-raqknj"),c(e,"class","download-progress svelte-raqknj"),c(u,"class","download-hint svelte-raqknj")},m(p,b){A(p,e,b),n(e,t),n(e,l),n(e,a),n(a,r),n(a,f),A(p,h,b),A(p,u,b)},p(p,b){b&1&&Re(t,"width",p[0].downloadProgress+"%"),b&1&&o!==(o=p[0].downloadProgress+"")&&$(r,o)},d(p){p&&(i(e),i(h),i(u))}}}function Dl(s){let e,t,l="‚ö†",a,o,r=s[0].error+"",f;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("span"),f=O(r),this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1ob89cd"&&(t.textContent=l),a=y(u),o=d(u,"SPAN",{class:!0});var _=w(o);f=B(_,r),_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","error-icon svelte-raqknj"),c(o,"class","svelte-raqknj"),c(e,"class","error-message svelte-raqknj")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o),n(o,f)},p(h,u){u&1&&r!==(r=h[0].error+"")&&$(f,r)},d(h){h&&i(e)}}}function bn(s){let e,t,l,a="App Updates",o,r,f,h,u,_;function p(P,I){return P[0].checking?rn:an}let b=p(s),m=b(s);function g(P,I){return P[1]?on:cn}let k=g(s),C=k(s);return{c(){e=v("div"),t=v("div"),l=v("h3"),l.textContent=a,o=S(),r=v("button"),m.c(),h=S(),C.c(),this.h()},l(P){e=d(P,"DIV",{class:!0});var I=w(e);t=d(I,"DIV",{class:!0});var D=w(t);l=d(D,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1a7ztc5"&&(l.textContent=a),o=y(D),r=d(D,"BUTTON",{class:!0});var z=w(r);m.l(z),z.forEach(i),D.forEach(i),h=y(I),C.l(I),I.forEach(i),this.h()},h(){c(l,"class","svelte-raqknj"),c(r,"class","check-btn svelte-raqknj"),r.disabled=f=s[0].checking||s[0].downloading,c(t,"class","section-header svelte-raqknj"),c(e,"class","update-manager svelte-raqknj")},m(P,I){A(P,e,I),n(e,t),n(t,l),n(t,o),n(t,r),m.m(r,null),n(e,h),C.m(e,null),u||(_=ue(r,"click",s[2]),u=!0)},p(P,[I]){b!==(b=p(P))&&(m.d(1),m=b(P),m&&(m.c(),m.m(r,null))),I&1&&f!==(f=P[0].checking||P[0].downloading)&&(r.disabled=f),k===(k=g(P))&&C?C.p(P,I):(C.d(1),C=k(P),C&&(C.c(),C.m(e,null)))},i:de,o:de,d(P){P&&i(e),m.d(),C.d(),u=!1,_()}}}function kn(s,e,t){let l={checking:!1,downloading:!1,downloadProgress:0,currentVersion:"0.0.0",currentVersionCode:0,latestVersion:null,updateAvailable:!1,error:null,lastChecked:null},a=!1;const o=je.subscribe(_=>{t(0,l=_)});yt(async()=>{t(1,a=Nt()),a&&await nn()}),qt(()=>{o()});async function r(){await Zs()}async function f(){try{await sn()}catch{}}function h(){return l.checking?"‚Üª":l.downloading?"‚¨á":l.updateAvailable?"üÜï":"‚úì"}function u(){return l.error?"#ef4444":l.updateAvailable?"#f59e0b":"#22c55e"}return[l,a,r,f,h,u]}class wn extends gt{constructor(e){super(),jt(this,e,kn,bn,Et,{})}}function Nl(s,e,t){const l=s.slice();return l[30]=e[t],l}function Pl(s){let e,t;return{c(){e=v("div"),t=O(s[4]),this.h()},l(l){e=d(l,"DIV",{class:!0});var a=w(e);t=B(a,s[4]),a.forEach(i),this.h()},h(){c(e,"class","message error svelte-11cwtjh")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a[0]&16&&$(t,l[4])},d(l){l&&i(e)}}}function Il(s){let e,t;return{c(){e=v("div"),t=O(s[5]),this.h()},l(l){e=d(l,"DIV",{class:!0});var a=w(e);t=B(a,s[5]),a.forEach(i),this.h()},h(){c(e,"class","message success svelte-11cwtjh")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a[0]&32&&$(t,l[5])},d(l){l&&i(e)}}}function Cn(s){let e,t,l="Current Profile",a,o,r,f,h,u="Actions",_,p,b,m,g,k,C,P,I,D,z="‚¨ÜÔ∏è",N,M,j,V,E=`<span class="icon svelte-11cwtjh">‚ûï</span>
          Create New Profile`,T,H,L,F="üì§",X,J,ee,U,K,x="üì•",Z,te,he,oe,me,le,ke,pe;function _e(q,W){return q[1]?En:jn}let Q=_e(s),Y=Q(s),ce=s[2]&&Al(s);function ye(q,W){return q[6]?Sn:yn}let Ae=ye(s),Ce=Ae(s);function Se(q,W){return q[8]?In:Pn}let ve=Se(s),re=ve(s),be=!s[14]&&Ml(),ne=s[7]&&Tl(s),se=s[0].length>1&&Ul(s);return{c(){e=v("div"),t=v("h3"),t.textContent=l,a=S(),Y.c(),o=S(),ce&&ce.c(),r=S(),f=v("div"),h=v("h3"),h.textContent=u,_=S(),p=v("div"),b=v("button"),Ce.c(),g=S(),k=v("button"),re.c(),P=S(),I=v("button"),D=v("span"),D.textContent=z,N=O(`
          Upload Local Changes`),j=S(),V=v("button"),V.innerHTML=E,T=S(),H=v("button"),L=v("span"),L.textContent=F,X=O(`
          Export Profile`),ee=S(),U=v("label"),K=v("span"),K.textContent=x,Z=O(`
          Import Profile
          `),te=v("input"),he=S(),be&&be.c(),oe=S(),ne&&ne.c(),me=S(),se&&se.c(),le=Ue(),this.h()},l(q){e=d(q,"DIV",{class:!0});var W=w(e);t=d(W,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-27f3w6"&&(t.textContent=l),a=y(W),Y.l(W),W.forEach(i),o=y(q),ce&&ce.l(q),r=y(q),f=d(q,"DIV",{class:!0});var ae=w(f);h=d(ae,"H3",{class:!0,"data-svelte-h":!0}),R(h)!=="svelte-1e9nfuf"&&(h.textContent=u),_=y(ae),p=d(ae,"DIV",{class:!0});var ge=w(p);b=d(ge,"BUTTON",{class:!0});var Ee=w(b);Ce.l(Ee),Ee.forEach(i),g=y(ge),k=d(ge,"BUTTON",{class:!0});var Le=w(k);re.l(Le),Le.forEach(i),P=y(ge),I=d(ge,"BUTTON",{class:!0});var Me=w(I);D=d(Me,"SPAN",{class:!0,"data-svelte-h":!0}),R(D)!=="svelte-siljcr"&&(D.textContent=z),N=B(Me,`
          Upload Local Changes`),Me.forEach(i),j=y(ge),V=d(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),R(V)!=="svelte-h5o7ck"&&(V.innerHTML=E),T=y(ge),H=d(ge,"BUTTON",{class:!0});var we=w(H);L=d(we,"SPAN",{class:!0,"data-svelte-h":!0}),R(L)!=="svelte-12yujtx"&&(L.textContent=F),X=B(we,`
          Export Profile`),we.forEach(i),ee=y(ge),U=d(ge,"LABEL",{class:!0});var De=w(U);K=d(De,"SPAN",{class:!0,"data-svelte-h":!0}),R(K)!=="svelte-1q2s3h4"&&(K.textContent=x),Z=B(De,`
          Import Profile
          `),te=d(De,"INPUT",{type:!0,accept:!0,style:!0}),De.forEach(i),ge.forEach(i),he=y(ae),be&&be.l(ae),ae.forEach(i),oe=y(q),ne&&ne.l(q),me=y(q),se&&se.l(q),le=Ue(),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh"),c(h,"class","svelte-11cwtjh"),c(b,"class","action-btn primary svelte-11cwtjh"),b.disabled=m=s[6]||!s[14],c(k,"class","action-btn svelte-11cwtjh"),k.disabled=C=s[8]||!s[14]||!s[1],c(D,"class","icon svelte-11cwtjh"),c(I,"class","action-btn svelte-11cwtjh"),I.disabled=M=s[8]||!s[14]||!s[2]||s[2].pendingUpload===0,c(V,"class","action-btn secondary svelte-11cwtjh"),c(L,"class","icon svelte-11cwtjh"),c(H,"class","action-btn svelte-11cwtjh"),H.disabled=J=s[12]||!s[1],c(K,"class","icon svelte-11cwtjh"),c(te,"type","file"),c(te,"accept",".json"),te.disabled=s[13],Re(te,"display","none"),c(U,"class","action-btn svelte-11cwtjh"),c(p,"class","actions svelte-11cwtjh"),c(f,"class","section svelte-11cwtjh")},m(q,W){A(q,e,W),n(e,t),n(e,a),Y.m(e,null),A(q,o,W),ce&&ce.m(q,W),A(q,r,W),A(q,f,W),n(f,h),n(f,_),n(f,p),n(p,b),Ce.m(b,null),n(p,g),n(p,k),re.m(k,null),n(p,P),n(p,I),n(I,D),n(I,N),n(p,j),n(p,V),n(p,T),n(p,H),n(H,L),n(H,X),n(p,ee),n(p,U),n(U,K),n(U,Z),n(U,te),n(f,he),be&&be.m(f,null),A(q,oe,W),ne&&ne.m(q,W),A(q,me,W),se&&se.m(q,W),A(q,le,W),ke||(pe=[ue(b,"click",s[15]),ue(k,"click",s[16]),ue(I,"click",s[17]),ue(V,"click",s[24]),ue(H,"click",s[19]),ue(te,"change",s[20])],ke=!0)},p(q,W){Q===(Q=_e(q))&&Y?Y.p(q,W):(Y.d(1),Y=Q(q),Y&&(Y.c(),Y.m(e,null))),q[2]?ce?ce.p(q,W):(ce=Al(q),ce.c(),ce.m(r.parentNode,r)):ce&&(ce.d(1),ce=null),Ae===(Ae=ye(q))&&Ce?Ce.p(q,W):(Ce.d(1),Ce=Ae(q),Ce&&(Ce.c(),Ce.m(b,null))),W[0]&16448&&m!==(m=q[6]||!q[14])&&(b.disabled=m),ve!==(ve=Se(q))&&(re.d(1),re=ve(q),re&&(re.c(),re.m(k,null))),W[0]&16642&&C!==(C=q[8]||!q[14]||!q[1])&&(k.disabled=C),W[0]&16644&&M!==(M=q[8]||!q[14]||!q[2]||q[2].pendingUpload===0)&&(I.disabled=M),W[0]&4098&&J!==(J=q[12]||!q[1])&&(H.disabled=J),W[0]&8192&&(te.disabled=q[13]),q[14]?be&&(be.d(1),be=null):be||(be=Ml(),be.c(),be.m(f,null)),q[7]?ne?ne.p(q,W):(ne=Tl(q),ne.c(),ne.m(me.parentNode,me)):ne&&(ne.d(1),ne=null),q[0].length>1?se?se.p(q,W):(se=Ul(q),se.c(),se.m(le.parentNode,le)):se&&(se.d(1),se=null)},d(q){q&&(i(e),i(o),i(r),i(f),i(oe),i(me),i(le)),Y.d(),ce&&ce.d(q),Ce.d(),re.d(),be&&be.d(),ne&&ne.d(q),se&&se.d(q),ke=!1,Dt(pe)}}}function gn(s){let e,t="Loading profiles...";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1lk3pqz"&&(e.textContent=t),this.h()},h(){c(e,"class","loading svelte-11cwtjh")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function jn(s){let e,t="<p>No profile loaded. Download from server or create a new one.</p>";return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-y7bsc5"&&(e.innerHTML=t),this.h()},h(){c(e,"class","no-profile svelte-11cwtjh")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function En(s){let e,t,l,a=s[1].name+"",o,r,f,h=s[1].source+"",u,_,p,b,m=s[1].memoryCount+"",g,k,C,P,I,D=Lt(s[1].updatedAt)+"",z,N,M=s[1].serverUrl&&Vl(s);return{c(){e=v("div"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),u=O(h),_=S(),p=v("div"),b=v("span"),g=O(m),k=O(" memories"),C=S(),P=v("span"),I=O("Updated: "),z=O(D),N=S(),M&&M.c(),this.h()},l(j){e=d(j,"DIV",{class:!0});var V=w(e);t=d(V,"DIV",{class:!0});var E=w(t);l=d(E,"SPAN",{class:!0});var T=w(l);o=B(T,a),T.forEach(i),r=y(E),f=d(E,"SPAN",{class:!0});var H=w(f);u=B(H,h),H.forEach(i),E.forEach(i),_=y(V),p=d(V,"DIV",{class:!0});var L=w(p);b=d(L,"SPAN",{});var F=w(b);g=B(F,m),k=B(F," memories"),F.forEach(i),C=y(L),P=d(L,"SPAN",{});var X=w(P);I=B(X,"Updated: "),z=B(X,D),X.forEach(i),L.forEach(i),N=y(V),M&&M.l(V),V.forEach(i),this.h()},h(){c(l,"class","profile-name svelte-11cwtjh"),c(f,"class","profile-source svelte-11cwtjh"),c(t,"class","profile-info svelte-11cwtjh"),c(p,"class","profile-meta svelte-11cwtjh"),c(e,"class","profile-card active svelte-11cwtjh")},m(j,V){A(j,e,V),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),n(f,u),n(e,_),n(e,p),n(p,b),n(b,g),n(b,k),n(p,C),n(p,P),n(P,I),n(P,z),n(e,N),M&&M.m(e,null)},p(j,V){V[0]&2&&a!==(a=j[1].name+"")&&$(o,a),V[0]&2&&h!==(h=j[1].source+"")&&$(u,h),V[0]&2&&m!==(m=j[1].memoryCount+"")&&$(g,m),V[0]&2&&D!==(D=Lt(j[1].updatedAt)+"")&&$(z,D),j[1].serverUrl?M?M.p(j,V):(M=Vl(j),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},d(j){j&&i(e),M&&M.d()}}}function Vl(s){let e,t,l=s[1].serverUrl+"",a;return{c(){e=v("div"),t=O("Server: "),a=O(l),this.h()},l(o){e=d(o,"DIV",{class:!0});var r=w(e);t=B(r,"Server: "),a=B(r,l),r.forEach(i),this.h()},h(){c(e,"class","profile-server svelte-11cwtjh")},m(o,r){A(o,e,r),n(e,t),n(e,a)},p(o,r){r[0]&2&&l!==(l=o[1].serverUrl+"")&&$(a,l)},d(o){o&&i(e)}}}function Al(s){let e,t,l="Sync Status",a,o,r,f,h="Last Sync:",u,_,p=Lt(s[2].lastSync||"")+"",b,m,g,k,C="Pending Upload:",P,I,D=s[2].pendingUpload+"",z;return{c(){e=v("div"),t=v("h3"),t.textContent=l,a=S(),o=v("div"),r=v("div"),f=v("span"),f.textContent=h,u=S(),_=v("span"),b=O(p),m=S(),g=v("div"),k=v("span"),k.textContent=C,P=S(),I=v("span"),z=O(D),this.h()},l(N){e=d(N,"DIV",{class:!0});var M=w(e);t=d(M,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-41jirb"&&(t.textContent=l),a=y(M),o=d(M,"DIV",{class:!0});var j=w(o);r=d(j,"DIV",{class:!0});var V=w(r);f=d(V,"SPAN",{class:!0,"data-svelte-h":!0}),R(f)!=="svelte-10azr6g"&&(f.textContent=h),u=y(V),_=d(V,"SPAN",{class:!0});var E=w(_);b=B(E,p),E.forEach(i),V.forEach(i),m=y(j),g=d(j,"DIV",{class:!0});var T=w(g);k=d(T,"SPAN",{class:!0,"data-svelte-h":!0}),R(k)!=="svelte-1fp0ioz"&&(k.textContent=C),P=y(T),I=d(T,"SPAN",{class:!0});var H=w(I);z=B(H,D),H.forEach(i),T.forEach(i),j.forEach(i),M.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(f,"class","sync-label svelte-11cwtjh"),c(_,"class","sync-value svelte-11cwtjh"),c(r,"class","sync-item svelte-11cwtjh"),c(k,"class","sync-label svelte-11cwtjh"),c(I,"class","sync-value svelte-11cwtjh"),ie(I,"has-pending",s[2].pendingUpload>0),c(g,"class","sync-item svelte-11cwtjh"),c(o,"class","sync-status svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(N,M){A(N,e,M),n(e,t),n(e,a),n(e,o),n(o,r),n(r,f),n(r,u),n(r,_),n(_,b),n(o,m),n(o,g),n(g,k),n(g,P),n(g,I),n(I,z)},p(N,M){M[0]&4&&p!==(p=Lt(N[2].lastSync||"")+"")&&$(b,p),M[0]&4&&D!==(D=N[2].pendingUpload+"")&&$(z,D),M[0]&4&&ie(I,"has-pending",N[2].pendingUpload>0)},d(N){N&&i(e)}}}function yn(s){let e,t="‚¨áÔ∏è",l;return{c(){e=v("span"),e.textContent=t,l=O(`
            Download from Server`),this.h()},l(a){e=d(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1eltenc"&&(e.textContent=t),l=B(a,`
            Download from Server`),this.h()},h(){c(e,"class","icon svelte-11cwtjh")},m(a,o){A(a,e,o),A(a,l,o)},p:de,d(a){a&&(i(e),i(l))}}}function Sn(s){let e,t,l;function a(f,h){return f[7]?Nn:Dn}let o=a(s),r=o(s);return{c(){e=v("span"),t=S(),r.c(),l=Ue(),this.h()},l(f){e=d(f,"SPAN",{class:!0}),w(e).forEach(i),t=y(f),r.l(f),l=Ue(),this.h()},h(){c(e,"class","spinner svelte-11cwtjh")},m(f,h){A(f,e,h),A(f,t,h),r.m(f,h),A(f,l,h)},p(f,h){o===(o=a(f))&&r?r.p(f,h):(r.d(1),r=o(f),r&&(r.c(),r.m(l.parentNode,l)))},d(f){f&&(i(e),i(t),i(l)),r.d(f)}}}function Dn(s){let e;return{c(){e=O("Downloading...")},l(t){e=B(t,"Downloading...")},m(t,l){A(t,e,l)},p:de,d(t){t&&i(e)}}}function Nn(s){let e=s[7].message+"",t;return{c(){t=O(e)},l(l){t=B(l,e)},m(l,a){A(l,t,a)},p(l,a){a[0]&128&&e!==(e=l[7].message+"")&&$(t,e)},d(l){l&&i(t)}}}function Pn(s){let e,t="üîÑ",l;return{c(){e=v("span"),e.textContent=t,l=O(`
            Sync Changes`),this.h()},l(a){e=d(a,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1tzy5s5"&&(e.textContent=t),l=B(a,`
            Sync Changes`),this.h()},h(){c(e,"class","icon svelte-11cwtjh")},m(a,o){A(a,e,o),A(a,l,o)},d(a){a&&(i(e),i(l))}}}function In(s){let e,t;return{c(){e=v("span"),t=O(`
            Syncing...`),this.h()},l(l){e=d(l,"SPAN",{class:!0}),w(e).forEach(i),t=B(l,`
            Syncing...`),this.h()},h(){c(e,"class","spinner svelte-11cwtjh")},m(l,a){A(l,e,a),A(l,t,a)},d(l){l&&(i(e),i(t))}}}function Ml(s){let e,t="‚ö†Ô∏è Server not connected. Some actions require server connection.";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ye9kvr"&&(e.textContent=t),this.h()},h(){c(e,"class","hint warning svelte-11cwtjh")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Tl(s){let e,t,l="Download Progress",a,o,r,f,h,u,_=s[7].message+"",p,b,m=s[7].current+"",g,k,C=s[7].total+"",P,I;return{c(){e=v("div"),t=v("h3"),t.textContent=l,a=S(),o=v("div"),r=v("div"),f=v("div"),h=S(),u=v("div"),p=O(_),b=O(`
            (`),g=O(m),k=O(" / "),P=O(C),I=O(")"),this.h()},l(D){e=d(D,"DIV",{class:!0});var z=w(e);t=d(z,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-3ajo9z"&&(t.textContent=l),a=y(z),o=d(z,"DIV",{class:!0});var N=w(o);r=d(N,"DIV",{class:!0});var M=w(r);f=d(M,"DIV",{class:!0,style:!0}),w(f).forEach(i),M.forEach(i),h=y(N),u=d(N,"DIV",{class:!0});var j=w(u);p=B(j,_),b=B(j,`
            (`),g=B(j,m),k=B(j," / "),P=B(j,C),I=B(j,")"),j.forEach(i),N.forEach(i),z.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(f,"class","progress-fill svelte-11cwtjh"),Re(f,"width",s[7].current/s[7].total*100+"%"),c(r,"class","progress-bar svelte-11cwtjh"),c(u,"class","progress-text svelte-11cwtjh"),c(o,"class","progress-container svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(D,z){A(D,e,z),n(e,t),n(e,a),n(e,o),n(o,r),n(r,f),n(o,h),n(o,u),n(u,p),n(u,b),n(u,g),n(u,k),n(u,P),n(u,I)},p(D,z){z[0]&128&&Re(f,"width",D[7].current/D[7].total*100+"%"),z[0]&128&&_!==(_=D[7].message+"")&&$(p,_),z[0]&128&&m!==(m=D[7].current+"")&&$(g,m),z[0]&128&&C!==(C=D[7].total+"")&&$(P,C)},d(D){D&&i(e)}}}function Ul(s){let e,t,l="All Profiles",a,o,r=Fe(s[0]),f=[];for(let h=0;h<r.length;h+=1)f[h]=ql(Nl(s,r,h));return{c(){e=v("div"),t=v("h3"),t.textContent=l,a=S(),o=v("div");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-x5aom3"&&(t.textContent=l),a=y(u),o=d(u,"DIV",{class:!0});var _=w(o);for(let p=0;p<f.length;p+=1)f[p].l(_);_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(o,"class","profiles-list svelte-11cwtjh"),c(e,"class","section svelte-11cwtjh")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(o,null)},p(h,u){if(u[0]&2097155){r=Fe(h[0]);let _;for(_=0;_<r.length;_+=1){const p=Nl(h,r,_);f[_]?f[_].p(p,u):(f[_]=ql(p),f[_].c(),f[_].m(o,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=r.length}},d(h){h&&i(e),St(f,h)}}}function Ll(s){let e,t="Delete",l,a;function o(){return s[25](s[30])}return{c(){e=v("button"),e.textContent=t,this.h()},l(r){e=d(r,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-p1eeu2"&&(e.textContent=t),this.h()},h(){c(e,"class","small-btn danger svelte-11cwtjh")},m(r,f){A(r,e,f),l||(a=ue(e,"click",o),l=!0)},p(r,f){s=r},d(r){r&&i(e),l=!1,a()}}}function ql(s){let e,t,l,a=s[30].name+"",o,r,f,h=s[30].source+"",u,_,p,b,m=s[30].id!==s[1]?.id&&Ll(s);return{c(){e=v("div"),t=v("div"),l=v("span"),o=O(a),r=S(),f=v("span"),u=O(h),_=S(),p=v("div"),m&&m.c(),b=S(),this.h()},l(g){e=d(g,"DIV",{class:!0});var k=w(e);t=d(k,"DIV",{class:!0});var C=w(t);l=d(C,"SPAN",{class:!0});var P=w(l);o=B(P,a),P.forEach(i),r=y(C),f=d(C,"SPAN",{class:!0});var I=w(f);u=B(I,h),I.forEach(i),C.forEach(i),_=y(k),p=d(k,"DIV",{class:!0});var D=w(p);m&&m.l(D),D.forEach(i),b=y(k),k.forEach(i),this.h()},h(){c(l,"class","profile-name svelte-11cwtjh"),c(f,"class","profile-source svelte-11cwtjh"),c(t,"class","profile-info svelte-11cwtjh"),c(p,"class","profile-actions svelte-11cwtjh"),c(e,"class","profile-card svelte-11cwtjh"),ie(e,"active",s[30].id===s[1]?.id)},m(g,k){A(g,e,k),n(e,t),n(t,l),n(l,o),n(t,r),n(t,f),n(f,u),n(e,_),n(e,p),m&&m.m(p,null),n(e,b)},p(g,k){k[0]&1&&a!==(a=g[30].name+"")&&$(o,a),k[0]&1&&h!==(h=g[30].source+"")&&$(u,h),g[30].id!==g[1]?.id?m?m.p(g,k):(m=Ll(g),m.c(),m.m(p,null)):m&&(m.d(1),m=null),k[0]&3&&ie(e,"active",g[30].id===g[1]?.id)},d(g){g&&i(e),m&&m.d()}}}function zl(s){let e,t,l,a="Create New Profile",o,r,f="Create a local profile that works completely offline.",h,u,_,p="Profile Name",b,m,g,k,C,P,I,D,z=s[11]?"Creating...":"Create Profile",N,M,j,V;return{c(){e=v("div"),t=v("div"),l=v("h3"),l.textContent=a,o=S(),r=v("p"),r.textContent=f,h=S(),u=v("div"),_=v("label"),_.textContent=p,b=S(),m=v("input"),g=S(),k=v("div"),C=v("button"),P=O("Cancel"),I=S(),D=v("button"),N=O(z),this.h()},l(E){e=d(E,"DIV",{class:!0});var T=w(e);t=d(T,"DIV",{class:!0});var H=w(t);l=d(H,"H3",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1ajl4yz"&&(l.textContent=a),o=y(H),r=d(H,"P",{"data-svelte-h":!0}),R(r)!=="svelte-uj2z8j"&&(r.textContent=f),h=y(H),u=d(H,"DIV",{class:!0});var L=w(u);_=d(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(_)!=="svelte-t5d041"&&(_.textContent=p),b=y(L),m=d(L,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),L.forEach(i),g=y(H),k=d(H,"DIV",{class:!0});var F=w(k);C=d(F,"BUTTON",{class:!0});var X=w(C);P=B(X,"Cancel"),X.forEach(i),I=y(F),D=d(F,"BUTTON",{class:!0});var J=w(D);N=B(J,z),J.forEach(i),F.forEach(i),H.forEach(i),T.forEach(i),this.h()},h(){c(l,"class","svelte-11cwtjh"),c(_,"for","profile-name"),c(_,"class","svelte-11cwtjh"),c(m,"id","profile-name"),c(m,"type","text"),c(m,"placeholder","Enter name..."),m.disabled=s[11],c(m,"class","svelte-11cwtjh"),c(u,"class","form-group svelte-11cwtjh"),c(C,"class","action-btn secondary svelte-11cwtjh"),C.disabled=s[11],c(D,"class","action-btn primary svelte-11cwtjh"),D.disabled=M=s[11]||!s[10].trim(),c(k,"class","modal-actions svelte-11cwtjh"),c(t,"class","modal svelte-11cwtjh"),c(e,"class","modal-overlay svelte-11cwtjh")},m(E,T){A(E,e,T),n(e,t),n(t,l),n(t,o),n(t,r),n(t,h),n(t,u),n(u,_),n(u,b),n(u,m),Tt(m,s[10]),n(t,g),n(t,k),n(k,C),n(C,P),n(k,I),n(k,D),n(D,N),j||(V=[ue(m,"input",s[26]),ue(C,"click",s[27]),ue(D,"click",s[18]),ue(t,"click",es(s[23])),ue(e,"click",s[28])],j=!0)},p(E,T){T[0]&2048&&(m.disabled=E[11]),T[0]&1024&&m.value!==E[10]&&Tt(m,E[10]),T[0]&2048&&(C.disabled=E[11]),T[0]&2048&&z!==(z=E[11]?"Creating...":"Create Profile")&&$(N,z),T[0]&3072&&M!==(M=E[11]||!E[10].trim())&&(D.disabled=M)},d(E){E&&i(e),j=!1,Dt(V)}}}function Vn(s){let e,t,l="Profile Management",a,o,r="Manage your profile data locally. Download from server, create new profiles, or sync changes.",f,h,u,_,p=s[4]&&Pl(s),b=s[5]&&Il(s);function m(P,I){return P[3]?gn:Cn}let g=m(s),k=g(s),C=s[9]&&zl(s);return{c(){e=v("div"),t=v("h2"),t.textContent=l,a=S(),o=v("p"),o.textContent=r,f=S(),p&&p.c(),h=S(),b&&b.c(),u=S(),k.c(),_=S(),C&&C.c(),this.h()},l(P){e=d(P,"DIV",{class:!0});var I=w(e);t=d(I,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-o8bucm"&&(t.textContent=l),a=y(I),o=d(I,"P",{class:!0,"data-svelte-h":!0}),R(o)!=="svelte-p9oxl4"&&(o.textContent=r),f=y(I),p&&p.l(I),h=y(I),b&&b.l(I),u=y(I),k.l(I),_=y(I),C&&C.l(I),I.forEach(i),this.h()},h(){c(t,"class","svelte-11cwtjh"),c(o,"class","description svelte-11cwtjh"),c(e,"class","profile-manager svelte-11cwtjh")},m(P,I){A(P,e,I),n(e,t),n(e,a),n(e,o),n(e,f),p&&p.m(e,null),n(e,h),b&&b.m(e,null),n(e,u),k.m(e,null),n(e,_),C&&C.m(e,null)},p(P,I){P[4]?p?p.p(P,I):(p=Pl(P),p.c(),p.m(e,h)):p&&(p.d(1),p=null),P[5]?b?b.p(P,I):(b=Il(P),b.c(),b.m(e,u)):b&&(b.d(1),b=null),g===(g=m(P))&&k?k.p(P,I):(k.d(1),k=g(P),k&&(k.c(),k.m(e,_))),P[9]?C?C.p(P,I):(C=zl(P),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i:de,o:de,d(P){P&&i(e),p&&p.d(),b&&b.d(),k.d(),C&&C.d()}}}function Lt(s){return s?new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}function An(s,e,t){let l,a;xl(s,Xl,U=>t(22,a=U));let o=[],r=null,f=null,h=!0,u="",_="",p=!1,b=null,m=!1,g=!1,k="",C=!1,P=!1,I=!1;yt(async()=>{await D()});async function D(){t(3,h=!0),t(4,u="");try{t(0,o=await hs()),t(1,r=await ps()),t(2,f=await _s())}catch(U){t(4,u=U instanceof Error?U.message:"Failed to load profiles")}finally{t(3,h=!1)}}async function z(){if(!l){t(4,u="Server not connected");return}t(6,p=!0),t(4,u=""),t(5,_="");try{const U=await ms(K=>{t(7,b=K)});t(5,_=`Profile "${U.name}" downloaded successfully!`),await D()}catch(U){t(4,u=U instanceof Error?U.message:"Download failed")}finally{t(6,p=!1),t(7,b=null)}}async function N(){if(!l){t(4,u="Server not connected");return}t(8,m=!0),t(4,u=""),t(5,_="");try{const U=await bs();U.errors.length>0?t(4,u=U.errors.join(", ")):t(5,_=`Synced: ${U.uploaded} uploaded, ${U.downloaded} downloaded`),await D()}catch(U){t(4,u=U instanceof Error?U.message:"Sync failed")}finally{t(8,m=!1)}}async function M(){if(!l){t(4,u="Server not connected");return}t(8,m=!0),t(4,u=""),t(5,_="");try{const U=await ks();U.errors.length>0?t(4,u=U.errors.join(", ")):t(5,_=`Uploaded ${U.uploaded} changes`),await D()}catch(U){t(4,u=U instanceof Error?U.message:"Upload failed")}finally{t(8,m=!1)}}async function j(){if(!k.trim()){t(4,u="Profile name is required");return}t(11,C=!0),t(4,u=""),t(5,_="");try{const U=await ws(k.trim());t(5,_=`Profile "${U.name}" created!`),t(9,g=!1),t(10,k=""),await D()}catch(U){t(4,u=U instanceof Error?U.message:"Failed to create profile")}finally{t(11,C=!1)}}async function V(){if(!r){t(4,u="No active profile to export");return}t(12,P=!0),t(4,u="");try{const U=await Cs(),K=JSON.stringify(U,null,2),x=new Blob([K],{type:"application/json"}),Z=URL.createObjectURL(x),te=document.createElement("a");te.href=Z,te.download=`${r.name}-profile-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(Z),t(5,_="Profile exported!")}catch(U){t(4,u=U instanceof Error?U.message:"Export failed")}finally{t(12,P=!1)}}async function E(U){const K=U.target,x=K.files?.[0];if(x){t(13,I=!0),t(4,u=""),t(5,_="");try{const Z=await x.text(),te=JSON.parse(Z),he=await gs(te);t(5,_=`Profile "${he.name}" imported!`),await D()}catch(Z){t(4,u=Z instanceof Error?Z.message:"Import failed")}finally{t(13,I=!1),K.value=""}}}async function T(U){if(confirm(`Delete profile "${U.name}"? This cannot be undone.`))try{await js(U.id),t(5,_=`Profile "${U.name}" deleted`),await D()}catch(K){t(4,u=K instanceof Error?K.message:"Delete failed")}}function H(U){ts.call(this,s,U)}const L=()=>t(9,g=!0),F=U=>T(U);function X(){k=this.value,t(10,k)}const J=()=>t(9,g=!1),ee=()=>t(9,g=!1);return s.$$.update=()=>{s.$$.dirty[0]&4194304&&t(14,l=a.connected)},[o,r,f,h,u,_,p,b,m,g,k,C,P,I,l,z,N,M,j,V,E,T,a,H,L,F,X,J,ee]}class Mn extends gt{constructor(e){super(),jt(this,e,An,Vn,Et,{},null,[-1,-1])}}function Tn(s){let e,t,l="Connection Status",a,o,r,f,h,u,_=s[6]?.connected?"‚úÖ Connected":"‚ùå Disconnected",p,b,m,g,k,C,P="Server:",I,D,z=(s[6]?.url||"Not configured")+"",N,M,j,V,E=s[4]?"Testing...":"üîÑ Test Connection",T,H,L,F,X,J,ee,U,K,x,Z=s[4]&&Bl();function te(Q,Y){if(Q[6]?.connected)return qn;if(Q[6]?.error)return Ln}let he=te(s),oe=he&&he(s);const me=[Bn,zn],le=[];function ke(Q,Y){return Q[2]?0:1}L=ke(s),F=le[L]=me[L](s);let pe=s[7]&&Ql(s),_e=s[8]&&Kl(s);return{c(){e=v("div"),t=v("h2"),t.textContent=l,a=S(),o=v("div"),r=v("div"),f=v("span"),h=S(),u=v("strong"),p=O(_),b=S(),Z&&Z.c(),m=S(),g=v("div"),k=v("div"),C=v("span"),C.textContent=P,I=S(),D=v("span"),N=O(z),M=S(),oe&&oe.c(),j=S(),V=v("button"),T=O(E),H=S(),F.c(),X=S(),pe&&pe.c(),J=S(),_e&&_e.c(),ee=Ue(),this.h()},l(Q){e=d(Q,"DIV",{class:!0});var Y=w(e);t=d(Y,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-fz8c20"&&(t.textContent=l),a=y(Y),o=d(Y,"DIV",{class:!0});var ce=w(o);r=d(ce,"DIV",{class:!0});var ye=w(r);f=d(ye,"SPAN",{class:!0}),w(f).forEach(i),h=y(ye),u=d(ye,"STRONG",{});var Ae=w(u);p=B(Ae,_),Ae.forEach(i),b=y(ye),Z&&Z.l(ye),ye.forEach(i),m=y(ce),g=d(ce,"DIV",{class:!0});var Ce=w(g);k=d(Ce,"DIV",{class:!0});var Se=w(k);C=d(Se,"SPAN",{class:!0,"data-svelte-h":!0}),R(C)!=="svelte-1hsanka"&&(C.textContent=P),I=y(Se),D=d(Se,"SPAN",{class:!0});var ve=w(D);N=B(ve,z),ve.forEach(i),Se.forEach(i),M=y(Ce),oe&&oe.l(Ce),Ce.forEach(i),j=y(ce),V=d(ce,"BUTTON",{class:!0});var re=w(V);T=B(re,E),re.forEach(i),ce.forEach(i),Y.forEach(i),H=y(Q),F.l(Q),X=y(Q),pe&&pe.l(Q),J=y(Q),_e&&_e.l(Q),ee=Ue(),this.h()},h(){c(t,"class","svelte-360cfj"),c(f,"class","status-dot svelte-360cfj"),ie(f,"dot-connected",s[6]?.connected),ie(f,"dot-disconnected",!s[6]?.connected),c(r,"class","status-indicator svelte-360cfj"),c(C,"class","label svelte-360cfj"),c(D,"class","value svelte-360cfj"),c(k,"class","info-row svelte-360cfj"),c(g,"class","server-info svelte-360cfj"),c(V,"class","btn btn-secondary svelte-360cfj"),V.disabled=s[4],c(o,"class","status-box svelte-360cfj"),ie(o,"status-connected",s[6]?.connected),ie(o,"status-disconnected",!s[6]?.connected),c(e,"class","section svelte-360cfj")},m(Q,Y){A(Q,e,Y),n(e,t),n(e,a),n(e,o),n(o,r),n(r,f),n(r,h),n(r,u),n(u,p),n(r,b),Z&&Z.m(r,null),n(o,m),n(o,g),n(g,k),n(k,C),n(k,I),n(k,D),n(D,N),n(g,M),oe&&oe.m(g,null),n(o,j),n(o,V),n(V,T),A(Q,H,Y),le[L].m(Q,Y),A(Q,X,Y),pe&&pe.m(Q,Y),A(Q,J,Y),_e&&_e.m(Q,Y),A(Q,ee,Y),U=!0,K||(x=ue(V,"click",s[11]),K=!0)},p(Q,Y){(!U||Y&64)&&ie(f,"dot-connected",Q[6]?.connected),(!U||Y&64)&&ie(f,"dot-disconnected",!Q[6]?.connected),(!U||Y&64)&&_!==(_=Q[6]?.connected?"‚úÖ Connected":"‚ùå Disconnected")&&$(p,_),Q[4]?Z||(Z=Bl(),Z.c(),Z.m(r,null)):Z&&(Z.d(1),Z=null),(!U||Y&64)&&z!==(z=(Q[6]?.url||"Not configured")+"")&&$(N,z),he===(he=te(Q))&&oe?oe.p(Q,Y):(oe&&oe.d(1),oe=he&&he(Q),oe&&(oe.c(),oe.m(g,null))),(!U||Y&16)&&E!==(E=Q[4]?"Testing...":"üîÑ Test Connection")&&$(T,E),(!U||Y&16)&&(V.disabled=Q[4]),(!U||Y&64)&&ie(o,"status-connected",Q[6]?.connected),(!U||Y&64)&&ie(o,"status-disconnected",!Q[6]?.connected);let ce=L;L=ke(Q),L===ce?le[L].p(Q,Y):(Wl(),Ge(le[ce],1,1,()=>{le[ce]=null}),Yl(),F=le[L],F?F.p(Q,Y):(F=le[L]=me[L](Q),F.c()),Qe(F,1),F.m(X.parentNode,X)),Q[7]?pe?pe.p(Q,Y):(pe=Ql(Q),pe.c(),pe.m(J.parentNode,J)):pe&&(pe.d(1),pe=null),Q[8]?_e?_e.p(Q,Y):(_e=Kl(Q),_e.c(),_e.m(ee.parentNode,ee)):_e&&(_e.d(1),_e=null)},i(Q){U||(Qe(F),U=!0)},o(Q){Ge(F),U=!1},d(Q){Q&&(i(e),i(H),i(X),i(J),i(ee)),Z&&Z.d(),oe&&oe.d(),le[L].d(Q),pe&&pe.d(Q),_e&&_e.d(Q),K=!1,x()}}}function Un(s){let e,t="Loading server configuration...";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-iymla6"&&(e.textContent=t),this.h()},h(){c(e,"class","loading svelte-360cfj")},m(l,a){A(l,e,a)},p:de,i:de,o:de,d(l){l&&i(e)}}}function Bl(s){let e,t="Testing...";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-11o41vp"&&(e.textContent=t),this.h()},h(){c(e,"class","testing-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Ln(s){let e,t,l="Error:",a,o,r=s[6].error+"",f;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("span"),f=O(r),this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-zrrsg3"&&(t.textContent=l),a=y(u),o=d(u,"SPAN",{class:!0});var _=w(o);f=B(_,r),_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","label svelte-360cfj"),c(o,"class","value svelte-360cfj"),c(e,"class","info-row error svelte-360cfj")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o),n(o,f)},p(h,u){u&64&&r!==(r=h[6].error+"")&&$(f,r)},d(h){h&&i(e)}}}function qn(s){let e,t,l="Latency:",a,o,r=s[6].latencyMs+"",f,h,u,_,p=s[6].version&&Ol(s);return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("span"),f=O(r),h=O("ms"),u=S(),p&&p.c(),_=Ue(),this.h()},l(b){e=d(b,"DIV",{class:!0});var m=w(e);t=d(m,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-falt9j"&&(t.textContent=l),a=y(m),o=d(m,"SPAN",{class:!0});var g=w(o);f=B(g,r),h=B(g,"ms"),g.forEach(i),m.forEach(i),u=y(b),p&&p.l(b),_=Ue(),this.h()},h(){c(t,"class","label svelte-360cfj"),c(o,"class","value latency svelte-360cfj"),ie(o,"latency-good",s[6].latencyMs<200),ie(o,"latency-warn",s[6].latencyMs>=200&&s[6].latencyMs<500),ie(o,"latency-bad",s[6].latencyMs>=500),c(e,"class","info-row svelte-360cfj")},m(b,m){A(b,e,m),n(e,t),n(e,a),n(e,o),n(o,f),n(o,h),A(b,u,m),p&&p.m(b,m),A(b,_,m)},p(b,m){m&64&&r!==(r=b[6].latencyMs+"")&&$(f,r),m&64&&ie(o,"latency-good",b[6].latencyMs<200),m&64&&ie(o,"latency-warn",b[6].latencyMs>=200&&b[6].latencyMs<500),m&64&&ie(o,"latency-bad",b[6].latencyMs>=500),b[6].version?p?p.p(b,m):(p=Ol(b),p.c(),p.m(_.parentNode,_)):p&&(p.d(1),p=null)},d(b){b&&(i(e),i(u),i(_)),p&&p.d(b)}}}function Ol(s){let e,t,l="Version:",a,o,r=s[6].version+"",f;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=S(),o=v("span"),f=O(r),this.h()},l(h){e=d(h,"DIV",{class:!0});var u=w(e);t=d(u,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1s4wfrd"&&(t.textContent=l),a=y(u),o=d(u,"SPAN",{class:!0});var _=w(o);f=B(_,r),_.forEach(i),u.forEach(i),this.h()},h(){c(t,"class","label svelte-360cfj"),c(o,"class","value svelte-360cfj"),c(e,"class","info-row svelte-360cfj")},m(h,u){A(h,e,u),n(e,t),n(e,a),n(e,o),n(o,f)},p(h,u){u&64&&r!==(r=h[6].version+"")&&$(f,r)},d(h){h&&i(e)}}}function zn(s){let e,t='<div class="info-box svelte-360cfj"><h3 class="svelte-360cfj">‚ÑπÔ∏è Web Mode</h3> <p class="svelte-360cfj">You&#39;re running in web browser mode. The app automatically connects to the same server hosting this page.</p> <p class="svelte-360cfj">Server configuration is only available in the mobile app.</p></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1kpqbtr"&&(e.innerHTML=t),this.h()},h(){c(e,"class","section svelte-360cfj")},m(l,a){A(l,e,a)},p:de,i:de,o:de,d(l){l&&i(e)}}}function Bn(s){let e,t,l="üîß Server Selection",a,o,r="Choose which server to connect to. Your app will remember this setting.",f,h,u,_,p="üè†",b,m,g,k="Home Server",C,P,I=s[10].local+"",D,z,N,M="Local Ollama with full model access",j,V,E,T,H="‚òÅÔ∏è",L,F,X,J="Cloud Server",ee,U,K=s[10].cloud+"",x,Z,te,he="RunPod GPU with Qwen3-Coder-30B",oe,me,le,ke,pe="‚öôÔ∏è",_e,Q,Y,ce="Custom Server",ye,Ae,Ce,Se,ve,re,be="‚ö° Compute Tier",ne,se,q="Automatically select the best compute tier based on connectivity, battery, and task requirements.",W,ae,ge,Ee,Le='<h2 class="svelte-360cfj">‚ÑπÔ∏è Tier Details</h2> <div class="info-box svelte-360cfj"><ul class="svelte-360cfj"><li class="svelte-360cfj"><strong>üè† Home Server:</strong> Full Ollama access, Qwen3:14B, all memories synced</li> <li class="svelte-360cfj"><strong>‚òÅÔ∏è Cloud Server:</strong> RunPod GPU, Qwen3-Coder-30B, low latency</li> <li class="svelte-360cfj"><strong>üì± On-Device:</strong> Local Qwen3-1.7B via llama.cpp (offline capable)</li></ul></div>',Me,we,De,nt="üîÑ Memory Sync",Ke,qe,_t="Keep your memories synchronized between devices. Changes made offline will sync when reconnected.",Je,We,Pt,ze,Ye,$t="üì± On-Device AI",zt,Xe,xt="Download and manage local AI models for offline use. Models run directly on your device.",Bt,Ze,It,Be,$e,el="‚¨áÔ∏è App Updates",Ot,xe,tl="Check for and download new versions of the MetaHuman app from your connected server.",Ht,et,Vt,Oe,tt,ll="üë§ Profile Data",Ft,lt,sl="Download your profile for offline use, create local profiles, or sync changes with the server.",Rt,st,Te,Gt,nl,Pe=s[0]===s[10].local&&!s[9]&&Hl(),Ie=s[0]===s[10].cloud&&!s[9]&&Fl();function al(G,fe){return!G[9]&&G[0]!==G[10].local&&G[0]!==G[10].cloud?Hn:On}let At=al(s),He=At(s),Ve=!s[9]&&s[0]!==s[10].local&&s[0]!==s[10].cloud&&Rl(),Ne=s[9]&&Gl(s);return ae=new As({}),We=new ds({}),Ze=new Ys({}),et=new wn({}),st=new Mn({}),{c(){e=v("div"),t=v("h2"),t.textContent=l,a=S(),o=v("p"),o.textContent=r,f=S(),h=v("div"),u=v("button"),_=v("div"),_.textContent=p,b=S(),m=v("div"),g=v("strong"),g.textContent=k,C=S(),P=v("span"),D=O(I),z=S(),N=v("span"),N.textContent=M,j=S(),Pe&&Pe.c(),V=S(),E=v("button"),T=v("div"),T.textContent=H,L=S(),F=v("div"),X=v("strong"),X.textContent=J,ee=S(),U=v("span"),x=O(K),Z=S(),te=v("span"),te.textContent=he,oe=S(),Ie&&Ie.c(),me=S(),le=v("button"),ke=v("div"),ke.textContent=pe,_e=S(),Q=v("div"),Y=v("strong"),Y.textContent=ce,ye=S(),He.c(),Ae=S(),Ve&&Ve.c(),Ce=S(),Ne&&Ne.c(),Se=S(),ve=v("div"),re=v("h2"),re.textContent=be,ne=S(),se=v("p"),se.textContent=q,W=S(),wt(ae.$$.fragment),ge=S(),Ee=v("div"),Ee.innerHTML=Le,Me=S(),we=v("div"),De=v("h2"),De.textContent=nt,Ke=S(),qe=v("p"),qe.textContent=_t,Je=S(),wt(We.$$.fragment),Pt=S(),ze=v("div"),Ye=v("h2"),Ye.textContent=$t,zt=S(),Xe=v("p"),Xe.textContent=xt,Bt=S(),wt(Ze.$$.fragment),It=S(),Be=v("div"),$e=v("h2"),$e.textContent=el,Ot=S(),xe=v("p"),xe.textContent=tl,Ht=S(),wt(et.$$.fragment),Vt=S(),Oe=v("div"),tt=v("h2"),tt.textContent=ll,Ft=S(),lt=v("p"),lt.textContent=sl,Rt=S(),wt(st.$$.fragment),this.h()},l(G){e=d(G,"DIV",{class:!0});var fe=w(e);t=d(fe,"H2",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-khslw9"&&(t.textContent=l),a=y(fe),o=d(fe,"P",{class:!0,"data-svelte-h":!0}),R(o)!=="svelte-1f9nw6h"&&(o.textContent=r),f=y(fe),h=d(fe,"DIV",{class:!0});var at=w(h);u=d(at,"BUTTON",{class:!0});var rt=w(u);_=d(rt,"DIV",{class:!0,"data-svelte-h":!0}),R(_)!=="svelte-cuagae"&&(_.textContent=p),b=y(rt),m=d(rt,"DIV",{class:!0});var ot=w(m);g=d(ot,"STRONG",{class:!0,"data-svelte-h":!0}),R(g)!=="svelte-1xy9zss"&&(g.textContent=k),C=y(ot),P=d(ot,"SPAN",{class:!0});var rl=w(P);D=B(rl,I),rl.forEach(i),z=y(ot),N=d(ot,"SPAN",{class:!0,"data-svelte-h":!0}),R(N)!=="svelte-t7fvc9"&&(N.textContent=M),ot.forEach(i),j=y(rt),Pe&&Pe.l(rt),rt.forEach(i),V=y(at),E=d(at,"BUTTON",{class:!0});var it=w(E);T=d(it,"DIV",{class:!0,"data-svelte-h":!0}),R(T)!=="svelte-1b8t7ye"&&(T.textContent=H),L=y(it),F=d(it,"DIV",{class:!0});var ct=w(F);X=d(ct,"STRONG",{class:!0,"data-svelte-h":!0}),R(X)!=="svelte-1aefjk8"&&(X.textContent=J),ee=y(ct),U=d(ct,"SPAN",{class:!0});var ol=w(U);x=B(ol,K),ol.forEach(i),Z=y(ct),te=d(ct,"SPAN",{class:!0,"data-svelte-h":!0}),R(te)!=="svelte-1ya09is"&&(te.textContent=he),ct.forEach(i),oe=y(it),Ie&&Ie.l(it),it.forEach(i),me=y(at),le=d(at,"BUTTON",{class:!0});var ft=w(le);ke=d(ft,"DIV",{class:!0,"data-svelte-h":!0}),R(ke)!=="svelte-9f46pa"&&(ke.textContent=pe),_e=y(ft),Q=d(ft,"DIV",{class:!0});var Mt=w(Q);Y=d(Mt,"STRONG",{class:!0,"data-svelte-h":!0}),R(Y)!=="svelte-40mnbg"&&(Y.textContent=ce),ye=y(Mt),He.l(Mt),Mt.forEach(i),Ae=y(ft),Ve&&Ve.l(ft),ft.forEach(i),at.forEach(i),Ce=y(fe),Ne&&Ne.l(fe),fe.forEach(i),Se=y(G),ve=d(G,"DIV",{class:!0});var ut=w(ve);re=d(ut,"H2",{class:!0,"data-svelte-h":!0}),R(re)!=="svelte-168whps"&&(re.textContent=be),ne=y(ut),se=d(ut,"P",{class:!0,"data-svelte-h":!0}),R(se)!=="svelte-p0ggs8"&&(se.textContent=q),W=y(ut),kt(ae.$$.fragment,ut),ut.forEach(i),ge=y(G),Ee=d(G,"DIV",{class:!0,"data-svelte-h":!0}),R(Ee)!=="svelte-4ot784"&&(Ee.innerHTML=Le),Me=y(G),we=d(G,"DIV",{class:!0});var dt=w(we);De=d(dt,"H2",{class:!0,"data-svelte-h":!0}),R(De)!=="svelte-3ufk35"&&(De.textContent=nt),Ke=y(dt),qe=d(dt,"P",{class:!0,"data-svelte-h":!0}),R(qe)!=="svelte-1at4t57"&&(qe.textContent=_t),Je=y(dt),kt(We.$$.fragment,dt),dt.forEach(i),Pt=y(G),ze=d(G,"DIV",{class:!0});var vt=w(ze);Ye=d(vt,"H2",{class:!0,"data-svelte-h":!0}),R(Ye)!=="svelte-1s5d1vc"&&(Ye.textContent=$t),zt=y(vt),Xe=d(vt,"P",{class:!0,"data-svelte-h":!0}),R(Xe)!=="svelte-13az46k"&&(Xe.textContent=xt),Bt=y(vt),kt(Ze.$$.fragment,vt),vt.forEach(i),It=y(G),Be=d(G,"DIV",{class:!0});var ht=w(Be);$e=d(ht,"H2",{class:!0,"data-svelte-h":!0}),R($e)!=="svelte-8qmm65"&&($e.textContent=el),Ot=y(ht),xe=d(ht,"P",{class:!0,"data-svelte-h":!0}),R(xe)!=="svelte-1qqmfxy"&&(xe.textContent=tl),Ht=y(ht),kt(et.$$.fragment,ht),ht.forEach(i),Vt=y(G),Oe=d(G,"DIV",{class:!0});var pt=w(Oe);tt=d(pt,"H2",{class:!0,"data-svelte-h":!0}),R(tt)!=="svelte-lee9t6"&&(tt.textContent=ll),Ft=y(pt),lt=d(pt,"P",{class:!0,"data-svelte-h":!0}),R(lt)!=="svelte-i9tj86"&&(lt.textContent=sl),Rt=y(pt),kt(st.$$.fragment,pt),pt.forEach(i),this.h()},h(){c(t,"class","svelte-360cfj"),c(o,"class","section-description svelte-360cfj"),c(_,"class","option-icon svelte-360cfj"),c(g,"class","svelte-360cfj"),c(P,"class","option-url svelte-360cfj"),c(N,"class","option-desc svelte-360cfj"),c(m,"class","option-details svelte-360cfj"),c(u,"class","server-option svelte-360cfj"),u.disabled=s[5],ie(u,"selected",s[0]===s[10].local&&!s[9]),c(T,"class","option-icon svelte-360cfj"),c(X,"class","svelte-360cfj"),c(U,"class","option-url svelte-360cfj"),c(te,"class","option-desc svelte-360cfj"),c(F,"class","option-details svelte-360cfj"),c(E,"class","server-option svelte-360cfj"),E.disabled=s[5],ie(E,"selected",s[0]===s[10].cloud&&!s[9]),c(ke,"class","option-icon svelte-360cfj"),c(Y,"class","svelte-360cfj"),c(Q,"class","option-details svelte-360cfj"),c(le,"class","server-option svelte-360cfj"),le.disabled=s[5],ie(le,"selected",s[9]||s[0]!==s[10].local&&s[0]!==s[10].cloud),c(h,"class","server-options svelte-360cfj"),c(e,"class","section svelte-360cfj"),c(re,"class","svelte-360cfj"),c(se,"class","section-description svelte-360cfj"),c(ve,"class","section svelte-360cfj"),c(Ee,"class","section svelte-360cfj"),c(De,"class","svelte-360cfj"),c(qe,"class","section-description svelte-360cfj"),c(we,"class","section svelte-360cfj"),c(Ye,"class","svelte-360cfj"),c(Xe,"class","section-description svelte-360cfj"),c(ze,"class","section svelte-360cfj"),c($e,"class","svelte-360cfj"),c(xe,"class","section-description svelte-360cfj"),c(Be,"class","section svelte-360cfj"),c(tt,"class","svelte-360cfj"),c(lt,"class","section-description svelte-360cfj"),c(Oe,"class","section svelte-360cfj")},m(G,fe){A(G,e,fe),n(e,t),n(e,a),n(e,o),n(e,f),n(e,h),n(h,u),n(u,_),n(u,b),n(u,m),n(m,g),n(m,C),n(m,P),n(P,D),n(m,z),n(m,N),n(u,j),Pe&&Pe.m(u,null),n(h,V),n(h,E),n(E,T),n(E,L),n(E,F),n(F,X),n(F,ee),n(F,U),n(U,x),n(F,Z),n(F,te),n(E,oe),Ie&&Ie.m(E,null),n(h,me),n(h,le),n(le,ke),n(le,_e),n(le,Q),n(Q,Y),n(Q,ye),He.m(Q,null),n(le,Ae),Ve&&Ve.m(le,null),n(e,Ce),Ne&&Ne.m(e,null),A(G,Se,fe),A(G,ve,fe),n(ve,re),n(ve,ne),n(ve,se),n(ve,W),bt(ae,ve,null),A(G,ge,fe),A(G,Ee,fe),A(G,Me,fe),A(G,we,fe),n(we,De),n(we,Ke),n(we,qe),n(we,Je),bt(We,we,null),A(G,Pt,fe),A(G,ze,fe),n(ze,Ye),n(ze,zt),n(ze,Xe),n(ze,Bt),bt(Ze,ze,null),A(G,It,fe),A(G,Be,fe),n(Be,$e),n(Be,Ot),n(Be,xe),n(Be,Ht),bt(et,Be,null),A(G,Vt,fe),A(G,Oe,fe),n(Oe,tt),n(Oe,Ft),n(Oe,lt),n(Oe,Rt),bt(st,Oe,null),Te=!0,Gt||(nl=[ue(u,"click",s[17]),ue(E,"click",s[18]),ue(le,"click",s[15])],Gt=!0)},p(G,fe){(!Te||fe&1024)&&I!==(I=G[10].local+"")&&$(D,I),G[0]===G[10].local&&!G[9]?Pe||(Pe=Hl(),Pe.c(),Pe.m(u,null)):Pe&&(Pe.d(1),Pe=null),(!Te||fe&32)&&(u.disabled=G[5]),(!Te||fe&1537)&&ie(u,"selected",G[0]===G[10].local&&!G[9]),(!Te||fe&1024)&&K!==(K=G[10].cloud+"")&&$(x,K),G[0]===G[10].cloud&&!G[9]?Ie||(Ie=Fl(),Ie.c(),Ie.m(E,null)):Ie&&(Ie.d(1),Ie=null),(!Te||fe&32)&&(E.disabled=G[5]),(!Te||fe&1537)&&ie(E,"selected",G[0]===G[10].cloud&&!G[9]),At===(At=al(G))&&He?He.p(G,fe):(He.d(1),He=At(G),He&&(He.c(),He.m(Q,null))),!G[9]&&G[0]!==G[10].local&&G[0]!==G[10].cloud?Ve||(Ve=Rl(),Ve.c(),Ve.m(le,null)):Ve&&(Ve.d(1),Ve=null),(!Te||fe&32)&&(le.disabled=G[5]),(!Te||fe&1537)&&ie(le,"selected",G[9]||G[0]!==G[10].local&&G[0]!==G[10].cloud),G[9]?Ne?Ne.p(G,fe):(Ne=Gl(G),Ne.c(),Ne.m(e,null)):Ne&&(Ne.d(1),Ne=null)},i(G){Te||(Qe(ae.$$.fragment,G),Qe(We.$$.fragment,G),Qe(Ze.$$.fragment,G),Qe(et.$$.fragment,G),Qe(st.$$.fragment,G),Te=!0)},o(G){Ge(ae.$$.fragment,G),Ge(We.$$.fragment,G),Ge(Ze.$$.fragment,G),Ge(et.$$.fragment,G),Ge(st.$$.fragment,G),Te=!1},d(G){G&&(i(e),i(Se),i(ve),i(ge),i(Ee),i(Me),i(we),i(Pt),i(ze),i(It),i(Be),i(Vt),i(Oe)),Pe&&Pe.d(),Ie&&Ie.d(),He.d(),Ve&&Ve.d(),Ne&&Ne.d(),mt(ae),mt(We),mt(Ze),mt(et),mt(st),Gt=!1,Dt(nl)}}}function Hl(s){let e,t="Active";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Fl(s){let e,t="Active";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function On(s){let e,t="Enter a custom server URL";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1yhgm26"&&(e.textContent=t),this.h()},h(){c(e,"class","option-desc svelte-360cfj")},m(l,a){A(l,e,a)},p:de,d(l){l&&i(e)}}}function Hn(s){let e,t;return{c(){e=v("span"),t=O(s[0]),this.h()},l(l){e=d(l,"SPAN",{class:!0});var a=w(e);t=B(a,s[0]),a.forEach(i),this.h()},h(){c(e,"class","option-url svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&1&&$(t,l[0])},d(l){l&&i(e)}}}function Rl(s){let e,t="Active";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dnka0y"&&(e.textContent=t),this.h()},h(){c(e,"class","selected-badge svelte-360cfj")},m(l,a){A(l,e,a)},d(l){l&&i(e)}}}function Gl(s){let e,t,l="Custom Server URL:",a,o,r,f,h,u,_,p,b,m,g,k=s[5]?"Saving...":"Save & Connect",C,P,I,D,z,N,M;return{c(){e=v("div"),t=v("label"),t.textContent=l,a=S(),o=v("div"),r=v("input"),h=S(),u=v("button"),_=O("Test"),b=S(),m=v("div"),g=v("button"),C=O(k),I=S(),D=v("button"),z=O("Cancel"),this.h()},l(j){e=d(j,"DIV",{class:!0});var V=w(e);t=d(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1k7ykxe"&&(t.textContent=l),a=y(V),o=d(V,"DIV",{class:!0});var E=w(o);r=d(E,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),h=y(E),u=d(E,"BUTTON",{class:!0});var T=w(u);_=B(T,"Test"),T.forEach(i),E.forEach(i),b=y(V),m=d(V,"DIV",{class:!0});var H=w(m);g=d(H,"BUTTON",{class:!0});var L=w(g);C=B(L,k),L.forEach(i),I=y(H),D=d(H,"BUTTON",{class:!0});var F=w(D);z=B(F,"Cancel"),F.forEach(i),H.forEach(i),V.forEach(i),this.h()},h(){c(t,"for","custom-url"),c(t,"class","svelte-360cfj"),c(r,"id","custom-url"),c(r,"type","url"),c(r,"placeholder","https://your-server.example.com"),r.disabled=f=s[5]||s[4],c(r,"class","svelte-360cfj"),c(u,"class","btn btn-primary svelte-360cfj"),u.disabled=p=s[5]||s[4]||!s[1],c(o,"class","input-group svelte-360cfj"),c(g,"class","btn btn-success svelte-360cfj"),g.disabled=P=s[5]||s[4]||!s[1],c(D,"class","btn btn-secondary svelte-360cfj"),D.disabled=s[5],c(m,"class","button-row svelte-360cfj"),c(e,"class","custom-input-section svelte-360cfj")},m(j,V){A(j,e,V),n(e,t),n(e,a),n(e,o),n(o,r),Tt(r,s[1]),n(o,h),n(o,u),n(u,_),n(e,b),n(e,m),n(m,g),n(g,C),n(m,I),n(m,D),n(D,z),N||(M=[ue(r,"input",s[19]),ue(u,"click",s[20]),ue(g,"click",s[21]),ue(D,"click",s[16])],N=!0)},p(j,V){V&48&&f!==(f=j[5]||j[4])&&(r.disabled=f),V&2&&r.value!==j[1]&&Tt(r,j[1]),V&50&&p!==(p=j[5]||j[4]||!j[1])&&(u.disabled=p),V&32&&k!==(k=j[5]?"Saving...":"Save & Connect")&&$(C,k),V&50&&P!==(P=j[5]||j[4]||!j[1])&&(g.disabled=P),V&32&&(D.disabled=j[5])},d(j){j&&i(e),N=!1,Dt(M)}}}function Ql(s){let e,t;return{c(){e=v("div"),t=O(s[7]),this.h()},l(l){e=d(l,"DIV",{class:!0});var a=w(e);t=B(a,s[7]),a.forEach(i),this.h()},h(){c(e,"class","error-message svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&128&&$(t,l[7])},d(l){l&&i(e)}}}function Kl(s){let e,t;return{c(){e=v("div"),t=O(s[8]),this.h()},l(l){e=d(l,"DIV",{class:!0});var a=w(e);t=B(a,s[8]),a.forEach(i),this.h()},h(){c(e,"class","success-message svelte-360cfj")},m(l,a){A(l,e,a),n(e,t)},p(l,a){a&256&&$(t,l[8])},d(l){l&&i(e)}}}function Fn(s){let e,t,l='<h1 class="svelte-360cfj">üì° Server Settings</h1> <p class="svelte-360cfj">Configure your MetaHuman server connection</p>',a,o,r,f;const h=[Un,Tn],u=[];function _(p,b){return p[3]?0:1}return o=_(s),r=u[o]=h[o](s),{c(){e=v("div"),t=v("div"),t.innerHTML=l,a=S(),r.c(),this.h()},l(p){e=d(p,"DIV",{class:!0});var b=w(e);t=d(b,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-fustc2"&&(t.innerHTML=l),a=y(b),r.l(b),b.forEach(i),this.h()},h(){c(t,"class","server-header svelte-360cfj"),c(e,"class","server-container svelte-360cfj")},m(p,b){A(p,e,b),n(e,t),n(e,a),u[o].m(e,null),f=!0},p(p,[b]){let m=o;o=_(p),o===m?u[o].p(p,b):(Wl(),Ge(u[m],1,1,()=>{u[m]=null}),Yl(),r=u[o],r?r.p(p,b):(r=u[o]=h[o](p),r.c()),Qe(r,1),r.m(e,null))},i(p){f||(Qe(r),f=!0)},o(p){Ge(r),f=!1},d(p){p&&i(e),u[o].d()}}}function Rn(s,e,t){let l="",a="",o=!1,r=!0,f=!1,h=!1,u=null,_=null,p=null,b=!1,m={local:"",cloud:""};const g=Xl.subscribe(L=>{L&&u&&t(6,u={...u,connected:L.connected,latencyMs:L.latencyMs,error:L.error})});async function k(){t(3,r=!0);try{t(2,o=Nt()),t(10,m=ss()),t(0,l=await Jl()),t(1,a=l),await C()}catch(L){console.error("Failed to load server config:",L),t(7,_=L instanceof Error?L.message:"Failed to load configuration")}finally{t(3,r=!1)}}async function C(){if(!l){t(6,u={url:window.location.origin,connected:!0,latencyMs:0,version:"local"});return}t(4,f=!0),t(7,_=null);try{const L=await Qt(l);t(6,u={url:l,connected:L.success,latencyMs:L.latencyMs,version:L.version,error:L.error})}catch(L){t(6,u={url:l,connected:!1,latencyMs:0,error:L instanceof Error?L.message:"Connection failed"})}finally{t(4,f=!1)}}async function P(L){t(4,f=!0),t(7,_=null),t(8,p=null);try{const F=await Qt(L);return F.success?(t(8,p=`Connected! Latency: ${F.latencyMs}ms${F.version?`, Version: ${F.version}`:""}`),!0):(t(7,_=F.error||"Connection failed"),!1)}catch(F){return t(7,_=F instanceof Error?F.message:"Connection test failed"),!1}finally{t(4,f=!1)}}async function I(L){t(5,h=!0),t(7,_=null),t(8,p=null);try{const F=await Qt(L);if(!F.success){t(7,_=`Cannot connect to server: ${F.error}`);return}await ns(L),t(0,l=L),t(1,a=L),t(9,b=!1),t(8,p=`Server updated to ${L}`),t(6,u={url:L,connected:!0,latencyMs:F.latencyMs,version:F.version})}catch(F){t(7,_=F instanceof Error?F.message:"Failed to save server")}finally{t(5,h=!1)}}function D(L){t(1,a=L),t(9,b=!1),I(L)}function z(){t(9,b=!0),t(1,a="")}function N(){t(9,b=!1),t(1,a=l)}let M=null;yt(()=>{(async()=>(await ls(),await k()))(),M=setInterval(C,3e4)}),qt(()=>{g(),M&&clearInterval(M)});const j=()=>D(m.local),V=()=>D(m.cloud);function E(){a=this.value,t(1,a)}return[l,a,o,r,f,h,u,_,p,b,m,C,P,I,D,z,N,j,V,E,()=>P(a),()=>I(a)]}class ta extends gt{constructor(e){super(),jt(this,e,Rn,Fn,Et,{})}}export{ta as default};
