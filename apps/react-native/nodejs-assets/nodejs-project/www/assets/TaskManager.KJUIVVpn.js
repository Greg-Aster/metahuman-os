import{S as Al,i as Ll,s as Ul,r as De,n as it,d as c,v as ut,p as ae,c as d,z as xe,_ as ot,$ as dt,a as P,b as i,x as R,e as u,f as g,g as le,h as k,q as I,U as Nt,j as f,k as m,t as D,V as xt,K as jl,o as Hl,l as st,m as Wt,M as vt,u as Ct,w as gt,y as Jt}from"./api-config.B-uR5Kyo.js";import{a as Ml}from"./security-policy.Bh98pxWs.js";import"./index.PToQ82vo.js";function Rt(r,e,t){const l=r.slice();return l[92]=e[t],l}function Kt(r,e,t){const l=r.slice();return l[74]=e[t],l}function Xt(r,e,t){const l=r.slice();return l[74]=e[t],l}function Gt(r,e,t){const l=r.slice();return l[77]=e[t],l}function Qt(r,e,t){const l=r.slice();return l[74]=e[t],l}function Yt(r,e,t){const l=r.slice();return l[77]=e[t],l}function Zt(r,e,t){const l=r.slice();return l[77]=e[t],l}function $t(r,e,t){const l=r.slice();return l[87]=e[t],l}function Fl(r,e,t){const l=r.slice();return l[80]=e[t],l}function el(r,e,t){const l=r.slice();return l[87]=e[t],l}function tl(r){let e,t;return{c(){e=f("div"),t=D(r[7]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=g(e);t=I(a,r[7]),a.forEach(c),this.h()},h(){d(e,"class","p-2 text-sm text-center rounded bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200")},m(l,a){P(l,e,a),i(e,t)},p(l,a){a[0]&128&&ae(t,l[7])},d(l){l&&c(e)}}}function ll(r){let e,t=r[10]?"Hide Completed":`Show Completed (${r[3].length})`,l,a,n;return{c(){e=f("button"),l=D(t),this.h()},l(s){e=u(s,"BUTTON",{class:!0});var o=g(e);l=I(o,t),o.forEach(c),this.h()},h(){d(e,"class","ml-auto px-3 py-1 rounded border border-brand/40 text-brand hover:bg-brand/5")},m(s,o){P(s,e,o),i(e,l),a||(n=R(e,"click",r[45]),a=!0)},p(s,o){o[0]&1032&&t!==(t=s[10]?"Hide Completed":`Show Completed (${s[3].length})`)&&ae(l,t)},d(s){s&&c(e),a=!1,n()}}}function sl(r,e){let t,l=e[87].name+"",a,n,s,o,h;function w(){return e[47](e[87])}return{key:r,first:null,c(){t=f("button"),a=D(l),this.h()},l(_){t=u(_,"BUTTON",{class:!0,title:!0});var b=g(t);a=I(b,l),b.forEach(c),this.h()},h(){d(t,"class",n=`px-3 py-1 rounded-full border ${e[12]===e[87].id?"bg-brand text-white border-brand":"border-gray-300 dark:border-gray-600"}`),d(t,"title",s=e[87].description),this.first=t},m(_,b){P(_,t,b),i(t,a),o||(h=R(t,"click",w),o=!0)},p(_,b){e=_,b[0]&16&&l!==(l=e[87].name+"")&&ae(a,l),b[0]&4112&&n!==(n=`px-3 py-1 rounded-full border ${e[12]===e[87].id?"bg-brand text-white border-brand":"border-gray-300 dark:border-gray-600"}`)&&d(t,"class",n),b[0]&16&&s!==(s=e[87].description)&&d(t,"title",s)},d(_){_&&c(t),o=!1,h()}}}function rl(r){let e,t,l,a,n,s="Create",o,h,w="Cancel",_,b;return{c(){e=f("div"),t=f("input"),l=m(),a=f("div"),n=f("button"),n.textContent=s,o=m(),h=f("button"),h.textContent=w,this.h()},l(v){e=u(v,"DIV",{class:!0});var C=g(e);t=u(C,"INPUT",{type:!0,placeholder:!0,class:!0}),l=k(C),a=u(C,"DIV",{class:!0});var E=g(a);n=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-19mfi3u"&&(n.textContent=s),o=k(E),h=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),le(h)!=="svelte-j1xmng"&&(h.textContent=w),E.forEach(c),C.forEach(c),this.h()},h(){d(t,"type","text"),d(t,"placeholder","Task title..."),d(t,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"),d(n,"class","btn"),d(h,"class","px-4 py-2 rounded bg-gray-200 dark:bg-gray-700"),d(a,"class","flex gap-2 mt-3"),d(e,"class","card p-4 border-2 border-brand/40")},m(v,C){P(v,e,C),i(e,t),xe(t,r[8]),i(e,l),i(e,a),i(a,n),i(a,o),i(a,h),_||(b=[R(t,"input",r[48]),R(t,"keydown",r[49]),R(n,"click",r[19]),R(h,"click",r[50])],_=!0)},p(v,C){C[0]&256&&t.value!==v[8]&&xe(t,v[8])},d(v){v&&c(e),_=!1,ut(b)}}}function al(r){let e,t;return{c(){e=f("div"),t=D(r[6]),this.h()},l(l){e=u(l,"DIV",{class:!0});var a=g(e);t=I(a,r[6]),a.forEach(c),this.h()},h(){d(e,"class","card p-4 border border-red-400 bg-red-50 dark:bg-red-950/40 text-red-700 dark:text-red-300")},m(l,a){P(l,e,a),i(e,t)},p(l,a){a[0]&64&&ae(t,l[6])},d(l){l&&c(e)}}}function ql(r){let e,t,l,a,n="Week of",s,o,h=Vt(r[1]).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})+"",w,_,b,v,C="←",E,O,ne="This Week",U,K,q="→",oe,ie,y=[],ge=new Map,z,W,J=De(r[14]);const ve=j=>j[92].date.toISOString();for(let j=0;j<J.length;j+=1){let N=Rt(r,J,j),H=ve(N);ge.set(H,y[j]=cl(H,N))}return{c(){e=f("div"),t=f("div"),l=f("div"),a=f("div"),a.textContent=n,s=m(),o=f("div"),w=D(h),_=m(),b=f("div"),v=f("button"),v.textContent=C,E=m(),O=f("button"),O.textContent=ne,U=m(),K=f("button"),K.textContent=q,oe=m(),ie=f("div");for(let j=0;j<y.length;j+=1)y[j].c();this.h()},l(j){e=u(j,"DIV",{class:!0});var N=g(e);t=u(N,"DIV",{class:!0});var H=g(t);l=u(H,"DIV",{});var me=g(l);a=u(me,"DIV",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-1bmvoyq"&&(a.textContent=n),s=k(me),o=u(me,"DIV",{class:!0});var re=g(o);w=I(re,h),re.forEach(c),me.forEach(c),_=k(H),b=u(H,"DIV",{class:!0});var te=g(b);v=u(te,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),le(v)!=="svelte-13fg00h"&&(v.textContent=C),E=k(te),O=u(te,"BUTTON",{class:!0,"data-svelte-h":!0}),le(O)!=="svelte-4igqov"&&(O.textContent=ne),U=k(te),K=u(te,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),le(K)!=="svelte-ln0yne"&&(K.textContent=q),te.forEach(c),H.forEach(c),oe=k(N),ie=u(N,"DIV",{class:!0});var fe=g(ie);for(let he=0;he<y.length;he+=1)y[he].l(fe);fe.forEach(c),N.forEach(c),this.h()},h(){d(a,"class","text-sm uppercase tracking-wide text-gray-500 dark:text-gray-400"),d(o,"class","text-lg font-semibold"),d(v,"class","btn-secondary"),d(v,"aria-label","Previous week"),d(O,"class","btn-secondary"),d(K,"class","btn-secondary"),d(K,"aria-label","Next week"),d(b,"class","flex items-center gap-2"),d(t,"class","flex items-center justify-between mb-4"),d(ie,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3"),d(e,"class","card p-4")},m(j,N){P(j,e,N),i(e,t),i(t,l),i(l,a),i(l,s),i(l,o),i(o,w),i(t,_),i(t,b),i(b,v),i(b,E),i(b,O),i(b,U),i(b,K),i(e,oe),i(e,ie);for(let H=0;H<y.length;H+=1)y[H]&&y[H].m(ie,null);z||(W=[R(v,"click",r[67]),R(O,"click",r[31]),R(K,"click",r[68])],z=!0)},p(j,N){N[0]&2&&h!==(h=Vt(j[1]).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})+"")&&ae(w,h),N[0]&16400&&(J=De(j[14]),y=ot(y,N,ve,1,j,J,ge,ie,dt,cl,null,Rt))},d(j){j&&c(e);for(let N=0;N<y.length;N+=1)y[N].d();z=!1,ut(W)}}}function zl(r){let e,t;function l(o,h){return o[5]?Xl:o[2].length===0?Kl:Rl}let a=l(r),n=a(r),s=r[10]&&Dl(r);return{c(){n.c(),e=m(),s&&s.c(),t=vt()},l(o){n.l(o),e=k(o),s&&s.l(o),t=vt()},m(o,h){n.m(o,h),P(o,e,h),s&&s.m(o,h),P(o,t,h)},p(o,h){a===(a=l(o))&&n?n.p(o,h):(n.d(1),n=a(o),n&&(n.c(),n.m(e.parentNode,e))),o[10]?s?s.p(o,h):(s=Dl(o),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(o){o&&(c(e),c(t)),n.d(o),s&&s.d(o)}}}function nl(r){let e,t="Today";return{c(){e=f("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1jr67uc"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs px-2 py-0.5 rounded bg-brand/10 text-brand")},m(l,a){P(l,e,a)},d(l){l&&c(e)}}}function Wl(r){let e,t=[],l=new Map,a=De(r[92].tasks);const n=s=>s[74].id;for(let s=0;s<a.length;s+=1){let o=Kt(r,a,s),h=n(o);l.set(h,t[s]=dl(h,o))}return{c(){e=f("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=u(s,"DIV",{class:!0});var o=g(e);for(let h=0;h<t.length;h+=1)t[h].l(o);o.forEach(c),this.h()},h(){d(e,"class","space-y-2")},m(s,o){P(s,e,o);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null)},p(s,o){o[0]&16400&&(a=De(s[92].tasks),t=ot(t,o,n,1,s,a,l,e,dt,dl,null,Kt))},d(s){s&&c(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Jl(r){let e,t="No scheduled tasks.";return{c(){e=f("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-p1y8yv"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(l,a){P(l,e,a)},p:it,d(l){l&&c(e)}}}function il(r){let e,t=yt(r[74])+"",l;return{c(){e=f("div"),l=D(t),this.h()},l(a){e=u(a,"DIV",{class:!0});var n=g(e);l=I(n,t),n.forEach(c),this.h()},h(){d(e,"class","text-[11px] text-gray-600 dark:text-gray-400")},m(a,n){P(a,e,n),i(e,l)},p(a,n){n[0]&16384&&t!==(t=yt(a[74])+"")&&ae(l,t)},d(a){a&&c(e)}}}function ol(r){let e,t,l=(r[4].find(n)?.name??r[74].listId)+"",a;function n(...s){return r[69](r[74],...s)}return{c(){e=f("div"),t=D("List: "),a=D(l),this.h()},l(s){e=u(s,"DIV",{class:!0});var o=g(e);t=I(o,"List: "),a=I(o,l),o.forEach(c),this.h()},h(){d(e,"class","text-[11px] text-gray-500 dark:text-gray-400")},m(s,o){P(s,e,o),i(e,t),i(e,a)},p(s,o){r=s,o[0]&16400&&l!==(l=(r[4].find(n)?.name??r[74].listId)+"")&&ae(a,l)},d(s){s&&c(e)}}}function dl(r,e){let t,l,a=e[74].title+"",n,s,o=yt(e[74]),h,w,_=o&&il(e),b=e[74].listId&&ol(e);return{key:r,first:null,c(){t=f("div"),l=f("div"),n=D(a),s=m(),_&&_.c(),h=m(),b&&b.c(),w=m(),this.h()},l(v){t=u(v,"DIV",{class:!0});var C=g(t);l=u(C,"DIV",{class:!0});var E=g(l);n=I(E,a),E.forEach(c),s=k(C),_&&_.l(C),h=k(C),b&&b.l(C),w=k(C),C.forEach(c),this.h()},h(){d(l,"class","font-semibold"),d(t,"class","rounded border px-2 py-1 text-xs border-brand/30 bg-brand/5"),this.first=t},m(v,C){P(v,t,C),i(t,l),i(l,n),i(t,s),_&&_.m(t,null),i(t,h),b&&b.m(t,null),i(t,w)},p(v,C){e=v,C[0]&16384&&a!==(a=e[74].title+"")&&ae(n,a),C[0]&16384&&(o=yt(e[74])),o?_?_.p(e,C):(_=il(e),_.c(),_.m(t,h)):_&&(_.d(1),_=null),e[74].listId?b?b.p(e,C):(b=ol(e),b.c(),b.m(t,w)):b&&(b.d(1),b=null)},d(v){v&&c(t),_&&_.d(),b&&b.d()}}}function cl(r,e){let t,l,a,n=e[92].label+"",s,o,h,w,_=e[92].isToday&&nl();function b(E,O){return E[92].tasks.length===0?Jl:Wl}let v=b(e),C=v(e);return{key:r,first:null,c(){t=f("div"),l=f("div"),a=f("span"),s=D(n),o=m(),_&&_.c(),h=m(),C.c(),w=m(),this.h()},l(E){t=u(E,"DIV",{class:!0});var O=g(t);l=u(O,"DIV",{class:!0});var ne=g(l);a=u(ne,"SPAN",{class:!0});var U=g(a);s=I(U,n),U.forEach(c),o=k(ne),_&&_.l(ne),ne.forEach(c),h=k(O),C.l(O),w=k(O),O.forEach(c),this.h()},h(){d(a,"class","text-sm font-semibold"),d(l,"class","flex items-center justify-between mb-2"),d(t,"class","border rounded-lg p-3 bg-white dark:bg-gray-900/60 dark:border-gray-700"),this.first=t},m(E,O){P(E,t,O),i(t,l),i(l,a),i(a,s),i(l,o),_&&_.m(l,null),i(t,h),C.m(t,null),i(t,w)},p(E,O){e=E,O[0]&16384&&n!==(n=e[92].label+"")&&ae(s,n),e[92].isToday?_||(_=nl(),_.c(),_.m(l,null)):_&&(_.d(1),_=null),v===(v=b(e))&&C?C.p(e,O):(C.d(1),C=v(e),C&&(C.c(),C.m(t,w)))},d(E){E&&c(t),_&&_.d(),C.d()}}}function Rl(r){let e,t=[],l=new Map,a=De(r[2]);const n=s=>s[74].id;for(let s=0;s<a.length;s+=1){let o=Qt(r,a,s),h=n(o);l.set(h,t[s]=Il(h,o))}return{c(){e=f("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=u(s,"DIV",{class:!0});var o=g(e);for(let h=0;h<t.length;h+=1)t[h].l(o);o.forEach(c),this.h()},h(){d(e,"class","space-y-3")},m(s,o){P(s,e,o);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null)},p(s,o){o[0]&66551828&&(a=De(s[2]),t=ot(t,o,n,1,s,a,l,e,dt,Il,null,Qt))},d(s){s&&c(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Kl(r){let e,t,l=r[11]?"No tasks match your search.":"No active tasks found.",a,n,s,o="Create your first task",h,w;return{c(){e=f("div"),t=f("p"),a=D(l),n=m(),s=f("button"),s.textContent=o,this.h()},l(_){e=u(_,"DIV",{class:!0});var b=g(e);t=u(b,"P",{});var v=g(t);a=I(v,l),v.forEach(c),n=k(b),s=u(b,"BUTTON",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1i2exs6"&&(s.textContent=o),b.forEach(c),this.h()},h(){d(s,"class","mt-3 text-brand hover:underline"),d(e,"class","card p-8 text-center muted")},m(_,b){P(_,e,b),i(e,t),i(t,a),i(e,n),i(e,s),h||(w=R(s,"click",r[51]),h=!0)},p(_,b){b[0]&2048&&l!==(l=_[11]?"No tasks match your search.":"No active tasks found.")&&ae(a,l)},d(_){_&&c(e),h=!1,w()}}}function Xl(r){let e,t=De([1,2,3]),l=[];for(let a=0;a<3;a+=1)l[a]=Yl(Fl(r,t,a));return{c(){e=f("div");for(let a=0;a<3;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var n=g(e);for(let s=0;s<3;s+=1)l[s].l(n);n.forEach(c),this.h()},h(){d(e,"class","space-y-3")},m(a,n){P(a,e,n);for(let s=0;s<3;s+=1)l[s]&&l[s].m(e,null)},p:it,d(a){a&&c(e),Ct(l,a)}}}function Gl(r){let e,t,l,a,n,s=r[74].status.replace("_"," ")+"",o,h,w,_,b,v=r[74].title+"",C,E,O,ne,U,K,q,oe,ie,y=Je(r[74].created)+"",ge,z,W,J,ve,j,N,H,me,re,te,fe,he,T=r[74].priority&&ul(r),F=r[74].listId&&fl(r),M=r[74].description&&hl(r),L=r[74].tags?.length&&_l(r),B=(r[74].start||r[74].end)&&pl(r),se=r[74].due&&kl(r);function $(){return r[59](r[74])}let ce=r[74].status==="todo"&&ml(r),Y=r[74].status==="in_progress"&&yl(r),x=r[74].status==="blocked"&&Cl(r),Z=r[74].status!=="done"&&r[74].status!=="cancelled"&&wl(r);return{c(){e=f("div"),t=f("div"),l=f("div"),T&&T.c(),a=m(),n=f("span"),o=D(s),w=m(),F&&F.c(),_=m(),b=f("h3"),C=D(v),E=m(),M&&M.c(),O=m(),L&&L.c(),ne=m(),U=f("div"),B&&B.c(),K=m(),se&&se.c(),q=m(),oe=f("div"),ie=D("Created: "),ge=D(y),z=m(),W=f("div"),J=f("button"),ve=D("Edit"),H=m(),ce&&ce.c(),me=m(),Y&&Y.c(),re=m(),x&&x.c(),te=m(),Z&&Z.c(),this.h()},l(Ee){e=u(Ee,"DIV",{class:!0});var X=g(e);t=u(X,"DIV",{class:!0});var ue=g(t);l=u(ue,"DIV",{class:!0});var _e=g(l);T&&T.l(_e),a=k(_e),n=u(_e,"SPAN",{class:!0});var ye=g(n);o=I(ye,s),ye.forEach(c),w=k(_e),F&&F.l(_e),_e.forEach(c),_=k(ue),b=u(ue,"H3",{class:!0});var Me=g(b);C=I(Me,v),Me.forEach(c),E=k(ue),M&&M.l(ue),O=k(ue),L&&L.l(ue),ne=k(ue),U=u(ue,"DIV",{class:!0});var Ce=g(U);B&&B.l(Ce),K=k(Ce),se&&se.l(Ce),q=k(Ce),oe=u(Ce,"DIV",{});var be=g(oe);ie=I(be,"Created: "),ge=I(be,y),be.forEach(c),Ce.forEach(c),ue.forEach(c),z=k(X),W=u(X,"DIV",{class:!0});var ke=g(W);J=u(ke,"BUTTON",{class:!0,title:!0});var Ue=g(J);ve=I(Ue,"Edit"),Ue.forEach(c),H=k(ke),ce&&ce.l(ke),me=k(ke),Y&&Y.l(ke),re=k(ke),x&&x.l(ke),te=k(ke),Z&&Z.l(ke),ke.forEach(c),X.forEach(c),this.h()},h(){d(n,"class",h="text-xs px-2 py-0.5 rounded-full font-semibold "+mt(r[74].status)),d(l,"class","flex items-center gap-2 mb-2"),d(b,"class","font-semibold mb-1"),d(U,"class","mt-2 text-xs muted space-y-1"),d(t,"class","flex-1"),d(J,"class","text-xs px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700"),J.disabled=j=!r[18],d(J,"title",N=r[18]?"Edit task":"Editing disabled in read-only mode"),d(W,"class","flex flex-col gap-1"),d(e,"class","flex items-start justify-between gap-4")},m(Ee,X){P(Ee,e,X),i(e,t),i(t,l),T&&T.m(l,null),i(l,a),i(l,n),i(n,o),i(l,w),F&&F.m(l,null),i(t,_),i(t,b),i(b,C),i(t,E),M&&M.m(t,null),i(t,O),L&&L.m(t,null),i(t,ne),i(t,U),B&&B.m(U,null),i(U,K),se&&se.m(U,null),i(U,q),i(U,oe),i(oe,ie),i(oe,ge),i(e,z),i(e,W),i(W,J),i(J,ve),i(W,H),ce&&ce.m(W,null),i(W,me),Y&&Y.m(W,null),i(W,re),x&&x.m(W,null),i(W,te),Z&&Z.m(W,null),fe||(he=R(J,"click",$),fe=!0)},p(Ee,X){r=Ee,r[74].priority?T?T.p(r,X):(T=ul(r),T.c(),T.m(l,a)):T&&(T.d(1),T=null),X[0]&4&&s!==(s=r[74].status.replace("_"," ")+"")&&ae(o,s),X[0]&4&&h!==(h="text-xs px-2 py-0.5 rounded-full font-semibold "+mt(r[74].status))&&d(n,"class",h),r[74].listId?F?F.p(r,X):(F=fl(r),F.c(),F.m(l,null)):F&&(F.d(1),F=null),X[0]&4&&v!==(v=r[74].title+"")&&ae(C,v),r[74].description?M?M.p(r,X):(M=hl(r),M.c(),M.m(t,O)):M&&(M.d(1),M=null),r[74].tags?.length?L?L.p(r,X):(L=_l(r),L.c(),L.m(t,ne)):L&&(L.d(1),L=null),r[74].start||r[74].end?B?B.p(r,X):(B=pl(r),B.c(),B.m(U,K)):B&&(B.d(1),B=null),r[74].due?se?se.p(r,X):(se=kl(r),se.c(),se.m(U,q)):se&&(se.d(1),se=null),X[0]&4&&y!==(y=Je(r[74].created)+"")&&ae(ge,y),X[0]&262144&&j!==(j=!r[18])&&(J.disabled=j),X[0]&262144&&N!==(N=r[18]?"Edit task":"Editing disabled in read-only mode")&&d(J,"title",N),r[74].status==="todo"?ce?ce.p(r,X):(ce=ml(r),ce.c(),ce.m(W,me)):ce&&(ce.d(1),ce=null),r[74].status==="in_progress"?Y?Y.p(r,X):(Y=yl(r),Y.c(),Y.m(W,re)):Y&&(Y.d(1),Y=null),r[74].status==="blocked"?x?x.p(r,X):(x=Cl(r),x.c(),x.m(W,te)):x&&(x.d(1),x=null),r[74].status!=="done"&&r[74].status!=="cancelled"?Z?Z.p(r,X):(Z=wl(r),Z.c(),Z.m(W,null)):Z&&(Z.d(1),Z=null)},d(Ee){Ee&&c(e),T&&T.d(),F&&F.d(),M&&M.d(),L&&L.d(),B&&B.d(),se&&se.d(),ce&&ce.d(),Y&&Y.d(),x&&x.d(),Z&&Z.d(),fe=!1,he()}}}function Ql(r){let e,t,l,a="Title",n,s,o,h,w,_="Description",b,v,C,E,O,ne,U="Priority",K,q,oe,ie="P0 - Critical",y,ge="P1 - High",z,W="P2 - Medium",J,ve="P3 - Low",j,N,H,me="Due Date",re,te,fe,he,T,F="List",M,L,B,se="No List",$=[],ce=new Map,Y,x,Z,Ee="Tags",X,ue,_e,ye,Me,Ce,be,ke=r[17]?"Saving...":"Save",Ue,Qe,Ie,Ze="Cancel",Ke,$e,Be=De(r[4]);const et=S=>S[87].id;for(let S=0;S<Be.length;S+=1){let G=$t(r,Be,S),ee=et(G);ce.set(ee,$[S]=Tl(ee,G))}let Fe=De(r[16].tags||[]),pe=[];for(let S=0;S<Fe.length;S+=1)pe[S]=El(Zt(r,Fe,S));return{c(){e=f("div"),t=f("div"),l=f("label"),l.textContent=a,n=m(),s=f("input"),o=m(),h=f("div"),w=f("label"),w.textContent=_,b=m(),v=f("textarea"),C=m(),E=f("div"),O=f("div"),ne=f("label"),ne.textContent=U,K=m(),q=f("select"),oe=f("option"),oe.textContent=ie,y=f("option"),y.textContent=ge,z=f("option"),z.textContent=W,J=f("option"),J.textContent=ve,j=m(),N=f("div"),H=f("label"),H.textContent=me,re=m(),te=f("input"),fe=m(),he=f("div"),T=f("label"),T.textContent=F,M=m(),L=f("select"),B=f("option"),B.textContent=se;for(let S=0;S<$.length;S+=1)$[S].c();Y=m(),x=f("div"),Z=f("label"),Z.textContent=Ee,X=m(),ue=f("div");for(let S=0;S<pe.length;S+=1)pe[S].c();_e=m(),ye=f("input"),Me=m(),Ce=f("div"),be=f("button"),Ue=D(ke),Qe=m(),Ie=f("button"),Ie.textContent=Ze,this.h()},l(S){e=u(S,"DIV",{class:!0});var G=g(e);t=u(G,"DIV",{});var ee=g(t);l=u(ee,"LABEL",{class:!0,"data-svelte-h":!0}),le(l)!=="svelte-dxgb8b"&&(l.textContent=a),n=k(ee),s=u(ee,"INPUT",{type:!0,class:!0,placeholder:!0}),ee.forEach(c),o=k(G),h=u(G,"DIV",{});var qe=g(h);w=u(qe,"LABEL",{class:!0,"data-svelte-h":!0}),le(w)!=="svelte-nuhb27"&&(w.textContent=_),b=k(qe),v=u(qe,"TEXTAREA",{rows:!0,class:!0,placeholder:!0}),g(v).forEach(c),qe.forEach(c),C=k(G),E=u(G,"DIV",{class:!0});var Xe=g(E);O=u(Xe,"DIV",{class:!0});var we=g(O);ne=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),le(ne)!=="svelte-3fbapt"&&(ne.textContent=U),K=k(we),q=u(we,"SELECT",{class:!0});var Ae=g(q);oe=u(Ae,"OPTION",{"data-svelte-h":!0}),le(oe)!=="svelte-wksvos"&&(oe.textContent=ie),y=u(Ae,"OPTION",{"data-svelte-h":!0}),le(y)!=="svelte-lanvqx"&&(y.textContent=ge),z=u(Ae,"OPTION",{"data-svelte-h":!0}),le(z)!=="svelte-1507bve"&&(z.textContent=W),J=u(Ae,"OPTION",{"data-svelte-h":!0}),le(J)!=="svelte-xx0q55"&&(J.textContent=ve),Ae.forEach(c),we.forEach(c),j=k(Xe),N=u(Xe,"DIV",{class:!0});var Ye=g(N);H=u(Ye,"LABEL",{class:!0,"data-svelte-h":!0}),le(H)!=="svelte-11lsn9v"&&(H.textContent=me),re=k(Ye),te=u(Ye,"INPUT",{type:!0,class:!0}),Ye.forEach(c),Xe.forEach(c),fe=k(G),he=u(G,"DIV",{});var Ge=g(he);T=u(Ge,"LABEL",{class:!0,"data-svelte-h":!0}),le(T)!=="svelte-ijysbd"&&(T.textContent=F),M=k(Ge),L=u(Ge,"SELECT",{class:!0});var je=g(L);B=u(je,"OPTION",{"data-svelte-h":!0}),le(B)!=="svelte-1jyc0ah"&&(B.textContent=se);for(let Te=0;Te<$.length;Te+=1)$[Te].l(je);je.forEach(c),Ge.forEach(c),Y=k(G),x=u(G,"DIV",{});var ze=g(x);Z=u(ze,"LABEL",{class:!0,"data-svelte-h":!0}),le(Z)!=="svelte-riwif8"&&(Z.textContent=Ee),X=k(ze),ue=u(ze,"DIV",{class:!0});var p=g(ue);for(let Te=0;Te<pe.length;Te+=1)pe[Te].l(p);p.forEach(c),_e=k(ze),ye=u(ze,"INPUT",{type:!0,placeholder:!0,class:!0}),ze.forEach(c),Me=k(G),Ce=u(G,"DIV",{class:!0});var Q=g(Ce);be=u(Q,"BUTTON",{class:!0});var de=g(be);Ue=I(de,ke),de.forEach(c),Qe=k(Q),Ie=u(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),le(Ie)!=="svelte-yrezqm"&&(Ie.textContent=Ze),Q.forEach(c),G.forEach(c),this.h()},h(){d(l,"class","block text-xs font-semibold mb-1"),d(s,"type","text"),d(s,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),d(s,"placeholder","Task title..."),d(w,"class","block text-xs font-semibold mb-1"),d(v,"rows","2"),d(v,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),d(v,"placeholder","Description (optional)..."),d(ne,"class","block text-xs font-semibold mb-1"),oe.__value="P0",xe(oe,oe.__value),y.__value="P1",xe(y,y.__value),z.__value="P2",xe(z,z.__value),J.__value="P3",xe(J,J.__value),d(q,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),r[16].priority===void 0&&Jt(()=>r[54].call(q)),d(O,"class","flex-1"),d(H,"class","block text-xs font-semibold mb-1"),d(te,"type","datetime-local"),d(te,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),d(N,"class","flex-1"),d(E,"class","flex gap-3"),d(T,"class","block text-xs font-semibold mb-1"),B.__value="",xe(B,B.__value),d(L,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),r[16].listId===void 0&&Jt(()=>r[56].call(L)),d(Z,"class","block text-xs font-semibold mb-1"),d(ue,"class","flex flex-wrap gap-1 mb-2"),d(ye,"type","text"),d(ye,"placeholder","Type tag and press Enter..."),d(ye,"class","w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),be.disabled=r[17],d(be,"class","btn"),d(Ie,"class","px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-sm"),d(Ce,"class","flex gap-2 pt-2"),d(e,"class","space-y-3")},m(S,G){P(S,e,G),i(e,t),i(t,l),i(t,n),i(t,s),xe(s,r[16].title),i(e,o),i(e,h),i(h,w),i(h,b),i(h,v),xe(v,r[16].description),i(e,C),i(e,E),i(E,O),i(O,ne),i(O,K),i(O,q),i(q,oe),i(q,y),i(q,z),i(q,J),gt(q,r[16].priority,!0),i(E,j),i(E,N),i(N,H),i(N,re),i(N,te),xe(te,r[16].due),i(e,fe),i(e,he),i(he,T),i(he,M),i(he,L),i(L,B);for(let ee=0;ee<$.length;ee+=1)$[ee]&&$[ee].m(L,null);gt(L,r[16].listId,!0),i(e,Y),i(e,x),i(x,Z),i(x,X),i(x,ue);for(let ee=0;ee<pe.length;ee+=1)pe[ee]&&pe[ee].m(ue,null);i(x,_e),i(x,ye),i(e,Me),i(e,Ce),i(Ce,be),i(be,Ue),i(Ce,Qe),i(Ce,Ie),Ke||($e=[R(s,"input",r[52]),R(v,"input",r[53]),R(q,"change",r[54]),R(te,"input",r[55]),R(L,"change",r[56]),R(ye,"keydown",r[24]),R(be,"click",r[23]),R(Ie,"click",r[22])],Ke=!0)},p(S,G){if(G[0]&65536&&s.value!==S[16].title&&xe(s,S[16].title),G[0]&65536&&xe(v,S[16].description),G[0]&65536&&gt(q,S[16].priority),G[0]&65536&&xe(te,S[16].due),G[0]&16&&(Be=De(S[4]),$=ot($,G,et,1,S,Be,ce,L,dt,Tl,null,$t)),G[0]&65536&&gt(L,S[16].listId),G[0]&33619968){Fe=De(S[16].tags||[]);let ee;for(ee=0;ee<Fe.length;ee+=1){const qe=Zt(S,Fe,ee);pe[ee]?pe[ee].p(qe,G):(pe[ee]=El(qe),pe[ee].c(),pe[ee].m(ue,null))}for(;ee<pe.length;ee+=1)pe[ee].d(1);pe.length=Fe.length}G[0]&131072&&ke!==(ke=S[17]?"Saving...":"Save")&&ae(Ue,ke),G[0]&131072&&(be.disabled=S[17])},d(S){S&&c(e);for(let G=0;G<$.length;G+=1)$[G].d();Ct(pe,S),Ke=!1,ut($e)}}}function ul(r){let e,t=r[74].priority+"",l,a;return{c(){e=f("span"),l=D(t),this.h()},l(n){e=u(n,"SPAN",{class:!0});var s=g(e);l=I(s,t),s.forEach(c),this.h()},h(){d(e,"class",a="text-xs px-2 py-0.5 rounded-full font-semibold "+kt(r[74].priority))},m(n,s){P(n,e,s),i(e,l)},p(n,s){s[0]&4&&t!==(t=n[74].priority+"")&&ae(l,t),s[0]&4&&a!==(a="text-xs px-2 py-0.5 rounded-full font-semibold "+kt(n[74].priority))&&d(e,"class",a)},d(n){n&&c(e)}}}function fl(r){let e,t=(r[4].find(a)?.name??r[74].listId)+"",l;function a(...n){return r[58](r[74],...n)}return{c(){e=f("span"),l=D(t),this.h()},l(n){e=u(n,"SPAN",{class:!0});var s=g(e);l=I(s,t),s.forEach(c),this.h()},h(){d(e,"class","text-[11px] px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-700")},m(n,s){P(n,e,s),i(e,l)},p(n,s){r=n,s[0]&20&&t!==(t=(r[4].find(a)?.name??r[74].listId)+"")&&ae(l,t)},d(n){n&&c(e)}}}function hl(r){let e,t=r[74].description+"",l;return{c(){e=f("p"),l=D(t),this.h()},l(a){e=u(a,"P",{class:!0});var n=g(e);l=I(n,t),n.forEach(c),this.h()},h(){d(e,"class","text-sm muted")},m(a,n){P(a,e,n),i(e,l)},p(a,n){n[0]&4&&t!==(t=a[74].description+"")&&ae(l,t)},d(a){a&&c(e)}}}function _l(r){let e,t=De(r[74].tags),l=[];for(let a=0;a<t.length;a+=1)l[a]=bl(Yt(r,t,a));return{c(){e=f("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var n=g(e);for(let s=0;s<l.length;s+=1)l[s].l(n);n.forEach(c),this.h()},h(){d(e,"class","mt-2 flex flex-wrap gap-1")},m(a,n){P(a,e,n);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(a,n){if(n[0]&4){t=De(a[74].tags);let s;for(s=0;s<t.length;s+=1){const o=Yt(a,t,s);l[s]?l[s].p(o,n):(l[s]=bl(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(a){a&&c(e),Ct(l,a)}}}function bl(r){let e,t=r[77]+"",l;return{c(){e=f("span"),l=D(t),this.h()},l(a){e=u(a,"SPAN",{class:!0});var n=g(e);l=I(n,t),n.forEach(c),this.h()},h(){d(e,"class","text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700")},m(a,n){P(a,e,n),i(e,l)},p(a,n){n[0]&4&&t!==(t=a[77]+"")&&ae(l,t)},d(a){a&&c(e)}}}function pl(r){let e,t,l=r[74].start&&gl(r),a=r[74].end&&vl(r);return{c(){e=f("div"),l&&l.c(),t=m(),a&&a.c()},l(n){e=u(n,"DIV",{});var s=g(e);l&&l.l(s),t=k(s),a&&a.l(s),s.forEach(c)},m(n,s){P(n,e,s),l&&l.m(e,null),i(e,t),a&&a.m(e,null)},p(n,s){n[74].start?l?l.p(n,s):(l=gl(n),l.c(),l.m(e,t)):l&&(l.d(1),l=null),n[74].end?a?a.p(n,s):(a=vl(n),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(n){n&&c(e),l&&l.d(),a&&a.d()}}}function gl(r){let e,t=Je(r[74].start)+"",l;return{c(){e=D("Start: "),l=D(t)},l(a){e=I(a,"Start: "),l=I(a,t)},m(a,n){P(a,e,n),P(a,l,n)},p(a,n){n[0]&4&&t!==(t=Je(a[74].start)+"")&&ae(l,t)},d(a){a&&(c(e),c(l))}}}function vl(r){let e,t,l=Je(r[74].end)+"",a;return{c(){e=f("span"),t=D("End: "),a=D(l),this.h()},l(n){e=u(n,"SPAN",{class:!0});var s=g(e);t=I(s,"End: "),a=I(s,l),s.forEach(c),this.h()},h(){d(e,"class","ml-2")},m(n,s){P(n,e,s),i(e,t),i(e,a)},p(n,s){s[0]&4&&l!==(l=Je(n[74].end)+"")&&ae(a,l)},d(n){n&&c(e)}}}function kl(r){let e,t,l=Je(r[74].due)+"",a;return{c(){e=f("div"),t=D("Due: "),a=D(l)},l(n){e=u(n,"DIV",{});var s=g(e);t=I(s,"Due: "),a=I(s,l),s.forEach(c)},m(n,s){P(n,e,s),i(e,t),i(e,a)},p(n,s){s[0]&4&&l!==(l=Je(n[74].due)+"")&&ae(a,l)},d(n){n&&c(e)}}}function ml(r){let e,t="Start",l,a;function n(){return r[60](r[74])}return{c(){e=f("button"),e.textContent=t,this.h()},l(s){e=u(s,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1nd02vc"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs px-3 py-1 rounded bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800")},m(s,o){P(s,e,o),l||(a=R(e,"click",n),l=!0)},p(s,o){r=s},d(s){s&&c(e),l=!1,a()}}}function yl(r){let e,t="Complete",l,a,n="Block",s,o;function h(){return r[61](r[74])}function w(){return r[62](r[74])}return{c(){e=f("button"),e.textContent=t,l=m(),a=f("button"),a.textContent=n,this.h()},l(_){e=u(_,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-158km6y"&&(e.textContent=t),l=k(_),a=u(_,"BUTTON",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-1ckh4d6"&&(a.textContent=n),this.h()},h(){d(e,"class","text-xs px-3 py-1 rounded bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800"),d(a,"class","text-xs px-3 py-1 rounded bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800")},m(_,b){P(_,e,b),P(_,l,b),P(_,a,b),s||(o=[R(e,"click",h),R(a,"click",w)],s=!0)},p(_,b){r=_},d(_){_&&(c(e),c(l),c(a)),s=!1,ut(o)}}}function Cl(r){let e,t="Unblock",l,a;function n(){return r[63](r[74])}return{c(){e=f("button"),e.textContent=t,this.h()},l(s){e=u(s,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1kb9xy8"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs px-3 py-1 rounded bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800")},m(s,o){P(s,e,o),l||(a=R(e,"click",n),l=!0)},p(s,o){r=s},d(s){s&&c(e),l=!1,a()}}}function wl(r){let e,t="Cancel",l,a;function n(){return r[64](r[74])}return{c(){e=f("button"),e.textContent=t,this.h()},l(s){e=u(s,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1dy2tae"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700")},m(s,o){P(s,e,o),l||(a=R(e,"click",n),l=!0)},p(s,o){r=s},d(s){s&&c(e),l=!1,a()}}}function Tl(r,e){let t,l=e[87].name+"",a,n;return{key:r,first:null,c(){t=f("option"),a=D(l),this.h()},l(s){t=u(s,"OPTION",{});var o=g(t);a=I(o,l),o.forEach(c),this.h()},h(){t.__value=n=e[87].id,xe(t,t.__value),this.first=t},m(s,o){P(s,t,o),i(t,a)},p(s,o){e=s,o[0]&16&&l!==(l=e[87].name+"")&&ae(a,l),o[0]&16&&n!==(n=e[87].id)&&(t.__value=n,xe(t,t.__value))},d(s){s&&c(t)}}}function El(r){let e,t=r[77]+"",l,a,n,s="×",o,h,w;function _(){return r[57](r[77])}return{c(){e=f("span"),l=D(t),a=m(),n=f("button"),n.textContent=s,o=m(),this.h()},l(b){e=u(b,"SPAN",{class:!0});var v=g(e);l=I(v,t),a=k(v),n=u(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(n)!=="svelte-1nze8gd"&&(n.textContent=s),o=k(v),v.forEach(c),this.h()},h(){d(n,"type","button"),d(n,"class","hover:text-red-500"),d(e,"class","text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700 flex items-center gap-1")},m(b,v){P(b,e,v),i(e,l),i(e,a),i(e,n),i(e,o),h||(w=R(n,"click",_),h=!0)},p(b,v){r=b,v[0]&65536&&t!==(t=r[77]+"")&&ae(l,t)},d(b){b&&c(e),h=!1,w()}}}function Il(r,e){let t,l;function a(o,h){return o[15]===o[74].id?Ql:Gl}let n=a(e),s=n(e);return{key:r,first:null,c(){t=f("div"),s.c(),l=m(),this.h()},l(o){t=u(o,"DIV",{class:!0});var h=g(t);s.l(h),l=k(h),h.forEach(c),this.h()},h(){d(t,"class","card p-4 hover:ring-2 hover:ring-brand/40 transition"),this.first=t},m(o,h){P(o,t,h),s.m(t,null),i(t,l)},p(o,h){e=o,n===(n=a(e))&&s?s.p(e,h):(s.d(1),s=n(e),s&&(s.c(),s.m(t,l)))},d(o){o&&c(t),s.d()}}}function Yl(r){let e,t='<div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"></div> ';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-8h4iiy"&&(e.innerHTML=t),this.h()},h(){d(e,"class","card p-4 animate-pulse")},m(l,a){P(l,e,a)},p:it,d(l){l&&c(e)}}}function Dl(r){let e,t,l,a,n=r[3].length+"",s,o;function h(b,v){return b[3].length===0?$l:Zl}let w=h(r),_=w(r);return{c(){e=f("div"),t=f("h3"),l=D(`Completed Tasks
          `),a=f("span"),s=D(n),o=m(),_.c(),this.h()},l(b){e=u(b,"DIV",{class:!0});var v=g(e);t=u(v,"H3",{class:!0});var C=g(t);l=I(C,`Completed Tasks
          `),a=u(C,"SPAN",{class:!0});var E=g(a);s=I(E,n),E.forEach(c),C.forEach(c),o=k(v),_.l(v),v.forEach(c),this.h()},h(){d(a,"class","text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700"),d(t,"class","text-lg font-semibold flex items-center gap-2"),d(e,"class","mt-8 space-y-3")},m(b,v){P(b,e,v),i(e,t),i(t,l),i(t,a),i(a,s),i(e,o),_.m(e,null)},p(b,v){v[0]&8&&n!==(n=b[3].length+"")&&ae(s,n),w===(w=h(b))&&_?_.p(b,v):(_.d(1),_=w(b),_&&(_.c(),_.m(e,null)))},d(b){b&&c(e),_.d()}}}function Zl(r){let e=[],t=new Map,l,a=De(r[3]);const n=s=>s[74].id;for(let s=0;s<a.length;s+=1){let o=Xt(r,a,s),h=n(o);t.set(h,e[s]=Pl(h,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=vt()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);l=vt()},m(s,o){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(s,o);P(s,l,o)},p(s,o){o[0]&1048584&&(a=De(s[3]),e=ot(e,o,n,1,s,a,t,l.parentNode,dt,Pl,l,Xt))},d(s){s&&c(l);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function $l(r){let e,t="<p>No completed tasks yet.</p>";return{c(){e=f("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-w2ung1"&&(e.innerHTML=t),this.h()},h(){d(e,"class","card p-6 text-center muted")},m(l,a){P(l,e,a)},p:it,d(l){l&&c(e)}}}function Nl(r){let e,t=r[74].priority+"",l,a;return{c(){e=f("span"),l=D(t),this.h()},l(n){e=u(n,"SPAN",{class:!0});var s=g(e);l=I(s,t),s.forEach(c),this.h()},h(){d(e,"class",a="text-xs px-2 py-0.5 rounded-full font-semibold "+kt(r[74].priority))},m(n,s){P(n,e,s),i(e,l)},p(n,s){s[0]&8&&t!==(t=n[74].priority+"")&&ae(l,t),s[0]&8&&a!==(a="text-xs px-2 py-0.5 rounded-full font-semibold "+kt(n[74].priority))&&d(e,"class",a)},d(n){n&&c(e)}}}function xl(r){let e,t=r[74].description+"",l;return{c(){e=f("p"),l=D(t),this.h()},l(a){e=u(a,"P",{class:!0});var n=g(e);l=I(n,t),n.forEach(c),this.h()},h(){d(e,"class","text-sm muted")},m(a,n){P(a,e,n),i(e,l)},p(a,n){n[0]&8&&t!==(t=a[74].description+"")&&ae(l,t)},d(a){a&&c(e)}}}function Vl(r){let e,t=De(r[74].tags),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ol(Gt(r,t,a));return{c(){e=f("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var n=g(e);for(let s=0;s<l.length;s+=1)l[s].l(n);n.forEach(c),this.h()},h(){d(e,"class","mt-2 flex flex-wrap gap-1")},m(a,n){P(a,e,n);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(a,n){if(n[0]&8){t=De(a[74].tags);let s;for(s=0;s<t.length;s+=1){const o=Gt(a,t,s);l[s]?l[s].p(o,n):(l[s]=Ol(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(a){a&&c(e),Ct(l,a)}}}function Ol(r){let e,t=r[77]+"",l;return{c(){e=f("span"),l=D(t),this.h()},l(a){e=u(a,"SPAN",{class:!0});var n=g(e);l=I(n,t),n.forEach(c),this.h()},h(){d(e,"class","text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700")},m(a,n){P(a,e,n),i(e,l)},p(a,n){n[0]&8&&t!==(t=a[77]+"")&&ae(l,t)},d(a){a&&c(e)}}}function Sl(r){let e,t="Cancel",l,a;function n(){return r[66](r[74])}return{c(){e=f("button"),e.textContent=t,this.h()},l(s){e=u(s,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1dy2tae"&&(e.textContent=t),this.h()},h(){d(e,"class","text-xs px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700")},m(s,o){P(s,e,o),l||(a=R(e,"click",n),l=!0)},p(s,o){r=s},d(s){s&&c(e),l=!1,a()}}}function Pl(r,e){let t,l,a,n,s,o=e[74].status.replace("_"," ")+"",h,w,_,b,v,C=e[74].title+"",E,O,ne,U,K,q,oe,ie=Je(e[74].completed||e[74].updated)+"",y,ge,z,W,J=Je(e[74].created)+"",ve,j,N,H,me="Reopen",re,te,fe,he,T=e[74].priority&&Nl(e),F=e[74].description&&xl(e),M=e[74].tags?.length&&Vl(e);function L(){return e[65](e[74])}let B=e[74].status!=="cancelled"&&Sl(e);return{key:r,first:null,c(){t=f("div"),l=f("div"),a=f("div"),n=f("div"),s=f("span"),h=D(o),_=m(),T&&T.c(),b=m(),v=f("h4"),E=D(C),O=m(),F&&F.c(),ne=m(),M&&M.c(),U=m(),K=f("div"),q=f("div"),oe=D("Completed: "),y=D(ie),ge=m(),z=f("div"),W=D("Created: "),ve=D(J),j=m(),N=f("div"),H=f("button"),H.textContent=me,re=m(),B&&B.c(),te=m(),this.h()},l(se){t=u(se,"DIV",{class:!0});var $=g(t);l=u($,"DIV",{class:!0});var ce=g(l);a=u(ce,"DIV",{class:!0});var Y=g(a);n=u(Y,"DIV",{class:!0});var x=g(n);s=u(x,"SPAN",{class:!0});var Z=g(s);h=I(Z,o),Z.forEach(c),_=k(x),T&&T.l(x),x.forEach(c),b=k(Y),v=u(Y,"H4",{class:!0});var Ee=g(v);E=I(Ee,C),Ee.forEach(c),O=k(Y),F&&F.l(Y),ne=k(Y),M&&M.l(Y),U=k(Y),K=u(Y,"DIV",{class:!0});var X=g(K);q=u(X,"DIV",{});var ue=g(q);oe=I(ue,"Completed: "),y=I(ue,ie),ue.forEach(c),ge=k(X),z=u(X,"DIV",{});var _e=g(z);W=I(_e,"Created: "),ve=I(_e,J),_e.forEach(c),X.forEach(c),Y.forEach(c),j=k(ce),N=u(ce,"DIV",{class:!0});var ye=g(N);H=u(ye,"BUTTON",{class:!0,"data-svelte-h":!0}),le(H)!=="svelte-stdmqy"&&(H.textContent=me),re=k(ye),B&&B.l(ye),ye.forEach(c),ce.forEach(c),te=k($),$.forEach(c),this.h()},h(){d(s,"class",w="text-xs px-2 py-0.5 rounded-full font-semibold "+mt(e[74].status)),d(n,"class","flex items-center gap-2 mb-2"),d(v,"class","font-semibold mb-1 line-through decoration-brand/60"),d(K,"class","mt-2 text-xs muted space-y-1"),d(a,"class","flex-1"),d(H,"class","text-xs px-3 py-1 rounded bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800"),d(N,"class","flex flex-col gap-1"),d(l,"class","flex items-start justify-between gap-4"),d(t,"class","card p-4 bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700"),this.first=t},m(se,$){P(se,t,$),i(t,l),i(l,a),i(a,n),i(n,s),i(s,h),i(n,_),T&&T.m(n,null),i(a,b),i(a,v),i(v,E),i(a,O),F&&F.m(a,null),i(a,ne),M&&M.m(a,null),i(a,U),i(a,K),i(K,q),i(q,oe),i(q,y),i(K,ge),i(K,z),i(z,W),i(z,ve),i(l,j),i(l,N),i(N,H),i(N,re),B&&B.m(N,null),i(t,te),fe||(he=R(H,"click",L),fe=!0)},p(se,$){e=se,$[0]&8&&o!==(o=e[74].status.replace("_"," ")+"")&&ae(h,o),$[0]&8&&w!==(w="text-xs px-2 py-0.5 rounded-full font-semibold "+mt(e[74].status))&&d(s,"class",w),e[74].priority?T?T.p(e,$):(T=Nl(e),T.c(),T.m(n,null)):T&&(T.d(1),T=null),$[0]&8&&C!==(C=e[74].title+"")&&ae(E,C),e[74].description?F?F.p(e,$):(F=xl(e),F.c(),F.m(a,ne)):F&&(F.d(1),F=null),e[74].tags?.length?M?M.p(e,$):(M=Vl(e),M.c(),M.m(a,U)):M&&(M.d(1),M=null),$[0]&8&&ie!==(ie=Je(e[74].completed||e[74].updated)+"")&&ae(y,ie),$[0]&8&&J!==(J=Je(e[74].created)+"")&&ae(ve,J),e[74].status!=="cancelled"?B?B.p(e,$):(B=Sl(e),B.c(),B.m(N,null)):B&&(B.d(1),B=null)},d(se){se&&c(t),T&&T.d(),F&&F.d(),M&&M.d(),B&&B.d(),fe=!1,he()}}}function es(r){let e,t,l,a,n="Tasks",s,o,h,w=r[2].length+"",_,b,v,C,E=r[3].length+"",O,ne,U,K,q,oe,ie,y,ge,z,W,J,ve,j,N,H,me,re,te,fe,he,T,F="Run Organizer Agent",M,L,B,se,$,ce,Y,x,Z,Ee,X,ue,_e,ye,Me,Ce,be,ke,Ue,Qe,Ie,Ze,Ke,$e,Be,et,Fe,pe,S,G,ee,qe,Xe,we,Ae,Ye="Lists:",Ge,je,ze,p,Q,de=[],Te=new Map,Ne,Le,ft="+ New List",ct,rt,at,wt,Ot,Ve=r[7]&&tl(r),Oe=r[13]==="list"&&ll(r),ht=De(r[4]);const St=V=>V[87].id;for(let V=0;V<ht.length;V+=1){let A=el(r,ht,V),We=St(A);Te.set(We,de[V]=sl(We,A))}let Se=r[9]&&rl(r),Pe=r[6]&&al(r);function Pt(V,A){return V[13]==="list"?zl:ql}let _t=Pt(r),Re=_t(r);return{c(){e=f("div"),t=f("div"),l=f("div"),a=f("h2"),a.textContent=n,s=m(),o=f("span"),h=D("Active: "),_=D(w),b=m(),v=f("span"),C=D("Completed: "),O=D(E),ne=m(),U=f("div"),K=f("div"),q=f("button"),oe=D("List"),ge=m(),z=f("button"),W=D("Calendar"),j=m(),N=f("div"),H=f("input"),me=m(),re=xt("svg"),te=xt("circle"),fe=xt("line"),he=m(),T=f("button"),T.textContent=F,M=m(),L=f("button"),B=D("+ New Task"),ce=m(),Ve&&Ve.c(),Y=m(),x=f("div"),Z=f("button"),Ee=D("All"),ue=m(),_e=f("button"),ye=D("Todo"),Ce=m(),be=f("button"),ke=D("In Progress"),Qe=m(),Ie=f("button"),Ze=D("Blocked"),$e=m(),Be=f("button"),et=D("Done"),pe=m(),S=f("button"),G=D("Cancelled"),qe=m(),Oe&&Oe.c(),Xe=m(),we=f("div"),Ae=f("span"),Ae.textContent=Ye,Ge=m(),je=f("button"),ze=D("All"),Q=m();for(let V=0;V<de.length;V+=1)de[V].c();Ne=m(),Le=f("button"),Le.textContent=ft,ct=m(),Se&&Se.c(),rt=m(),Pe&&Pe.c(),at=m(),Re.c(),this.h()},l(V){e=u(V,"DIV",{class:!0});var A=g(e);t=u(A,"DIV",{class:!0});var We=g(t);l=u(We,"DIV",{class:!0});var nt=g(l);a=u(nt,"H2",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-18v62bg"&&(a.textContent=n),s=k(nt),o=u(nt,"SPAN",{class:!0});var Tt=g(o);h=I(Tt,"Active: "),_=I(Tt,w),Tt.forEach(c),b=k(nt),v=u(nt,"SPAN",{class:!0});var Et=g(v);C=I(Et,"Completed: "),O=I(Et,E),Et.forEach(c),nt.forEach(c),ne=k(We),U=u(We,"DIV",{class:!0});var tt=g(U);K=u(tt,"DIV",{class:!0});var bt=g(K);q=u(bt,"BUTTON",{class:!0,"aria-pressed":!0});var Bt=g(q);oe=I(Bt,"List"),Bt.forEach(c),ge=k(bt),z=u(bt,"BUTTON",{class:!0,"aria-pressed":!0});var At=g(z);W=I(At,"Calendar"),At.forEach(c),bt.forEach(c),j=k(tt),N=u(tt,"DIV",{class:!0});var pt=g(N);H=u(pt,"INPUT",{type:!0,placeholder:!0,class:!0}),me=k(pt),re=Nt(pt,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var It=g(re);te=Nt(It,"circle",{cx:!0,cy:!0,r:!0}),g(te).forEach(c),fe=Nt(It,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),g(fe).forEach(c),It.forEach(c),pt.forEach(c),he=k(tt),T=u(tt,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),le(T)!=="svelte-j5f7yq"&&(T.textContent=F),M=k(tt),L=u(tt,"BUTTON",{class:!0,title:!0});var Lt=g(L);B=I(Lt,"+ New Task"),Lt.forEach(c),tt.forEach(c),We.forEach(c),ce=k(A),Ve&&Ve.l(A),Y=k(A),x=u(A,"DIV",{class:!0});var He=g(x);Z=u(He,"BUTTON",{class:!0});var Ut=g(Z);Ee=I(Ut,"All"),Ut.forEach(c),ue=k(He),_e=u(He,"BUTTON",{class:!0});var jt=g(_e);ye=I(jt,"Todo"),jt.forEach(c),Ce=k(He),be=u(He,"BUTTON",{class:!0});var Ht=g(be);ke=I(Ht,"In Progress"),Ht.forEach(c),Qe=k(He),Ie=u(He,"BUTTON",{class:!0});var Mt=g(Ie);Ze=I(Mt,"Blocked"),Mt.forEach(c),$e=k(He),Be=u(He,"BUTTON",{class:!0});var Ft=g(Be);et=I(Ft,"Done"),Ft.forEach(c),pe=k(He),S=u(He,"BUTTON",{class:!0});var qt=g(S);G=I(qt,"Cancelled"),qt.forEach(c),qe=k(He),Oe&&Oe.l(He),He.forEach(c),Xe=k(A),we=u(A,"DIV",{class:!0});var lt=g(we);Ae=u(lt,"SPAN",{class:!0,"data-svelte-h":!0}),le(Ae)!=="svelte-1s7sa5k"&&(Ae.textContent=Ye),Ge=k(lt),je=u(lt,"BUTTON",{class:!0});var zt=g(je);ze=I(zt,"All"),zt.forEach(c),Q=k(lt);for(let Dt=0;Dt<de.length;Dt+=1)de[Dt].l(lt);Ne=k(lt),Le=u(lt,"BUTTON",{class:!0,"data-svelte-h":!0}),le(Le)!=="svelte-f1jabe"&&(Le.textContent=ft),lt.forEach(c),ct=k(A),Se&&Se.l(A),rt=k(A),Pe&&Pe.l(A),at=k(A),Re.l(A),A.forEach(c),this.h()},h(){d(a,"class","text-xl font-semibold"),d(o,"class","text-sm muted"),d(v,"class","text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-700"),d(l,"class","flex items-center gap-3"),d(q,"class",ie=`px-3 py-1 ${r[13]==="list"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"}`),d(q,"aria-pressed",y=r[13]==="list"),d(z,"class",J=`px-3 py-1 ${r[13]==="calendar"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"}`),d(z,"aria-pressed",ve=r[13]==="calendar"),d(K,"class","flex rounded border border-gray-300 dark:border-gray-600 overflow-hidden text-sm"),d(H,"type","search"),d(H,"placeholder","Search tasks..."),d(H,"class","pl-3 pr-9 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm"),d(te,"cx","11"),d(te,"cy","11"),d(te,"r","8"),d(fe,"x1","21"),d(fe,"y1","21"),d(fe,"x2","16.65"),d(fe,"y2","16.65"),d(re,"class","absolute right-2 top-1/2 -translate-y-1/2 text-gray-400"),d(re,"width","16"),d(re,"height","16"),d(re,"viewBox","0 0 24 24"),d(re,"fill","none"),d(re,"stroke","currentColor"),d(re,"stroke-width","2"),d(re,"stroke-linecap","round"),d(re,"stroke-linejoin","round"),d(N,"class","relative"),d(T,"class","btn-secondary"),d(T,"title","Run background agent to process memories"),d(L,"class","btn"),L.disabled=se=!r[18],d(L,"title",$=r[18]?"Create a new task":"Task creation disabled in read-only mode"),d(U,"class","flex items-center gap-2 flex-wrap justify-end"),d(t,"class","flex flex-wrap items-center justify-between gap-3"),d(Z,"class",X="px-3 py-1 rounded "+(r[0]==="all"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(_e,"class",Me="px-3 py-1 rounded "+(r[0]==="todo"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(be,"class",Ue="px-3 py-1 rounded "+(r[0]==="in_progress"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(Ie,"class",Ke="px-3 py-1 rounded "+(r[0]==="blocked"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(Be,"class",Fe="px-3 py-1 rounded "+(r[0]==="done"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(S,"class",ee="px-3 py-1 rounded "+(r[0]==="cancelled"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800")),d(x,"class","flex gap-2 text-sm"),d(Ae,"class","uppercase tracking-wide text-gray-500 dark:text-gray-400"),d(je,"class",p=`px-3 py-1 rounded-full border ${r[12]==="all"?"bg-brand text-white border-brand":"border-gray-300 dark:border-gray-600"}`),d(Le,"class","px-3 py-1 rounded-full border border-dashed border-brand text-brand hover:bg-brand/5"),d(we,"class","flex items-center gap-2 text-xs overflow-x-auto pb-2"),d(e,"class","space-y-4")},m(V,A){P(V,e,A),i(e,t),i(t,l),i(l,a),i(l,s),i(l,o),i(o,h),i(o,_),i(l,b),i(l,v),i(v,C),i(v,O),i(t,ne),i(t,U),i(U,K),i(K,q),i(q,oe),i(K,ge),i(K,z),i(z,W),i(U,j),i(U,N),i(N,H),xe(H,r[11]),i(N,me),i(N,re),i(re,te),i(re,fe),i(U,he),i(U,T),i(U,M),i(U,L),i(L,B),i(e,ce),Ve&&Ve.m(e,null),i(e,Y),i(e,x),i(x,Z),i(Z,Ee),i(x,ue),i(x,_e),i(_e,ye),i(x,Ce),i(x,be),i(be,ke),i(x,Qe),i(x,Ie),i(Ie,Ze),i(x,$e),i(x,Be),i(Be,et),i(x,pe),i(x,S),i(S,G),i(x,qe),Oe&&Oe.m(x,null),i(e,Xe),i(e,we),i(we,Ae),i(we,Ge),i(we,je),i(je,ze),i(we,Q);for(let We=0;We<de.length;We+=1)de[We]&&de[We].m(we,null);i(we,Ne),i(we,Le),i(e,ct),Se&&Se.m(e,null),i(e,rt),Pe&&Pe.m(e,null),i(e,at),Re.m(e,null),wt||(Ot=[R(q,"click",r[35]),R(z,"click",r[36]),R(H,"input",r[37]),R(T,"click",r[26]),R(L,"click",r[38]),R(Z,"click",r[39]),R(_e,"click",r[40]),R(be,"click",r[41]),R(Ie,"click",r[42]),R(Be,"click",r[43]),R(S,"click",r[44]),R(je,"click",r[46]),R(Le,"click",r[32])],wt=!0)},p(V,A){A[0]&4&&w!==(w=V[2].length+"")&&ae(_,w),A[0]&8&&E!==(E=V[3].length+"")&&ae(O,E),A[0]&8192&&ie!==(ie=`px-3 py-1 ${V[13]==="list"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"}`)&&d(q,"class",ie),A[0]&8192&&y!==(y=V[13]==="list")&&d(q,"aria-pressed",y),A[0]&8192&&J!==(J=`px-3 py-1 ${V[13]==="calendar"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"}`)&&d(z,"class",J),A[0]&8192&&ve!==(ve=V[13]==="calendar")&&d(z,"aria-pressed",ve),A[0]&2048&&H.value!==V[11]&&xe(H,V[11]),A[0]&262144&&se!==(se=!V[18])&&(L.disabled=se),A[0]&262144&&$!==($=V[18]?"Create a new task":"Task creation disabled in read-only mode")&&d(L,"title",$),V[7]?Ve?Ve.p(V,A):(Ve=tl(V),Ve.c(),Ve.m(e,Y)):Ve&&(Ve.d(1),Ve=null),A[0]&1&&X!==(X="px-3 py-1 rounded "+(V[0]==="all"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(Z,"class",X),A[0]&1&&Me!==(Me="px-3 py-1 rounded "+(V[0]==="todo"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(_e,"class",Me),A[0]&1&&Ue!==(Ue="px-3 py-1 rounded "+(V[0]==="in_progress"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(be,"class",Ue),A[0]&1&&Ke!==(Ke="px-3 py-1 rounded "+(V[0]==="blocked"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(Ie,"class",Ke),A[0]&1&&Fe!==(Fe="px-3 py-1 rounded "+(V[0]==="done"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(Be,"class",Fe),A[0]&1&&ee!==(ee="px-3 py-1 rounded "+(V[0]==="cancelled"?"bg-brand text-white":"bg-gray-100 dark:bg-gray-800"))&&d(S,"class",ee),V[13]==="list"?Oe?Oe.p(V,A):(Oe=ll(V),Oe.c(),Oe.m(x,null)):Oe&&(Oe.d(1),Oe=null),A[0]&4096&&p!==(p=`px-3 py-1 rounded-full border ${V[12]==="all"?"bg-brand text-white border-brand":"border-gray-300 dark:border-gray-600"}`)&&d(je,"class",p),A[0]&268439568&&(ht=De(V[4]),de=ot(de,A,St,1,V,ht,Te,we,dt,sl,Ne,el)),V[9]?Se?Se.p(V,A):(Se=rl(V),Se.c(),Se.m(e,rt)):Se&&(Se.d(1),Se=null),V[6]?Pe?Pe.p(V,A):(Pe=al(V),Pe.c(),Pe.m(e,at)):Pe&&(Pe.d(1),Pe=null),_t===(_t=Pt(V))&&Re?Re.p(V,A):(Re.d(1),Re=_t(V),Re&&(Re.c(),Re.m(e,null)))},i:it,o:it,d(V){V&&c(e),Ve&&Ve.d(),Oe&&Oe.d();for(let A=0;A<de.length;A+=1)de[A].d();Se&&Se.d(),Pe&&Pe.d(),Re.d(),wt=!1,ut(Ot)}}}function Vt(r){const e=new Date(r),t=e.getDay();return e.setHours(0,0,0,0),e.setDate(e.getDate()-t),e}function Bl(r,e){const t=new Date(r);return t.setDate(t.getDate()+e),t}function ts(r,e){const t=new Date(e);t.setHours(0,0,0,0);const l=new Date(t);l.setHours(23,59,59,999);const a=r.start?new Date(r.start):null,n=r.end?new Date(r.end):null,s=r.due?new Date(r.due):null;return a&&n?a<=l&&n>=t:a?a>=t&&a<=l:s?s>=t&&s<=l:!1}function Je(r){if(!r)return"—";const e=new Date(r);return Number.isNaN(e.getTime())?r:e.toLocaleString()}function kt(r){switch(r){case"P0":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"P1":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"P2":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"P3":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}function mt(r){switch(r){case"todo":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"blocked":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"done":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}}function yt(r){const e=r.start||r.due;if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function ls(r,e,t){let l;jl(r,Ml,p=>t(18,l=p));let a=[],n=[],s=[],o=!0,h="",w="",_="",b=!1,v="all",C=!1,E="",O="all",ne="list",U=new Date,K=[],q=[],oe=[],ie=null,y={},ge=!1;function z(){const p=Vt(U),Q=[],de=new Date;de.setHours(0,0,0,0);const Te=a.filter(Ne=>Ne.status==="done"||Ne.status==="cancelled"||v!=="all"&&Ne.status!==v?!1:he(Ne));for(let Ne=0;Ne<7;Ne++){const Le=Bl(p,Ne),ft=Le.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),ct=Le.getTime()===de.getTime(),rt=Te.filter(at=>ts(at,Le));Q.push({date:Le,label:ft,isToday:ct,tasks:rt})}t(14,K=Q)}async function W(){t(5,o=!0);try{const p=new URLSearchParams;O!=="all"&&p.set("list",O);const Q=p.size?`/api/tasks?${p.toString()}`:"/api/tasks",de=await st(Q);if(!de.ok)throw new Error("Failed to load tasks");const Te=await de.json(),Ne=Array.isArray(Te?.tasks)?Te.tasks:[],Le=Array.isArray(Te?.completedTasks)?Te.completedTasks:[];t(33,a=Ne),t(34,n=Le),t(6,h="")}catch(p){t(6,h=p.message)}finally{t(5,o=!1),z()}}async function J(){try{const p=await st("/api/task-lists");if(!p.ok)throw new Error("Failed to load task lists");const Q=await p.json();t(4,s=Array.isArray(Q?.lists)?Q.lists:[])}catch(p){t(6,h=p.message)}}async function ve(){if(_.trim())try{const p={title:_.trim()};if(O!=="all"&&(p.listId=O),!(await st("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Failed to create task");t(8,_=""),t(9,b=!1),await W()}catch(p){t(6,h=p.message)}}async function j(p,Q){try{if(!(await st("/api/tasks",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:p,status:Q})})).ok)throw new Error("Failed to update task");await W()}catch(de){t(6,h=de.message)}}function N(p){t(15,ie=p.id),t(16,y={title:p.title,description:p.description||"",priority:p.priority||"P2",due:p.due||"",tags:p.tags||[],listId:p.listId||""})}function H(){t(15,ie=null),t(16,y={})}async function me(){if(!(!ie||!y.title?.trim())){t(17,ge=!0);try{const p={taskId:ie,title:y.title.trim(),description:y.description||"",priority:y.priority||"P2",due:y.due||void 0,tags:y.tags||[]};if(y.listId&&(p.listId=y.listId),!(await st("/api/tasks",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Failed to update task");t(15,ie=null),t(16,y={}),await W()}catch(p){t(6,h=p.message)}finally{t(17,ge=!1)}}}function re(p){if(p.key==="Enter"||p.key===","){p.preventDefault();const Q=p.target,de=Q.value.trim().replace(/,/g,"");de&&!y.tags?.includes(de)&&t(16,y.tags=[...y.tags||[],de],y),Q.value=""}}function te(p){t(16,y.tags=(y.tags||[]).filter(Q=>Q!==p),y)}async function fe(){t(7,w="Starting agent...");try{const p=await st("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentName:"organizer"})}),Q=await p.json();if(!p.ok)throw new Error(Q.message||"Failed to start agent");t(7,w=Q.message)}catch(p){t(7,w=p.message)}finally{setTimeout(()=>t(7,w=""),5e3)}}function he(p){if(!E.trim())return!0;const Q=E.trim().toLowerCase();return[p.title,p.description||"",...p.tags||[]].join(" ").toLowerCase().includes(Q)}function T(p){t(0,v=p)}function F(p){t(12,O=p),W()}function M(p){t(13,ne=p),p==="calendar"&&z()}function L(p){t(1,U=Bl(U,p*7)),z()}function B(){t(1,U=new Date),z()}async function se(){if(typeof window>"u")return;const p=window.prompt("Task list name?");if(!(!p||!p.trim()))try{const Q=await st("/api/task-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.trim()})});if(!Q.ok)throw new Error("Failed to create list");const de=await Q.json();await J();const Te=de?.filepath;if(typeof Te=="string"){const Ne=Te.split("/").pop()?.replace(".json","");Ne&&(t(12,O=Ne),await W())}}catch(Q){t(6,h=Q.message)}}Hl(()=>{J(),W();const p=setInterval(W,1e4);return()=>clearInterval(p)});const $=()=>M("list"),ce=()=>M("calendar");function Y(){E=this.value,t(11,E)}const x=()=>t(9,b=!b),Z=()=>T("all"),Ee=()=>T("todo"),X=()=>T("in_progress"),ue=()=>T("blocked"),_e=()=>T("done"),ye=()=>T("cancelled"),Me=()=>t(10,C=!C),Ce=()=>F("all"),be=p=>F(p.id);function ke(){_=this.value,t(8,_)}const Ue=p=>p.key==="Enter"&&ve(),Qe=()=>t(9,b=!1),Ie=()=>t(9,b=!0);function Ze(){y.title=this.value,t(16,y)}function Ke(){y.description=this.value,t(16,y)}function $e(){y.priority=Wt(this),t(16,y)}function Be(){y.due=this.value,t(16,y)}function et(){y.listId=Wt(this),t(16,y)}const Fe=p=>te(p),pe=(p,Q)=>Q.id===p.listId,S=p=>N(p),G=p=>j(p.id,"in_progress"),ee=p=>j(p.id,"done"),qe=p=>j(p.id,"blocked"),Xe=p=>j(p.id,"in_progress"),we=p=>j(p.id,"cancelled"),Ae=p=>j(p.id,"todo"),Ye=p=>j(p.id,"cancelled"),Ge=()=>L(-1),je=()=>L(1),ze=(p,Q)=>Q.id===p.listId;return r.$$.update=()=>{r.$$.dirty[0]&1|r.$$.dirty[1]&4&&t(2,q=(v==="all"?a:a.filter(p=>p.status===v)).filter(he)),r.$$.dirty[1]&8&&t(3,oe=n.filter(he)),r.$$.dirty[0]&14&&z()},[v,U,q,oe,s,o,h,w,_,b,C,E,O,ne,K,ie,y,ge,l,ve,j,N,H,me,re,te,fe,T,F,M,L,B,se,a,n,$,ce,Y,x,Z,Ee,X,ue,_e,ye,Me,Ce,be,ke,Ue,Qe,Ie,Ze,Ke,$e,Be,et,Fe,pe,S,G,ee,qe,Xe,we,Ae,Ye,Ge,je,ze]}class ns extends Al{constructor(e){super(),Ll(this,e,ls,es,Ul,{},null,[-1,-1,-1,-1])}}export{ns as default};
