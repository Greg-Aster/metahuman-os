class f extends Error{constructor(o){super(o),this.name="FetchTimeoutError"}}async function m(e,o={}){const{timeout:t=1e4,retries:n=0,retryDelay:i=1e3,...u}=o;let a=null;for(let s=0;s<=n;s++)try{const r=new AbortController,c=setTimeout(()=>r.abort(),t),l=await fetch(e,{...u,signal:r.signal});return clearTimeout(c),l}catch(r){if(a=r,r instanceof Error&&r.name==="AbortError"&&(a=new f(`Request to ${e} timed out after ${t}ms`)),s<n){await new Promise(c=>setTimeout(c,i));continue}}throw a||new Error("Unknown fetch error")}async function h(e,o={}){try{const t=await m(e,o);return t.ok?{data:await t.json(),error:null}:{data:null,error:`HTTP ${t.status}: ${t.statusText}`}}catch(t){return{data:null,error:t instanceof Error?t.message:"Unknown error"}}}export{h as f};
