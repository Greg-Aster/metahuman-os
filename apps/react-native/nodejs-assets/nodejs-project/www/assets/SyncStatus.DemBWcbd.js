import{ad as us,D as Re,A as ds,l as ge,ab as et,ac as Me,a6 as gt,S as vs,i as ms,s as ps,n as Ce,d as v,a as P,h as w,M as Ne,k,T as As,Q as hs,o as _s,v as ke,b as o,x as re,N as Je,c as d,e as p,f as C,g as V,j as h,p as se,q as M,t as O,X as qe,m as Ns,r as Le,u as rt,z as Te,w as bt,y as Ps,L as De,O as at,E as Ts,F as Us,G as Vs,H as Ms,I as Os,J as Rs}from"./api-config.B-uR5Kyo.js";import{_ as ot}from"./navigation.DpIJm6IG.js";import{d as ys,w as Ge}from"./index.PToQ82vo.js";import{h as We}from"./server-health.RMTlZIDp.js";import{getSyncServerCredentials as it,updateSyncTimestamp as Ls,saveSyncServerCredentials as Fs,getRecentMemories as gs,getSetting as je,getUnsyncedMemories as bs,getAllPersona as ct,savePersona as ft,importMemories as ut,saveTask as Ss,setSetting as we,importPersona as Cs,markMemoriesSynced as js,getActiveTasks as Bs}from"./local-memory.DgMLNaVQ.js";const Hs=3e4,qs=3,tt="mh_sync_queue",ws="mh_sync_state",dt="mh_local_memories",be=Ge({lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1}),Ae=Ge([]),Ie=Ge(new Map),Ks=ys(be,s=>s.pendingCount>0),Js=ys(be,s=>s.conflictCount>0);async function lt(s,e){try{const t=localStorage.getItem(s);return t?JSON.parse(t):e}catch{return e}}async function Oe(s,e){try{const t=JSON.stringify(e);localStorage.setItem(s,t)}catch(t){console.error("[memory-sync] Failed to save to storage:",t)}}async function St(s,e){let t=[];Ae.subscribe(l=>t=l)();const n=t.findIndex(l=>l.id===e.id),a={id:e.id,action:s,memory:e,queuedAt:new Date().toISOString(),attempts:0};if(n>=0){const l=t[n];l.action==="create"&&s==="delete"||(l.action==="create"&&s==="update"?t[n]={...a,action:"create"}:t[n]=a)}else t.push(a);Ae.set(t),await Oe(tt,t),be.update(l=>({...l,pendingCount:t.length}))}async function Gs(s){let e=[];Ae.subscribe(t=>e=t)(),e=e.filter(t=>t.id!==s),Ae.set(e),await Oe(tt,e),be.update(t=>({...t,pendingCount:e.length}))}async function Ws(s){try{const{apiFetch:e}=await ot(async()=>{const{apiFetch:r}=await import("./api-config.B-uR5Kyo.js").then(f=>f.au);return{apiFetch:r}},[]);let t,n,a;switch(s.action){case"create":t="/api/memory/sync/push",n="POST",a={memory:s.memory};break;case"update":t="/api/memory/sync/push",n="PUT",a={memory:s.memory};break;case"delete":t=`/api/memory/sync/${s.id}`,n="DELETE",a=void 0;break}const l=await e(t,{method:n,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});if(!l.ok){const r=await l.text();return{success:!1,error:`Server returned ${l.status}: ${r}`}}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async function Ys(s){try{const{apiFetch:e}=await ot(async()=>{const{apiFetch:l}=await import("./api-config.B-uR5Kyo.js").then(r=>r.au);return{apiFetch:l}},[]),t=s?`?since=${encodeURIComponent(s)}`:"",n=await e(`/api/memory/sync/pull${t}`);return n.ok?{memories:(await n.json()).memories||[]}:{memories:[],error:`Server returned ${n.status}`}}catch(e){return{memories:[],error:e instanceof Error?e.message:"Network error"}}}function Qs(s,e){return s.serverModifiedAt&&e.timestamp>s.serverModifiedAt&&s.localModifiedAt>s.serverModifiedAt?s.content!==e.content:!1}async function Xs(s,e,t="server-wins"){switch(t){case"server-wins":return{...e,syncStatus:"synced",localModifiedAt:e.timestamp,serverModifiedAt:e.timestamp};case"local-wins":return{...s,syncStatus:"pending"};case"manual":return{...s,syncStatus:"conflict",serverModifiedAt:e.timestamp}}}async function ks(){let s={lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1};if(be.subscribe(n=>s=n)(),s.isSyncing)return{success:!1,pushed:0,pulled:0,conflicts:0,errors:["Sync already in progress"]};let e=!1;if(We.subscribe(n=>e=n.connected)(),!e)return{success:!1,pushed:0,pulled:0,conflicts:0,errors:["Server not connected"]};be.update(n=>({...n,isSyncing:!0}));const t={success:!0,pushed:0,pulled:0,conflicts:0,errors:[]};try{let n=[];Ae.subscribe(r=>n=r)();for(const r of n){if(r.attempts>=qs){t.errors.push(`Max retries exceeded for ${r.id}`);continue}const f=await Ws(r);if(f.success){await Gs(r.id);let c=new Map;Ie.subscribe(u=>c=u)();const i=c.get(r.id);i&&r.action!=="delete"?(c.set(r.id,{...i,syncStatus:"synced",serverModifiedAt:new Date().toISOString()}),Ie.set(c)):r.action==="delete"&&(c.delete(r.id),Ie.set(c)),t.pushed++}else{let c=[];Ae.subscribe(u=>c=u)();const i=c.findIndex(u=>u.id===r.id);i>=0&&(c[i]={...r,attempts:r.attempts+1,lastAttempt:new Date().toISOString(),error:f.error},Ae.set(c),await Oe(tt,c)),t.errors.push(`Failed to push ${r.id}: ${f.error}`)}}const a=await Ys(s.lastSyncTimestamp);if(a.error)t.errors.push(`Failed to pull: ${a.error}`);else{let r=new Map;Ie.subscribe(f=>r=f)();for(const f of a.memories){const c=r.get(f.id);if(c)if(Qs(c,f)){const i=await Xs(c,f,"server-wins");r.set(f.id,i),i.syncStatus==="conflict"&&t.conflicts++}else r.set(f.id,{...f,syncStatus:"synced",localModifiedAt:f.timestamp,serverModifiedAt:f.timestamp});else r.set(f.id,{...f,syncStatus:"synced",localModifiedAt:f.timestamp,serverModifiedAt:f.timestamp});t.pulled++}Ie.set(r),await Oe(dt,Array.from(r.entries()))}const l=new Date().toISOString();be.update(r=>({...r,lastSyncTimestamp:l,lastSuccessfulSync:t.errors.length===0?l:r.lastSuccessfulSync,conflictCount:t.conflicts,isSyncing:!1})),await Oe(ws,{lastSyncTimestamp:l,lastSuccessfulSync:t.errors.length===0?l:s.lastSuccessfulSync}),t.success=t.errors.length===0}catch(n){t.success=!1,t.errors.push(n instanceof Error?n.message:"Unknown sync error"),be.update(a=>({...a,isSyncing:!1,lastSyncError:t.errors.join("; ")}))}return t}async function Ct(){let s=new Map;return Ie.subscribe(e=>s=e)(),Array.from(s.values()).filter(e=>e.syncStatus==="conflict")}async function Zs(s){let e=new Map;Ie.subscribe(a=>e=a)();const t=e.get(s.memoryId);if(!t||t.syncStatus!=="conflict")return!1;switch(s.resolution){case"keep-local":e.set(s.memoryId,{...t,syncStatus:"pending"}),await St("update",e.get(s.memoryId));break;case"keep-server":e.set(s.memoryId,{...t,syncStatus:"synced"});break;case"merge":s.mergedContent&&(e.set(s.memoryId,{...t,content:s.mergedContent,syncStatus:"pending",localModifiedAt:new Date().toISOString()}),await St("update",e.get(s.memoryId)));break}Ie.set(e),await Oe(dt,Array.from(e.entries()));const n=Array.from(e.values()).filter(a=>a.syncStatus==="conflict").length;return be.update(a=>({...a,conflictCount:n})),!0}let Ke=null,wt=!1;async function xs(){if(wt)return;const s=await lt(ws,{});be.update(n=>({...n,...s}));const e=await lt(tt,[]);Ae.set(e);const t=await lt(dt,[]);Ie.set(new Map(t)),be.update(n=>({...n,pendingCount:e.length,conflictCount:t.filter(([a,l])=>l.syncStatus==="conflict").length})),$s(),typeof window<"u"&&window.addEventListener("online",()=>{console.log("[memory-sync] Online - triggering sync"),ks()}),wt=!0}function $s(){Ke||(Ke=setInterval(async()=>{let s=!1;We.subscribe(t=>s=t.connected)();let e=0;be.subscribe(t=>e=t.pendingCount)(),s&&e>0&&await ks()},Hs))}function en(){Ke&&(clearInterval(Ke),Ke=null)}const Ve={version:"1.0.0",versionCode:1},Ue=Ge({currentVersion:Ve.version,currentVersionCode:Ve.versionCode,latestVersion:null,latestVersionCode:null,updateAvailable:!1,releaseNotes:null,downloadUrl:null,fileSize:null,lastChecked:null,isChecking:!1,error:null}),vt=Ge(!1);async function tn(){if(ds()){try{const s=await ge("/api/app-info");if(s.ok){const e=await s.json();return{version:e.version||Ve.version,versionCode:e.versionCode||Ve.versionCode}}}catch(s){console.warn("[app-update] Could not get app info from React Native backend:",s)}return Ve}return Ve}async function sn(s){if(!us())return{...Re(Ue),error:"Updates only available on mobile"};Ue.update(e=>({...e,isChecking:!0,error:null}));try{const e=await tn(),t=s.replace(/\/$/,""),n=await fetch(`${t}/api/app-version`,{method:"GET",headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Server returned ${n.status}`);const a=await n.json(),l=a.versionCode>e.versionCode,r={currentVersion:e.version,currentVersionCode:e.versionCode,latestVersion:a.version,latestVersionCode:a.versionCode,updateAvailable:l,releaseNotes:a.releaseNotes||null,downloadUrl:a.downloadUrl||`${t}/downloads/metahuman-os.apk`,fileSize:a.fileSize||null,lastChecked:new Date().toISOString(),isChecking:!1,error:null};return Ue.set(r),vt.set(l),console.log(l?`[app-update] Update available: ${e.version} -> ${a.version}`:`[app-update] App is up to date (${e.version})`),r}catch(e){const t=e instanceof Error?e.message:"Failed to check for updates";return console.error("[app-update] Check failed:",e),Ue.update(n=>({...n,isChecking:!1,error:t})),Re(Ue)}}function xe(s){return s?s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`:"Unknown size"}async function nn(){const s=Re(Ue);if(!s.downloadUrl){console.error("[app-update] No download URL available");return}if(ds()){console.log("[app-update] Opening download URL in React Native:",s.downloadUrl),window.open(s.downloadUrl,"_blank");return}window.open(s.downloadUrl,"_blank")}function ln(){vt.set(!1)}const $e="activeProfile",Be="profiles";async function He(){return je(Be,[])}async function Es(){const s=await je($e,null);return s&&(await He()).find(t=>t.id===s)||null}async function mt(s){await we($e,s)}async function Xn(s,e){const t=new Date().toISOString(),n=crypto.randomUUID(),a={id:n,name:s,createdAt:t,updatedAt:t,source:"local",version:1,memoryCount:0,personaKeys:e?Object.keys(e):["core"]},l={core:{name:s,traits:[],voice:"neutral",values:[],summary:`${s}'s digital personality`}};for(const[f,c]of Object.entries(l))await ft(f,c);const r=await He();return r.push(a),await we(Be,r),await mt(n),a}async function Zn(s){if(!Re(We).connected)throw new Error("Server not connected. Cannot download profile.");const t=(b,S,E,I)=>{s?.({phase:b,current:S,total:E,message:I})};t("metadata",0,1,"Fetching profile info...");const n=await ge("/api/profile-sync/metadata");if(!n.ok)throw new Error("Failed to fetch profile metadata");const a=await n.json();t("metadata",1,1,"Profile info received"),t("persona",0,a.personaKeys?.length||4,"Downloading persona...");const l=a.personaKeys||["core","relationships","routines","decision-rules"];let r=0;for(const b of l){try{const S=await ge(`/api/persona-${b}`);if(S.ok){const E=await S.json();await ft(b,E)}}catch(S){console.warn(`Failed to download persona ${b}:`,S)}r++,t("persona",r,l.length,`Downloaded ${b}`)}t("memories",0,a.memoryCount||100,"Downloading memories...");const f=100;let c=0,i=0;const u=a.memoryCount||0;for(;c<u;){try{const b=await ge(`/api/profile-sync/memories?offset=${c}&limit=${f}`);if(b.ok){const S=await b.json();if(S.memories&&S.memories.length>0&&(await ut(S.memories),i+=S.memories.length,t("memories",i,u,`Downloaded ${i} memories`)),!S.hasMore)break}else break}catch(b){console.warn("Failed to download memories batch:",b);break}c+=f}t("tasks",0,1,"Downloading tasks...");try{const b=await ge("/api/profile-sync/tasks");if(b.ok){const S=await b.json();if(S.tasks)for(const E of S.tasks)await Ss(E)}}catch(b){console.warn("Failed to download tasks:",b)}t("tasks",1,1,"Tasks downloaded");const y=new Date().toISOString(),m={id:a.profileId||crypto.randomUUID(),name:a.name||"Downloaded Profile",createdAt:a.createdAt||y,updatedAt:y,source:"server",serverUrl:gt(),version:a.version||1,memoryCount:i,personaKeys:l},_=await He(),g=_.findIndex(b=>b.serverUrl===gt());return g>=0?_[g]=m:_.push(m),await we(Be,_),await mt(m.id),await we("lastProfileSync",y),t("complete",1,1,"Profile download complete"),m}async function rn(){if(!Re(We).connected)throw new Error("Server not connected. Cannot upload changes.");const e=[];let t=0;const n=await bs();if(n.length>0)try{const r=await ge("/api/profile-sync/memories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memories:n})});if(r.ok){const f=await r.json(),c=n.map(i=>i.id);await js(c,new Date().toISOString()),t+=c.length}else e.push(`Failed to upload memories: ${r.status}`)}catch(r){e.push(`Memory upload error: ${r instanceof Error?r.message:"Unknown"}`)}const a=await ct();for(const r of a)if(!r.syncedAt||r.localModifiedAt&&r.localModifiedAt>r.syncedAt)try{(await ge(`/api/persona-${r.key}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.data)})).ok?(await Cs(r.key,r.data,new Date().toISOString()),t++):e.push(`Failed to upload persona ${r.key}`)}catch(f){e.push(`Persona upload error (${r.key}): ${f instanceof Error?f.message:"Unknown"}`)}await we("lastProfileSync",new Date().toISOString());const l=await Es();if(l){l.updatedAt=new Date().toISOString();const r=await He(),f=r.findIndex(c=>c.id===l.id);f>=0&&(r[f]=l,await we(Be,r))}return{uploaded:t,errors:e}}async function xn(){if(!Re(We).connected)return{uploaded:0,downloaded:0,errors:["Server not connected"]};const e=[];let t=0,n=0;const a=await rn();t=a.uploaded,e.push(...a.errors);const l=await je("lastProfileSync",null);try{const r=await ge(`/api/profile-sync/changes?since=${l||""}`);if(r.ok){const f=await r.json();if(f.memories&&f.memories.length>0&&(await ut(f.memories),n+=f.memories.length),f.persona)for(const[c,i]of Object.entries(f.persona))await Cs(c,i,new Date().toISOString()),n++}}catch(r){e.push(`Sync pull error: ${r instanceof Error?r.message:"Unknown"}`)}return await we("lastProfileSync",new Date().toISOString()),{uploaded:t,downloaded:n,errors:e}}async function $n(){const s=await je("lastProfileSync",null),e=await bs(),n=(await ct()).filter(a=>!a.syncedAt||a.localModifiedAt&&a.localModifiedAt>a.syncedAt).length;return{lastSync:s,pendingUpload:e.length+n,pendingDownload:0,conflicts:0,syncing:!1}}async function el(){const s=await Es();if(!s)throw new Error("No active profile");const e=await ct(),t={};for(const l of e)t[l.key]=l.data;const n=await gs(1e4),a=await Bs();return{metadata:s,persona:t,memories:n,tasks:a,settings:{}}}async function tl(s){const e=new Date().toISOString();for(const[l,r]of Object.entries(s.persona))await ft(l,r);if(s.memories&&s.memories.length>0&&await ut(s.memories),s.tasks)for(const l of s.tasks)await Ss(l);const t={...s.metadata,source:"imported",updatedAt:e},n=await He(),a=n.findIndex(l=>l.id===t.id);return a>=0?n[a]=t:n.push(t),await we(Be,n),await mt(t.id),t}async function sl(s){const t=(await He()).filter(a=>a.id!==s);await we(Be,t),await je($e,null)===s&&await we($e,null)}async function an(s){const e=await ge("/api/profile-sync/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:s})});if(!e.ok)throw console.error("[profile-sync] Failed to save credentials to filesystem:",e.status),new Error("Failed to save credentials");console.log("[profile-sync] Credentials saved to filesystem via unified API")}async function pt(s,e,t){try{const a=`${et(s)}/api/auth/login`;console.log("[profile-sync] Authenticating with",a);const l=await Me(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),credentials:"include"});if(!l.ok){const c=await l.text();return{success:!1,error:`Authentication failed: ${l.status} - ${c}`}}const r=await l.json();if(!r.success)return{success:!1,error:r.error||"Authentication failed"};let f=r.sessionId||r.session;if(!f){const c=l.headers.get("set-cookie");c&&(f=c.match(/mh_session=([^;]+)/)?.[1])}return f?{success:!0,cookie:`mh_session=${f}`}:(console.error("[profile-sync] No session ID in auth response:",{data:r,headers:Object.fromEntries(l.headers.entries())}),{success:!1,error:"No session ID returned from server"})}catch(n){return{success:!1,error:n.message}}}async function on(s,e){try{const n=`${et(s)}/api/profile-sync/credentials`;console.log("[profile-sync] Fetching credentials from",n);const a=await Me(n,{method:"GET",headers:{Cookie:e},credentials:"include"});if(!a.ok){if(a.status===403)return console.log("[profile-sync] Credentials sync requires owner role - skipping"),{success:!0,credentials:void 0};const r=await a.text();return{success:!1,error:`Failed to fetch credentials: ${a.status} - ${r}`}}const l=await a.json();return l.error?{success:!1,error:l.error}:{success:!0,credentials:l.credentials}}catch(t){return{success:!1,error:t.message}}}async function Is(s,e,t){const n=await pt(s,e,t);return{success:n.success,error:n.error}}async function cn(s,e,t){const n=await Is(s,e,t);return n.success?(await Fs({serverUrl:s.replace(/\/$/,""),username:e,password:t,verified:!0}),{success:!0}):n}async function zs(s,e){const t={includeMemories:!0,includeCredentials:!0,priorityOnly:!0,memoryDays:7,...e},n=await it();if(!n)return{success:!1,error:"No sync server configured. Please set up sync server first."};const a={success:!1};try{s?.({phase:"authenticating",message:"Connecting to server..."});const l=await pt(n.serverUrl,n.username,n.password);if(!l.success||!l.cookie)return s?.({phase:"error",message:"Authentication failed",error:l.error}),{success:!1,error:l.error};const r=l.cookie;s?.({phase:"fetching-profile",message:"Downloading profile..."});const f=et(n.serverUrl),c=t.priorityOnly?"/api/profile-sync/export-priority":"/api/profile-sync/export",i=t.priorityOnly?await Me(`${f}${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password})}):await Me(`${f}${c}`,{method:"GET",headers:{Cookie:r},credentials:"include"});if(!i.ok){const y=await i.text();return s?.({phase:"error",message:"Failed to fetch profile",error:y}),{success:!1,error:`Failed to fetch profile: ${i.status}`}}const u=await i.json();a.profileFiles=u.files?.length||0,s?.({phase:"importing",message:"Setting up local user...",current:0,total:a.profileFiles});try{const y=await ge("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password,displayName:n.username,role:"owner"})});if(y.ok){const g=await y.json();console.log("[profile-sync] Local user created/authenticated:",g)}else{const g=await y.text();console.error("[profile-sync] Failed to create local user:",y.status,g),console.log("[profile-sync] Continuing despite sync-user error...")}s?.({phase:"importing",message:"Importing profile files...",current:0,total:a.profileFiles});const m=await ge("/api/profile-sync/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!m.ok){const g=await m.text();return console.error("[profile-sync] Import failed:",m.status,g),s?.({phase:"error",message:"Failed to import profile",error:g}),{success:!1,error:`Import failed: ${m.status}`}}const _=await m.json();console.log("[profile-sync] Import result:",_),s?.({phase:"importing",message:`Imported ${_.imported||a.profileFiles} files`,current:a.profileFiles,total:a.profileFiles})}catch(y){return console.error("[profile-sync] Import error:",y),s?.({phase:"error",message:"Import failed",error:y.message}),{success:!1,error:y.message}}if(t.includeCredentials){s?.({phase:"fetching-credentials",message:"Syncing credentials..."});const y=await on(n.serverUrl,r);y.success&&y.credentials&&(await an(y.credentials),a.credentialsSynced=!0,console.log("[profile-sync] Credentials synced to filesystem:",Object.keys(y.credentials)))}if(t.includeMemories){const y=t.memoryDays>0?`&days=${t.memoryDays}`:"",m=t.memoryDays>0?` (last ${t.memoryDays} days)`:"";s?.({phase:"importing",message:"Checking local memories..."});let _=[];try{const I=await ge("/api/memories?idsOnly=true");I.ok&&(_=(await I.json()).ids||[],console.log(`[profile-sync] Found ${_.length} local memories to exclude`))}catch(I){console.warn("[profile-sync] Could not get local memory IDs:",I)}const g=_.length>0?`&exclude=${_.slice(0,500).join(",")}`:"";s?.({phase:"importing",message:`Syncing memories${m}...`});let b=0,S=0,E=!0;for(;E;){const I=await Me(`${f}/api/profile-sync/memories?offset=${b}&limit=100${y}${g}`,{method:"GET",headers:{Cookie:r},credentials:"include"});if(!I.ok){console.warn("[profile-sync] Memory fetch failed:",I.status);break}const D=await I.json();if(D.memories&&D.memories.length>0){for(const A of D.memories)try{const z=await ge("/api/memory/sync/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memory:A})});z.ok||z.status!==409&&console.warn(`[profile-sync] Memory push failed for ${A.id}:`,z.status)}catch(z){console.warn(`[profile-sync] Memory push error for ${A.id}:`,z)}S+=D.memories.length,s?.({phase:"importing",message:`Imported ${S} memories...`,current:S,total:D.total})}E=D.hasMore||!1,b+=100}a.memoriesImported=S}return await Ls(),s?.({phase:"complete",message:"Sync complete!"}),a.success=!0,a}catch(l){const r=l.message;return s?.({phase:"error",message:"Sync failed",error:r}),{success:!1,error:r}}}async function Ds(){const s=await it();return s?{configured:!0,serverUrl:s.serverUrl,username:s.username,lastSyncAt:s.lastSyncAt,verified:s.verified}:{configured:!1}}async function fn(){const{clearSyncServerCredentials:s}=await ot(async()=>{const{clearSyncServerCredentials:e}=await import("./local-memory.DgMLNaVQ.js");return{clearSyncServerCredentials:e}},[]);await s()}async function un(){const s=await it();if(!s)throw new Error("No sync server configured");const t=(await gs(1e5)).length,n=s.lastSyncAt||null,a=await pt(s.serverUrl,s.username,s.password);if(!a.success||!a.cookie)return{connected:!1,serverUrl:s.serverUrl,serverUsername:s.username,error:a.error||"Authentication failed",server:{memoryCount:0},local:{memoryCount:t,lastSync:n||void 0},differences:{newMemoriesOnServer:0,newerOnServer:!1,syncRecommended:!1}};try{const l=et(s.serverUrl),r=await Me(`${l}/api/status`,{method:"GET",headers:{Cookie:a.cookie},credentials:"include"});if(!r.ok)throw new Error(`Server status check failed: ${r.status}`);const f=await r.json(),c=f.memoryStats?.totalFiles||0,i=f.lastUpdated||null,u=Math.max(0,c-t),y=i&&n?new Date(i)>new Date(n):c>t;return{connected:!0,serverUrl:s.serverUrl,serverUsername:s.username,server:{memoryCount:c,lastUpdated:i},local:{memoryCount:t,lastSync:n||void 0},differences:{newMemoriesOnServer:u,newerOnServer:y,syncRecommended:u>0||y}}}catch(l){return{connected:!0,serverUrl:s.serverUrl,serverUsername:s.username,error:l.message,server:{memoryCount:0},local:{memoryCount:t,lastSync:n||void 0},differences:{newMemoriesOnServer:0,newerOnServer:!1,syncRecommended:!1}}}}function kt(s,e,t){const n=s.slice();return n[49]=e[t],n}function Et(s,e,t){const n=s.slice();return n[49]=e[t],n}function It(s){let e,t,n,a,l='<h3 class="svelte-19d6nfz">Sync Manager</h3> <span class="header-subtitle svelte-19d6nfz">Configure your synchronization</span>',r,f,c,i,u=!s[0]&&zt(s);function y(g,b){return g[0]?vn:dn}let m=y(s),_=m(s);return{c(){e=h("div"),t=h("div"),n=h("div"),a=h("div"),a.innerHTML=l,r=k(),u&&u.c(),f=k(),_.c(),this.h()},l(g){e=p(g,"DIV",{class:!0});var b=C(e);t=p(b,"DIV",{class:!0});var S=C(t);n=p(S,"DIV",{class:!0});var E=C(n);a=p(E,"DIV",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-1fnqy04"&&(a.innerHTML=l),r=w(E),u&&u.l(E),E.forEach(v),f=w(S),_.l(S),S.forEach(v),b.forEach(v),this.h()},h(){d(a,"class","header-content svelte-19d6nfz"),d(n,"class","modal-header svelte-19d6nfz"),d(t,"class","sync-manager svelte-19d6nfz"),d(e,"class","modal-overlay svelte-19d6nfz")},m(g,b){P(g,e,b),o(e,t),o(t,n),o(n,a),o(n,r),u&&u.m(n,null),o(t,f),_.m(t,null),c||(i=[re(t,"click",Je(s[36])),re(e,"click",s[31])],c=!0)},p(g,b){g[0]?u&&(u.d(1),u=null):u?u.p(g,b):(u=zt(g),u.c(),u.m(n,null)),m===(m=y(g))&&_?_.p(g,b):(_.d(1),_=m(g),_&&(_.c(),_.m(t,null)))},d(g){g&&v(e),u&&u.d(),_.d(),c=!1,ke(i)}}}function zt(s){let e,t="√ó",n,a;return{c(){e=h("button"),e.textContent=t,this.h()},l(l){e=p(l,"BUTTON",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-xxc84n"&&(e.textContent=t),this.h()},h(){d(e,"class","close-btn svelte-19d6nfz")},m(l,r){P(l,e,r),n||(a=re(e,"click",s[31]),n=!0)},p:Ce,d(l){l&&v(e),n=!1,a()}}}function dn(s){let e,t,n,a,l,r=s[6]?"üîó":"‚öôÔ∏è",f,c,i,u,y=s[6]?"Remote Server Connected":"Configure Sync Server",m,_,g,b,S=s[10]?"‚ñº":"‚ñ∂",E,I,D,A,z,G=`<span class="warning-icon svelte-19d6nfz">üì∂</span> <div class="warning-content svelte-19d6nfz"><span class="warning-title svelte-19d6nfz">WiFi Recommended</span> <span class="warning-text svelte-19d6nfz">Sync operations can transfer significant amounts of data.
              We recommend using a WiFi connection to avoid mobile data charges.</span></div>`,R,L,T,j,Z="Select data to sync:",H,U,x,te="All",ne,J,ee="None",q,K,B,W,$,F,Y="‚ü≥",X,oe,pe,he,fe="Cancel",ye,ve;function ue(le,de){return le[6]?pn:mn}let Q=ue(s),ie=Q(s),N=s[10]&&At(s),ae=s[6]&&Tt(s),_e=Le(s[18]),ce=[];for(let le=0;le<_e.length;le+=1)ce[le]=Ft(kt(s,_e,le));return{c(){e=h("div"),t=h("div"),n=h("div"),a=h("div"),l=h("span"),f=O(r),c=k(),i=h("div"),u=h("span"),m=O(y),_=k(),ie.c(),g=k(),b=h("span"),E=O(S),I=k(),N&&N.c(),D=k(),ae&&ae.c(),A=k(),z=h("div"),z.innerHTML=G,R=k(),L=h("div"),T=h("div"),j=h("span"),j.textContent=Z,H=k(),U=h("div"),x=h("button"),x.textContent=te,ne=k(),J=h("button"),J.textContent=ee,q=k(),K=h("div");for(let le=0;le<ce.length;le+=1)ce[le].c();B=k(),W=h("div"),$=h("button"),F=h("span"),F.textContent=Y,X=O(`
            Start Sync`),pe=k(),he=h("button"),he.textContent=fe,this.h()},l(le){e=p(le,"DIV",{class:!0});var de=C(e);t=p(de,"DIV",{class:!0});var me=C(t);n=p(me,"DIV",{class:!0});var Se=C(n);a=p(Se,"DIV",{class:!0});var ze=C(a);l=p(ze,"SPAN",{class:!0});var Pe=C(l);f=M(Pe,r),Pe.forEach(v),c=w(ze),i=p(ze,"DIV",{class:!0});var Ee=C(i);u=p(Ee,"SPAN",{class:!0});var ht=C(u);m=M(ht,y),ht.forEach(v),_=w(Ee),ie.l(Ee),Ee.forEach(v),ze.forEach(v),g=w(Se),b=p(Se,"SPAN",{class:!0});var _t=C(b);E=M(_t,S),_t.forEach(v),Se.forEach(v),I=w(me),N&&N.l(me),me.forEach(v),D=w(de),ae&&ae.l(de),A=w(de),z=p(de,"DIV",{class:!0,"data-svelte-h":!0}),V(z)!=="svelte-1q3k8tv"&&(z.innerHTML=G),R=w(de),L=p(de,"DIV",{class:!0});var Ye=C(L);T=p(Ye,"DIV",{class:!0});var Qe=C(T);j=p(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),V(j)!=="svelte-1gcl82e"&&(j.textContent=Z),H=w(Qe),U=p(Qe,"DIV",{class:!0});var Xe=C(U);x=p(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),V(x)!=="svelte-1aawpe4"&&(x.textContent=te),ne=w(Xe),J=p(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),V(J)!=="svelte-1cl1euw"&&(J.textContent=ee),Xe.forEach(v),Qe.forEach(v),q=w(Ye),K=p(Ye,"DIV",{class:!0});var yt=C(K);for(let nt=0;nt<ce.length;nt+=1)ce[nt].l(yt);yt.forEach(v),Ye.forEach(v),de.forEach(v),B=w(le),W=p(le,"DIV",{class:!0});var Ze=C(W);$=p(Ze,"BUTTON",{class:!0});var st=C($);F=p(st,"SPAN",{class:!0,"data-svelte-h":!0}),V(F)!=="svelte-138j2aq"&&(F.textContent=Y),X=M(st,`
            Start Sync`),st.forEach(v),pe=w(Ze),he=p(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),V(he)!=="svelte-1w0gmb9"&&(he.textContent=fe),Ze.forEach(v),this.h()},h(){d(l,"class","server-icon svelte-19d6nfz"),d(u,"class","server-title svelte-19d6nfz"),d(i,"class","server-info svelte-19d6nfz"),d(a,"class","server-status svelte-19d6nfz"),d(b,"class","expand-icon svelte-19d6nfz"),d(n,"class","server-config-header svelte-19d6nfz"),d(t,"class","server-config-section svelte-19d6nfz"),d(z,"class","wifi-warning svelte-19d6nfz"),d(j,"class","options-title svelte-19d6nfz"),d(x,"class","bulk-btn svelte-19d6nfz"),d(J,"class","bulk-btn svelte-19d6nfz"),d(U,"class","bulk-actions svelte-19d6nfz"),d(T,"class","options-header svelte-19d6nfz"),d(K,"class","options-list svelte-19d6nfz"),d(L,"class","options-section svelte-19d6nfz"),d(e,"class","scrollable-content svelte-19d6nfz"),d(F,"class","btn-icon svelte-19d6nfz"),d($,"class","sync-btn primary svelte-19d6nfz"),$.disabled=oe=!s[18].some(Jt),d(he,"class","sync-btn secondary svelte-19d6nfz"),d(W,"class","action-section svelte-19d6nfz")},m(le,de){P(le,e,de),o(e,t),o(t,n),o(n,a),o(a,l),o(l,f),o(a,c),o(a,i),o(i,u),o(u,m),o(i,_),ie.m(i,null),o(n,g),o(n,b),o(b,E),o(t,I),N&&N.m(t,null),o(e,D),ae&&ae.m(e,null),o(e,A),o(e,z),o(e,R),o(e,L),o(L,T),o(T,j),o(T,H),o(T,U),o(U,x),o(U,ne),o(U,J),o(L,q),o(L,K);for(let me=0;me<ce.length;me+=1)ce[me]&&ce[me].m(K,null);P(le,B,de),P(le,W,de),o(W,$),o($,F),o($,X),o(W,pe),o(W,he),ye||(ve=[re(n,"click",s[37]),re(x,"click",s[28]),re(J,"click",s[29]),re($,"click",s[30]),re(he,"click",s[31])],ye=!0)},p(le,de){if(de[0]&64&&r!==(r=le[6]?"üîó":"‚öôÔ∏è")&&se(f,r),de[0]&64&&y!==(y=le[6]?"Remote Server Connected":"Configure Sync Server")&&se(m,y),Q===(Q=ue(le))&&ie?ie.p(le,de):(ie.d(1),ie=Q(le),ie&&(ie.c(),ie.m(i,null))),de[0]&1024&&S!==(S=le[10]?"‚ñº":"‚ñ∂")&&se(E,S),le[10]?N?N.p(le,de):(N=At(le),N.c(),N.m(t,null)):N&&(N.d(1),N=null),le[6]?ae?ae.p(le,de):(ae=Tt(le),ae.c(),ae.m(e,A)):ae&&(ae.d(1),ae=null),de[0]&134479872){_e=Le(le[18]);let me;for(me=0;me<_e.length;me+=1){const Se=kt(le,_e,me);ce[me]?ce[me].p(Se,de):(ce[me]=Ft(Se),ce[me].c(),ce[me].m(K,null))}for(;me<ce.length;me+=1)ce[me].d(1);ce.length=_e.length}de[0]&262144&&oe!==(oe=!le[18].some(Jt))&&($.disabled=oe)},d(le){le&&(v(e),v(B),v(W)),ie.d(),N&&N.d(),ae&&ae.d(),rt(ce,le),ye=!1,ke(ve)}}}function vn(s){let e,t,n='<div class="pulse-ring svelte-19d6nfz"></div> <div class="pulse-ring delay-1 svelte-19d6nfz"></div> <div class="pulse-ring delay-2 svelte-19d6nfz"></div> <span class="sync-icon svelte-19d6nfz">‚ü≥</span>',a,l,r,f,c,i,u="_",y,m,_,g="Do not close the app while syncing...";function b(I,D){return I[1]?Sn:bn}let S=b(s),E=S(s);return{c(){e=h("div"),t=h("div"),t.innerHTML=n,a=k(),l=h("div"),r=h("span"),f=O(s[19]),c=k(),i=h("span"),i.textContent=u,y=k(),E.c(),m=k(),_=h("p"),_.textContent=g,this.h()},l(I){e=p(I,"DIV",{class:!0});var D=C(e);t=p(D,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-15el6cu"&&(t.innerHTML=n),a=w(D),l=p(D,"DIV",{class:!0});var A=C(l);r=p(A,"SPAN",{class:!0});var z=C(r);f=M(z,s[19]),z.forEach(v),c=w(A),i=p(A,"SPAN",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-5ylrdm"&&(i.textContent=u),A.forEach(v),y=w(D),E.l(D),m=w(D),_=p(D,"P",{class:!0,"data-svelte-h":!0}),V(_)!=="svelte-1xvot9q"&&(_.textContent=g),D.forEach(v),this.h()},h(){d(t,"class","sync-animation svelte-19d6nfz"),d(r,"class","message-text"),d(i,"class","cursor svelte-19d6nfz"),d(l,"class","scifi-message svelte-19d6nfz"),d(_,"class","sync-warning-active svelte-19d6nfz"),d(e,"class","sync-progress-section svelte-19d6nfz")},m(I,D){P(I,e,D),o(e,t),o(e,a),o(e,l),o(l,r),o(r,f),o(l,c),o(l,i),o(e,y),E.m(e,null),o(e,m),o(e,_)},p(I,D){D[0]&524288&&se(f,I[19]),S===(S=b(I))&&E?E.p(I,D):(E.d(1),E=S(I),E&&(E.c(),E.m(e,m)))},d(I){I&&v(e),E.d()}}}function mn(s){let e,t="Set up server to sync your profile";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-ivdlls"&&(e.textContent=t),this.h()},h(){d(e,"class","server-hint svelte-19d6nfz")},m(n,a){P(n,e,a)},p:Ce,d(n){n&&v(e)}}}function pn(s){let e,t,n,a,l=s[11]&&Dt(s);return{c(){e=h("span"),t=O(s[3]),n=k(),l&&l.c(),a=Ne(),this.h()},l(r){e=p(r,"SPAN",{class:!0});var f=C(e);t=M(f,s[3]),f.forEach(v),n=w(r),l&&l.l(r),a=Ne(),this.h()},h(){d(e,"class","server-url svelte-19d6nfz")},m(r,f){P(r,e,f),o(e,t),P(r,n,f),l&&l.m(r,f),P(r,a,f)},p(r,f){f[0]&8&&se(t,r[3]),r[11]?l?l.p(r,f):(l=Dt(r),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(r){r&&(v(e),v(n),v(a)),l&&l.d(r)}}}function Dt(s){let e,t,n=new Date(s[11]).toLocaleString()+"",a;return{c(){e=h("span"),t=O("Last sync: "),a=O(n),this.h()},l(l){e=p(l,"SPAN",{class:!0});var r=C(e);t=M(r,"Last sync: "),a=M(r,n),r.forEach(v),this.h()},h(){d(e,"class","last-sync svelte-19d6nfz")},m(l,r){P(l,e,r),o(e,t),o(e,a)},p(l,r){r[0]&2048&&n!==(n=new Date(l[11]).toLocaleString()+"")&&se(a,n)},d(l){l&&v(e)}}}function At(s){let e,t,n,a="Server URL",l,r,f,c,i,u,y="Username",m,_,g,b,S,E,I="Password",D,A,z,G,R,L,T,j,Z=s[7]?"Testing...":"Test Connection",H,U,x,te,ne=s[9]?"Saving...":"Save & Connect",J,ee,q,K,B,W=s[8]&&Nt(s),$=s[6]&&Pt(s);return{c(){e=h("div"),t=h("div"),n=h("label"),n.textContent=a,l=k(),r=h("input"),c=k(),i=h("div"),u=h("label"),u.textContent=y,m=k(),_=h("input"),b=k(),S=h("div"),E=h("label"),E.textContent=I,D=k(),A=h("input"),R=k(),W&&W.c(),L=k(),T=h("div"),j=h("button"),H=O(Z),x=k(),te=h("button"),J=O(ne),q=k(),$&&$.c(),this.h()},l(F){e=p(F,"DIV",{class:!0});var Y=C(e);t=p(Y,"DIV",{class:!0});var X=C(t);n=p(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(n)!=="svelte-1qhc028"&&(n.textContent=a),l=w(X),r=p(X,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),X.forEach(v),c=w(Y),i=p(Y,"DIV",{class:!0});var oe=C(i);u=p(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(u)!=="svelte-da2c0l"&&(u.textContent=y),m=w(oe),_=p(oe,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),oe.forEach(v),b=w(Y),S=p(Y,"DIV",{class:!0});var pe=C(S);E=p(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(E)!=="svelte-aif6jp"&&(E.textContent=I),D=w(pe),A=p(pe,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),pe.forEach(v),R=w(Y),W&&W.l(Y),L=w(Y),T=p(Y,"DIV",{class:!0});var he=C(T);j=p(he,"BUTTON",{class:!0});var fe=C(j);H=M(fe,Z),fe.forEach(v),x=w(he),te=p(he,"BUTTON",{class:!0});var ye=C(te);J=M(ye,ne),ye.forEach(v),q=w(he),$&&$.l(he),he.forEach(v),Y.forEach(v),this.h()},h(){d(n,"for","serverUrl"),d(n,"class","svelte-19d6nfz"),d(r,"type","url"),d(r,"id","serverUrl"),d(r,"placeholder","https://mh.example.com"),r.disabled=f=s[9]||s[7],d(r,"class","svelte-19d6nfz"),d(t,"class","form-group svelte-19d6nfz"),d(u,"for","serverUsername"),d(u,"class","svelte-19d6nfz"),d(_,"type","text"),d(_,"id","serverUsername"),d(_,"placeholder","your-username"),_.disabled=g=s[9]||s[7],d(_,"class","svelte-19d6nfz"),d(i,"class","form-group svelte-19d6nfz"),d(E,"for","serverPassword"),d(E,"class","svelte-19d6nfz"),d(A,"type","password"),d(A,"id","serverPassword"),d(A,"placeholder",z=s[6]?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"your-password"),A.disabled=G=s[9]||s[7],d(A,"class","svelte-19d6nfz"),d(S,"class","form-group svelte-19d6nfz"),d(j,"class","config-btn test svelte-19d6nfz"),j.disabled=U=!s[3]||!s[4]||!s[5]||s[7]||s[9],d(te,"class","config-btn save svelte-19d6nfz"),te.disabled=ee=!s[3]||!s[4]||!s[5]||s[9],d(T,"class","server-config-actions svelte-19d6nfz"),d(e,"class","server-config-form svelte-19d6nfz")},m(F,Y){P(F,e,Y),o(e,t),o(t,n),o(t,l),o(t,r),Te(r,s[3]),o(e,c),o(e,i),o(i,u),o(i,m),o(i,_),Te(_,s[4]),o(e,b),o(e,S),o(S,E),o(S,D),o(S,A),Te(A,s[5]),o(e,R),W&&W.m(e,null),o(e,L),o(e,T),o(T,j),o(j,H),o(T,x),o(T,te),o(te,J),o(T,q),$&&$.m(T,null),K||(B=[re(r,"input",s[38]),re(_,"input",s[39]),re(A,"input",s[40]),re(j,"click",s[21]),re(te,"click",s[22])],K=!0)},p(F,Y){Y[0]&640&&f!==(f=F[9]||F[7])&&(r.disabled=f),Y[0]&8&&r.value!==F[3]&&Te(r,F[3]),Y[0]&640&&g!==(g=F[9]||F[7])&&(_.disabled=g),Y[0]&16&&_.value!==F[4]&&Te(_,F[4]),Y[0]&64&&z!==(z=F[6]?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"your-password")&&d(A,"placeholder",z),Y[0]&640&&G!==(G=F[9]||F[7])&&(A.disabled=G),Y[0]&32&&A.value!==F[5]&&Te(A,F[5]),F[8]?W?W.p(F,Y):(W=Nt(F),W.c(),W.m(e,L)):W&&(W.d(1),W=null),Y[0]&128&&Z!==(Z=F[7]?"Testing...":"Test Connection")&&se(H,Z),Y[0]&696&&U!==(U=!F[3]||!F[4]||!F[5]||F[7]||F[9])&&(j.disabled=U),Y[0]&512&&ne!==(ne=F[9]?"Saving...":"Save & Connect")&&se(J,ne),Y[0]&568&&ee!==(ee=!F[3]||!F[4]||!F[5]||F[9])&&(te.disabled=ee),F[6]?$?$.p(F,Y):($=Pt(F),$.c(),$.m(T,null)):$&&($.d(1),$=null)},d(F){F&&v(e),W&&W.d(),$&&$.d(),K=!1,ke(B)}}}function Nt(s){let e,t,n=s[8].success?"‚úì":"‚úó",a,l,r,f=s[8].message+"",c;return{c(){e=h("div"),t=h("span"),a=O(n),l=k(),r=h("span"),c=O(f),this.h()},l(i){e=p(i,"DIV",{class:!0});var u=C(e);t=p(u,"SPAN",{class:!0});var y=C(t);a=M(y,n),y.forEach(v),l=w(u),r=p(u,"SPAN",{class:!0});var m=C(r);c=M(m,f),m.forEach(v),u.forEach(v),this.h()},h(){d(t,"class","result-icon svelte-19d6nfz"),d(r,"class","result-message"),d(e,"class","connection-result svelte-19d6nfz"),De(e,"success",s[8].success),De(e,"error",!s[8].success)},m(i,u){P(i,e,u),o(e,t),o(t,a),o(e,l),o(e,r),o(r,c)},p(i,u){u[0]&256&&n!==(n=i[8].success?"‚úì":"‚úó")&&se(a,n),u[0]&256&&f!==(f=i[8].message+"")&&se(c,f),u[0]&256&&De(e,"success",i[8].success),u[0]&256&&De(e,"error",!i[8].success)},d(i){i&&v(e)}}}function Pt(s){let e,t="Disconnect",n,a;return{c(){e=h("button"),e.textContent=t,this.h()},l(l){e=p(l,"BUTTON",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-19vv4lc"&&(e.textContent=t),this.h()},h(){d(e,"class","config-btn clear svelte-19d6nfz")},m(l,r){P(l,e,r),n||(a=re(e,"click",s[23]),n=!0)},p:Ce,d(l){l&&v(e),n=!1,a()}}}function Tt(s){let e,t,n,a="Memory sync range:",l,r,f,c,i=(s[20].find(s[42])?.description||"")+"",u,y,m,_,g,b,S,E,I="‚òÅÔ∏è",D,A,z,G,R,L,T="Download profile, memories, and credentials from your server",j,Z,H=Le(s[20]),U=[];for(let q=0;q<H.length;q+=1)U[q]=Ut(Et(s,H,q));function x(q,K){return q[12]?_n:hn}let te=x(s),ne=te(s),J=s[13]&&!s[13].error&&Vt(s),ee=s[14]&&Ot(s);return{c(){e=h("div"),t=h("div"),n=h("label"),n.textContent=a,l=k(),r=h("select");for(let q=0;q<U.length;q+=1)U[q].c();f=k(),c=h("span"),u=O(i),y=k(),m=h("div"),_=h("button"),ne.c(),b=k(),S=h("button"),E=h("span"),E.textContent=I,D=O(`
                Sync Now`),z=k(),J&&J.c(),G=k(),ee&&ee.c(),R=k(),L=h("span"),L.textContent=T,this.h()},l(q){e=p(q,"DIV",{class:!0});var K=C(e);t=p(K,"DIV",{class:!0});var B=C(t);n=p(B,"LABEL",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-dfw6c1"&&(n.textContent=a),l=w(B),r=p(B,"SELECT",{class:!0});var W=C(r);for(let oe=0;oe<U.length;oe+=1)U[oe].l(W);W.forEach(v),f=w(B),c=p(B,"SPAN",{class:!0});var $=C(c);u=M($,i),$.forEach(v),B.forEach(v),y=w(K),m=p(K,"DIV",{class:!0});var F=C(m);_=p(F,"BUTTON",{class:!0});var Y=C(_);ne.l(Y),Y.forEach(v),b=w(F),S=p(F,"BUTTON",{class:!0});var X=C(S);E=p(X,"SPAN",{class:!0,"data-svelte-h":!0}),V(E)!=="svelte-qzpu07"&&(E.textContent=I),D=M(X,`
                Sync Now`),X.forEach(v),F.forEach(v),z=w(K),J&&J.l(K),G=w(K),ee&&ee.l(K),R=w(K),L=p(K,"SPAN",{class:!0,"data-svelte-h":!0}),V(L)!=="svelte-1vkiw9r"&&(L.textContent=T),K.forEach(v),this.h()},h(){d(n,"class","date-range-label svelte-19d6nfz"),d(r,"class","date-range-select svelte-19d6nfz"),s[17]===void 0&&Ps(()=>s[41].call(r)),d(c,"class","date-range-hint svelte-19d6nfz"),d(t,"class","date-range-section svelte-19d6nfz"),d(_,"class","status-check-btn svelte-19d6nfz"),_.disabled=g=s[12]||s[0],d(E,"class","btn-icon svelte-19d6nfz"),d(S,"class","remote-sync-btn svelte-19d6nfz"),S.disabled=A=s[0]||s[12],d(m,"class","sync-actions-row svelte-19d6nfz"),d(L,"class","sync-hint svelte-19d6nfz"),d(e,"class","remote-sync-section svelte-19d6nfz")},m(q,K){P(q,e,K),o(e,t),o(t,n),o(t,l),o(t,r);for(let B=0;B<U.length;B+=1)U[B]&&U[B].m(r,null);bt(r,s[17],!0),o(t,f),o(t,c),o(c,u),o(e,y),o(e,m),o(m,_),ne.m(_,null),o(m,b),o(m,S),o(S,E),o(S,D),o(e,z),J&&J.m(e,null),o(e,G),ee&&ee.m(e,null),o(e,R),o(e,L),j||(Z=[re(r,"change",s[41]),re(_,"click",s[24]),re(S,"click",s[25])],j=!0)},p(q,K){if(K[0]&1048576){H=Le(q[20]);let B;for(B=0;B<H.length;B+=1){const W=Et(q,H,B);U[B]?U[B].p(W,K):(U[B]=Ut(W),U[B].c(),U[B].m(r,null))}for(;B<U.length;B+=1)U[B].d(1);U.length=H.length}K[0]&1179648&&bt(r,q[17]),K[0]&131072&&i!==(i=(q[20].find(q[42])?.description||"")+"")&&se(u,i),te!==(te=x(q))&&(ne.d(1),ne=te(q),ne&&(ne.c(),ne.m(_,null))),K[0]&4097&&g!==(g=q[12]||q[0])&&(_.disabled=g),K[0]&4097&&A!==(A=q[0]||q[12])&&(S.disabled=A),q[13]&&!q[13].error?J?J.p(q,K):(J=Vt(q),J.c(),J.m(e,G)):J&&(J.d(1),J=null),q[14]?ee?ee.p(q,K):(ee=Ot(q),ee.c(),ee.m(e,R)):ee&&(ee.d(1),ee=null)},d(q){q&&v(e),rt(U,q),ne.d(),J&&J.d(),ee&&ee.d(),j=!1,ke(Z)}}}function Ut(s){let e,t=s[49].label+"",n,a;return{c(){e=h("option"),n=O(t),a=k(),this.h()},l(l){e=p(l,"OPTION",{class:!0});var r=C(e);n=M(r,t),a=w(r),r.forEach(v),this.h()},h(){e.__value=s[49].value,Te(e,e.__value),d(e,"class","svelte-19d6nfz")},m(l,r){P(l,e,r),o(e,n),o(e,a)},p:Ce,d(l){l&&v(e)}}}function hn(s){let e,t="üìä",n;return{c(){e=h("span"),e.textContent=t,n=O(" Check Status"),this.h()},l(a){e=p(a,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-yq9zoa"&&(e.textContent=t),n=M(a," Check Status"),this.h()},h(){d(e,"class","btn-icon svelte-19d6nfz")},m(a,l){P(a,e,l),P(a,n,l)},d(a){a&&(v(e),v(n))}}}function _n(s){let e,t="‚Üª",n;return{c(){e=h("span"),e.textContent=t,n=O(" Checking..."),this.h()},l(a){e=p(a,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-16xuirm"&&(e.textContent=t),n=M(a," Checking..."),this.h()},h(){d(e,"class","spinning svelte-19d6nfz")},m(a,l){P(a,e,l),P(a,n,l)},d(a){a&&(v(e),v(n))}}}function Vt(s){let e,t,n,a="Sync Status",l,r,f,c,i,u="Server",y,m,_=s[13].server.memoryCount+"",g,b,S,E,I,D="Local",A,z,G=s[13].local.memoryCount+"",R,L,T;function j(x,te){return x[13].differences.syncRecommended?gn:yn}let Z=j(s),H=Z(s),U=s[13].differences.newMemoriesOnServer>0&&Mt(s);return{c(){e=h("div"),t=h("div"),n=h("span"),n.textContent=a,l=k(),H.c(),r=k(),f=h("div"),c=h("div"),i=h("span"),i.textContent=u,y=k(),m=h("span"),g=O(_),b=O(" memories"),S=k(),E=h("div"),I=h("span"),I.textContent=D,A=k(),z=h("span"),R=O(G),L=O(" memories"),T=k(),U&&U.c(),this.h()},l(x){e=p(x,"DIV",{class:!0});var te=C(e);t=p(te,"DIV",{class:!0});var ne=C(t);n=p(ne,"SPAN",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-2zlc9k"&&(n.textContent=a),l=w(ne),H.l(ne),ne.forEach(v),r=w(te),f=p(te,"DIV",{class:!0});var J=C(f);c=p(J,"DIV",{class:!0});var ee=C(c);i=p(ee,"SPAN",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-2hyoye"&&(i.textContent=u),y=w(ee),m=p(ee,"SPAN",{class:!0});var q=C(m);g=M(q,_),b=M(q," memories"),q.forEach(v),ee.forEach(v),S=w(J),E=p(J,"DIV",{class:!0});var K=C(E);I=p(K,"SPAN",{class:!0,"data-svelte-h":!0}),V(I)!=="svelte-1d3700k"&&(I.textContent=D),A=w(K),z=p(K,"SPAN",{class:!0});var B=C(z);R=M(B,G),L=M(B," memories"),B.forEach(v),K.forEach(v),J.forEach(v),T=w(te),U&&U.l(te),te.forEach(v),this.h()},h(){d(n,"class","comparison-title svelte-19d6nfz"),d(t,"class","comparison-header svelte-19d6nfz"),d(i,"class","comparison-label svelte-19d6nfz"),d(m,"class","comparison-value server svelte-19d6nfz"),d(c,"class","comparison-item svelte-19d6nfz"),d(I,"class","comparison-label svelte-19d6nfz"),d(z,"class","comparison-value local svelte-19d6nfz"),d(E,"class","comparison-item svelte-19d6nfz"),d(f,"class","comparison-grid svelte-19d6nfz"),d(e,"class","sync-comparison svelte-19d6nfz")},m(x,te){P(x,e,te),o(e,t),o(t,n),o(t,l),H.m(t,null),o(e,r),o(e,f),o(f,c),o(c,i),o(c,y),o(c,m),o(m,g),o(m,b),o(f,S),o(f,E),o(E,I),o(E,A),o(E,z),o(z,R),o(z,L),o(e,T),U&&U.m(e,null)},p(x,te){Z!==(Z=j(x))&&(H.d(1),H=Z(x),H&&(H.c(),H.m(t,null))),te[0]&8192&&_!==(_=x[13].server.memoryCount+"")&&se(g,_),te[0]&8192&&G!==(G=x[13].local.memoryCount+"")&&se(R,G),x[13].differences.newMemoriesOnServer>0?U?U.p(x,te):(U=Mt(x),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},d(x){x&&v(e),H.d(),U&&U.d()}}}function yn(s){let e,t="Up to Date";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1i2yh40"&&(e.textContent=t),this.h()},h(){d(e,"class","sync-badge up-to-date svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function gn(s){let e,t="Sync Recommended";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-rt65q3"&&(e.textContent=t),this.h()},h(){d(e,"class","sync-badge recommended svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function Mt(s){let e,t,n="‚Üì",a,l,r=s[13].differences.newMemoriesOnServer+"",f,c;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),c=O(" new memories available on server"),this.h()},l(i){e=p(i,"DIV",{class:!0});var u=C(e);t=p(u,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1huagr5"&&(t.textContent=n),a=w(u),l=p(u,"SPAN",{class:!0});var y=C(l);f=M(y,r),c=M(y," new memories available on server"),y.forEach(v),u.forEach(v),this.h()},h(){d(t,"class","diff-icon svelte-19d6nfz"),d(l,"class","diff-text svelte-19d6nfz"),d(e,"class","comparison-diff svelte-19d6nfz")},m(i,u){P(i,e,u),o(e,t),o(e,a),o(e,l),o(l,f),o(l,c)},p(i,u){u[0]&8192&&r!==(r=i[13].differences.newMemoriesOnServer+"")&&se(f,r)},d(i){i&&v(e)}}}function Ot(s){let e,t,n="‚ö†Ô∏è",a,l,r;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),r=O(s[14]),this.h()},l(f){e=p(f,"DIV",{class:!0});var c=C(e);t=p(c,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-afr8fm"&&(t.textContent=n),a=w(c),l=p(c,"SPAN",{class:!0});var i=C(l);r=M(i,s[14]),i.forEach(v),c.forEach(v),this.h()},h(){d(t,"class","error-icon svelte-19d6nfz"),d(l,"class","error-text svelte-19d6nfz"),d(e,"class","status-error svelte-19d6nfz")},m(f,c){P(f,e,c),o(e,t),o(e,a),o(e,l),o(l,r)},p(f,c){c[0]&16384&&se(r,f[14])},d(f){f&&v(e)}}}function Rt(s){let e,t=s[49].estimatedSize+"",n;return{c(){e=h("span"),n=O(t),this.h()},l(a){e=p(a,"SPAN",{class:!0});var l=C(e);n=M(l,t),l.forEach(v),this.h()},h(){d(e,"class","option-size svelte-19d6nfz")},m(a,l){P(a,e,l),o(e,n)},p(a,l){l[0]&262144&&t!==(t=a[49].estimatedSize+"")&&se(n,t)},d(a){a&&v(e)}}}function Lt(s){let e,t,n=s[49].warning+"",a;return{c(){e=h("span"),t=O("‚ö†Ô∏è "),a=O(n),this.h()},l(l){e=p(l,"SPAN",{class:!0});var r=C(e);t=M(r,"‚ö†Ô∏è "),a=M(r,n),r.forEach(v),this.h()},h(){d(e,"class","option-warning svelte-19d6nfz")},m(l,r){P(l,e,r),o(e,t),o(e,a)},p(l,r){r[0]&262144&&n!==(n=l[49].warning+"")&&se(a,n)},d(l){l&&v(e)}}}function Ft(s){let e,t,n,a,l,r,f,c=s[49].label+"",i,u,y,m,_=s[49].description+"",g,b,S,E,I;function D(){return s[43](s[49])}let A=s[49].estimatedSize&&Rt(s),z=s[49].warning&&Lt(s);return{c(){e=h("label"),t=h("input"),a=k(),l=h("div"),r=h("div"),f=h("span"),i=O(c),u=k(),A&&A.c(),y=k(),m=h("span"),g=O(_),b=k(),z&&z.c(),S=k(),this.h()},l(G){e=p(G,"LABEL",{class:!0});var R=C(e);t=p(R,"INPUT",{type:!0,class:!0}),a=w(R),l=p(R,"DIV",{class:!0});var L=C(l);r=p(L,"DIV",{class:!0});var T=C(r);f=p(T,"SPAN",{class:!0});var j=C(f);i=M(j,c),j.forEach(v),u=w(T),A&&A.l(T),T.forEach(v),y=w(L),m=p(L,"SPAN",{class:!0});var Z=C(m);g=M(Z,_),Z.forEach(v),b=w(L),z&&z.l(L),L.forEach(v),S=w(R),R.forEach(v),this.h()},h(){d(t,"type","checkbox"),t.checked=n=s[49].enabled,d(t,"class","svelte-19d6nfz"),d(f,"class","option-label svelte-19d6nfz"),d(r,"class","option-header svelte-19d6nfz"),d(m,"class","option-description svelte-19d6nfz"),d(l,"class","option-content svelte-19d6nfz"),d(e,"class","option-item svelte-19d6nfz"),De(e,"has-warning",s[49].warning)},m(G,R){P(G,e,R),o(e,t),o(e,a),o(e,l),o(l,r),o(r,f),o(f,i),o(r,u),A&&A.m(r,null),o(l,y),o(l,m),o(m,g),o(l,b),z&&z.m(l,null),o(e,S),E||(I=re(t,"change",D),E=!0)},p(G,R){s=G,R[0]&262144&&n!==(n=s[49].enabled)&&(t.checked=n),R[0]&262144&&c!==(c=s[49].label+"")&&se(i,c),s[49].estimatedSize?A?A.p(s,R):(A=Rt(s),A.c(),A.m(r,null)):A&&(A.d(1),A=null),R[0]&262144&&_!==(_=s[49].description+"")&&se(g,_),s[49].warning?z?z.p(s,R):(z=Lt(s),z.c(),z.m(l,null)):z&&(z.d(1),z=null),R[0]&262144&&De(e,"has-warning",s[49].warning)},d(G){G&&v(e),A&&A.d(),z&&z.d(),E=!1,I()}}}function bn(s){let e,t='<div class="indeterminate-bar svelte-19d6nfz"></div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-xdevrl"&&(e.innerHTML=t),this.h()},h(){d(e,"class","progress-indeterminate svelte-19d6nfz")},m(n,a){P(n,e,a)},p:Ce,d(n){n&&v(e)}}}function Sn(s){let e,t,n,a,l,r,f=s[1].category+"",c,i,u,y=s[32]()+"",m,_;return{c(){e=h("div"),t=h("div"),n=h("div"),a=k(),l=h("div"),r=h("span"),c=O(f),i=k(),u=h("span"),m=O(y),_=O("%"),this.h()},l(g){e=p(g,"DIV",{class:!0});var b=C(e);t=p(b,"DIV",{class:!0});var S=C(t);n=p(S,"DIV",{class:!0,style:!0}),C(n).forEach(v),S.forEach(v),a=w(b),l=p(b,"DIV",{class:!0});var E=C(l);r=p(E,"SPAN",{class:!0});var I=C(r);c=M(I,f),I.forEach(v),i=w(E),u=p(E,"SPAN",{class:!0});var D=C(u);m=M(D,y),_=M(D,"%"),D.forEach(v),E.forEach(v),b.forEach(v),this.h()},h(){d(n,"class","progress-fill svelte-19d6nfz"),at(n,"width",s[32]()+"%"),d(t,"class","progress-bar svelte-19d6nfz"),d(r,"class","progress-category svelte-19d6nfz"),d(u,"class","progress-percent svelte-19d6nfz"),d(l,"class","progress-text svelte-19d6nfz"),d(e,"class","progress-details svelte-19d6nfz")},m(g,b){P(g,e,b),o(e,t),o(t,n),o(e,a),o(e,l),o(l,r),o(r,c),o(l,i),o(l,u),o(u,m),o(u,_)},p(g,b){b[0]&2&&f!==(f=g[1].category+"")&&se(c,f)},d(g){g&&v(e)}}}function jt(s){let e,t,n,a,l,r=s[16].success?"Sync Complete!":"Sync Failed",f,c,i,u,y=s[16].success?"Done":"Close",m,_,g;function b(z,G){return z[16].success?wn:Cn}let S=b(s),E=S(s);function I(z,G){return z[16].success?En:kn}let D=I(s),A=D(s);return{c(){e=h("div"),t=h("div"),n=h("div"),E.c(),a=k(),l=h("h3"),f=O(r),c=k(),A.c(),i=k(),u=h("button"),m=O(y),this.h()},l(z){e=p(z,"DIV",{class:!0});var G=C(e);t=p(G,"DIV",{class:!0});var R=C(t);n=p(R,"DIV",{class:!0});var L=C(n);E.l(L),L.forEach(v),a=w(R),l=p(R,"H3",{class:!0});var T=C(l);f=M(T,r),T.forEach(v),c=w(R),A.l(R),i=w(R),u=p(R,"BUTTON",{class:!0});var j=C(u);m=M(j,y),j.forEach(v),R.forEach(v),G.forEach(v),this.h()},h(){d(n,"class","complete-icon-wrapper svelte-19d6nfz"),d(l,"class","complete-title svelte-19d6nfz"),d(u,"class","complete-btn svelte-19d6nfz"),d(t,"class","sync-complete-modal svelte-19d6nfz"),d(e,"class","modal-overlay svelte-19d6nfz")},m(z,G){P(z,e,G),o(e,t),o(t,n),E.m(n,null),o(t,a),o(t,l),o(l,f),o(t,c),A.m(t,null),o(t,i),o(t,u),o(u,m),_||(g=[re(u,"click",s[26]),re(t,"click",Je(s[35])),re(e,"click",s[26])],_=!0)},p(z,G){S!==(S=b(z))&&(E.d(1),E=S(z),E&&(E.c(),E.m(n,null))),G[0]&65536&&r!==(r=z[16].success?"Sync Complete!":"Sync Failed")&&se(f,r),D===(D=I(z))&&A?A.p(z,G):(A.d(1),A=D(z),A&&(A.c(),A.m(t,i))),G[0]&65536&&y!==(y=z[16].success?"Done":"Close")&&se(m,y)},d(z){z&&v(e),E.d(),A.d(),_=!1,ke(g)}}}function Cn(s){let e,t="‚úó";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-gmgl37"&&(e.textContent=t),this.h()},h(){d(e,"class","complete-icon error svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function wn(s){let e,t="‚úì";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-19bzhz2"&&(e.textContent=t),this.h()},h(){d(e,"class","complete-icon success svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function kn(s){let e,t,n=(s[16].error||"An unknown error occurred")+"",a,l,r,f="Please check your server connection and try again.";return{c(){e=h("div"),t=h("span"),a=O(n),l=k(),r=h("p"),r.textContent=f,this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0});var u=C(t);a=M(u,n),u.forEach(v),i.forEach(v),l=w(c),r=p(c,"P",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1kj0jry"&&(r.textContent=f),this.h()},h(){d(t,"class","error-message svelte-19d6nfz"),d(e,"class","error-details svelte-19d6nfz"),d(r,"class","complete-message svelte-19d6nfz")},m(c,i){P(c,e,i),o(e,t),o(t,a),P(c,l,i),P(c,r,i)},p(c,i){i[0]&65536&&n!==(n=(c[16].error||"An unknown error occurred")+"")&&se(a,n)},d(c){c&&(v(e),v(l),v(r))}}}function En(s){let e,t,n,a,l,r,f="Your local device is now up to date with your server.",c=s[16].profileFiles&&Bt(s),i=s[16].memoriesImported&&Ht(s),u=s[16].credentialsSynced&&qt(),y=!s[16].profileFiles&&!s[16].memoriesImported&&!s[16].credentialsSynced&&Kt();return{c(){e=h("div"),c&&c.c(),t=k(),i&&i.c(),n=k(),u&&u.c(),a=k(),y&&y.c(),l=k(),r=h("p"),r.textContent=f,this.h()},l(m){e=p(m,"DIV",{class:!0});var _=C(e);c&&c.l(_),t=w(_),i&&i.l(_),n=w(_),u&&u.l(_),a=w(_),y&&y.l(_),_.forEach(v),l=w(m),r=p(m,"P",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-13lf1sw"&&(r.textContent=f),this.h()},h(){d(e,"class","complete-stats svelte-19d6nfz"),d(r,"class","complete-message svelte-19d6nfz")},m(m,_){P(m,e,_),c&&c.m(e,null),o(e,t),i&&i.m(e,null),o(e,n),u&&u.m(e,null),o(e,a),y&&y.m(e,null),P(m,l,_),P(m,r,_)},p(m,_){m[16].profileFiles?c?c.p(m,_):(c=Bt(m),c.c(),c.m(e,t)):c&&(c.d(1),c=null),m[16].memoriesImported?i?i.p(m,_):(i=Ht(m),i.c(),i.m(e,n)):i&&(i.d(1),i=null),m[16].credentialsSynced?u||(u=qt(),u.c(),u.m(e,a)):u&&(u.d(1),u=null),!m[16].profileFiles&&!m[16].memoriesImported&&!m[16].credentialsSynced?y||(y=Kt(),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(m){m&&(v(e),v(l),v(r)),c&&c.d(),i&&i.d(),u&&u.d(),y&&y.d()}}}function Bt(s){let e,t,n="üìã",a,l,r=s[16].profileFiles+"",f,c,i,u="profile files imported";return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),c=k(),i=h("span"),i.textContent=u,this.h()},l(y){e=p(y,"DIV",{class:!0});var m=C(e);t=p(m,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-14t839p"&&(t.textContent=n),a=w(m),l=p(m,"SPAN",{class:!0});var _=C(l);f=M(_,r),_.forEach(v),c=w(m),i=p(m,"SPAN",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-dka8pw"&&(i.textContent=u),m.forEach(v),this.h()},h(){d(t,"class","stat-icon svelte-19d6nfz"),d(l,"class","stat-value svelte-19d6nfz"),d(i,"class","stat-label svelte-19d6nfz"),d(e,"class","stat-item svelte-19d6nfz")},m(y,m){P(y,e,m),o(e,t),o(e,a),o(e,l),o(l,f),o(e,c),o(e,i)},p(y,m){m[0]&65536&&r!==(r=y[16].profileFiles+"")&&se(f,r)},d(y){y&&v(e)}}}function Ht(s){let e,t,n="üß†",a,l,r=s[16].memoriesImported+"",f,c,i,u="memories synced";return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),c=k(),i=h("span"),i.textContent=u,this.h()},l(y){e=p(y,"DIV",{class:!0});var m=C(e);t=p(m,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-f1qhib"&&(t.textContent=n),a=w(m),l=p(m,"SPAN",{class:!0});var _=C(l);f=M(_,r),_.forEach(v),c=w(m),i=p(m,"SPAN",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-s48dex"&&(i.textContent=u),m.forEach(v),this.h()},h(){d(t,"class","stat-icon svelte-19d6nfz"),d(l,"class","stat-value svelte-19d6nfz"),d(i,"class","stat-label svelte-19d6nfz"),d(e,"class","stat-item svelte-19d6nfz")},m(y,m){P(y,e,m),o(e,t),o(e,a),o(e,l),o(l,f),o(e,c),o(e,i)},p(y,m){m[0]&65536&&r!==(r=y[16].memoriesImported+"")&&se(f,r)},d(y){y&&v(e)}}}function qt(s){let e,t='<span class="stat-icon svelte-19d6nfz">üîë</span> <span class="stat-value svelte-19d6nfz">‚úì</span> <span class="stat-label svelte-19d6nfz">credentials synced</span>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-113rs4t"&&(e.innerHTML=t),this.h()},h(){d(e,"class","stat-item svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function Kt(s){let e,t='<span class="stat-icon svelte-19d6nfz">üì°</span> <span class="stat-label svelte-19d6nfz">Connection verified - no new data to sync</span>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1nlnvwq"&&(e.innerHTML=t),this.h()},h(){d(e,"class","stat-item svelte-19d6nfz")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function In(s){let e,t,n=s[2]&&It(s),a=s[15]&&s[16]&&jt(s);return{c(){n&&n.c(),e=k(),a&&a.c(),t=Ne()},l(l){n&&n.l(l),e=w(l),a&&a.l(l),t=Ne()},m(l,r){n&&n.m(l,r),P(l,e,r),a&&a.m(l,r),P(l,t,r)},p(l,r){l[2]?n?n.p(l,r):(n=It(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l[15]&&l[16]?a?a.p(l,r):(a=jt(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:Ce,o:Ce,d(l){l&&(v(e),v(t)),n&&n.d(l),a&&a.d(l)}}}const Jt=s=>s.enabled;function zn(s,e,t){const n=As();let{isOpen:a=!1}=e,{isSyncing:l=!1}=e,{syncProgress:r=null}=e,f="",c="",i="",u=!1,y=!1,m=null,_=!1,g=!1,b=null,S=null,E="",I=!1,D=null,A=null,z=!1,G=null;const R=[{value:7,label:"Last 7 days",description:"Recent memories only"},{value:30,label:"Last 30 days",description:"About a month"},{value:90,label:"Last 90 days",description:"About 3 months"},{value:365,label:"Last year",description:"Warning: may be large"},{value:0,label:"All memories",description:"Warning: may be very large!"}];let L=7,T=[{id:"persona",label:"Persona Files",description:"Core identity, personality traits, relationships, and decision rules",enabled:!0,estimatedSize:"~50 KB"},{id:"config",label:"Configuration",description:"Settings, preferences, model registry, and runtime config",enabled:!0,estimatedSize:"~25 KB"},{id:"memories",label:"Memories",description:"Episodic memories, conversations, and inner dialogue",enabled:!0,estimatedSize:"Variable"},{id:"logs",label:"Audit Logs",description:"System logs and audit trail (for debugging)",enabled:!1,estimatedSize:"Large"},{id:"models",label:"LoRA Adapters",description:"Custom fine-tuned model weights",enabled:!1,warning:"Not recommended - files can be 500MB+ each",estimatedSize:"500MB+"},{id:"update",label:"Program Update",description:"Check for and download app updates",enabled:!0,estimatedSize:"~10 MB"}];const j=["Synchronizing the stack...","Backing up your ghost...","Preventing ghost hack vulnerabilities...","Updating wetware protocols...","Verifying wetware integrity...","Jacking into the matrix...","Decking through ICE barriers...","Flatlining countermeasures...","Riding the razorgirl protocol...","Burning chrome signatures...","Replicating memory engrams...","Voight-Kampff verification active...","Processing baseline data...","Retiring obsolete sectors...","Diving into the net...","Securing Section 9 protocols...","Laughing Man encryption active...","Puppet master handshake...","Stand Alone Complex sync...","Entering the Metaverse...","Gargoyle mode engaged...","Snow Crash firewall active...","Hiro Protagonist protocol...","Cyberspace handshake complete...","Neural link established...","Uploading consciousness fragments...","Downloading identity backup...","Meat-to-metal bridge active...","Chrome extensions syncing...","Biochip verification...","Street samurai mode...","Netrunner protocol engaged...","Braindance sync in progress...","Augmentation sync active...","UNATCO uplink established...","Nano-augmentation verified...","Red pill accepted...","Downloading kung fu...","Nebuchadnezzar uplink...","Zion mainframe sync...","Sentinels bypassed...","Stack backup initiated...","Cortical stack sync...","Sleeve transfer protocol...","DHF pattern verified...","Envoy conditioning active...","fsociety protocol active...","Dark Army bypass engaged...","E Corp firewall penetrated...","Ansible connection stable...","Gom jabbar test passed...","Spice flow initiated...","Mentat calculations complete...","Holographic archive syncing...","Quantum entanglement verified...","Tachyon burst received...","Subspace relay active...","Warp signature locked...","Replicator patterns cached...","Meatspace tether stable...","Digital exocortex syncing...","Neuroweave calibration...","Psycho-pass clearance verified...","Memory palace reconstruction...","Synaptic bridge established...","Ego backup confirmed...","Identity matrix verified...","Personality substrate sync...","Cognitive mesh active...","Mind-state serialization...","Ghost protocol engaged...","Soul backup in progress...","Digital twin synchronizing...","Memetic payload delivered...","Consciousness partition active..."];let Z=0,H=j[0],U=null;hs(()=>{U&&clearInterval(U)}),_s(async()=>{await x()});async function x(){try{const N=await Ds();t(6,u=N.configured),N.configured&&(t(3,f=N.serverUrl||""),t(4,c=N.username||""),t(11,b=N.lastSyncAt||null),t(5,i=""))}catch(N){console.error("Failed to load server config:",N)}}async function te(){if(!f||!c||!i){t(8,m={success:!1,message:"Please fill in all fields"});return}t(7,y=!0),t(8,m=null);try{const N=await Is(f,c,i);t(8,m={success:N.success,message:N.success?"Connection successful!":N.error||"Connection failed"})}catch(N){t(8,m={success:!1,message:`Error: ${N instanceof Error?N.message:"Unknown error"}`})}finally{t(7,y=!1)}}async function ne(){if(!f||!c||!i){t(8,m={success:!1,message:"Please fill in all fields"});return}t(9,_=!0);try{const N=await cn(f,c,i);N.success?(t(6,u=!0),t(10,g=!1),t(8,m={success:!0,message:"Server configured successfully!"}),await x()):t(8,m={success:!1,message:N.error||"Failed to save configuration"})}catch(N){t(8,m={success:!1,message:`Error: ${N instanceof Error?N.message:"Unknown error"}`})}finally{t(9,_=!1)}}async function J(){try{await fn(),t(3,f=""),t(4,c=""),t(5,i=""),t(6,u=!1),t(11,b=null),t(8,m=null)}catch(N){console.error("Failed to clear config:",N)}}async function ee(){if(u){t(12,I=!0),t(14,A=null),t(13,D=null);try{t(13,D=await un()),D.error&&t(14,A=D.error)}catch(N){t(14,A=N instanceof Error?N.message:"Failed to check status")}finally{t(12,I=!1)}}}async function q(){t(0,l=!0),S="authenticating",E="Connecting to remote server...",t(16,G=null);try{const N=await zs(ae=>{S=ae.phase,E=ae.message,ae.current!==void 0&&ae.total!==void 0&&t(1,r={current:ae.current,total:ae.total,category:ae.message})},{includeMemories:!0,includeCredentials:!0,priorityOnly:!0,memoryDays:L});t(16,G=N),N.success?(S="complete",E=`Sync complete! ${N.memoriesImported||0} memories imported.`,await x(),t(15,z=!0)):(S="error",E=N.error||"Sync failed")}catch(N){S="error",E=`Error: ${N instanceof Error?N.message:"Unknown error"}`,t(16,G={success:!1,error:N instanceof Error?N.message:"Unknown error"})}finally{t(0,l=!1),t(1,r=null),t(13,D=null)}}function K(){t(15,z=!1),t(16,G=null),S=null}function B(N){t(18,T=T.map(ae=>ae.id===N?{...ae,enabled:!ae.enabled}:ae))}function W(){t(18,T=T.map(N=>({...N,enabled:!0})))}function $(){t(18,T=T.map(N=>({...N,enabled:!1})))}function F(){const N=T.filter(ae=>ae.enabled).map(ae=>ae.id);n("sync",{options:N})}function Y(){l||n("close")}function X(){return r?Math.round(r.current/r.total*100):0}function oe(N){qe.call(this,s,N)}function pe(N){qe.call(this,s,N)}const he=()=>t(10,g=!g);function fe(){f=this.value,t(3,f)}function ye(){c=this.value,t(4,c)}function ve(){i=this.value,t(5,i)}function ue(){L=Ns(this),t(17,L),t(20,R)}const Q=N=>N.value===L,ie=N=>B(N.id);return s.$$set=N=>{"isOpen"in N&&t(2,a=N.isOpen),"isSyncing"in N&&t(0,l=N.isSyncing),"syncProgress"in N&&t(1,r=N.syncProgress)},s.$$.update=()=>{s.$$.dirty[0]&1|s.$$.dirty[1]&12&&(l&&!U?(t(33,Z=Math.floor(Math.random()*j.length)),t(19,H=j[Z]),t(34,U=setInterval(()=>{t(33,Z=Math.floor(Math.random()*j.length)),t(19,H=j[Z])},1e4))):!l&&U&&(clearInterval(U),t(34,U=null)))},[l,r,a,f,c,i,u,y,m,_,g,b,I,D,A,z,G,L,T,H,R,te,ne,J,ee,q,K,B,W,$,F,Y,X,Z,U,oe,pe,he,fe,ye,ve,ue,Q,ie]}class Dn extends vs{constructor(e){super(),ms(this,e,zn,In,ps,{isOpen:2,isSyncing:0,syncProgress:1},null,[-1,-1])}}function Gt(s,e,t){const n=s.slice();return n[48]=e[t],n}function An(s){let e,t,n,a="Sync Status",l,r,f,c,i,u,y,m,_=s[26]()+"",g,b,S,E,I="Last sync:",D,A,z=Fe(s[1].lastSyncTimestamp)+"",G,R,L,T,j,Z,H,U,x;function te(X,oe){return X[4]?Tn:Pn}let ne=te(s),J=ne(s);function ee(X,oe){if(X[13]&&X[14])return Vn;if(X[10])return Un}let q=ee(s),K=q&&q(s),B=s[1].pendingCount>0&&Yt(s),W=s[1].conflictCount>0&&Qt(s),$=s[1].lastSyncError&&Xt(s),F=s[10]&&s[8]&&s[7]&&Zt(s),Y=s[10]&&!s[8]&&s[7]?.currentVersion&&$t(s);return{c(){e=h("div"),t=h("div"),n=h("h4"),n.textContent=a,l=k(),r=h("button"),J.c(),f=k(),c=h("div"),i=h("div"),u=h("span"),y=k(),m=h("span"),g=O(_),b=k(),S=h("div"),E=h("span"),E.textContent=I,D=k(),A=h("span"),G=O(z),R=k(),K&&K.c(),L=k(),B&&B.c(),T=k(),W&&W.c(),j=k(),$&&$.c(),Z=k(),F&&F.c(),H=k(),Y&&Y.c(),this.h()},l(X){e=p(X,"DIV",{class:!0});var oe=C(e);t=p(oe,"DIV",{class:!0});var pe=C(t);n=p(pe,"H4",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-ti2ekb"&&(n.textContent=a),l=w(pe),r=p(pe,"BUTTON",{class:!0});var he=C(r);J.l(he),he.forEach(v),pe.forEach(v),f=w(oe),c=p(oe,"DIV",{class:!0});var fe=C(c);i=p(fe,"DIV",{class:!0});var ye=C(i);u=p(ye,"SPAN",{class:!0,style:!0}),C(u).forEach(v),y=w(ye),m=p(ye,"SPAN",{class:!0});var ve=C(m);g=M(ve,_),ve.forEach(v),ye.forEach(v),b=w(fe),S=p(fe,"DIV",{class:!0});var ue=C(S);E=p(ue,"SPAN",{class:!0,"data-svelte-h":!0}),V(E)!=="svelte-17cqyup"&&(E.textContent=I),D=w(ue),A=p(ue,"SPAN",{class:!0});var Q=C(A);G=M(Q,z),Q.forEach(v),ue.forEach(v),R=w(fe),K&&K.l(fe),L=w(fe),B&&B.l(fe),T=w(fe),W&&W.l(fe),j=w(fe),$&&$.l(fe),Z=w(fe),F&&F.l(fe),H=w(fe),Y&&Y.l(fe),fe.forEach(v),oe.forEach(v),this.h()},h(){d(n,"class","svelte-1rfvmhm"),d(r,"class","sync-btn svelte-1rfvmhm"),r.disabled=s[4],d(t,"class","sync-header svelte-1rfvmhm"),d(u,"class","status-indicator svelte-1rfvmhm"),at(u,"background-color",s[25]()),d(m,"class","status-label svelte-1rfvmhm"),d(i,"class","status-row svelte-1rfvmhm"),d(E,"class","info-label svelte-1rfvmhm"),d(A,"class","info-value svelte-1rfvmhm"),d(S,"class","info-row svelte-1rfvmhm"),d(c,"class","sync-info svelte-1rfvmhm"),d(e,"class","sync-status svelte-1rfvmhm")},m(X,oe){P(X,e,oe),o(e,t),o(t,n),o(t,l),o(t,r),J.m(r,null),o(e,f),o(e,c),o(c,i),o(i,u),o(i,y),o(i,m),o(m,g),o(c,b),o(c,S),o(S,E),o(S,D),o(S,A),o(A,G),o(c,R),K&&K.m(c,null),o(c,L),B&&B.m(c,null),o(c,T),W&&W.m(c,null),o(c,j),$&&$.m(c,null),o(c,Z),F&&F.m(c,null),o(c,H),Y&&Y.m(c,null),U||(x=re(r,"click",s[18]),U=!0)},p(X,oe){ne!==(ne=te(X))&&(J.d(1),J=ne(X),J&&(J.c(),J.m(r,null))),oe[0]&16&&(r.disabled=X[4]),oe[0]&2&&z!==(z=Fe(X[1].lastSyncTimestamp)+"")&&se(G,z),q===(q=ee(X))&&K?K.p(X,oe):(K&&K.d(1),K=q&&q(X),K&&(K.c(),K.m(c,L))),X[1].pendingCount>0?B?B.p(X,oe):(B=Yt(X),B.c(),B.m(c,T)):B&&(B.d(1),B=null),X[1].conflictCount>0?W?W.p(X,oe):(W=Qt(X),W.c(),W.m(c,j)):W&&(W.d(1),W=null),X[1].lastSyncError?$?$.p(X,oe):($=Xt(X),$.c(),$.m(c,Z)):$&&($.d(1),$=null),X[10]&&X[8]&&X[7]?F?F.p(X,oe):(F=Zt(X),F.c(),F.m(c,H)):F&&(F.d(1),F=null),X[10]&&!X[8]&&X[7]?.currentVersion?Y?Y.p(X,oe):(Y=$t(X),Y.c(),Y.m(c,null)):Y&&(Y.d(1),Y=null)},d(X){X&&v(e),J.d(),K&&K.d(),B&&B.d(),W&&W.d(),$&&$.d(),F&&F.d(),Y&&Y.d(),U=!1,x()}}}function Nn(s){let e,t,n,a,l,r;function f(_,g){return _[4]?Ln:_[3]?Rn:_[2]?On:Mn}let c=f(s),i=c(s);function u(_,g){if(_[1].pendingCount>0||_[1].conflictCount>0)return jn;if(_[8])return Fn}let y=u(s),m=y&&y(s);return{c(){e=h("button"),t=h("span"),i.c(),n=k(),m&&m.c(),this.h()},l(_){e=p(_,"BUTTON",{class:!0,title:!0});var g=C(e);t=p(g,"SPAN",{class:!0,style:!0});var b=C(t);i.l(b),b.forEach(v),n=w(g),m&&m.l(g),g.forEach(v),this.h()},h(){d(t,"class","sync-icon svelte-1rfvmhm"),at(t,"color",s[25]()),De(t,"spinning",s[4]),d(e,"class","sync-compact svelte-1rfvmhm"),e.disabled=s[4],d(e,"title",a=`Sync: ${s[26]()}${s[8]?" - Update available!":""}`)},m(_,g){P(_,e,g),o(e,t),i.m(t,null),o(e,n),m&&m.m(e,null),l||(r=re(e,"click",s[18]),l=!0)},p(_,g){c!==(c=f(_))&&(i.d(1),i=c(_),i&&(i.c(),i.m(t,null))),g[0]&16&&De(t,"spinning",_[4]),y===(y=u(_))&&m?m.p(_,g):(m&&m.d(1),m=y&&y(_),m&&(m.c(),m.m(e,null))),g[0]&16&&(e.disabled=_[4]),g[0]&256&&a!==(a=`Sync: ${_[26]()}${_[8]?" - Update available!":""}`)&&d(e,"title",a)},d(_){_&&v(e),i.d(),m&&m.d(),l=!1,r()}}}function Pn(s){let e;return{c(){e=O("‚Üª Sync Now")},l(t){e=M(t,"‚Üª Sync Now")},m(t,n){P(t,e,n)},d(t){t&&v(e)}}}function Tn(s){let e,t="‚Üª",n;return{c(){e=h("span"),e.textContent=t,n=O(" Syncing..."),this.h()},l(a){e=p(a,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-16xuirm"&&(e.textContent=t),n=M(a," Syncing..."),this.h()},h(){d(e,"class","spinning svelte-1rfvmhm")},m(a,l){P(a,e,l),P(a,n,l)},d(a){a&&(v(e),v(n))}}}function Un(s){let e,t,n="Remote:",a,l,r,f="Configure server",c,i;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),r=h("button"),r.textContent=f,this.h()},l(u){e=p(u,"DIV",{class:!0});var y=C(e);t=p(y,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1goia34"&&(t.textContent=n),a=w(y),l=p(y,"SPAN",{class:!0});var m=C(l);r=p(m,"BUTTON",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1mbryn4"&&(r.textContent=f),m.forEach(v),y.forEach(v),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(r,"class","link-btn config-link svelte-1rfvmhm"),d(l,"class","info-value svelte-1rfvmhm"),d(e,"class","info-row not-configured svelte-1rfvmhm")},m(u,y){P(u,e,y),o(e,t),o(e,a),o(e,l),o(l,r),c||(i=re(r,"click",s[18]),c=!0)},p:Ce,d(u){u&&v(e),c=!1,i()}}}function Vn(s){let e,t,n="Remote:",a,l,r,f="üîó",c,i=new URL(s[14]).hostname+"",u,y,m,_=s[15]&&Wt(s);return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),r=h("span"),r.textContent=f,c=k(),u=O(i),y=k(),_&&_.c(),m=Ne(),this.h()},l(g){e=p(g,"DIV",{class:!0});var b=C(e);t=p(b,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1goia34"&&(t.textContent=n),a=w(b),l=p(b,"SPAN",{class:!0});var S=C(l);r=p(S,"SPAN",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1cn9ev0"&&(r.textContent=f),c=w(S),u=M(S,i),S.forEach(v),b.forEach(v),y=w(g),_&&_.l(g),m=Ne(),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(r,"class","connected-icon svelte-1rfvmhm"),d(l,"class","info-value remote-url svelte-1rfvmhm"),d(e,"class","info-row remote-server svelte-1rfvmhm")},m(g,b){P(g,e,b),o(e,t),o(e,a),o(e,l),o(l,r),o(l,c),o(l,u),P(g,y,b),_&&_.m(g,b),P(g,m,b)},p(g,b){b[0]&16384&&i!==(i=new URL(g[14]).hostname+"")&&se(u,i),g[15]?_?_.p(g,b):(_=Wt(g),_.c(),_.m(m.parentNode,m)):_&&(_.d(1),_=null)},d(g){g&&(v(e),v(y),v(m)),_&&_.d(g)}}}function Wt(s){let e,t,n="Remote sync:",a,l,r=Fe(s[15])+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-17d502v"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(l,"class","info-value svelte-1rfvmhm"),d(e,"class","info-row svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&32768&&r!==(r=Fe(c[15])+"")&&se(f,r)},d(c){c&&v(e)}}}function Yt(s){let e,t,n="Pending:",a,l,r=s[1].pendingCount+"",f,c,i=s[1].pendingCount>1?"s":"",u;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),c=O(" change"),u=O(i),this.h()},l(y){e=p(y,"DIV",{class:!0});var m=C(e);t=p(m,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-g8z9bl"&&(t.textContent=n),a=w(m),l=p(m,"SPAN",{class:!0});var _=C(l);f=M(_,r),c=M(_," change"),u=M(_,i),_.forEach(v),m.forEach(v),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(l,"class","info-value svelte-1rfvmhm"),d(e,"class","info-row warning svelte-1rfvmhm")},m(y,m){P(y,e,m),o(e,t),o(e,a),o(e,l),o(l,f),o(l,c),o(l,u)},p(y,m){m[0]&2&&r!==(r=y[1].pendingCount+"")&&se(f,r),m[0]&2&&i!==(i=y[1].pendingCount>1?"s":"")&&se(u,i)},d(y){y&&v(e)}}}function Qt(s){let e,t,n="Conflicts:",a,l,r=s[1].conflictCount+"",f,c,i,u="Resolve",y,m;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),c=k(),i=h("button"),i.textContent=u,this.h()},l(_){e=p(_,"DIV",{class:!0});var g=C(e);t=p(g,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1e3x9w9"&&(t.textContent=n),a=w(g),l=p(g,"SPAN",{class:!0});var b=C(l);f=M(b,r),c=w(b),i=p(b,"BUTTON",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-1jayaa8"&&(i.textContent=u),b.forEach(v),g.forEach(v),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(i,"class","link-btn svelte-1rfvmhm"),d(l,"class","info-value svelte-1rfvmhm"),d(e,"class","info-row error svelte-1rfvmhm")},m(_,g){P(_,e,g),o(e,t),o(e,a),o(e,l),o(l,f),o(l,c),o(l,i),y||(m=re(i,"click",s[23]),y=!0)},p(_,g){g[0]&2&&r!==(r=_[1].conflictCount+"")&&se(f,r)},d(_){_&&v(e),y=!1,m()}}}function Xt(s){let e,t=s[1].lastSyncError+"",n;return{c(){e=h("div"),n=O(t),this.h()},l(a){e=p(a,"DIV",{class:!0});var l=C(e);n=M(l,t),l.forEach(v),this.h()},h(){d(e,"class","error-message svelte-1rfvmhm")},m(a,l){P(a,e,l),o(e,n)},p(a,l){l[0]&2&&t!==(t=a[1].lastSyncError+"")&&se(n,t)},d(a){a&&v(e)}}}function Zt(s){let e,t,n='<span class="update-icon svelte-1rfvmhm">‚¨ÜÔ∏è</span> <span class="update-text svelte-1rfvmhm">Update Available</span>',a,l,r,f,c=s[7].currentVersion+"",i,u,y=s[7].latestVersion+"",m,_,g,b,S,E="View Details",I,D,A="Later",z,G,R=s[7].fileSize&&xt(s);return{c(){e=h("div"),t=h("div"),t.innerHTML=n,a=k(),l=h("div"),r=h("span"),f=O("v"),i=O(c),u=O(" ‚Üí v"),m=O(y),_=k(),R&&R.c(),g=k(),b=h("div"),S=h("button"),S.textContent=E,I=k(),D=h("button"),D.textContent=A,this.h()},l(L){e=p(L,"DIV",{class:!0});var T=C(e);t=p(T,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-dtpq2t"&&(t.innerHTML=n),a=w(T),l=p(T,"DIV",{class:!0});var j=C(l);r=p(j,"SPAN",{class:!0});var Z=C(r);f=M(Z,"v"),i=M(Z,c),u=M(Z," ‚Üí v"),m=M(Z,y),Z.forEach(v),_=w(j),R&&R.l(j),j.forEach(v),g=w(T),b=p(T,"DIV",{class:!0});var H=C(b);S=p(H,"BUTTON",{class:!0,"data-svelte-h":!0}),V(S)!=="svelte-1yaosjm"&&(S.textContent=E),I=w(H),D=p(H,"BUTTON",{class:!0,"data-svelte-h":!0}),V(D)!=="svelte-fe6xr7"&&(D.textContent=A),H.forEach(v),T.forEach(v),this.h()},h(){d(t,"class","update-header svelte-1rfvmhm"),d(r,"class","update-version svelte-1rfvmhm"),d(l,"class","update-details svelte-1rfvmhm"),d(S,"class","btn-update svelte-1rfvmhm"),d(D,"class","btn-dismiss svelte-1rfvmhm"),d(b,"class","update-actions svelte-1rfvmhm"),d(e,"class","update-available svelte-1rfvmhm")},m(L,T){P(L,e,T),o(e,t),o(e,a),o(e,l),o(l,r),o(r,f),o(r,i),o(r,u),o(r,m),o(l,_),R&&R.m(l,null),o(e,g),o(e,b),o(b,S),o(b,I),o(b,D),z||(G=[re(S,"click",s[30]),re(D,"click",s[22])],z=!0)},p(L,T){T[0]&128&&c!==(c=L[7].currentVersion+"")&&se(i,c),T[0]&128&&y!==(y=L[7].latestVersion+"")&&se(m,y),L[7].fileSize?R?R.p(L,T):(R=xt(L),R.c(),R.m(l,null)):R&&(R.d(1),R=null)},d(L){L&&v(e),R&&R.d(),z=!1,ke(G)}}}function xt(s){let e,t,n=xe(s[7].fileSize)+"",a,l;return{c(){e=h("span"),t=O("("),a=O(n),l=O(")"),this.h()},l(r){e=p(r,"SPAN",{class:!0});var f=C(e);t=M(f,"("),a=M(f,n),l=M(f,")"),f.forEach(v),this.h()},h(){d(e,"class","update-size svelte-1rfvmhm")},m(r,f){P(r,e,f),o(e,t),o(e,a),o(e,l)},p(r,f){f[0]&128&&n!==(n=xe(r[7].fileSize)+"")&&se(a,n)},d(r){r&&v(e)}}}function $t(s){let e,t,n="App version:",a,l,r=s[7].currentVersion+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1puluil"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","info-label svelte-1rfvmhm"),d(l,"class","info-value svelte-1rfvmhm"),d(e,"class","info-row svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&128&&r!==(r=c[7].currentVersion+"")&&se(f,r)},d(c){c&&v(e)}}}function Mn(s){let e;return{c(){e=O("‚úì")},l(t){e=M(t,"‚úì")},m(t,n){P(t,e,n)},d(t){t&&v(e)}}}function On(s){let e;return{c(){e=O("‚Üª")},l(t){e=M(t,"‚Üª")},m(t,n){P(t,e,n)},d(t){t&&v(e)}}}function Rn(s){let e;return{c(){e=O("‚ö†")},l(t){e=M(t,"‚ö†")},m(t,n){P(t,e,n)},d(t){t&&v(e)}}}function Ln(s){let e;return{c(){e=O("‚Üª")},l(t){e=M(t,"‚Üª")},m(t,n){P(t,e,n)},d(t){t&&v(e)}}}function Fn(s){let e,t="‚¨ÜÔ∏è";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-gs1zbm"&&(e.textContent=t),this.h()},h(){d(e,"class","sync-badge update-badge svelte-1rfvmhm")},m(n,a){P(n,e,a)},p:Ce,d(n){n&&v(e)}}}function jn(s){let e,t=s[1].pendingCount+s[1].conflictCount+"",n;return{c(){e=h("span"),n=O(t),this.h()},l(a){e=p(a,"SPAN",{class:!0});var l=C(e);n=M(l,t),l.forEach(v),this.h()},h(){d(e,"class","sync-badge svelte-1rfvmhm")},m(a,l){P(a,e,l),o(e,n)},p(a,l){l[0]&2&&t!==(t=a[1].pendingCount+a[1].conflictCount+"")&&se(n,t)},d(a){a&&v(e)}}}function es(s){let e,t,n,a,l="Resolve Conflicts",r,f,c="√ó",i,u,y,m,_=Le(s[6]),g=[];for(let S=0;S<_.length;S+=1)g[S]=ss(Gt(s,_,S));let b=null;return _.length||(b=ts()),{c(){e=h("div"),t=h("div"),n=h("div"),a=h("h3"),a.textContent=l,r=k(),f=h("button"),f.textContent=c,i=k(),u=h("div");for(let S=0;S<g.length;S+=1)g[S].c();b&&b.c(),this.h()},l(S){e=p(S,"DIV",{class:!0});var E=C(e);t=p(E,"DIV",{class:!0});var I=C(t);n=p(I,"DIV",{class:!0});var D=C(n);a=p(D,"H3",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-ssejbn"&&(a.textContent=l),r=w(D),f=p(D,"BUTTON",{class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1rm4pf7"&&(f.textContent=c),D.forEach(v),i=w(I),u=p(I,"DIV",{class:!0});var A=C(u);for(let z=0;z<g.length;z+=1)g[z].l(A);b&&b.l(A),A.forEach(v),I.forEach(v),E.forEach(v),this.h()},h(){d(a,"class","svelte-1rfvmhm"),d(f,"class","close-btn svelte-1rfvmhm"),d(n,"class","modal-header svelte-1rfvmhm"),d(u,"class","conflict-list svelte-1rfvmhm"),d(t,"class","modal-content svelte-1rfvmhm"),d(e,"class","modal-overlay svelte-1rfvmhm")},m(S,E){P(S,e,E),o(e,t),o(t,n),o(n,a),o(n,r),o(n,f),o(t,i),o(t,u);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(u,null);b&&b.m(u,null),y||(m=[re(f,"click",s[31]),re(t,"click",Je(s[29])),re(e,"click",s[34])],y=!0)},p(S,E){if(E[0]&16777280){_=Le(S[6]);let I;for(I=0;I<_.length;I+=1){const D=Gt(S,_,I);g[I]?g[I].p(D,E):(g[I]=ss(D),g[I].c(),g[I].m(u,null))}for(;I<g.length;I+=1)g[I].d(1);g.length=_.length,!_.length&&b?b.p(S,E):_.length?b&&(b.d(1),b=null):(b=ts(),b.c(),b.m(u,null))}},d(S){S&&v(e),rt(g,S),b&&b.d(),y=!1,ke(m)}}}function ts(s){let e,t="No conflicts to resolve";return{c(){e=h("p"),e.textContent=t,this.h()},l(n){e=p(n,"P",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-mptbgj"&&(e.textContent=t),this.h()},h(){d(e,"class","no-conflicts svelte-1rfvmhm")},m(n,a){P(n,e,a)},p:Ce,d(n){n&&v(e)}}}function ss(s){let e,t,n,a=s[48].type+"",l,r,f,c=s[48].id.slice(0,8)+"",i,u,y,m,_=s[48].content.slice(0,100)+"",g,b,S,E,I,D="Keep Local",A,z,G="Keep Server",R,L,T;function j(){return s[32](s[48])}function Z(){return s[33](s[48])}return{c(){e=h("div"),t=h("div"),n=h("span"),l=O(a),r=k(),f=h("span"),i=O(c),u=O("..."),y=k(),m=h("div"),g=O(_),b=O("..."),S=k(),E=h("div"),I=h("button"),I.textContent=D,A=k(),z=h("button"),z.textContent=G,R=k(),this.h()},l(H){e=p(H,"DIV",{class:!0});var U=C(e);t=p(U,"DIV",{class:!0});var x=C(t);n=p(x,"SPAN",{class:!0});var te=C(n);l=M(te,a),te.forEach(v),r=w(x),f=p(x,"SPAN",{class:!0});var ne=C(f);i=M(ne,c),u=M(ne,"..."),ne.forEach(v),x.forEach(v),y=w(U),m=p(U,"DIV",{class:!0});var J=C(m);g=M(J,_),b=M(J,"..."),J.forEach(v),S=w(U),E=p(U,"DIV",{class:!0});var ee=C(E);I=p(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),V(I)!=="svelte-ve0hxt"&&(I.textContent=D),A=w(ee),z=p(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),V(z)!=="svelte-17s6h79"&&(z.textContent=G),ee.forEach(v),R=w(U),U.forEach(v),this.h()},h(){d(n,"class","conflict-type svelte-1rfvmhm"),d(f,"class","conflict-id svelte-1rfvmhm"),d(t,"class","conflict-info svelte-1rfvmhm"),d(m,"class","conflict-preview svelte-1rfvmhm"),d(I,"class","btn-local svelte-1rfvmhm"),d(z,"class","btn-server svelte-1rfvmhm"),d(E,"class","conflict-actions svelte-1rfvmhm"),d(e,"class","conflict-item svelte-1rfvmhm")},m(H,U){P(H,e,U),o(e,t),o(t,n),o(n,l),o(t,r),o(t,f),o(f,i),o(f,u),o(e,y),o(e,m),o(m,g),o(m,b),o(e,S),o(e,E),o(E,I),o(E,A),o(E,z),o(e,R),L||(T=[re(I,"click",j),re(z,"click",Z)],L=!0)},p(H,U){s=H,U[0]&64&&a!==(a=s[48].type+"")&&se(l,a),U[0]&64&&c!==(c=s[48].id.slice(0,8)+"")&&se(i,c),U[0]&64&&_!==(_=s[48].content.slice(0,100)+"")&&se(g,_)},d(H){H&&v(e),L=!1,ke(T)}}}function ns(s){let e,t,n,a,l="App Update Available",r,f,c="√ó",i,u,y,m,_,g="Current",b,S,E,I=s[7].currentVersion+"",D,A,z,G="‚Üí",R,L,T,j="New",Z,H,U,x=s[7].latestVersion+"",te,ne,J,ee,q,K,B,W,$="Download Update",F,Y,X="Remind Me Later",oe,pe,he="The download will open in your browser. After downloading, open the APK to install.",fe,ye,ve=s[7].releaseNotes&&s[7].releaseNotes!=="No release notes provided."&&ls(s),ue=s[7].fileSize&&rs(s),Q=s[7].lastChecked&&as(s);return{c(){e=h("div"),t=h("div"),n=h("div"),a=h("h3"),a.textContent=l,r=k(),f=h("button"),f.textContent=c,i=k(),u=h("div"),y=h("div"),m=h("div"),_=h("span"),_.textContent=g,b=k(),S=h("span"),E=O("v"),D=O(I),A=k(),z=h("span"),z.textContent=G,R=k(),L=h("div"),T=h("span"),T.textContent=j,Z=k(),H=h("span"),U=O("v"),te=O(x),ne=k(),ve&&ve.c(),J=k(),ee=h("div"),ue&&ue.c(),q=k(),Q&&Q.c(),K=k(),B=h("div"),W=h("button"),W.textContent=$,F=k(),Y=h("button"),Y.textContent=X,oe=k(),pe=h("p"),pe.textContent=he,this.h()},l(ie){e=p(ie,"DIV",{class:!0});var N=C(e);t=p(N,"DIV",{class:!0});var ae=C(t);n=p(ae,"DIV",{class:!0});var _e=C(n);a=p(_e,"H3",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-1ghvg4j"&&(a.textContent=l),r=w(_e),f=p(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1bnrkxc"&&(f.textContent=c),_e.forEach(v),i=w(ae),u=p(ae,"DIV",{class:!0});var ce=C(u);y=p(ce,"DIV",{class:!0});var le=C(y);m=p(le,"DIV",{class:!0});var de=C(m);_=p(de,"SPAN",{class:!0,"data-svelte-h":!0}),V(_)!=="svelte-5cqftx"&&(_.textContent=g),b=w(de),S=p(de,"SPAN",{class:!0});var me=C(S);E=M(me,"v"),D=M(me,I),me.forEach(v),de.forEach(v),A=w(le),z=p(le,"SPAN",{class:!0,"data-svelte-h":!0}),V(z)!=="svelte-14svkan"&&(z.textContent=G),R=w(le),L=p(le,"DIV",{class:!0});var Se=C(L);T=p(Se,"SPAN",{class:!0,"data-svelte-h":!0}),V(T)!=="svelte-13hzjlo"&&(T.textContent=j),Z=w(Se),H=p(Se,"SPAN",{class:!0});var ze=C(H);U=M(ze,"v"),te=M(ze,x),ze.forEach(v),Se.forEach(v),le.forEach(v),ne=w(ce),ve&&ve.l(ce),J=w(ce),ee=p(ce,"DIV",{class:!0});var Pe=C(ee);ue&&ue.l(Pe),q=w(Pe),Q&&Q.l(Pe),Pe.forEach(v),K=w(ce),B=p(ce,"DIV",{class:!0});var Ee=C(B);W=p(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),V(W)!=="svelte-udp234"&&(W.textContent=$),F=w(Ee),Y=p(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),V(Y)!=="svelte-1bgdh8u"&&(Y.textContent=X),Ee.forEach(v),oe=w(ce),pe=p(ce,"P",{class:!0,"data-svelte-h":!0}),V(pe)!=="svelte-777xdp"&&(pe.textContent=he),ce.forEach(v),ae.forEach(v),N.forEach(v),this.h()},h(){d(a,"class","svelte-1rfvmhm"),d(f,"class","close-btn svelte-1rfvmhm"),d(n,"class","modal-header svelte-1rfvmhm"),d(_,"class","version-label svelte-1rfvmhm"),d(S,"class","version-number svelte-1rfvmhm"),d(m,"class","version-badge current svelte-1rfvmhm"),d(z,"class","version-arrow svelte-1rfvmhm"),d(T,"class","version-label svelte-1rfvmhm"),d(H,"class","version-number svelte-1rfvmhm"),d(L,"class","version-badge new svelte-1rfvmhm"),d(y,"class","version-info svelte-1rfvmhm"),d(ee,"class","update-meta svelte-1rfvmhm"),d(W,"class","btn-download svelte-1rfvmhm"),d(Y,"class","btn-later svelte-1rfvmhm"),d(B,"class","update-modal-actions svelte-1rfvmhm"),d(pe,"class","update-note svelte-1rfvmhm"),d(u,"class","update-modal-body svelte-1rfvmhm"),d(t,"class","modal-content update-modal svelte-1rfvmhm"),d(e,"class","modal-overlay svelte-1rfvmhm")},m(ie,N){P(ie,e,N),o(e,t),o(t,n),o(n,a),o(n,r),o(n,f),o(t,i),o(t,u),o(u,y),o(y,m),o(m,_),o(m,b),o(m,S),o(S,E),o(S,D),o(y,A),o(y,z),o(y,R),o(y,L),o(L,T),o(L,Z),o(L,H),o(H,U),o(H,te),o(u,ne),ve&&ve.m(u,null),o(u,J),o(u,ee),ue&&ue.m(ee,null),o(ee,q),Q&&Q.m(ee,null),o(u,K),o(u,B),o(B,W),o(B,F),o(B,Y),o(u,oe),o(u,pe),fe||(ye=[re(f,"click",s[35]),re(W,"click",s[21]),re(Y,"click",s[22]),re(t,"click",Je(s[28])),re(e,"click",s[36])],fe=!0)},p(ie,N){N[0]&128&&I!==(I=ie[7].currentVersion+"")&&se(D,I),N[0]&128&&x!==(x=ie[7].latestVersion+"")&&se(te,x),ie[7].releaseNotes&&ie[7].releaseNotes!=="No release notes provided."?ve?ve.p(ie,N):(ve=ls(ie),ve.c(),ve.m(u,J)):ve&&(ve.d(1),ve=null),ie[7].fileSize?ue?ue.p(ie,N):(ue=rs(ie),ue.c(),ue.m(ee,q)):ue&&(ue.d(1),ue=null),ie[7].lastChecked?Q?Q.p(ie,N):(Q=as(ie),Q.c(),Q.m(ee,null)):Q&&(Q.d(1),Q=null)},d(ie){ie&&v(e),ve&&ve.d(),ue&&ue.d(),Q&&Q.d(),fe=!1,ke(ye)}}}function ls(s){let e,t,n="What's New",a,l,r=s[7].releaseNotes+"",f;return{c(){e=h("div"),t=h("h4"),t.textContent=n,a=k(),l=h("p"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"H4",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-bt97ng"&&(t.textContent=n),a=w(i),l=p(i,"P",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","svelte-1rfvmhm"),d(l,"class","svelte-1rfvmhm"),d(e,"class","release-notes svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&128&&r!==(r=c[7].releaseNotes+"")&&se(f,r)},d(c){c&&v(e)}}}function rs(s){let e,t,n="Download size:",a,l,r=xe(s[7].fileSize)+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-2qb6ck"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","meta-label svelte-1rfvmhm"),d(l,"class","meta-value svelte-1rfvmhm"),d(e,"class","meta-item svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&128&&r!==(r=xe(c[7].fileSize)+"")&&se(f,r)},d(c){c&&v(e)}}}function as(s){let e,t,n="Checked:",a,l,r=Fe(s[7].lastChecked)+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1m68rws"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","meta-label svelte-1rfvmhm"),d(l,"class","meta-value svelte-1rfvmhm"),d(e,"class","meta-item svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&128&&r!==(r=Fe(c[7].lastChecked)+"")&&se(f,r)},d(c){c&&v(e)}}}function os(s){let e,t,n,a,l=s[17].success?"‚úÖ Sync Complete":"‚ùå Sync Failed",r,f,c,i="√ó",u,y,m,_,g,b=new Date(s[17].timestamp).toLocaleString()+"",S,E,I,D,A="OK",z,G;function R(j,Z){return j[17].success?Hn:Bn}let L=R(s),T=L(s);return{c(){e=h("div"),t=h("div"),n=h("div"),a=h("h3"),r=O(l),f=k(),c=h("button"),c.textContent=i,u=k(),y=h("div"),T.c(),m=k(),_=h("div"),g=O("Completed: "),S=O(b),E=k(),I=h("div"),D=h("button"),D.textContent=A,this.h()},l(j){e=p(j,"DIV",{class:!0});var Z=C(e);t=p(Z,"DIV",{class:!0});var H=C(t);n=p(H,"DIV",{class:!0});var U=C(n);a=p(U,"H3",{class:!0});var x=C(a);r=M(x,l),x.forEach(v),f=w(U),c=p(U,"BUTTON",{class:!0,"data-svelte-h":!0}),V(c)!=="svelte-s9olez"&&(c.textContent=i),U.forEach(v),u=w(H),y=p(H,"DIV",{class:!0});var te=C(y);T.l(te),m=w(te),_=p(te,"DIV",{class:!0});var ne=C(_);g=M(ne,"Completed: "),S=M(ne,b),ne.forEach(v),te.forEach(v),E=w(H),I=p(H,"DIV",{class:!0});var J=C(I);D=p(J,"BUTTON",{class:!0,"data-svelte-h":!0}),V(D)!=="svelte-ix6tqg"&&(D.textContent=A),J.forEach(v),H.forEach(v),Z.forEach(v),this.h()},h(){d(a,"class","svelte-1rfvmhm"),d(c,"class","close-btn svelte-1rfvmhm"),d(n,"class","modal-header svelte-1rfvmhm"),d(_,"class","sync-timestamp svelte-1rfvmhm"),d(y,"class","sync-report-content svelte-1rfvmhm"),d(D,"class","btn-primary svelte-1rfvmhm"),d(I,"class","modal-actions svelte-1rfvmhm"),d(t,"class","modal-content sync-report-modal svelte-1rfvmhm"),d(e,"class","modal-overlay svelte-1rfvmhm")},m(j,Z){P(j,e,Z),o(e,t),o(t,n),o(n,a),o(a,r),o(n,f),o(n,c),o(t,u),o(t,y),T.m(y,null),o(y,m),o(y,_),o(_,g),o(_,S),o(t,E),o(t,I),o(I,D),z||(G=[re(c,"click",s[37]),re(D,"click",s[38]),re(t,"click",Je(s[27])),re(e,"click",s[39])],z=!0)},p(j,Z){Z[0]&131072&&l!==(l=j[17].success?"‚úÖ Sync Complete":"‚ùå Sync Failed")&&se(r,l),L===(L=R(j))&&T?T.p(j,Z):(T.d(1),T=L(j),T&&(T.c(),T.m(y,m))),Z[0]&131072&&b!==(b=new Date(j[17].timestamp).toLocaleString()+"")&&se(S,b)},d(j){j&&v(e),T.d(),z=!1,ke(G)}}}function Bn(s){let e,t,n="Error:",a,l,r=(s[17].error||"Unknown error occurred")+"",f,c,i,u="Please check your sync server settings and try again.";return{c(){e=h("div"),t=h("p"),t.textContent=n,a=k(),l=h("p"),f=O(r),c=k(),i=h("p"),i.textContent=u,this.h()},l(y){e=p(y,"DIV",{class:!0});var m=C(e);t=p(m,"P",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-afcafm"&&(t.textContent=n),a=w(m),l=p(m,"P",{class:!0});var _=C(l);f=M(_,r),_.forEach(v),m.forEach(v),c=w(y),i=p(y,"P",{class:!0,"data-svelte-h":!0}),V(i)!=="svelte-mghmlh"&&(i.textContent=u),this.h()},h(){d(t,"class","error-label svelte-1rfvmhm"),d(l,"class","error-message svelte-1rfvmhm"),d(e,"class","error-details svelte-1rfvmhm"),d(i,"class","sync-error-hint svelte-1rfvmhm")},m(y,m){P(y,e,m),o(e,t),o(e,a),o(e,l),o(l,f),P(y,c,m),P(y,i,m)},p(y,m){m[0]&131072&&r!==(r=(y[17].error||"Unknown error occurred")+"")&&se(f,r)},d(y){y&&(v(e),v(c),v(i))}}}function Hn(s){let e,t,n,a,l,r="Your profile has been synced successfully from the remote server.",f=s[17].profileFiles!==void 0&&is(s),c=s[17].memoriesImported!==void 0&&cs(s),i=s[17].credentialsSynced&&fs();return{c(){e=h("div"),f&&f.c(),t=k(),c&&c.c(),n=k(),i&&i.c(),a=k(),l=h("p"),l.textContent=r,this.h()},l(u){e=p(u,"DIV",{class:!0});var y=C(e);f&&f.l(y),t=w(y),c&&c.l(y),n=w(y),i&&i.l(y),y.forEach(v),a=w(u),l=p(u,"P",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-10wdqc3"&&(l.textContent=r),this.h()},h(){d(e,"class","report-stats svelte-1rfvmhm"),d(l,"class","sync-success-message svelte-1rfvmhm")},m(u,y){P(u,e,y),f&&f.m(e,null),o(e,t),c&&c.m(e,null),o(e,n),i&&i.m(e,null),P(u,a,y),P(u,l,y)},p(u,y){u[17].profileFiles!==void 0?f?f.p(u,y):(f=is(u),f.c(),f.m(e,t)):f&&(f.d(1),f=null),u[17].memoriesImported!==void 0?c?c.p(u,y):(c=cs(u),c.c(),c.m(e,n)):c&&(c.d(1),c=null),u[17].credentialsSynced?i||(i=fs(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(u){u&&(v(e),v(a),v(l)),f&&f.d(),c&&c.d(),i&&i.d()}}}function is(s){let e,t,n="Profile files imported:",a,l,r=s[17].profileFiles+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-yeuhk6"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","stat-label svelte-1rfvmhm"),d(l,"class","stat-value svelte-1rfvmhm"),d(e,"class","stat-item svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&131072&&r!==(r=c[17].profileFiles+"")&&se(f,r)},d(c){c&&v(e)}}}function cs(s){let e,t,n="Memories synced:",a,l,r=s[17].memoriesImported+"",f;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=k(),l=h("span"),f=O(r),this.h()},l(c){e=p(c,"DIV",{class:!0});var i=C(e);t=p(i,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-u27u8j"&&(t.textContent=n),a=w(i),l=p(i,"SPAN",{class:!0});var u=C(l);f=M(u,r),u.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","stat-label svelte-1rfvmhm"),d(l,"class","stat-value svelte-1rfvmhm"),d(e,"class","stat-item svelte-1rfvmhm")},m(c,i){P(c,e,i),o(e,t),o(e,a),o(e,l),o(l,f)},p(c,i){i[0]&131072&&r!==(r=c[17].memoriesImported+"")&&se(f,r)},d(c){c&&v(e)}}}function fs(s){let e,t='<span class="stat-label svelte-1rfvmhm">Credentials:</span> <span class="stat-value svelte-1rfvmhm">‚úì Synced</span>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1j6d5ob"&&(e.innerHTML=t),this.h()},h(){d(e,"class","stat-item svelte-1rfvmhm")},m(n,a){P(n,e,a)},d(n){n&&v(e)}}}function qn(s){let e,t,n,a,l,r,f;function c(g,b){return g[0]?Nn:An}let i=c(s),u=i(s),y=s[5]&&es(s),m=s[9]&&s[7]&&ns(s);a=new Dn({props:{isOpen:s[11],isSyncing:s[4],syncProgress:s[12]}}),a.$on("sync",s[19]),a.$on("close",s[20]);let _=s[16]&&s[17]&&os(s);return{c(){u.c(),e=k(),y&&y.c(),t=k(),m&&m.c(),n=k(),Rs(a.$$.fragment),l=k(),_&&_.c(),r=Ne()},l(g){u.l(g),e=w(g),y&&y.l(g),t=w(g),m&&m.l(g),n=w(g),Os(a.$$.fragment,g),l=w(g),_&&_.l(g),r=Ne()},m(g,b){u.m(g,b),P(g,e,b),y&&y.m(g,b),P(g,t,b),m&&m.m(g,b),P(g,n,b),Ms(a,g,b),P(g,l,b),_&&_.m(g,b),P(g,r,b),f=!0},p(g,b){i===(i=c(g))&&u?u.p(g,b):(u.d(1),u=i(g),u&&(u.c(),u.m(e.parentNode,e))),g[5]?y?y.p(g,b):(y=es(g),y.c(),y.m(t.parentNode,t)):y&&(y.d(1),y=null),g[9]&&g[7]?m?m.p(g,b):(m=ns(g),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null);const S={};b[0]&2048&&(S.isOpen=g[11]),b[0]&16&&(S.isSyncing=g[4]),b[0]&4096&&(S.syncProgress=g[12]),a.$set(S),g[16]&&g[17]?_?_.p(g,b):(_=os(g),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},i(g){f||(Vs(a.$$.fragment,g),f=!0)},o(g){Us(a.$$.fragment,g),f=!1},d(g){g&&(v(e),v(t),v(n),v(l),v(r)),u.d(g),y&&y.d(g),m&&m.d(g),Ts(a,g),_&&_.d(g)}}}function Fe(s){if(!s)return"Never";const e=new Date(s),n=new Date().getTime()-e.getTime(),a=Math.floor(n/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:e.toLocaleDateString()}function Kn(s,e,t){let{compact:n=!1}=e,a={lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1},l=!1,r=!1,f=!1,c=!1,i=[],u=null,y=!1,m=!1,_=!1,g=!1,b=null,S=!1,E=null,I=null,D=!1,A=null;const z=be.subscribe(Q=>{t(1,a=Q),t(4,f=Q.isSyncing)}),G=Ks.subscribe(Q=>t(2,l=Q)),R=Js.subscribe(Q=>t(3,r=Q)),L=Ue.subscribe(Q=>t(7,u=Q)),T=vt.subscribe(Q=>t(8,y=Q));_s(async()=>{t(10,_=us()),await xs(),await j()});async function j(){try{const Q=await Ds();t(13,S=Q.configured),t(14,E=Q.serverUrl||null),t(15,I=Q.lastSyncAt||null)}catch(Q){console.warn("[SyncStatus] Failed to load remote config:",Q)}}hs(()=>{z(),G(),R(),L(),T(),en()});function Z(){f||t(11,g=!0)}async function H(Q){if(f)return;const{options:ie}=Q.detail;console.log("[SyncStatus] Starting sync with options:",ie),t(4,f=!0),t(12,b=null);try{const N=ie.includes("memories"),ae=ie.includes("config");console.log("[SyncStatus] Calling syncFromRemoteServer...");const _e=await zs(ce=>{t(12,b={current:ce.current||0,total:ce.total||1,category:ce.message})},{includeMemories:N,includeCredentials:ae,priorityOnly:!0});if(t(17,A={success:_e.success,profileFiles:_e.profileFiles,memoriesImported:_e.memoriesImported,credentialsSynced:_e.credentialsSynced,error:_e.error,timestamp:new Date().toISOString()}),t(16,D=!0),_e.success?console.log("[SyncStatus] Sync complete:",_e):console.error("[SyncStatus] Sync failed:",_e.error),ie.includes("update")&&_)try{const ce=await je("syncServerUrl","https://mh.dndiy.org");await sn(ce)}catch(ce){console.warn("[SyncStatus] Update check failed:",ce)}}catch(N){t(17,A={success:!1,error:N.message,timestamp:new Date().toISOString()}),t(16,D=!0),console.error("[SyncStatus] Sync error:",N)}finally{t(4,f=!1),t(12,b=null),t(11,g=!1)}}async function U(){f||(t(11,g=!1),await j())}async function x(){await nn(),t(9,m=!1)}function te(){ln(),t(9,m=!1)}async function ne(){t(6,i=await Ct()),t(5,c=!0)}async function J(Q,ie){await Zs({memoryId:Q,resolution:ie}),t(6,i=await Ct()),i.length===0&&t(5,c=!1)}function ee(){return f?"syncing":r?"conflict":l?"pending":"synced"}function q(){switch(ee()){case"synced":return"#22c55e";case"pending":return"#f59e0b";case"conflict":return"#ef4444";case"syncing":return"#3b82f6";case"offline":return"#6b7280"}}function K(){switch(ee()){case"synced":return"Synced";case"pending":return`${a.pendingCount} pending`;case"conflict":return`${a.conflictCount} conflict${a.conflictCount>1?"s":""}`;case"syncing":return"Syncing...";case"offline":return"Offline"}}function B(Q){qe.call(this,s,Q)}function W(Q){qe.call(this,s,Q)}function $(Q){qe.call(this,s,Q)}const F=()=>t(9,m=!0),Y=()=>t(5,c=!1),X=Q=>J(Q.id,"keep-local"),oe=Q=>J(Q.id,"keep-server"),pe=()=>t(5,c=!1),he=()=>t(9,m=!1),fe=()=>t(9,m=!1),ye=()=>t(16,D=!1),ve=()=>t(16,D=!1),ue=()=>t(16,D=!1);return s.$$set=Q=>{"compact"in Q&&t(0,n=Q.compact)},[n,a,l,r,f,c,i,u,y,m,_,g,b,S,E,I,D,A,Z,H,U,x,te,ne,J,q,K,B,W,$,F,Y,X,oe,pe,he,fe,ye,ve,ue]}class nl extends vs{constructor(e){super(),ms(this,e,Kn,qn,ps,{compact:0},null,[-1,-1])}}export{nl as S,Es as a,$n as b,Xn as c,Zn as d,el as e,sl as f,He as g,tl as i,xn as s,rn as u};
