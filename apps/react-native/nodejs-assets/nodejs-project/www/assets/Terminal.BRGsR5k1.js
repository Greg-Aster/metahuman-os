import{S as de,i as fe,s as he,r as K,n as Y,d as m,u as ue,v as pe,z as ee,a as z,b as c,x as Q,c as g,O as me,e as y,f as V,h as A,g as G,q as R,j as k,k as L,t as q,o as _e,Q as be,l as ge,R as te,M as le,p as W}from"./api-config.B-uR5Kyo.js";function se(a,e,s){const t=a.slice();return t[18]=e[s],t}function ae(a,e,s){const t=a.slice();return t[21]=e[s],t}function re(a){let e,s=a[21].label+"",t,l,n;function r(){return a[11](a[21])}return{c(){e=k("button"),t=q(s),this.h()},l(o){e=y(o,"BUTTON",{class:!0});var _=V(e);t=R(_,s),_.forEach(m),this.h()},h(){g(e,"class","px-3 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition"),e.disabled=a[3]},m(o,_){z(o,e,_),c(e,t),l||(n=Q(e,"click",r),l=!0)},p(o,_){a=o,_&8&&(e.disabled=a[3])},d(o){o&&m(e),l=!1,n()}}}function ve(a){let e,s=K(a[0]),t=[];for(let l=0;l<s.length;l+=1)t[l]=ie(se(a,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=le()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);e=le()},m(l,n){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(l,n);z(l,e,n)},p(l,n){if(n&1){s=K(l[0]);let r;for(r=0;r<s.length;r+=1){const o=se(l,s,r);t[r]?t[r].p(o,n):(t[r]=ie(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&m(e),ue(t,l)}}}function ye(a){let e,s='<p>MetaHuman OS Terminal</p> <p class="mt-4">This is a direct interface to the &#39;mh&#39; command-line tool.</p> <p class="mt-2">Use <span class="text-blue-400">chat</span> for inner dialogue (persona-aware).</p> <p>Use <span class="text-blue-400">ollama chat &lt;model&gt;</span> to talk directly to a raw AI model.</p> <p class="mt-2">Try the quick commands above or type &#39;help&#39; for a full command list.</p>';return{c(){e=k("div"),e.innerHTML=s,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-mfz7z"&&(e.innerHTML=s),this.h()},h(){g(e,"class","text-gray-500")},m(t,l){z(t,e,l)},p:Y,d(t){t&&m(e)}}}function ne(a){let e,s=a[18].output+"",t,l;return{c(){e=k("pre"),t=q(s),this.h()},l(n){e=y(n,"PRE",{class:!0});var r=V(e);t=R(r,s),r.forEach(m),this.h()},h(){g(e,"class",l="mt-1 whitespace-pre-wrap break-words overflow-x-auto "+(a[18].success?"text-green-400":"text-yellow-400"))},m(n,r){z(n,e,r),c(e,t)},p(n,r){r&1&&s!==(s=n[18].output+"")&&W(t,s),r&1&&l!==(l="mt-1 whitespace-pre-wrap break-words overflow-x-auto "+(n[18].success?"text-green-400":"text-yellow-400"))&&g(e,"class",l)},d(n){n&&m(e)}}}function oe(a){let e,s=a[18].error+"",t;return{c(){e=k("pre"),t=q(s),this.h()},l(l){e=y(l,"PRE",{class:!0});var n=V(e);t=R(n,s),n.forEach(m),this.h()},h(){g(e,"class","mt-1 text-red-400 whitespace-pre-wrap break-words overflow-x-auto")},m(l,n){z(l,e,n),c(e,t)},p(l,n){n&1&&s!==(s=l[18].error+"")&&W(t,s)},d(l){l&&m(e)}}}function ie(a){let e,s,t,l,n=a[18].timestamp.toLocaleTimeString()+"",r,o,_,E,w,I=a[18].command+"",T,x,S,H,h=a[18].output&&ne(a),i=a[18].error&&oe(a);return{c(){e=k("div"),s=k("div"),t=k("span"),l=q("["),r=q(n),o=q("]"),_=L(),E=k("span"),w=q("$ "),T=q(I),x=L(),h&&h.c(),S=L(),i&&i.c(),H=L(),this.h()},l(v){e=y(v,"DIV",{class:!0});var f=V(e);s=y(f,"DIV",{class:!0});var P=V(s);t=y(P,"SPAN",{class:!0});var u=V(t);l=R(u,"["),r=R(u,n),o=R(u,"]"),u.forEach(m),_=A(P),E=y(P,"SPAN",{class:!0});var N=V(E);w=R(N,"$ "),T=R(N,I),N.forEach(m),P.forEach(m),x=A(f),h&&h.l(f),S=A(f),i&&i.l(f),H=A(f),f.forEach(m),this.h()},h(){g(t,"class","text-gray-500"),g(E,"class","ml-2"),g(s,"class","text-blue-400"),g(e,"class","mb-4")},m(v,f){z(v,e,f),c(e,s),c(s,t),c(t,l),c(t,r),c(t,o),c(s,_),c(s,E),c(E,w),c(E,T),c(e,x),h&&h.m(e,null),c(e,S),i&&i.m(e,null),c(e,H)},p(v,f){f&1&&n!==(n=v[18].timestamp.toLocaleTimeString()+"")&&W(r,n),f&1&&I!==(I=v[18].command+"")&&W(T,I),v[18].output?h?h.p(v,f):(h=ne(v),h.c(),h.m(e,S)):h&&(h.d(1),h=null),v[18].error?i?i.p(v,f):(i=oe(v),i.c(),i.m(e,H)):i&&(i.d(1),i=null)},d(v){v&&m(e),h&&h.d(),i&&i.d()}}}function ce(a){let e,s="...";return{c(){e=k("div"),e.textContent=s,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1yj6uc5"&&(e.textContent=s),this.h()},h(){g(e,"class","animate-pulse text-gray-500")},m(t,l){z(t,e,l)},d(t){t&&m(e)}}}function ke(a){let e,s,t,l,n="Clear",r,o,_,E,w,I,T,x,S,H="mh",h,i,v,f,P,u,N,J,j=K(a[8]),b=[];for(let d=0;d<j.length;d+=1)b[d]=re(ae(a,j,d));function F(d,D){return d[0].length===0?ye:ve}let U=F(a),O=U(a),C=a[3]&&ce();return{c(){e=k("div"),s=k("div");for(let d=0;d<b.length;d+=1)b[d].c();t=L(),l=k("button"),l.textContent=n,r=L(),o=k("div"),O.c(),_=L(),C&&C.c(),E=L(),w=k("div"),I=L(),T=k("div"),x=k("div"),S=k("span"),S.textContent=H,h=L(),i=k("input"),v=L(),f=k("button"),P=q("Run"),this.h()},l(d){e=y(d,"DIV",{class:!0});var D=V(e);s=y(D,"DIV",{class:!0});var p=V(s);for(let X=0;X<b.length;X+=1)b[X].l(p);t=A(p),l=y(p,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-gctew2"&&(l.textContent=n),p.forEach(m),r=A(D),o=y(D,"DIV",{class:!0});var M=V(o);O.l(M),_=A(M),C&&C.l(M),E=A(M),w=y(M,"DIV",{style:!0}),V(w).forEach(m),M.forEach(m),I=A(D),T=y(D,"DIV",{class:!0});var Z=V(T);x=y(Z,"DIV",{class:!0});var B=V(x);S=y(B,"SPAN",{class:!0,"data-svelte-h":!0}),G(S)!=="svelte-uyv13v"&&(S.textContent=H),h=A(B),i=y(B,"INPUT",{type:!0,placeholder:!0,class:!0}),v=A(B),f=y(B,"BUTTON",{class:!0});var $=V(f);P=R($,"Run"),$.forEach(m),B.forEach(m),Z.forEach(m),D.forEach(m),this.h()},h(){g(l,"class","px-3 py-1 text-xs bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 rounded transition ml-auto"),g(s,"class","flex gap-2 p-3 border-b border-gray-200 dark:border-gray-700 flex-wrap"),me(w,"height","1px"),g(o,"class","flex-1 overflow-y-auto p-4 font-mono text-sm bg-black text-green-400"),g(S,"class","text-gray-500"),g(i,"type","text"),g(i,"placeholder","type command here (e.g., status, task, ollama status)"),i.disabled=a[3],g(i,"class","flex-1 bg-transparent border-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400"),f.disabled=u=!a[2].trim()||a[3],g(f,"class","px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"),g(x,"class","flex items-center gap-2 font-mono text-sm"),g(T,"class","p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"),g(e,"class","terminal-container h-full flex flex-col svelte-2oovrn")},m(d,D){z(d,e,D),c(e,s);for(let p=0;p<b.length;p+=1)b[p]&&b[p].m(s,null);c(s,t),c(s,l),c(e,r),c(e,o),O.m(o,null),c(o,_),C&&C.m(o,null),c(o,E),c(o,w),a[12](w),a[13](o),c(e,I),c(e,T),c(T,x),c(x,S),c(x,h),c(x,i),ee(i,a[2]),c(x,v),c(x,f),c(f,P),N||(J=[Q(l,"click",a[7]),Q(i,"input",a[14]),Q(i,"keydown",a[6]),Q(f,"click",a[5])],N=!0)},p(d,[D]){if(D&776){j=K(d[8]);let p;for(p=0;p<j.length;p+=1){const M=ae(d,j,p);b[p]?b[p].p(M,D):(b[p]=re(M),b[p].c(),b[p].m(s,t))}for(;p<b.length;p+=1)b[p].d(1);b.length=j.length}U===(U=F(d))&&O?O.p(d,D):(O.d(1),O=U(d),O&&(O.c(),O.m(o,_))),d[3]?C||(C=ce(),C.c(),C.m(o,E)):C&&(C.d(1),C=null),D&8&&(i.disabled=d[3]),D&4&&i.value!==d[2]&&ee(i,d[2]),D&12&&u!==(u=!d[2].trim()||d[3])&&(f.disabled=u)},i:Y,o:Y,d(d){d&&m(e),ue(b,d),O.d(),C&&C.d(),a[12](null),a[13](null),N=!1,pe(J)}}}function we(a,e,s){let t="",l=[],n=[],r=-1,o=!1,_,E=!0,w,I=null;_e(()=>{_&&w&&(I=new IntersectionObserver(u=>{const N=u[0];s(10,E=N.isIntersecting)},{root:_,threshold:.99}),I.observe(w))}),be(()=>{I?.disconnect(),I=null});async function T(){if(!t.trim()||o)return;const u=t.trim(),N=u.split(" "),J=N[0],j=N.slice(1);n.push(u),r=n.length;const b=t;s(2,t=""),s(3,o=!0),s(0,l=[...l,{command:`mh ${b}`,output:"Executing...",timestamp:new Date,success:!0}]);try{const U=await(await ge("/api/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:J,args:j})})).json();s(0,l[l.length-1]={command:U.command||`mh ${b}`,output:U.stdout||U.error||"No output",error:U.stderr,timestamp:new Date,success:U.success},l),s(0,l=[...l])}catch(F){s(0,l[l.length-1]={command:`mh ${b}`,output:"",error:F.message,timestamp:new Date,success:!1},l),s(0,l=[...l])}finally{s(3,o=!1)}}function x(u){u.key==="Enter"?T():u.key==="ArrowUp"?(u.preventDefault(),r>0&&(r--,s(2,t=n[r]))):u.key==="ArrowDown"&&(u.preventDefault(),r<n.length-1?(r++,s(2,t=n[r])):(r=n.length,s(2,t="")))}function S(){s(0,l=[])}const H=[{label:"Status",cmd:"status"},{label:"Tasks",cmd:"task"},{label:"Agent List",cmd:"agent list"},{label:"Inner Dialogue",cmd:"chat"},{label:"Raw LLM Chat",cmd:"ollama chat phi3:mini"},{label:"Help",cmd:"help"}];function h(u){s(2,t=u),T()}const i=u=>h(u.cmd);function v(u){te[u?"unshift":"push"](()=>{w=u,s(1,w)})}function f(u){te[u?"unshift":"push"](()=>{_=u,s(4,_)})}function P(){t=this.value,s(2,t)}return a.$$.update=()=>{a.$$.dirty&1027&&l.length>0&&E&&w&&requestAnimationFrame(()=>{w?.scrollIntoView({block:"end",inline:"nearest"})})},[l,w,t,o,_,T,x,S,H,h,E,i,v,f,P]}class xe extends de{constructor(e){super(),fe(this,e,we,ke,he,{})}}export{xe as default};
