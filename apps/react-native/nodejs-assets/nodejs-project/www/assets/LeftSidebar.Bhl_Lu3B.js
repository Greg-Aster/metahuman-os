import{S as mt,i as bt,s as kt,r as Q,d as b,u as ae,H as gt,I as Ct,J as yt,a as M,b as u,K as St,c as m,e as C,f as L,h as E,g as V,L as wt,j as y,k as O,M as Pt,N as ke,o as At,O as K,x,q as U,t as H,l as le,D as Pe,p as Y,n as ye,v as Nt,P as be,Q as ie}from"./api-config.BAZ_dc_Y.js";import{y as me,a as Ae,s as Ne,b as Ee}from"./navigation.BajXnvhT.js";import{c as ge,i as Et}from"./security-policy.CnYnD1q2.js";import{l as Ce,p as Ot}from"./approvals.C7XgzU4f.js";import{S as Lt}from"./SyncStatus.DyP8ueQL.js";import"./index.enr_Xien.js";import"./server-health.C6FYljDX.js";import"./node-bridge.CdnDofoo.js";import"./local-memory.qidMz0ak.js";import"./profile-sync.fcLjFkDy.js";function Oe(s,e,l){const t=s.slice();return t[58]=e[l][0],t[59]=e[l][1],t}function Le(s,e,l){const t=s.slice();t[62]=e[l];const n=!t[62].roles||t[62].roles.includes(t[58]);t[63]=n;const i=t[5][t[58]]?.model===t[62].model;return t[64]=i,t}function Te(s,e,l){const t=s.slice();t[62]=e[l];const n=t[5][t[58]]?.model===t[62].model;return t[64]=n,t}function Me(s,e,l){const t=s.slice();t[62]=e[l];const n=t[5][t[58]]?.model===t[62].model;return t[64]=n,t}function Ie(s,e,l){const t=s.slice();return t[71]=e[l],t}function Fe(s,e,l){const t=s.slice();t[62]=e[l];const n=t[5][t[58]]?.model===t[62].model;return t[64]=n,t}function De(s,e,l){const t=s.slice();return t[76]=e[l],t}function Ve(s){let e,l;return{c(){e=y("span"),l=H(s[15]),this.h()},l(t){e=C(t,"SPAN",{class:!0});var n=L(e);l=U(n,s[15]),n.forEach(b),this.h()},h(){m(e,"class","approval-badge svelte-ukccde")},m(t,n){M(t,e,n),u(e,l)},p(t,n){n[0]&32768&&Y(l,t[15])},d(t){t&&b(e)}}}function Tt(s){let e,l=s[76].description+"",t;return{c(){e=y("div"),t=H(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var i=L(e);t=U(i,l),i.forEach(b),this.h()},h(){m(e,"class","menu-description")},m(n,i){M(n,e,i),u(e,t)},p:ye,d(n){n&&b(e)}}}function Be(s){let e,l,t=s[76].icon+"",n,i,o,r,d=s[76].label+"",a,v,p,S,_,g,k=s[76].id==="dashboard"&&s[15]>0&&Ve(s),c=s[76].description&&Tt(s);function h(){return s[23](s[76])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),o=y("div"),r=y("div"),a=H(d),v=O(),k&&k.c(),p=O(),c&&c.c(),S=O(),this.h()},l(N){e=C(N,"BUTTON",{class:!0,title:!0});var w=L(e);l=C(w,"SPAN",{class:!0});var P=L(l);n=U(P,t),P.forEach(b),i=E(w),o=C(w,"DIV",{class:!0});var D=L(o);r=C(D,"DIV",{class:!0});var F=L(r);a=U(F,d),v=E(F),k&&k.l(F),F.forEach(b),p=E(D),c&&c.l(D),D.forEach(b),S=E(w),w.forEach(b),this.h()},h(){m(l,"class","menu-icon"),m(r,"class","menu-label"),m(o,"class","menu-text"),m(e,"class","menu-item"),m(e,"title",s[76].description),K(e,"active",s[14]===s[76].id)},m(N,w){M(N,e,w),u(e,l),u(l,n),u(e,i),u(e,o),u(o,r),u(r,a),u(r,v),k&&k.m(r,null),u(o,p),c&&c.m(o,null),u(e,S),_||(g=x(e,"click",h),_=!0)},p(N,w){s=N,s[76].id==="dashboard"&&s[15]>0?k?k.p(s,w):(k=Ve(s),k.c(),k.m(r,null)):k&&(k.d(1),k=null),s[76].description&&c.p(s,w),w[0]&81920&&K(e,"active",s[14]===s[76].id)},d(N){N&&b(e),k&&k.d(),c&&c.d(),_=!1,g()}}}function Mt(s){let e,l,t,n,i,o,r,d,a,v="Trust:",p,S,_,g,k,c,h,N,w="Persona:",P,D,F,z=(s[0]==="inactive"?"inactive":s[1][s[0]]?.name||s[0])+"",Z,G,he,pe;function re(T,j){return T[11]==="remote"||T[10]==="remote"?Rt:T[11]==="vllm"||T[10]==="vllm"?jt:T[11]==="ollama"||T[10]==="ollama"?Bt:T[11]==="offline"?Vt:T[10]==="auto"?Dt:Ft}let ne=re(s),X=ne(s),B=s[12]&&(s[11]==="vllm"||s[10]==="vllm")&&je(s),q=s[6]&&Ue(s);function ce(T,j){return T[4]?Yt:zt}let se=ce(s),J=se(s);return{c(){e=y("div"),l=y("div"),X.c(),t=O(),B&&B.c(),n=O(),q&&q.c(),i=O(),o=y("div"),r=O(),d=y("div"),a=y("span"),a.textContent=v,p=O(),S=y("span"),_=y("button"),J.c(),c=O(),h=y("div"),N=y("span"),N.textContent=w,P=O(),D=y("span"),F=y("button"),Z=H(z),this.h()},l(T){e=C(T,"DIV",{class:!0});var j=L(e);l=C(j,"DIV",{class:!0});var oe=L(l);X.l(oe),t=E(oe),B&&B.l(oe),oe.forEach(b),n=E(j),q&&q.l(j),i=E(j),o=C(j,"DIV",{class:!0}),L(o).forEach(b),r=E(j),d=C(j,"DIV",{class:!0});var ue=L(d);a=C(ue,"SPAN",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-8qhk02"&&(a.textContent=v),p=E(ue),S=C(ue,"SPAN",{class:!0});var ve=L(S);_=C(ve,"BUTTON",{class:!0,title:!0});var ee=L(_);J.l(ee),ee.forEach(b),ve.forEach(b),ue.forEach(b),c=E(j),h=C(j,"DIV",{class:!0});var de=L(h);N=C(de,"SPAN",{class:!0,"data-svelte-h":!0}),V(N)!=="svelte-rq6fkw"&&(N.textContent=w),P=E(de),D=C(de,"SPAN",{class:!0});var fe=L(D);F=C(fe,"BUTTON",{class:!0,title:!0});var _e=L(F);Z=U(_e,z),_e.forEach(b),fe.forEach(b),de.forEach(b),j.forEach(b),this.h()},h(){m(l,"class","backend-indicator svelte-ukccde"),m(o,"class","status-sep svelte-ukccde"),m(a,"class","status-label"),m(_,"class",g="trust-badge clickable trust-level-"+(s[4]?"yolo":s[2].trustLevel||"observe")+" svelte-ukccde"),m(_,"title",k="Click to cycle trust level: "+(s[2].trustLevel||"observe")+(s[4]?" + YOLO":"")+"\\nProgression: observe ‚Üí suggest ‚Üí supervised_auto ‚Üí bounded_auto ‚Üí adaptive_auto ‚Üí YOLO"),m(S,"class","status-value"),m(d,"class","status-row"),m(N,"class","status-label"),m(F,"class",G="persona-badge persona-facet-"+s[0]+" clickable svelte-ukccde"),m(F,"title",s[7]),m(D,"class","status-value"),m(h,"class","status-row"),m(e,"class","status-info svelte-ukccde")},m(T,j){M(T,e,j),u(e,l),X.m(l,null),u(l,t),B&&B.m(l,null),u(e,n),q&&q.m(e,null),u(e,i),u(e,o),u(e,r),u(e,d),u(d,a),u(d,p),u(d,S),u(S,_),J.m(_,null),u(e,c),u(e,h),u(h,N),u(h,P),u(h,D),u(D,F),u(F,Z),he||(pe=[x(_,"click",s[18]),x(F,"click",s[19])],he=!0)},p(T,j){ne!==(ne=re(T))&&(X.d(1),X=ne(T),X&&(X.c(),X.m(l,t))),T[12]&&(T[11]==="vllm"||T[10]==="vllm")?B?B.p(T,j):(B=je(T),B.c(),B.m(l,null)):B&&(B.d(1),B=null),T[6]?q?q.p(T,j):(q=Ue(T),q.c(),q.m(e,i)):q&&(q.d(1),q=null),se===(se=ce(T))&&J?J.p(T,j):(J.d(1),J=se(T),J&&(J.c(),J.m(_,null))),j[0]&20&&g!==(g="trust-badge clickable trust-level-"+(T[4]?"yolo":T[2].trustLevel||"observe")+" svelte-ukccde")&&m(_,"class",g),j[0]&20&&k!==(k="Click to cycle trust level: "+(T[2].trustLevel||"observe")+(T[4]?" + YOLO":"")+"\\nProgression: observe ‚Üí suggest ‚Üí supervised_auto ‚Üí bounded_auto ‚Üí adaptive_auto ‚Üí YOLO")&&m(_,"title",k),j[0]&3&&z!==(z=(T[0]==="inactive"?"inactive":T[1][T[0]]?.name||T[0])+"")&&Y(Z,z),j[0]&1&&G!==(G="persona-badge persona-facet-"+T[0]+" clickable svelte-ukccde")&&m(F,"class",G),j[0]&128&&m(F,"title",T[7])},d(T){T&&b(e),X.d(),B&&B.d(),q&&q.d(),J.d(),he=!1,Nt(pe)}}}function It(s){let e,l="Loading...";return{c(){e=y("div"),e.textContent=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-oya2k4"&&(e.textContent=l),this.h()},h(){m(e,"class","widget-loading svelte-ukccde")},m(t,n){M(t,e,n)},p:ye,d(t){t&&b(e)}}}function Ft(s){let e,l="ü¶ô Ollama";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-31a3h8"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge ollama svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Dt(s){let e,l="üîÑ Auto";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1vczyzu"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge auto svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Vt(s){let e,l="‚ö†Ô∏è Offline";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-kls46i"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge offline svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Bt(s){let e,l="ü¶ô Ollama";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-31a3h8"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge ollama svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function jt(s){let e,l="‚ö° vLLM";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-399hds"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge vllm svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Rt(s){let e,l="‚òÅÔ∏è Remote";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1ei3vsv"&&(e.textContent=l),this.h()},h(){m(e,"class","backend-badge remote svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function je(s){let e,l=s[12].name+"",t,n,i=s[12].locked&&Re();return{c(){e=y("span"),t=H(l),n=O(),i&&i.c(),this.h()},l(o){e=C(o,"SPAN",{class:!0});var r=L(e);t=U(r,l),n=E(r),i&&i.l(r),r.forEach(b),this.h()},h(){m(e,"class","local-model-name svelte-ukccde")},m(o,r){M(o,e,r),u(e,t),u(e,n),i&&i.m(e,null)},p(o,r){r[0]&4096&&l!==(l=o[12].name+"")&&Y(t,l),o[12].locked?i||(i=Re(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&b(e),i&&i.d()}}}function Re(s){let e,l="‚úì";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),V(e)!=="svelte-v32kyx"&&(e.textContent=l),this.h()},h(){m(e,"class","loaded-indicator svelte-ukccde"),m(e,"title","Currently loaded - select for any role")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Ue(s){let e,l=Q(Object.entries(s[5])),t=[];for(let n=0;n<l.length;n+=1)t[n]=it(Oe(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=be()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);e=be()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);M(n,e,i)},p(n,i){if(i[0]&3155744){l=Q(Object.entries(n[5]));let o;for(o=0;o<l.length;o+=1){const r=Oe(n,l,o);t[o]?t[o].p(r,i):(t[o]=it(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&b(e),ae(t,n)}}}function Ut(s){let e,l=(s[59].model||"‚Äî")+"",t,n,i,o,r="‚ñº",d,a,v,p=s[59].adapters&&s[59].adapters.length>0&&He();function S(){return s[25](s[58])}return{c(){e=y("button"),t=H(l),n=O(),p&&p.c(),i=O(),o=y("span"),o.textContent=r,this.h()},l(_){e=C(_,"BUTTON",{class:!0,title:!0});var g=L(e);t=U(g,l),n=E(g),p&&p.l(g),i=E(g),o=C(g,"SPAN",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-1sjytzu"&&(o.textContent=r),g.forEach(b),this.h()},h(){m(o,"class","dropdown-arrow svelte-ukccde"),m(e,"class","role-model clickable svelte-ukccde"),m(e,"title",d="Click to change model for "+s[58]+"\\nCurrent: "+s[59].model+(s[59].adapters&&s[59].adapters.length>0?" + adapter":""))},m(_,g){M(_,e,g),u(e,t),u(e,n),p&&p.m(e,null),u(e,i),u(e,o),a||(v=x(e,"click",ie(S)),a=!0)},p(_,g){s=_,g[0]&32&&l!==(l=(s[59].model||"‚Äî")+"")&&Y(t,l),s[59].adapters&&s[59].adapters.length>0?p||(p=He(),p.c(),p.m(e,i)):p&&(p.d(1),p=null),g[0]&32&&d!==(d="Click to change model for "+s[58]+"\\nCurrent: "+s[59].model+(s[59].adapters&&s[59].adapters.length>0?" + adapter":""))&&m(e,"title",d)},d(_){_&&b(e),p&&p.d(),a=!1,v()}}}function Ht(s){let e,l,t;return{c(){e=y("span"),l=H("error"),this.h()},l(n){e=C(n,"SPAN",{class:!0,title:!0});var i=L(e);l=U(i,"error"),i.forEach(b),this.h()},h(){m(e,"class","role-model error svelte-ukccde"),m(e,"title",t=s[59].error)},m(n,i){M(n,e,i),u(e,l)},p(n,i){i[0]&32&&t!==(t=n[59].error)&&m(e,"title",t)},d(n){n&&b(e)}}}function qt(s){let e,l,t,n="‚ñº",i,o,r;function d(){return s[24](s[58])}return{c(){e=y("button"),l=H(`select
                  `),t=y("span"),t.textContent=n,this.h()},l(a){e=C(a,"BUTTON",{class:!0,title:!0});var v=L(e);l=U(v,`select
                  `),t=C(v,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1sjytzu"&&(t.textContent=n),v.forEach(b),this.h()},h(){m(t,"class","dropdown-arrow svelte-ukccde"),m(e,"class","role-model needs-config svelte-ukccde"),m(e,"title",i=(s[59].unavailableReason||"Model unavailable")+" - Click to select an available model")},m(a,v){M(a,e,v),u(e,l),u(e,t),o||(r=x(e,"click",ie(d)),o=!0)},p(a,v){s=a,v[0]&32&&i!==(i=(s[59].unavailableReason||"Model unavailable")+" - Click to select an available model")&&m(e,"title",i)},d(a){a&&b(e),o=!1,r()}}}function He(s){let e,l="+LoRA";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-nbd0mh"&&(e.textContent=l),this.h()},h(){m(e,"class","adapter-indicator svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function qe(s){let e,l,t,n=s[58]+"",i,o,r,d,a,v,p=s[13].local.length>0&&ze(s),S=s[13].lora.length>0&&We(s),_=s[13].remote.length>0&&Xe(s),g=s[13].bigBrother.length>0&&$e(s),k=s[10]==="ollama"&&s[13].local.length===0&&et(s);return{c(){e=y("div"),l=y("div"),t=H("Select model for "),i=H(n),o=O(),p&&p.c(),r=O(),S&&S.c(),d=O(),_&&_.c(),a=O(),g&&g.c(),v=O(),k&&k.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var h=L(e);l=C(h,"DIV",{class:!0});var N=L(l);t=U(N,"Select model for "),i=U(N,n),N.forEach(b),o=E(h),p&&p.l(h),r=E(h),S&&S.l(h),d=E(h),_&&_.l(h),a=E(h),g&&g.l(h),v=E(h),k&&k.l(h),h.forEach(b),this.h()},h(){m(l,"class","dropdown-header svelte-ukccde"),m(e,"class","model-dropdown categorized svelte-ukccde")},m(c,h){M(c,e,h),u(e,l),u(l,t),u(l,i),u(e,o),p&&p.m(e,null),u(e,r),S&&S.m(e,null),u(e,d),_&&_.m(e,null),u(e,a),g&&g.m(e,null),u(e,v),k&&k.m(e,null)},p(c,h){h[0]&32&&n!==(n=c[58]+"")&&Y(i,n),c[13].local.length>0?p?p.p(c,h):(p=ze(c),p.c(),p.m(e,r)):p&&(p.d(1),p=null),c[13].lora.length>0?S?S.p(c,h):(S=We(c),S.c(),S.m(e,d)):S&&(S.d(1),S=null),c[13].remote.length>0?_?_.p(c,h):(_=Xe(c),_.c(),_.m(e,a)):_&&(_.d(1),_=null),c[13].bigBrother.length>0?g?g.p(c,h):(g=$e(c),g.c(),g.m(e,v)):g&&(g.d(1),g=null),c[10]==="ollama"&&c[13].local.length===0?k?k.p(c,h):(k=et(c),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(c){c&&b(e),p&&p.d(),S&&S.d(),_&&_.d(),g&&g.d(),k&&k.d()}}}function ze(s){let e,l,t=s[10]==="vllm"?"‚ö° vLLM":"ü¶ô Local",n,i,o=Q(s[13].local),r=[];for(let d=0;d<o.length;d+=1)r[d]=Je(Fe(s,o,d));return{c(){e=y("div"),l=y("span"),n=H(t),i=O();for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=C(d,"DIV",{class:!0});var a=L(e);l=C(a,"SPAN",{class:!0});var v=L(l);n=U(v,t),v.forEach(b),i=E(a);for(let p=0;p<r.length;p+=1)r[p].l(a);a.forEach(b),this.h()},h(){m(l,"class","category-label svelte-ukccde"),m(e,"class","dropdown-category svelte-ukccde")},m(d,a){M(d,e,a),u(e,l),u(l,n),u(e,i);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(e,null)},p(d,a){if(a[0]&1024&&t!==(t=d[10]==="vllm"?"‚ö° vLLM":"ü¶ô Local")&&Y(n,t),a[0]&1056800){o=Q(d[13].local);let v;for(v=0;v<o.length;v+=1){const p=Fe(d,o,v);r[v]?r[v].p(p,a):(r[v]=Je(p),r[v].c(),r[v].m(e,null))}for(;v<r.length;v+=1)r[v].d(1);r.length=o.length}},d(d){d&&b(e),ae(r,d)}}}function Ye(s){let e,l="loaded";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1gx497r"&&(e.textContent=l),this.h()},h(){m(e,"class","vllm-badge svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Je(s){let e,l,t=s[62].model+"",n,i,o,r,d,a=s[62].locked&&Ye();function v(){return s[26](s[58],s[62])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),a&&a.c(),o=O(),this.h()},l(p){e=C(p,"BUTTON",{class:!0});var S=L(e);l=C(S,"SPAN",{class:!0});var _=L(l);n=U(_,t),i=E(_),a&&a.l(_),_.forEach(b),o=E(S),S.forEach(b),this.h()},h(){m(l,"class","model-name svelte-ukccde"),m(e,"class","dropdown-item svelte-ukccde"),K(e,"selected",s[64]),K(e,"vllm-active",s[62].locked)},m(p,S){M(p,e,S),u(e,l),u(l,n),u(l,i),a&&a.m(l,null),u(e,o),r||(d=x(e,"click",ie(v)),r=!0)},p(p,S){s=p,S[0]&8192&&t!==(t=s[62].model+"")&&Y(n,t),s[62].locked?a||(a=Ye(),a.c(),a.m(l,null)):a&&(a.d(1),a=null),S[0]&8224&&K(e,"selected",s[64]),S[0]&8192&&K(e,"vllm-active",s[62].locked)},d(p){p&&b(e),a&&a.d(),r=!1,d()}}}function We(s){let e,l,t="üéØ LoRA Adapters",n,i=Q(s[13].lora),o=[];for(let r=0;r<i.length;r+=1)o[r]=Ge(Ie(s,i,r));return{c(){e=y("div"),l=y("span"),l.textContent=t,n=O();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var d=L(e);l=C(d,"SPAN",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-1f3ulub"&&(l.textContent=t),n=E(d);for(let a=0;a<o.length;a+=1)o[a].l(d);d.forEach(b),this.h()},h(){m(l,"class","category-label svelte-ukccde"),m(e,"class","dropdown-category svelte-ukccde")},m(r,d){M(r,e,d),u(e,l),u(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(r,d){if(d[0]&1056800){i=Q(r[13].lora);let a;for(a=0;a<i.length;a+=1){const v=Ie(r,i,a);o[a]?o[a].p(v,d):(o[a]=Ge(v),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d(r){r&&b(e),ae(o,r)}}}function Ke(s){let e,l="dual";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-155p27v"&&(e.textContent=l),this.h()},h(){m(e,"class","dual-badge svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function Qe(s){let e,l=s[71].date+"",t;return{c(){e=y("span"),t=H(l),this.h()},l(n){e=C(n,"SPAN",{class:!0});var i=L(e);t=U(i,l),i.forEach(b),this.h()},h(){m(e,"class","model-desc svelte-ukccde")},m(n,i){M(n,e,i),u(e,t)},p(n,i){i[0]&8192&&l!==(l=n[71].date+"")&&Y(t,l)},d(n){n&&b(e)}}}function Ge(s){let e,l,t=s[71].name+"",n,i,o,r,d,a,v=s[71].isDualAdapter&&Ke(),p=s[71].date&&Qe(s);function S(){return s[27](s[58],s[71])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),v&&v.c(),o=O(),p&&p.c(),r=O(),this.h()},l(_){e=C(_,"BUTTON",{class:!0});var g=L(e);l=C(g,"SPAN",{class:!0});var k=L(l);n=U(k,t),i=E(k),v&&v.l(k),k.forEach(b),o=E(g),p&&p.l(g),r=E(g),g.forEach(b),this.h()},h(){m(l,"class","model-name svelte-ukccde"),m(e,"class","dropdown-item svelte-ukccde")},m(_,g){M(_,e,g),u(e,l),u(l,n),u(l,i),v&&v.m(l,null),u(e,o),p&&p.m(e,null),u(e,r),d||(a=x(e,"click",ie(S)),d=!0)},p(_,g){s=_,g[0]&8192&&t!==(t=s[71].name+"")&&Y(n,t),s[71].isDualAdapter?v||(v=Ke(),v.c(),v.m(l,null)):v&&(v.d(1),v=null),s[71].date?p?p.p(s,g):(p=Qe(s),p.c(),p.m(e,r)):p&&(p.d(1),p=null)},d(_){_&&b(e),v&&v.d(),p&&p.d(),d=!1,a()}}}function Xe(s){let e,l,t="‚òÅÔ∏è Cloud",n,i=Q(s[13].remote),o=[];for(let r=0;r<i.length;r+=1)o[r]=Ze(Me(s,i,r));return{c(){e=y("div"),l=y("span"),l.textContent=t,n=O();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var d=L(e);l=C(d,"SPAN",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-18cmiwz"&&(l.textContent=t),n=E(d);for(let a=0;a<o.length;a+=1)o[a].l(d);d.forEach(b),this.h()},h(){m(l,"class","category-label svelte-ukccde"),m(e,"class","dropdown-category svelte-ukccde")},m(r,d){M(r,e,d),u(e,l),u(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(r,d){if(d[0]&1056800){i=Q(r[13].remote);let a;for(a=0;a<i.length;a+=1){const v=Me(r,i,a);o[a]?o[a].p(v,d):(o[a]=Ze(v),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d(r){r&&b(e),ae(o,r)}}}function Ze(s){let e,l,t=s[62].model+"",n,i,o,r="‚òÅÔ∏è",d,a,v=(s[62].provider==="runpod_serverless"?"RunPod":s[62].provider)+"",p,S,_,g;function k(){return s[28](s[58],s[62])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),o=y("span"),o.textContent=r,d=O(),a=y("span"),p=H(v),S=O(),this.h()},l(c){e=C(c,"BUTTON",{class:!0});var h=L(e);l=C(h,"SPAN",{class:!0});var N=L(l);n=U(N,t),i=E(N),o=C(N,"SPAN",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-suq1tc"&&(o.textContent=r),N.forEach(b),d=E(h),a=C(h,"SPAN",{class:!0});var w=L(a);p=U(w,v),w.forEach(b),S=E(h),h.forEach(b),this.h()},h(){m(o,"class","cloud-indicator svelte-ukccde"),m(l,"class","model-name svelte-ukccde"),m(a,"class","provider-badge cloud svelte-ukccde"),m(e,"class","dropdown-item svelte-ukccde"),K(e,"selected",s[64])},m(c,h){M(c,e,h),u(e,l),u(l,n),u(l,i),u(l,o),u(e,d),u(e,a),u(a,p),u(e,S),_||(g=x(e,"click",ie(k)),_=!0)},p(c,h){s=c,h[0]&8192&&t!==(t=s[62].model+"")&&Y(n,t),h[0]&8192&&v!==(v=(s[62].provider==="runpod_serverless"?"RunPod":s[62].provider)+"")&&Y(p,v),h[0]&8224&&K(e,"selected",s[64])},d(c){c&&b(e),_=!1,g()}}}function $e(s){let e,l,t="üõ°Ô∏è Escalation",n,i=Q(s[13].bigBrother),o=[];for(let r=0;r<i.length;r+=1)o[r]=xe(Te(s,i,r));return{c(){e=y("div"),l=y("span"),l.textContent=t,n=O();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var d=L(e);l=C(d,"SPAN",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-1buo2fk"&&(l.textContent=t),n=E(d);for(let a=0;a<o.length;a+=1)o[a].l(d);d.forEach(b),this.h()},h(){m(l,"class","category-label svelte-ukccde"),m(e,"class","dropdown-category svelte-ukccde")},m(r,d){M(r,e,d),u(e,l),u(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(r,d){if(d[0]&1056800){i=Q(r[13].bigBrother);let a;for(a=0;a<i.length;a+=1){const v=Te(r,i,a);o[a]?o[a].p(v,d):(o[a]=xe(v),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d(r){r&&b(e),ae(o,r)}}}function xe(s){let e,l,t=s[62].model+"",n,i,o,r="üõ°Ô∏è",d,a,v="Claude Code",p,S,_;function g(){return s[29](s[58],s[62])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),o=y("span"),o.textContent=r,d=O(),a=y("span"),a.textContent=v,p=O(),this.h()},l(k){e=C(k,"BUTTON",{class:!0});var c=L(e);l=C(c,"SPAN",{class:!0});var h=L(l);n=U(h,t),i=E(h),o=C(h,"SPAN",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-1h87hb8"&&(o.textContent=r),h.forEach(b),d=E(c),a=C(c,"SPAN",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-xp7dtd"&&(a.textContent=v),p=E(c),c.forEach(b),this.h()},h(){m(o,"class","bb-badge svelte-ukccde"),m(l,"class","model-name svelte-ukccde"),m(a,"class","model-desc svelte-ukccde"),m(e,"class","dropdown-item svelte-ukccde"),K(e,"selected",s[64])},m(k,c){M(k,e,c),u(e,l),u(l,n),u(l,i),u(l,o),u(e,d),u(e,a),u(e,p),S||(_=x(e,"click",ie(g)),S=!0)},p(k,c){s=k,c[0]&8192&&t!==(t=s[62].model+"")&&Y(n,t),c[0]&8224&&K(e,"selected",s[64])},d(k){k&&b(e),S=!1,_()}}}function et(s){let e,l=Q(s[8]),t=[];for(let n=0;n<l.length;n+=1)t[n]=at(Le(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=be()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);e=be()},m(n,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,i);M(n,e,i)},p(n,i){if(i[0]&1048864){l=Q(n[8]);let o;for(o=0;o<l.length;o+=1){const r=Le(n,l,o);t[o]?t[o].p(r,i):(t[o]=at(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&b(e),ae(t,n)}}}function tt(s){let e,l="‚òÅÔ∏è";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-suq1tc"&&(e.textContent=l),this.h()},h(){m(e,"class","cloud-indicator svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function lt(s){let e,l="‚úì";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-qom655"&&(e.textContent=l),this.h()},h(){m(e,"class","suggested-indicator svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function st(s){let e,l="+LoRA";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1i9opkz"&&(e.textContent=l),this.h()},h(){m(e,"class","adapter-indicator-small svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function nt(s){let e,l="RunPod Cloud";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1h204f8"&&(e.textContent=l),this.h()},h(){m(e,"class","provider-badge cloud svelte-ukccde")},m(t,n){M(t,e,n)},d(t){t&&b(e)}}}function ot(s){let e,l=s[62].description+"",t;return{c(){e=y("span"),t=H(l),this.h()},l(n){e=C(n,"SPAN",{class:!0});var i=L(e);t=U(i,l),i.forEach(b),this.h()},h(){m(e,"class","model-desc svelte-ukccde")},m(n,i){M(n,e,i),u(e,t)},p(n,i){i[0]&256&&l!==(l=n[62].description+"")&&Y(t,l)},d(n){n&&b(e)}}}function at(s){let e,l,t=s[62].model+"",n,i,o,r,d,a,v,p,S,_=(s[62].provider==="runpod_serverless"||s[62].provider==="huggingface")&&tt(),g=s[63]&&lt(),k=s[62].adapters&&s[62].adapters.length>0&&st(),c=s[62].provider==="runpod_serverless"&&nt(),h=s[62].description&&ot(s);function N(){return s[30](s[58],s[62])}return{c(){e=y("button"),l=y("span"),n=H(t),i=O(),_&&_.c(),o=O(),g&&g.c(),r=O(),k&&k.c(),d=O(),c&&c.c(),a=O(),h&&h.c(),v=O(),this.h()},l(w){e=C(w,"BUTTON",{class:!0});var P=L(e);l=C(P,"SPAN",{class:!0});var D=L(l);n=U(D,t),i=E(D),_&&_.l(D),o=E(D),g&&g.l(D),D.forEach(b),r=E(P),k&&k.l(P),d=E(P),c&&c.l(P),a=E(P),h&&h.l(P),v=E(P),P.forEach(b),this.h()},h(){m(l,"class","model-name svelte-ukccde"),m(e,"class","dropdown-item svelte-ukccde"),K(e,"selected",s[64]),K(e,"suggested",s[63])},m(w,P){M(w,e,P),u(e,l),u(l,n),u(l,i),_&&_.m(l,null),u(l,o),g&&g.m(l,null),u(e,r),k&&k.m(e,null),u(e,d),c&&c.m(e,null),u(e,a),h&&h.m(e,null),u(e,v),p||(S=x(e,"click",ie(N)),p=!0)},p(w,P){s=w,P[0]&256&&t!==(t=s[62].model+"")&&Y(n,t),s[62].provider==="runpod_serverless"||s[62].provider==="huggingface"?_||(_=tt(),_.c(),_.m(l,o)):_&&(_.d(1),_=null),s[63]?g||(g=lt(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),s[62].adapters&&s[62].adapters.length>0?k||(k=st(),k.c(),k.m(e,d)):k&&(k.d(1),k=null),s[62].provider==="runpod_serverless"?c||(c=nt(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),s[62].description?h?h.p(s,P):(h=ot(s),h.c(),h.m(e,v)):h&&(h.d(1),h=null),P[0]&288&&K(e,"selected",s[64]),P[0]&288&&K(e,"suggested",s[63])},d(w){w&&b(e),_&&_.d(),g&&g.d(),k&&k.d(),c&&c.d(),h&&h.d(),p=!1,S()}}}function it(s){let e,l,t='<span class="activity-dot svelte-ukccde"></span>',n,i,o=s[58]+"",r,d,a,v="‚Üí",p,S,_;function g(N,w){return N[59].needsConfig?qt:N[59].error?Ht:Ut}let k=g(s),c=k(s),h=s[9][s[58]]&&qe(s);return{c(){e=y("div"),l=y("span"),l.innerHTML=t,n=O(),i=y("span"),r=H(o),d=O(),a=y("span"),a.textContent=v,p=O(),c.c(),S=O(),h&&h.c(),_=O(),this.h()},l(N){e=C(N,"DIV",{class:!0});var w=L(e);l=C(w,"SPAN",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-1ov0hib"&&(l.innerHTML=t),n=E(w),i=C(w,"SPAN",{class:!0});var P=L(i);r=U(P,o),P.forEach(b),d=E(w),a=C(w,"SPAN",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-2e44gn"&&(a.textContent=v),p=E(w),c.l(w),S=E(w),h&&h.l(w),_=E(w),w.forEach(b),this.h()},h(){m(l,"class","activity-indicator svelte-ukccde"),m(i,"class","role-name svelte-ukccde"),m(a,"class","role-arrow svelte-ukccde"),m(e,"class","model-role-row svelte-ukccde")},m(N,w){M(N,e,w),u(e,l),u(e,n),u(e,i),u(i,r),u(e,d),u(e,a),u(e,p),c.m(e,null),u(e,S),h&&h.m(e,null),u(e,_)},p(N,w){w[0]&32&&o!==(o=N[58]+"")&&Y(r,o),k===(k=g(N))&&c?c.p(N,w):(c.d(1),c=k(N),c&&(c.c(),c.m(e,S))),N[9][N[58]]?h?h.p(N,w):(h=qe(N),h.c(),h.m(e,_)):h&&(h.d(1),h=null)},d(N){N&&b(e),c.d(),h&&h.d()}}}function zt(s){let e=(s[2].trustLevel||"observe")+"",l;return{c(){l=H(e)},l(t){l=U(t,e)},m(t,n){M(t,l,n)},p(t,n){n[0]&4&&e!==(e=(t[2].trustLevel||"observe")+"")&&Y(l,e)},d(t){t&&b(l)}}}function Yt(s){let e,l="YOLO";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-kizoh9"&&(e.textContent=l),this.h()},h(){m(e,"class","yolo-indicator svelte-ukccde")},m(t,n){M(t,e,n)},p:ye,d(t){t&&b(e)}}}function Jt(s){let e,l,t,n,i,o,r="Status",d,a,v,p,S,_=`<div class="footer-text svelte-ukccde">MetaHuman OS
      <span class="footer-version svelte-ukccde">Version 1.13</span></div>`,g,k=Q(s[16]),c=[];for(let P=0;P<k.length;P+=1)c[P]=Be(De(s,k,P));a=new Lt({props:{compact:!0}});function h(P,D){if(P[3])return It;if(P[2])return Mt}let N=h(s),w=N&&N(s);return{c(){e=y("div"),l=y("nav");for(let P=0;P<c.length;P+=1)c[P].c();t=O(),n=y("div"),i=y("div"),o=y("span"),o.textContent=r,d=O(),Pt(a.$$.fragment),v=O(),w&&w.c(),p=O(),S=y("div"),S.innerHTML=_,this.h()},l(P){e=C(P,"DIV",{class:!0});var D=L(e);l=C(D,"NAV",{class:!0});var F=L(l);for(let G=0;G<c.length;G+=1)c[G].l(F);F.forEach(b),t=E(D),n=C(D,"DIV",{class:!0});var z=L(n);i=C(z,"DIV",{class:!0});var Z=L(i);o=C(Z,"SPAN",{"data-svelte-h":!0}),V(o)!=="svelte-lgatds"&&(o.textContent=r),d=E(Z),wt(a.$$.fragment,Z),Z.forEach(b),v=E(z),w&&w.l(z),z.forEach(b),p=E(D),S=C(D,"DIV",{class:!0,"data-svelte-h":!0}),V(S)!=="svelte-1xy7d7p"&&(S.innerHTML=_),D.forEach(b),this.h()},h(){m(l,"class","menu"),m(i,"class","widget-header svelte-ukccde"),m(n,"class","status-widget"),m(S,"class","sidebar-footer svelte-ukccde"),m(e,"class","left-sidebar-container svelte-ukccde")},m(P,D){M(P,e,D),u(e,l);for(let F=0;F<c.length;F+=1)c[F]&&c[F].m(l,null);u(e,t),u(e,n),u(n,i),u(i,o),u(i,d),St(a,i,null),u(n,v),w&&w.m(n,null),u(e,p),u(e,S),g=!0},p(P,D){if(D[0]&245760){k=Q(P[16]);let F;for(F=0;F<k.length;F+=1){const z=De(P,k,F);c[F]?c[F].p(z,D):(c[F]=Be(z),c[F].c(),c[F].m(l,null))}for(;F<c.length;F+=1)c[F].d(1);c.length=k.length}N===(N=h(P))&&w?w.p(P,D):(w&&w.d(1),w=N&&N(P),w&&(w.c(),w.m(n,null)))},i(P){g||(yt(a.$$.fragment,P),g=!0)},o(P){Ct(a.$$.fragment,P),g=!1},d(P){P&&b(e),ae(c,P),gt(a),w&&w.d()}}}function Wt(s,e,l){let t,n,i;ke(s,ge,f=>l(43,t=f)),ke(s,Ae,f=>l(14,n=f)),ke(s,Ot,f=>l(15,i=f));const o=[{id:"chat",label:"Chat",icon:"üí¨",description:"Conversation interface"},{id:"dashboard",label:"Dashboard",icon:"üìä",description:"System overview"},{id:"agency",label:"Agency",icon:"üéØ",description:"Autonomous desires"},{id:"persona",label:"Persona",icon:"üë§",description:"Identity & personality"},{id:"voice",label:"Voice",icon:"üé§",description:"Audio & training"},{id:"training",label:"AI Training",icon:"üß†",description:"LoRA adapters"},{id:"system-coder",label:"System Coder",icon:"üîß",description:"Self-healing agent"},{id:"terminal",label:"Terminal",icon:"üíª",description:"Command line"},{id:"system",label:"System",icon:"‚öôÔ∏è",description:"Settings & tools"}];let r=null;function d(f){Ae.set(f)}let a=null,v=!0,p=!1,S=[],_=!1;me.subscribe(f=>{l(4,_=f)});let g={},k=!1,c={active:0,inProgress:0},h="default",N={},w="",P=null;async function D(){P=Ee.subscribe(f=>{f&&(l(2,a=f.identity),l(22,c={active:f?.tasks?.active??0,inProgress:f?.tasks?.byStatus?.in_progress??0}),f?.model,l(5,g=f?.modelRoles||{}),l(6,k=Object.keys(g).length>0),l(3,v=!1),f.systemHealth?.cloudModels&&f.systemHealth.cloudModels.length>0&&l(13,j.remote=f.systemHealth.cloudModels.map(A=>({id:A.id,model:A.model,provider:A.provider,locked:!1})),j),f.systemHealth&&(l(10,se=f.systemHealth.activeBackend||"auto"),l(11,J=f.systemHealth.resolvedBackend||null),f.systemHealth.remoteProvider))})}async function F(){try{const f=await le("/api/trust"),A=await f.json();f.ok&&(S=Array.isArray(A.available)?A.available:[],a&&l(2,a.trustLevel=A.level,a),A.level!=="adaptive_auto"&&(me.set(!1),G()))}catch(f){console.error("Failed to load trust options:",f)}}async function z(f){try{const A=await le("/api/trust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({level:f})}),I=await A.json();if(!A.ok||!I.ok)throw new Error(I.error||"Failed to set trust level");a&&l(2,a.trustLevel=I.level,a),p=!1}catch(A){alert(A.message)}}async function Z(){if(t==="emulation"){alert('Trust level is locked to "observe" in emulation mode for safety.');return}const f=["observe","suggest","supervised_auto","bounded_auto","adaptive_auto"],A=a?.trustLevel||"observe";if(_){me.set(!1),await z("observe"),G();return}const R=f.indexOf(A);if(R===f.length-1){try{localStorage.getItem("yoloWarned")||(alert("YOLO mode relaxes ALL safety checks and allows maximum operator autonomy. Use with extreme caution."),localStorage.setItem("yoloWarned","1"))}catch{}me.set(!0),G();return}const W=R+1;W<f.length&&await z(f[W])}function G(){try{const f=localStorage.getItem("chatPrefs"),A=f?JSON.parse(f):{};A.yoloMode=_,localStorage.setItem("chatPrefs",JSON.stringify(A))}catch{}}async function he(){try{const A=await(await le("/api/persona-facet")).json();l(0,h=A.activeFacet||"default"),l(1,N=A.facets||{})}catch(f){console.error("Error loading facets:",f)}}async function pe(){const f=Object.keys(N).filter(W=>N[W]?.enabled!==!1);if(f.length===0){console.warn("No enabled facets available");return}const I=(f.indexOf(h)+1)%f.length,R=f[I];try{const $=await(await le("/api/persona-facet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facet:R})})).json();$.success?(l(0,h=R),setTimeout(()=>Ne.update(te=>te+1),100)):console.error("Failed to switch facet:",$.error)}catch(W){console.error("Error cycling facet:",W)}}let re=[],ne=[],X={},B={},q=!1,ce=!1,se="ollama",J=null,T=null,j={local:[],lora:[],remote:[],bigBrother:[]};async function oe(){if(!q){q=!0;try{const f=Pe(ge),A=f?`?cognitiveMode=${encodeURIComponent(f)}`:"",R=await(await le(`/api/model-registry${A}`)).json();if(R.success){re=R.availableModels||[],X=R.roleAssignments||{},R.activeBackend&&l(10,se=R.activeBackend),R.resolvedBackend&&l(11,J=R.resolvedBackend),R.localModel&&l(12,T=R.localModel),R.modelCategories&&l(13,j=R.modelCategories);const W=new Map;for(const $ of re){const te=$.model;if(!W.has(te))W.set(te,$);else{const we=W.get(te);$.roles&&(we.roles=Array.from(new Set([...we.roles||[],...$.roles])))}}l(8,ne=Array.from(W.values()))}else console.log("Model registry not accessible (expected for non-owner users)")}catch(f){console.error("Error loading model registry:",f)}finally{q=!1}}}function ue(f,A){const I=re.find(R=>R.id===A);I&&l(5,g={...g,[f]:{modelId:I.id,provider:I.provider,model:I.model,adapters:I.adapters??[],baseModel:I.baseModel??null,temperature:I.options?.temperature}})}async function ve(f="manual"){if(!ce){ce=!0;try{const A=`_t=${Date.now()}`,I=await le(`/api/status?${A}`,{cache:"no-store"});if(!I.ok)throw new Error(`Failed to refresh status (${I.status})`);const R=await I.json();Ee.set(R)}catch(A){console.warn(`[LeftSidebar] Failed to refresh status after ${f}:`,A)}finally{ce=!1}}}async function ee(f,A){console.log(`[LeftSidebar] assignModelToRole called: role=${f}, modelId=${A}`);try{const I=Pe(ge),R={role:f,modelId:A};I&&(R.cognitiveMode=I),console.log("[LeftSidebar] Making POST to /api/model-registry with payload:",R);const W=await le("/api/model-registry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});console.log(`[LeftSidebar] POST response status: ${W.status}`);const $=await W.json();console.log("[LeftSidebar] POST result:",$),$.success?(X[f]=A,l(9,B[f]=!1,B),l(9,B={...B}),ue(f,A),ve("model assignment"),oe(),de(f).catch(te=>{console.warn(`Failed to warm up model for role ${f}:`,te)}),setTimeout(()=>{Ne.update(te=>te+1)},200)):alert("Failed to assign model: "+($.error||"Unknown error"))}catch(I){console.error("Error assigning model:",I),alert("Failed to assign model: "+I.message)}}async function de(f){try{const I=await(await le("/api/warmup-model",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:f})})).json();I.success?console.log(`[warmup] Model for ${f} loaded in ${I.duration}ms`):console.warn(`[warmup] Failed to warm up ${f}:`,I.error)}catch(A){throw console.error(`[warmup] Error warming up ${f}:`,A),A}}function fe(f){l(9,B[f]=!B[f],B),l(9,B={...B})}function _e(){l(9,B={})}function Se(f){f.target.closest(".model-role-row")||_e()}async function rt(){try{const A=await(await le("/api/auth/me")).json();A.success&&A.user?r=A.user:r=null}catch(f){console.error("[LeftSidebar] Failed to fetch user:",f),r=null}}At(()=>{rt(),D(),he(),F(),oe(),Ce();const f=Et.subscribe(()=>{Ce()});document.addEventListener("click",Se);const A=()=>{document.hidden||Ce()};return document.addEventListener("visibilitychange",A),()=>{f(),P&&P(),document.removeEventListener("visibilitychange",A),document.removeEventListener("click",Se)}});const ct=f=>d(f.id),ut=f=>fe(f),dt=f=>fe(f),ft=(f,A)=>ee(f,A.id),ht=(f,A)=>ee(f,A.id),pt=(f,A)=>ee(f,A.id),vt=(f,A)=>ee(f,A.id),_t=(f,A)=>ee(f,A.id);return s.$$.update=()=>{s.$$.dirty[0]&3&&l(7,w=(()=>{const f=N?.[h],I=["Click to cycle persona facet","",`Current: ${h==="inactive"?"Persona disabled":f?.name||h||"default"}`];return h==="inactive"?I.push("Persona context disabled - responses use the base model without identity scaffolding."):f?.description&&I.push(f.description),f?.resolvedPath?(I.push(""),I.push(`Persona file: ${f.resolvedPath}`)):h==="inactive"&&(I.push(""),I.push("Persona file: (none)")),I.push(""),I.push("Progression: inactive ‚Üí default ‚Üí poet ‚Üí thinker ‚Üí friend ‚Üí antagonist ‚Üí inactive"),I.join(`
`)})()),s.$$.dirty[0]&4194304&&c.active,s.$$.dirty[0]&4194304&&c.inProgress},[h,N,a,v,_,g,k,w,ne,B,se,J,T,j,n,i,o,d,Z,pe,ee,fe,c,ct,ut,dt,ft,ht,pt,vt,_t]}class sl extends mt{constructor(e){super(),bt(this,e,Wt,Jt,kt,{},null,[-1,-1,-1])}}export{sl as default};
