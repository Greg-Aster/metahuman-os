import{S as Ve,i as Me,s as je,n as ve,d as c,a as U,x as L,M as we,T as Se,v as Ne,p as oe,b as r,N as Pe,c as o,e as v,f as p,U as re,h as T,q as z,g as J,j as h,V as ne,k as D,t as F,l as Ce,X as Be,z as Te}from"./api-config.B-uR5Kyo.js";function De(a){let e,t,l,s,n,d,u,m,g,I,C,K,b,A,H,k,Y='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',R,q,i,E,N,V,G,O,he="Ctrl+S to save, Esc to close",ie,P,M,ce,de,j,X=a[5]?"Saving...":"Save",Q,W,fe,pe,_=a[6]&&Ie(a);function me(f,y){return f[4]?Le:Oe}let Z=me(a),w=Z(a);function _e(f,y){return f[7]?Ae:Ue}let x=_e(a),S=x(a);return{c(){e=h("div"),t=h("div"),l=h("div"),s=h("div"),n=ne("svg"),d=ne("path"),u=D(),m=h("div"),g=h("div"),I=F(a[2]),C=F(" Editor"),K=D(),b=h("div"),A=F(a[1]),H=D(),k=h("button"),k.innerHTML=Y,R=D(),_&&_.c(),q=D(),i=h("div"),w.c(),E=D(),N=h("div"),V=h("div"),S.c(),G=D(),O=h("span"),O.textContent=he,ie=D(),P=h("div"),M=h("button"),ce=F("Close"),de=D(),j=h("button"),Q=F(X),this.h()},l(f){e=v(f,"DIV",{class:!0});var y=p(e);t=v(y,"DIV",{class:!0});var B=p(t);l=v(B,"DIV",{class:!0});var $=p(l);s=v($,"DIV",{class:!0});var ee=p(s);n=re(ee,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var ye=p(n);d=re(ye,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(d).forEach(c),ye.forEach(c),u=T(ee),m=v(ee,"DIV",{});var te=p(m);g=v(te,"DIV",{class:!0});var ue=p(g);I=z(ue,a[2]),C=z(ue," Editor"),ue.forEach(c),K=T(te),b=v(te,"DIV",{class:!0});var ke=p(b);A=z(ke,a[1]),ke.forEach(c),te.forEach(c),ee.forEach(c),H=T($),k=v($,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(k)!=="svelte-kr6pm6"&&(k.innerHTML=Y),$.forEach(c),R=T(B),_&&_.l(B),q=T(B),i=v(B,"DIV",{class:!0});var ge=p(i);w.l(ge),ge.forEach(c),E=T(B),N=v(B,"DIV",{class:!0});var se=p(N);V=v(se,"DIV",{class:!0});var le=p(V);S.l(le),G=T(le),O=v(le,"SPAN",{class:!0,"data-svelte-h":!0}),J(O)!=="svelte-jnfarf"&&(O.textContent=he),le.forEach(c),ie=T(se),P=v(se,"DIV",{class:!0});var ae=p(P);M=v(ae,"BUTTON",{class:!0});var be=p(M);ce=z(be,"Close"),be.forEach(c),de=T(ae),j=v(ae,"BUTTON",{class:!0});var Ee=p(j);Q=z(Ee,X),Ee.forEach(c),ae.forEach(c),se.forEach(c),B.forEach(c),y.forEach(c),this.h()},h(){o(d,"stroke-linecap","round"),o(d,"stroke-linejoin","round"),o(d,"stroke-width","2"),o(d,"d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"),o(n,"class","w-5 h-5 svelte-p3y83g"),o(n,"fill","none"),o(n,"stroke","currentColor"),o(n,"viewBox","0 0 24 24"),o(g,"class","modal-title-text svelte-p3y83g"),o(b,"class","modal-subtitle svelte-p3y83g"),o(s,"class","modal-title svelte-p3y83g"),o(k,"class","modal-close svelte-p3y83g"),o(k,"title","Close (Esc)"),o(l,"class","modal-header svelte-p3y83g"),o(i,"class","modal-body svelte-p3y83g"),o(O,"class","hint svelte-p3y83g"),o(V,"class","footer-info svelte-p3y83g"),o(M,"class","btn-secondary svelte-p3y83g"),M.disabled=a[5],o(j,"class","btn-primary svelte-p3y83g"),j.disabled=W=!a[7]||a[5],o(P,"class","footer-actions svelte-p3y83g"),o(N,"class","modal-footer svelte-p3y83g"),o(t,"class","modal-container svelte-p3y83g"),o(e,"class","modal-overlay svelte-p3y83g")},m(f,y){U(f,e,y),r(e,t),r(t,l),r(l,s),r(s,n),r(n,d),r(s,u),r(s,m),r(m,g),r(g,I),r(g,C),r(m,K),r(m,b),r(b,A),r(l,H),r(l,k),r(t,R),_&&_.m(t,null),r(t,q),r(t,i),w.m(i,null),r(t,E),r(t,N),r(N,V),S.m(V,null),r(V,G),r(V,O),r(N,ie),r(N,P),r(P,M),r(M,ce),r(P,de),r(P,j),r(j,Q),fe||(pe=[L(k,"click",a[9]),L(M,"click",a[9]),L(j,"click",a[8]),L(t,"click",Pe(a[12])),L(e,"click",a[9])],fe=!0)},p(f,y){y&4&&oe(I,f[2]),y&2&&oe(A,f[1]),f[6]?_?_.p(f,y):(_=Ie(f),_.c(),_.m(t,q)):_&&(_.d(1),_=null),Z===(Z=me(f))&&w?w.p(f,y):(w.d(1),w=Z(f),w&&(w.c(),w.m(i,null))),x!==(x=_e(f))&&(S.d(1),S=x(f),S&&(S.c(),S.m(V,G))),y&32&&(M.disabled=f[5]),y&32&&X!==(X=f[5]?"Saving...":"Save")&&oe(Q,X),y&160&&W!==(W=!f[7]||f[5])&&(j.disabled=W)},d(f){f&&c(e),_&&_.d(),w.d(),S.d(),fe=!1,Ne(pe)}}}function Ie(a){let e,t,l,s,n;return{c(){e=h("div"),t=ne("svg"),l=ne("path"),s=D(),n=F(a[6]),this.h()},l(d){e=v(d,"DIV",{class:!0});var u=p(e);t=re(u,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var m=p(t);l=re(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(l).forEach(c),m.forEach(c),s=T(u),n=z(u,a[6]),u.forEach(c),this.h()},h(){o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(l,"stroke-width","2"),o(l,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(t,"class","w-4 h-4"),o(t,"fill","none"),o(t,"stroke","currentColor"),o(t,"viewBox","0 0 24 24"),o(e,"class","error-banner svelte-p3y83g")},m(d,u){U(d,e,u),r(e,t),r(t,l),r(e,s),r(e,n)},p(d,u){u&64&&oe(n,d[6])},d(d){d&&c(e)}}}function Oe(a){let e,t,l;return{c(){e=h("textarea"),this.h()},l(s){e=v(s,"TEXTAREA",{class:!0,placeholder:!0,spellcheck:!0}),p(e).forEach(c),this.h()},h(){o(e,"class","editor-textarea svelte-p3y83g"),o(e,"placeholder","Memory content..."),o(e,"spellcheck","false")},m(s,n){U(s,e,n),Te(e,a[3]),t||(l=L(e,"input",a[13]),t=!0)},p(s,n){n&8&&Te(e,s[3])},d(s){s&&c(e),t=!1,l()}}}function Le(a){let e,t=`<div class="spinner svelte-p3y83g"></div>
            Loading memory...`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-149rorh"&&(e.innerHTML=t),this.h()},h(){o(e,"class","loading-state svelte-p3y83g")},m(l,s){U(l,e,s)},p:ve,d(l){l&&c(e)}}}function Ue(a){let e,t="All changes saved";return{c(){e=h("span"),e.textContent=t,this.h()},l(l){e=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-rqj4kp"&&(e.textContent=t),this.h()},h(){o(e,"class","saved-indicator svelte-p3y83g")},m(l,s){U(l,e,s)},d(l){l&&c(e)}}}function Ae(a){let e,t="Unsaved changes";return{c(){e=h("span"),e.textContent=t,this.h()},l(l){e=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-tto4hq"&&(e.textContent=t),this.h()},h(){o(e,"class","unsaved-indicator svelte-p3y83g")},m(l,s){U(l,e,s)},d(l){l&&c(e)}}}function He(a){let e,t,l,s=a[0]&&De(a);return{c(){s&&s.c(),e=we()},l(n){s&&s.l(n),e=we()},m(n,d){s&&s.m(n,d),U(n,e,d),t||(l=L(window,"keydown",a[10]),t=!0)},p(n,[d]){n[0]?s?s.p(n,d):(s=De(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:ve,o:ve,d(n){n&&c(e),s&&s.d(n),t=!1,l()}}}function qe(a,e,t){let{isOpen:l=!1}=e,{relPath:s=""}=e,{memoryType:n="Memory"}=e;const d=Se();let u="",m="",g=!1,I=!1,C="",K="json",b=!1;async function A(){t(4,g=!0),t(6,C="");try{const i=await Ce(`/api/memory-content?relPath=${encodeURIComponent(s)}`),E=await i.json();if(!i.ok||!E.success)throw new Error(E?.error||"Failed to load memory");t(3,u=E.content||""),t(11,m=u),K=E.format||"text"}catch(i){t(6,C=i.message)}finally{t(4,g=!1)}}async function H(){t(5,I=!0),t(6,C="");try{const i=await Ce("/api/memory-content",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({relPath:s,content:u})}),E=await i.json();if(!i.ok||!E.success)throw new Error(E?.error||"Failed to save memory");t(11,m=u),d("saved",{relPath:s})}catch(i){t(6,C=i.message)}finally{t(5,I=!1)}}function k(){b&&!confirm("You have unsaved changes. Close anyway?")||(t(0,l=!1),t(3,u=""),t(11,m=""),t(6,C=""),d("close"))}function Y(i){(i.metaKey||i.ctrlKey)&&i.key==="s"&&(i.preventDefault(),b&&!I&&H()),i.key==="Escape"&&k()}function R(i){Be.call(this,a,i)}function q(){u=this.value,t(3,u)}return a.$$set=i=>{"isOpen"in i&&t(0,l=i.isOpen),"relPath"in i&&t(1,s=i.relPath),"memoryType"in i&&t(2,n=i.memoryType)},a.$$.update=()=>{a.$$.dirty&3&&l&&s&&A(),a.$$.dirty&2056&&t(7,b=u!==m)},[l,s,n,u,g,I,C,b,H,k,Y,m,R,q]}class Fe extends Ve{constructor(e){super(),Me(this,e,qe,He,je,{isOpen:0,relPath:1,memoryType:2})}}export{Fe as default};
