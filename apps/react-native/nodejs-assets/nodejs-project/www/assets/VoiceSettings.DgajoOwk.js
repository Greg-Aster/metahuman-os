import{S as Ls,i as Os,s as Ns,n as Wt,d,a as U,c as o,e as a,f as m,j as r,o as As,U as ys,g as k,b as l,h,P as Kl,k as _,p as _e,q as D,t as L,x as H,I as Kt,J as yt,a4 as Wl,a5 as Jl,r as Sl,u as Ql,l as Ul,m as ul,a0 as Gt,O as Yl,R as ot,v as Fl,w as ft,z as V,y as cl,H as Xl,K as Zl,L as $l,M as es}from"./api-config.BAZ_dc_Y.js";import{c as Us}from"./CenterContent.Bj27L_z_.js";import"./navigation.BajXnvhT.js";import"./index.enr_Xien.js";import"./security-policy.CnYnD1q2.js";import"./clear-events.DBrEJJ6T.js";import"./server-health.C6FYljDX.js";import"./node-bridge.CdnDofoo.js";import"./local-memory.qidMz0ak.js";function Fs(n){let e,s,t,u,i,c,g;function T(x,I){return x[0].installed?x[0].running&&x[0].healthy?qs:x[0].running&&!x[0].healthy?Hs:Bs:js}let v=T(n),f=v(n),p=n[0].running&&n[0].pid&&as(n),b=n[0].port&&rs(n),z=n[0].installed&&is(n),E=n[2]&&cs(n);return{c(){e=r("div"),s=r("div"),f.c(),t=_(),p&&p.c(),u=_(),b&&b.c(),i=_(),z&&z.c(),c=_(),E&&E.c(),g=Kl(),this.h()},l(x){e=a(x,"DIV",{class:!0});var I=m(e);s=a(I,"DIV",{class:!0});var C=m(s);f.l(C),t=h(C),p&&p.l(C),u=h(C),b&&b.l(C),C.forEach(d),i=h(I),z&&z.l(I),I.forEach(d),c=h(x),E&&E.l(x),g=Kl(),this.h()},h(){o(s,"class","status-display svelte-xhwa6q"),o(e,"class","status-content svelte-xhwa6q")},m(x,I){U(x,e,I),l(e,s),f.m(s,null),l(s,t),p&&p.m(s,null),l(s,u),b&&b.m(s,null),l(e,i),z&&z.m(e,null),U(x,c,I),E&&E.m(x,I),U(x,g,I)},p(x,I){v!==(v=T(x))&&(f.d(1),f=v(x),f&&(f.c(),f.m(s,t))),x[0].running&&x[0].pid?p?p.p(x,I):(p=as(x),p.c(),p.m(s,u)):p&&(p.d(1),p=null),x[0].port?b?b.p(x,I):(b=rs(x),b.c(),b.m(s,null)):b&&(b.d(1),b=null),x[0].installed?z?z.p(x,I):(z=is(x),z.c(),z.m(e,null)):z&&(z.d(1),z=null),x[2]?E?E.p(x,I):(E=cs(x),E.c(),E.m(g.parentNode,g)):E&&(E.d(1),E=null)},d(x){x&&(d(e),d(c),d(g)),f.d(),p&&p.d(),b&&b.d(),z&&z.d(),E&&E.d(x)}}}function Ms(n){let e,s='<span class="status-icon">‚ö†Ô∏è</span> <span class="status-text">Error loading status</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-1vhxjjr"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-error svelte-xhwa6q")},m(t,u){U(t,e,u)},p:Wt,d(t){t&&d(e)}}}function Rs(n){let e,s='<span class="loading-spinner svelte-xhwa6q"></span> <span>Loading status...</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-1effgwt"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-loading svelte-xhwa6q")},m(t,u){U(t,e,u)},p:Wt,d(t){t&&d(e)}}}function Bs(n){let e,s='<span class="status-dot svelte-xhwa6q"></span> <span class="status-label">Stopped</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-l2j8hk"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-badge stopped svelte-xhwa6q")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function Hs(n){let e,s='<span class="status-dot svelte-xhwa6q"></span> <span class="status-label">Starting...</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-1xnwsfd"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-badge running unhealthy svelte-xhwa6q")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function qs(n){let e,s='<span class="status-dot pulsing svelte-xhwa6q"></span> <span class="status-label">Running</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-c3ama3"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-badge running healthy svelte-xhwa6q")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function js(n){let e,s='<span class="status-dot svelte-xhwa6q"></span> <span class="status-label">Not Installed</span>';return{c(){e=r("div"),e.innerHTML=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-5h5ahx"&&(e.innerHTML=s),this.h()},h(){o(e,"class","status-badge not-installed svelte-xhwa6q")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function as(n){let e,s,t=n[0].pid+"",u;return{c(){e=r("span"),s=L("PID: "),u=L(t),this.h()},l(i){e=a(i,"SPAN",{class:!0});var c=m(e);s=D(c,"PID: "),u=D(c,t),c.forEach(d),this.h()},h(){o(e,"class","status-detail svelte-xhwa6q")},m(i,c){U(i,e,c),l(e,s),l(e,u)},p(i,c){c&1&&t!==(t=i[0].pid+"")&&_e(u,t)},d(i){i&&d(e)}}}function rs(n){let e,s,t=n[0].port+"",u;return{c(){e=r("span"),s=L("Port: "),u=L(t),this.h()},l(i){e=a(i,"SPAN",{class:!0});var c=m(e);s=D(c,"Port: "),u=D(c,t),c.forEach(d),this.h()},h(){o(e,"class","status-detail svelte-xhwa6q")},m(i,c){U(i,e,c),l(e,s),l(e,u)},p(i,c){c&1&&t!==(t=i[0].port+"")&&_e(u,t)},d(i){i&&d(e)}}}function is(n){let e,s,t,u,i,c,g;function T(b,z){return b[0].running?Ks:Gs}let v=T(n),f=v(n),p=n[0].serverUrl&&n[0].healthy&&us(n);return{c(){e=r("div"),f.c(),s=_(),p&&p.c(),t=_(),u=r("button"),i=L("üîÑ"),this.h()},l(b){e=a(b,"DIV",{class:!0});var z=m(e);f.l(z),s=h(z),p&&p.l(z),t=h(z),u=a(z,"BUTTON",{class:!0});var E=m(u);i=D(E,"üîÑ"),E.forEach(d),z.forEach(d),this.h()},h(){o(u,"class","control-btn refresh-btn svelte-xhwa6q"),u.disabled=n[1],o(e,"class","status-controls svelte-xhwa6q")},m(b,z){U(b,e,z),f.m(e,null),l(e,s),p&&p.m(e,null),l(e,t),l(e,u),l(u,i),c||(g=H(u,"click",n[5]),c=!0)},p(b,z){v===(v=T(b))&&f?f.p(b,z):(f.d(1),f=v(b),f&&(f.c(),f.m(e,s))),b[0].serverUrl&&b[0].healthy?p?p.p(b,z):(p=us(b),p.c(),p.m(e,t)):p&&(p.d(1),p=null),z&2&&(u.disabled=b[1])},d(b){b&&d(e),f.d(),p&&p.d(),c=!1,g()}}}function Gs(n){let e,s=n[3]?"‚è≥":"‚ñ∂Ô∏è",t,u,i=n[3]?"Starting...":"Start",c,g,T;return{c(){e=r("button"),t=L(s),u=_(),c=L(i),this.h()},l(v){e=a(v,"BUTTON",{class:!0});var f=m(e);t=D(f,s),u=h(f),c=D(f,i),f.forEach(d),this.h()},h(){o(e,"class","control-btn start-btn svelte-xhwa6q"),e.disabled=n[3]},m(v,f){U(v,e,f),l(e,t),l(e,u),l(e,c),g||(T=H(e,"click",n[6]),g=!0)},p(v,f){f&8&&s!==(s=v[3]?"‚è≥":"‚ñ∂Ô∏è")&&_e(t,s),f&8&&i!==(i=v[3]?"Starting...":"Start")&&_e(c,i),f&8&&(e.disabled=v[3])},d(v){v&&d(e),g=!1,T()}}}function Ks(n){let e,s=n[4]?"‚è≥":"‚èπÔ∏è",t,u,i=n[4]?"Stopping...":"Stop",c,g,T;return{c(){e=r("button"),t=L(s),u=_(),c=L(i),this.h()},l(v){e=a(v,"BUTTON",{class:!0});var f=m(e);t=D(f,s),u=h(f),c=D(f,i),f.forEach(d),this.h()},h(){o(e,"class","control-btn stop-btn svelte-xhwa6q"),e.disabled=n[4]},m(v,f){U(v,e,f),l(e,t),l(e,u),l(e,c),g||(T=H(e,"click",n[7]),g=!0)},p(v,f){f&16&&s!==(s=v[4]?"‚è≥":"‚èπÔ∏è")&&_e(t,s),f&16&&i!==(i=v[4]?"Stopping...":"Stop")&&_e(c,i),f&16&&(e.disabled=v[4])},d(v){v&&d(e),g=!1,T()}}}function us(n){let e,s,t;return{c(){e=r("a"),s=L("üîó Open"),this.h()},l(u){e=a(u,"A",{href:!0,target:!0,rel:!0,class:!0});var i=m(e);s=D(i,"üîó Open"),i.forEach(d),this.h()},h(){o(e,"href",t=n[0].serverUrl),o(e,"target","_blank"),o(e,"rel","noopener noreferrer"),o(e,"class","control-btn link-btn svelte-xhwa6q")},m(u,i){U(u,e,i),l(e,s)},p(u,i){i&1&&t!==(t=u[0].serverUrl)&&o(e,"href",t)},d(u){u&&d(e)}}}function cs(n){let e,s;return{c(){e=r("div"),s=L(n[2]),this.h()},l(t){e=a(t,"DIV",{class:!0});var u=m(e);s=D(u,n[2]),u.forEach(d),this.h()},h(){o(e,"class","error-message svelte-xhwa6q")},m(t,u){U(t,e,u),l(e,s)},p(t,u){u&4&&_e(s,t[2])},d(t){t&&d(e)}}}function Ws(n){let e;function s(i,c){if(i[1]&&!i[0])return Rs;if(i[2]&&!i[0])return Ms;if(i[0])return Fs}let t=s(n),u=t&&t(n);return{c(){e=r("div"),u&&u.c(),this.h()},l(i){e=a(i,"DIV",{class:!0});var c=m(e);u&&u.l(c),c.forEach(d),this.h()},h(){o(e,"class","server-status-indicator svelte-xhwa6q")},m(i,c){U(i,e,c),u&&u.m(e,null)},p(i,[c]){t===(t=s(i))&&u?u.p(i,c):(u&&u.d(1),u=t&&t(i),u&&(u.c(),u.m(e,null)))},i:Wt,o:Wt,d(i){i&&d(e),u&&u.d()}}}function Js(n,e,s){let{serverName:t="Server"}=e,{statusEndpoint:u}=e,{controlEndpoint:i}=e,{autoRefresh:c=!0}=e,{refreshInterval:g=1e4}=e,T=null,v=!0,f=null,p=!1,b=!1,z=null;async function E(){try{const C=await fetch(u);if(!C.ok)throw new Error("Failed to fetch status");s(0,T=await C.json()),s(2,f=null)}catch(C){s(2,f=String(C)),console.error(`[ServerStatusIndicator ${t}] Error fetching status:`,C)}finally{s(1,v=!1)}}async function x(){s(3,p=!0),s(2,f=null);try{const C=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"start"})});if(!C.ok){const M=await C.json();throw new Error(M.error||"Failed to start server")}const w=await C.json();if(!w.success)throw new Error(w.error||"Failed to start server");setTimeout(E,2e3)}catch(C){s(2,f=String(C)),console.error(`[ServerStatusIndicator ${t}] Error starting server:`,C)}finally{s(3,p=!1)}}async function I(){s(4,b=!0),s(2,f=null);try{const C=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"stop"})});if(!C.ok){const M=await C.json();throw new Error(M.error||"Failed to stop server")}const w=await C.json();if(!w.success)throw new Error(w.error||"Failed to stop server");await E()}catch(C){s(2,f=String(C)),console.error(`[ServerStatusIndicator ${t}] Error stopping server:`,C)}finally{s(4,b=!1)}}return As(()=>{E(),c&&(z=setInterval(E,g))}),ys(()=>{z!==null&&(clearInterval(z),z=null)}),n.$$set=C=>{"serverName"in C&&s(8,t=C.serverName),"statusEndpoint"in C&&s(9,u=C.statusEndpoint),"controlEndpoint"in C&&s(10,i=C.controlEndpoint),"autoRefresh"in C&&s(11,c=C.autoRefresh),"refreshInterval"in C&&s(12,g=C.refreshInterval)},[T,v,f,p,b,E,x,I,t,u,i,c,g]}class ts extends Ls{constructor(e){super(),Os(this,e,Js,Ws,Ns,{serverName:8,statusEndpoint:9,controlEndpoint:10,autoRefresh:11,refreshInterval:12})}}function vs(n,e,s){const t=n.slice();return t[76]=e[s],t}function ds(n,e,s){const t=n.slice();return t[76]=e[s],t}function fs(n,e,s){const t=n.slice();return t[76]=e[s],t}function ps(n,e,s){const t=n.slice();return t[83]=e[s][0],t[84]=e[s][1],t}function Ys(n){let e,s,t,u,i="Voice Provider",c,g,T,v,f,p,b,z,E,x=n[2]?"Saving...":n[8]?"üîí Guest Mode (Read-Only)":"üíæ Save Settings",I,C,w,M,N,P,Z,A=n[8]&&hs(),O=n[4]&&_s(n),de=Sl(n[17]),Q=[];for(let S=0;S<de.length;S+=1)Q[S]=gs(ps(n,de,S));const ne=[tn,en,$s,Zs],Ne=[];function B(S,K){return S[0].provider==="piper"&&S[0].piper?0:S[0].provider==="sovits"&&S[0].sovits?1:S[0].provider==="rvc"&&S[0].rvc?2:S[0].provider==="kokoro"&&S[0].kokoro?3:-1}~(v=B(n))&&(f=Ne[v]=ne[v](n));let oe=n[0].stt&&Ts(n),j=n[8]&&ws();return{c(){A&&A.c(),e=_(),O&&O.c(),s=_(),t=r("div"),u=r("label"),u.textContent=i,c=_(),g=r("div");for(let S=0;S<Q.length;S+=1)Q[S].c();T=_(),f&&f.c(),p=_(),oe&&oe.c(),b=_(),z=r("div"),E=r("button"),I=L(x),M=_(),j&&j.c(),this.h()},l(S){A&&A.l(S),e=h(S),O&&O.l(S),s=h(S),t=a(S,"DIV",{class:!0});var K=m(t);u=a(K,"LABEL",{class:!0,"data-svelte-h":!0}),k(u)!=="svelte-13ytmhp"&&(u.textContent=i),c=h(K),g=a(K,"DIV",{class:!0});var ae=m(g);for(let te=0;te<Q.length;te+=1)Q[te].l(ae);ae.forEach(d),K.forEach(d),T=h(S),f&&f.l(S),p=h(S),oe&&oe.l(S),b=h(S),z=a(S,"DIV",{class:!0});var R=m(z);E=a(R,"BUTTON",{class:!0,title:!0});var Ee=m(E);I=D(Ee,x),Ee.forEach(d),M=h(R),j&&j.l(R),R.forEach(d),this.h()},h(){o(u,"class","svelte-6zxxgu"),o(g,"class","provider-grid svelte-6zxxgu"),o(t,"class","setting-group svelte-6zxxgu"),o(E,"class","save-button svelte-6zxxgu"),E.disabled=C=n[2]||n[8],o(E,"title",w=n[8]?"Guest users cannot save settings - viewing profile owner's configuration":"Save voice settings"),o(z,"class","actions svelte-6zxxgu")},m(S,K){A&&A.m(S,K),U(S,e,K),O&&O.m(S,K),U(S,s,K),U(S,t,K),l(t,u),l(t,c),l(t,g);for(let ae=0;ae<Q.length;ae+=1)Q[ae]&&Q[ae].m(g,null);U(S,T,K),~v&&Ne[v].m(S,K),U(S,p,K),oe&&oe.m(S,K),U(S,b,K),U(S,z,K),l(z,E),l(E,I),l(z,M),j&&j.m(z,null),N=!0,P||(Z=H(E,"click",n[18]),P=!0)},p(S,K){if(S[8]?A||(A=hs(),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null),S[4]?O?O.p(S,K):(O=_s(S),O.c(),O.m(s.parentNode,s)):O&&(O.d(1),O=null),K[0]&2228229){de=Sl(S[17]);let R;for(R=0;R<de.length;R+=1){const Ee=ps(S,de,R);Q[R]?Q[R].p(Ee,K):(Q[R]=gs(Ee),Q[R].c(),Q[R].m(g,null))}for(;R<Q.length;R+=1)Q[R].d(1);Q.length=de.length}let ae=v;v=B(S),v===ae?~v&&Ne[v].p(S,K):(f&&(Wl(),Kt(Ne[ae],1,1,()=>{Ne[ae]=null}),Jl()),~v?(f=Ne[v],f?f.p(S,K):(f=Ne[v]=ne[v](S),f.c()),yt(f,1),f.m(p.parentNode,p)):f=null),S[0].stt?oe?(oe.p(S,K),K[0]&1&&yt(oe,1)):(oe=Ts(S),oe.c(),yt(oe,1),oe.m(b.parentNode,b)):oe&&(Wl(),Kt(oe,1,1,()=>{oe=null}),Jl()),(!N||K[0]&260)&&x!==(x=S[2]?"Saving...":S[8]?"üîí Guest Mode (Read-Only)":"üíæ Save Settings")&&_e(I,x),(!N||K[0]&260&&C!==(C=S[2]||S[8]))&&(E.disabled=C),(!N||K[0]&256&&w!==(w=S[8]?"Guest users cannot save settings - viewing profile owner's configuration":"Save voice settings"))&&o(E,"title",w),S[8]?j||(j=ws(),j.c(),j.m(z,null)):j&&(j.d(1),j=null)},i(S){N||(yt(f),yt(oe),N=!0)},o(S){Kt(f),Kt(oe),N=!1},d(S){S&&(d(e),d(s),d(t),d(T),d(p),d(b),d(z)),A&&A.d(S),O&&O.d(S),Ql(Q,S),~v&&Ne[v].d(S),oe&&oe.d(S),j&&j.d(),P=!1,Z()}}}function Qs(n){let e,s;return{c(){e=r("div"),s=L(n[3]),this.h()},l(t){e=a(t,"DIV",{class:!0});var u=m(e);s=D(u,n[3]),u.forEach(d),this.h()},h(){o(e,"class","error-message svelte-6zxxgu")},m(t,u){U(t,e,u),l(e,s)},p(t,u){u[0]&8&&_e(s,t[3])},i:Wt,o:Wt,d(t){t&&d(e)}}}function Xs(n){let e,s="Loading voice settings...";return{c(){e=r("div"),e.textContent=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-2kx4r4"&&(e.textContent=s),this.h()},h(){o(e,"class","loading svelte-6zxxgu")},m(t,u){U(t,e,u)},p:Wt,i:Wt,o:Wt,d(t){t&&d(e)}}}function hs(n){let e,s="üëã You're viewing these voice settings as a guest! You can test how the voice sounds, but only the profile owner can make changes. Feel free to explore and listen! üéß";return{c(){e=r("div"),e.textContent=s,this.h()},l(t){e=a(t,"DIV",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-1lbculv"&&(e.textContent=s),this.h()},h(){o(e,"class","guest-notice svelte-6zxxgu")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function _s(n){let e,s;return{c(){e=r("div"),s=L(n[4]),this.h()},l(t){e=a(t,"DIV",{class:!0});var u=m(e);s=D(u,n[4]),u.forEach(d),this.h()},h(){o(e,"class","success-message svelte-6zxxgu")},m(t,u){U(t,e,u),l(e,s)},p(t,u){u[0]&16&&_e(s,t[4])},d(t){t&&d(e)}}}function gs(n){let e,s,t=n[84].icon+"",u,i,c,g=n[84].name+"",T,v,f,p=n[84].description+"",b,z,E,x;function I(){return n[24](n[83])}return{c(){e=r("button"),s=r("div"),u=L(t),i=_(),c=r("div"),T=L(g),v=_(),f=r("div"),b=L(p),z=_(),this.h()},l(C){e=a(C,"BUTTON",{class:!0,style:!0});var w=m(e);s=a(w,"DIV",{class:!0});var M=m(s);u=D(M,t),M.forEach(d),i=h(w),c=a(w,"DIV",{class:!0});var N=m(c);T=D(N,g),N.forEach(d),v=h(w),f=a(w,"DIV",{class:!0});var P=m(f);b=D(P,p),P.forEach(d),z=h(w),w.forEach(d),this.h()},h(){o(s,"class","provider-icon svelte-6zxxgu"),o(c,"class","provider-name svelte-6zxxgu"),o(f,"class","provider-desc svelte-6zxxgu"),o(e,"class","provider-card svelte-6zxxgu"),ot(e,"--provider-color",n[84].color),e.disabled=n[2],Yl(e,"active",n[0].provider===n[83])},m(C,w){U(C,e,w),l(e,s),l(s,u),l(e,i),l(e,c),l(c,T),l(e,v),l(e,f),l(f,b),l(e,z),E||(x=H(e,"click",I),E=!0)},p(C,w){n=C,w[0]&4&&(e.disabled=n[2]),w[0]&131073&&Yl(e,"active",n[0].provider===n[83])},d(C){C&&d(e),E=!1,x()}}}function Zs(n){let e,s,t="Kokoro TTS Settings",u,i,c,g="Server Status",T,v,f,p,b,z="Voice",E,x,I,C,w,M,N,P,Z="Language Code",A,O,de,Q="Auto-detect",ne,Ne="English",B,oe="Japanese",j,S="Chinese",K,ae="Spanish",R,Ee="French",te,le="German",G,ue="Korean",re,Te,Me="Language for text processing (auto-detect recommended)",Re,Ke,ce,Ie,Ze=n[0].kokoro.speed.toFixed(2)+"",_t,Ae,ze,Se,gt,pe,We="<span>Slower</span> <span>Normal</span> <span>Faster</span>",qe,De,Pe,lt="Device for Inference",bt,fe,je,ye="CPU - Fast & no GPU conflicts",Ue,at="GPU (CUDA) - Faster (requires GPU)",zt,$,It="Kokoro is optimized for CPU inference. GPU recommended only if CPU is slow.",Ge,rt,Be,He,Le,be,st,Ve,W,F="Test Kokoro Voice",y,J,Je,he,ge,xe=n[6]?"üîä Playing...":"‚ñ∂Ô∏è Test Kokoro",me,it,ve,ke,ut;v=new ts({props:{serverName:"Kokoro",statusEndpoint:"/api/kokoro-server",controlEndpoint:"/api/kokoro-server",autoRefresh:!0,refreshInterval:15e3}});function Oe(q,se){return q[0].kokoro.voices&&q[0].kokoro.voices.length>0?sn:ln}let Lt=Oe(n),Xe=Lt(n);function Ut(q,se){return se[0]&1&&(w=null),w==null&&(w=!!q[0].kokoro.voices?.some(pn)),w?on:nn}let xt=Ut(n,[-1,-1,-1]),St=xt(n),Ce=n[0].kokoro.useCustomVoicepack&&ks(n);return{c(){e=r("div"),s=r("h4"),s.textContent=t,u=_(),i=r("div"),c=r("label"),c.textContent=g,T=_(),es(v.$$.fragment),f=_(),p=r("div"),b=r("label"),b.textContent=z,E=_(),x=r("select"),Xe.c(),I=_(),C=r("p"),St.c(),M=_(),N=r("div"),P=r("label"),P.textContent=Z,A=_(),O=r("select"),de=r("option"),de.textContent=Q,ne=r("option"),ne.textContent=Ne,B=r("option"),B.textContent=oe,j=r("option"),j.textContent=S,K=r("option"),K.textContent=ae,R=r("option"),R.textContent=Ee,te=r("option"),te.textContent=le,G=r("option"),G.textContent=ue,re=_(),Te=r("p"),Te.textContent=Me,Re=_(),Ke=r("div"),ce=r("label"),Ie=L("Speed: "),_t=L(Ze),Ae=L("x"),ze=_(),Se=r("input"),gt=_(),pe=r("div"),pe.innerHTML=We,qe=_(),De=r("div"),Pe=r("label"),Pe.textContent=lt,bt=_(),fe=r("select"),je=r("option"),je.textContent=ye,Ue=r("option"),Ue.textContent=at,zt=_(),$=r("p"),$.textContent=It,Ge=_(),Ce&&Ce.c(),rt=_(),Be=r("div"),He=r("label"),Le=r("input"),be=L(`
            Auto-fallback to Piper if unavailable`),st=_(),Ve=r("div"),W=r("label"),W.textContent=F,y=_(),J=r("textarea"),he=_(),ge=r("button"),me=L(xe),this.h()},l(q){e=a(q,"DIV",{class:!0});var se=m(e);s=a(se,"H4",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-1hbber7"&&(s.textContent=t),u=h(se),i=a(se,"DIV",{class:!0});var Ht=m(i);c=a(Ht,"LABEL",{class:!0,"data-svelte-h":!0}),k(c)!=="svelte-108nlw7"&&(c.textContent=g),T=h(Ht),$l(v.$$.fragment,Ht),Ht.forEach(d),f=h(se),p=a(se,"DIV",{class:!0});var we=m(p);b=a(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(b)!=="svelte-fs8sqk"&&(b.textContent=z),E=h(we),x=a(we,"SELECT",{id:!0,class:!0});var ct=m(x);Xe.l(ct),ct.forEach(d),I=h(we),C=a(we,"P",{class:!0});var vl=m(C);St.l(vl),vl.forEach(d),we.forEach(d),M=h(se),N=a(se,"DIV",{class:!0});var wt=m(N);P=a(wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(P)!=="svelte-lzns13"&&(P.textContent=Z),A=h(wt),O=a(wt,"SELECT",{id:!0,class:!0});var Fe=m(O);de=a(Fe,"OPTION",{"data-svelte-h":!0}),k(de)!=="svelte-wn3tey"&&(de.textContent=Q),ne=a(Fe,"OPTION",{"data-svelte-h":!0}),k(ne)!=="svelte-1bjraht"&&(ne.textContent=Ne),B=a(Fe,"OPTION",{"data-svelte-h":!0}),k(B)!=="svelte-b5b4d4"&&(B.textContent=oe),j=a(Fe,"OPTION",{"data-svelte-h":!0}),k(j)!=="svelte-a5xoll"&&(j.textContent=S),K=a(Fe,"OPTION",{"data-svelte-h":!0}),k(K)!=="svelte-36revo"&&(K.textContent=ae),R=a(Fe,"OPTION",{"data-svelte-h":!0}),k(R)!=="svelte-1mzqoq2"&&(R.textContent=Ee),te=a(Fe,"OPTION",{"data-svelte-h":!0}),k(te)!=="svelte-hpaull"&&(te.textContent=le),G=a(Fe,"OPTION",{"data-svelte-h":!0}),k(G)!=="svelte-1tkaqkc"&&(G.textContent=ue),Fe.forEach(d),re=h(wt),Te=a(wt,"P",{class:!0,"data-svelte-h":!0}),k(Te)!=="svelte-16ekx3q"&&(Te.textContent=Me),wt.forEach(d),Re=h(se),Ke=a(se,"DIV",{class:!0});var vt=m(Ke);ce=a(vt,"LABEL",{for:!0,class:!0});var nt=m(ce);Ie=D(nt,"Speed: "),_t=D(nt,Ze),Ae=D(nt,"x"),nt.forEach(d),ze=h(vt),Se=a(vt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),gt=h(vt),pe=a(vt,"DIV",{class:!0,"data-svelte-h":!0}),k(pe)!=="svelte-i2pupp"&&(pe.innerHTML=We),vt.forEach(d),qe=h(se),De=a(se,"DIV",{class:!0});var dt=m(De);Pe=a(dt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(Pe)!=="svelte-1phy0a0"&&(Pe.textContent=lt),bt=h(dt),fe=a(dt,"SELECT",{id:!0,class:!0});var Ot=m(fe);je=a(Ot,"OPTION",{"data-svelte-h":!0}),k(je)!=="svelte-1x0vhm1"&&(je.textContent=ye),Ue=a(Ot,"OPTION",{"data-svelte-h":!0}),k(Ue)!=="svelte-1ipoonk"&&(Ue.textContent=at),Ot.forEach(d),zt=h(dt),$=a(dt,"P",{class:!0,"data-svelte-h":!0}),k($)!=="svelte-ld725p"&&($.textContent=It),dt.forEach(d),Ge=h(se),Ce&&Ce.l(se),rt=h(se),Be=a(se,"DIV",{class:!0});var dl=m(Be);He=a(dl,"LABEL",{class:!0});var mt=m(He);Le=a(mt,"INPUT",{type:!0,class:!0}),be=D(mt,`
            Auto-fallback to Piper if unavailable`),mt.forEach(d),dl.forEach(d),st=h(se),Ve=a(se,"DIV",{class:!0});var kt=m(Ve);W=a(kt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(W)!=="svelte-8ytumj"&&(W.textContent=F),y=h(kt),J=a(kt,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),m(J).forEach(d),he=h(kt),ge=a(kt,"BUTTON",{class:!0});var fl=m(ge);me=D(fl,xe),fl.forEach(d),kt.forEach(d),se.forEach(d),this.h()},h(){o(s,"class","svelte-6zxxgu"),o(c,"class","svelte-6zxxgu"),o(i,"class","setting-group svelte-6zxxgu"),o(b,"for","kokoro-voice"),o(b,"class","svelte-6zxxgu"),o(x,"id","kokoro-voice"),x.disabled=n[2],o(x,"class","svelte-6zxxgu"),n[0].kokoro.voice===void 0&&cl(()=>n[47].call(x)),o(C,"class","hint svelte-6zxxgu"),o(p,"class","setting-group svelte-6zxxgu"),o(P,"for","kokoro-lang"),o(P,"class","svelte-6zxxgu"),de.__value="a",V(de,de.__value),ne.__value="en",V(ne,ne.__value),B.__value="ja",V(B,B.__value),j.__value="zh",V(j,j.__value),K.__value="es",V(K,K.__value),R.__value="fr",V(R,R.__value),te.__value="de",V(te,te.__value),G.__value="ko",V(G,G.__value),o(O,"id","kokoro-lang"),O.disabled=n[2],o(O,"class","svelte-6zxxgu"),n[0].kokoro.langCode===void 0&&cl(()=>n[48].call(O)),o(Te,"class","hint svelte-6zxxgu"),o(N,"class","setting-group svelte-6zxxgu"),o(ce,"for","kokoro-speed"),o(ce,"class","svelte-6zxxgu"),o(Se,"id","kokoro-speed"),o(Se,"type","range"),o(Se,"min","0.5"),o(Se,"max","2.0"),o(Se,"step","0.05"),Se.disabled=n[2],o(Se,"class","svelte-6zxxgu"),o(pe,"class","range-labels svelte-6zxxgu"),o(Ke,"class","setting-group svelte-6zxxgu"),o(Pe,"for","kokoro-device"),o(Pe,"class","svelte-6zxxgu"),je.__value="cpu",V(je,je.__value),Ue.__value="cuda",V(Ue,Ue.__value),o(fe,"id","kokoro-device"),fe.disabled=n[2],o(fe,"class","svelte-6zxxgu"),n[0].kokoro.device===void 0&&cl(()=>n[50].call(fe)),o($,"class","hint svelte-6zxxgu"),o(De,"class","setting-group svelte-6zxxgu"),o(Le,"type","checkbox"),Le.disabled=n[2],o(Le,"class","svelte-6zxxgu"),o(He,"class","checkbox-label svelte-6zxxgu"),o(Be,"class","setting-group svelte-6zxxgu"),o(W,"for","kokoro-test-text"),o(W,"class","svelte-6zxxgu"),o(J,"id","kokoro-test-text"),o(J,"rows","2"),o(J,"placeholder","Enter text to test Kokoro synthesis..."),J.disabled=Je=n[6]||n[2],o(J,"class","svelte-6zxxgu"),o(ge,"class","test-button kokoro-test svelte-6zxxgu"),ge.disabled=it=n[6]||n[2],o(Ve,"class","provider-test-section svelte-6zxxgu"),o(e,"class","provider-settings svelte-6zxxgu")},m(q,se){U(q,e,se),l(e,s),l(e,u),l(e,i),l(i,c),l(i,T),Zl(v,i,null),l(e,f),l(e,p),l(p,b),l(p,E),l(p,x),Xe.m(x,null),ft(x,n[0].kokoro.voice,!0),l(p,I),l(p,C),St.m(C,null),l(e,M),l(e,N),l(N,P),l(N,A),l(N,O),l(O,de),l(O,ne),l(O,B),l(O,j),l(O,K),l(O,R),l(O,te),l(O,G),ft(O,n[0].kokoro.langCode,!0),l(N,re),l(N,Te),l(e,Re),l(e,Ke),l(Ke,ce),l(ce,Ie),l(ce,_t),l(ce,Ae),l(Ke,ze),l(Ke,Se),V(Se,n[0].kokoro.speed),l(Ke,gt),l(Ke,pe),l(e,qe),l(e,De),l(De,Pe),l(De,bt),l(De,fe),l(fe,je),l(fe,Ue),ft(fe,n[0].kokoro.device,!0),l(De,zt),l(De,$),l(e,Ge),Ce&&Ce.m(e,null),l(e,rt),l(e,Be),l(Be,He),l(He,Le),Le.checked=n[0].kokoro.autoFallbackToPiper,l(He,be),l(e,st),l(e,Ve),l(Ve,W),l(Ve,y),l(Ve,J),V(J,n[5]),l(Ve,he),l(Ve,ge),l(ge,me),ve=!0,ke||(ut=[H(x,"change",n[47]),H(O,"change",n[48]),H(Se,"change",n[49]),H(Se,"input",n[49]),H(fe,"change",n[50]),H(Le,"change",n[52]),H(J,"input",n[53]),H(ge,"click",n[54])],ke=!0)},p(q,se){Lt===(Lt=Oe(q))&&Xe?Xe.p(q,se):(Xe.d(1),Xe=Lt(q),Xe&&(Xe.c(),Xe.m(x,null))),(!ve||se[0]&4)&&(x.disabled=q[2]),se[0]&1&&ft(x,q[0].kokoro.voice),xt!==(xt=Ut(q,se))&&(St.d(1),St=xt(q),St&&(St.c(),St.m(C,null))),(!ve||se[0]&4)&&(O.disabled=q[2]),se[0]&1&&ft(O,q[0].kokoro.langCode),(!ve||se[0]&1)&&Ze!==(Ze=q[0].kokoro.speed.toFixed(2)+"")&&_e(_t,Ze),(!ve||se[0]&4)&&(Se.disabled=q[2]),se[0]&1&&V(Se,q[0].kokoro.speed),(!ve||se[0]&4)&&(fe.disabled=q[2]),se[0]&1&&ft(fe,q[0].kokoro.device),q[0].kokoro.useCustomVoicepack?Ce?Ce.p(q,se):(Ce=ks(q),Ce.c(),Ce.m(e,rt)):Ce&&(Ce.d(1),Ce=null),(!ve||se[0]&4)&&(Le.disabled=q[2]),se[0]&1&&(Le.checked=q[0].kokoro.autoFallbackToPiper),(!ve||se[0]&68&&Je!==(Je=q[6]||q[2]))&&(J.disabled=Je),se[0]&32&&V(J,q[5]),(!ve||se[0]&64)&&xe!==(xe=q[6]?"üîä Playing...":"‚ñ∂Ô∏è Test Kokoro")&&_e(me,xe),(!ve||se[0]&68&&it!==(it=q[6]||q[2]))&&(ge.disabled=it)},i(q){ve||(yt(v.$$.fragment,q),ve=!0)},o(q){Kt(v.$$.fragment,q),ve=!1},d(q){q&&d(e),Xl(v),Xe.d(),St.d(),Ce&&Ce.d(),ke=!1,Fl(ut)}}}function $s(n){let e,s,t="RVC Settings",u,i,c,g="Server Status",T,v,f,p,b,z="Speaker ID",E,x,I,C,w="References voice model in profiles/[user]/out/voices/rvc/[speaker-id]/",M,N,P,Z,A=n[0].rvc.pitchShift>0?"+":"",O,de=n[0].rvc.pitchShift+"",Q,ne,Ne,B,oe,j,S="<span>-12 (Lower)</span> <span>0 (Normal)</span> <span>+12 (Higher)</span>",K,ae,R,Ee,te=n[0].rvc.speed.toFixed(2)+"",le,G,ue,re,Te,Me,Re="<span>Slower</span> <span>Normal</span> <span>Faster</span>",Ke,ce,Ie,Ze="‚öôÔ∏è Advanced Quality Settings",_t,Ae,ze,Se,gt=(n[0].rvc.indexRate??1).toFixed(2)+"",pe,We,qe,De,Pe,lt="Voice retrieval strength (higher = more voice characteristics, 1.0 recommended)",bt,fe,je,ye,Ue=(n[0].rvc.volumeEnvelope??0).toFixed(2)+"",at,zt,$,It,Ge,rt="RMS mix rate (0.0 = pure conversion, 1.0 = blend with original)",Be,He,Le,be,st=(n[0].rvc.protect??.15).toFixed(2)+"",Ve,W,F,y,J,Je="Protect voiceless consonants (0.15-0.20 recommended for clarity)",he,ge,xe,me="Pitch Detection Method",it,ve,ke,ut="RMVPE (Recommended)",Oe,Lt="CREPE (High Quality)",Xe,Ut="Harvest (Fast)",xt,St="DIO (Fastest)",Ce,q,se="RMVPE is the most accurate for most voices",Ht,we,ct,vl="Device for Inference",wt,Fe,vt,nt="GPU (CUDA) - Faster",dt,Ot="CPU - Slower, no GPU conflicts",dl,mt,kt="‚ö†Ô∏è Restart server required: Device changes only take effect after restarting the RVC server (use the restart button in Server Status above).",fl,Jt,Dt=`CPU mode eliminates GPU VRAM conflicts with Ollama but is 10-40x slower.
              Recommended: GPU (CUDA) for conversation, CPU only if GPU unavailable.`,Ft,Yt,xl='<strong class="svelte-6zxxgu">üí° Quality Tips:</strong> <ul class="svelte-6zxxgu"><li class="svelte-6zxxgu">For grainy voice: Keep Index Rate at 1.0, Volume Envelope at 0.0</li> <li class="svelte-6zxxgu">For robotic voice: Increase Consonant Protection to 0.20-0.25</li> <li class="svelte-6zxxgu">For muffled voice: Decrease Consonant Protection to 0.10-0.15</li> <li class="svelte-6zxxgu">Test after each adjustment to hear the difference</li></ul>',ml,sl,Qt,Ye,wl,Xt,Mt,qt,nl="Test RVC Voice",Vl,Ct,Tt,Rt,Bt,Zt=n[6]?"üîä Playing...":"‚ñ∂Ô∏è Test RVC",pl,kl,Qe,pt,Dl;return v=new ts({props:{serverName:"RVC",statusEndpoint:"/api/rvc-server",controlEndpoint:"/api/rvc-server",autoRefresh:!0,refreshInterval:15e3}}),{c(){e=r("div"),s=r("h4"),s.textContent=t,u=_(),i=r("div"),c=r("label"),c.textContent=g,T=_(),es(v.$$.fragment),f=_(),p=r("div"),b=r("label"),b.textContent=z,E=_(),x=r("input"),I=_(),C=r("p"),C.textContent=w,M=_(),N=r("div"),P=r("label"),Z=L("Pitch Shift: "),O=L(A),Q=L(de),ne=L(" semitones"),Ne=_(),B=r("input"),oe=_(),j=r("div"),j.innerHTML=S,K=_(),ae=r("div"),R=r("label"),Ee=L("Speed: "),le=L(te),G=L("x"),ue=_(),re=r("input"),Te=_(),Me=r("div"),Me.innerHTML=Re,Ke=_(),ce=r("div"),Ie=r("h5"),Ie.textContent=Ze,_t=_(),Ae=r("div"),ze=r("label"),Se=L("Index Rate: "),pe=L(gt),We=_(),qe=r("input"),De=_(),Pe=r("p"),Pe.textContent=lt,bt=_(),fe=r("div"),je=r("label"),ye=L("Volume Envelope: "),at=L(Ue),zt=_(),$=r("input"),It=_(),Ge=r("p"),Ge.textContent=rt,Be=_(),He=r("div"),Le=r("label"),be=L("Consonant Protection: "),Ve=L(st),W=_(),F=r("input"),y=_(),J=r("p"),J.textContent=Je,he=_(),ge=r("div"),xe=r("label"),xe.textContent=me,it=_(),ve=r("select"),ke=r("option"),ke.textContent=ut,Oe=r("option"),Oe.textContent=Lt,Xe=r("option"),Xe.textContent=Ut,xt=r("option"),xt.textContent=St,Ce=_(),q=r("p"),q.textContent=se,Ht=_(),we=r("div"),ct=r("label"),ct.textContent=vl,wt=_(),Fe=r("select"),vt=r("option"),vt.textContent=nt,dt=r("option"),dt.textContent=Ot,dl=_(),mt=r("p"),mt.textContent=kt,fl=_(),Jt=r("p"),Jt.textContent=Dt,Ft=_(),Yt=r("div"),Yt.innerHTML=xl,ml=_(),sl=r("div"),Qt=r("label"),Ye=r("input"),wl=L(`
            Auto-fallback to Piper if model unavailable`),Xt=_(),Mt=r("div"),qt=r("label"),qt.textContent=nl,Vl=_(),Ct=r("textarea"),Rt=_(),Bt=r("button"),pl=L(Zt),this.h()},l(ee){e=a(ee,"DIV",{class:!0});var X=m(e);s=a(X,"H4",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-xgl6xk"&&(s.textContent=t),u=h(X),i=a(X,"DIV",{class:!0});var Cl=m(i);c=a(Cl,"LABEL",{class:!0,"data-svelte-h":!0}),k(c)!=="svelte-108nlw7"&&(c.textContent=g),T=h(Cl),$l(v.$$.fragment,Cl),Cl.forEach(d),f=h(X),p=a(X,"DIV",{class:!0});var Nt=m(p);b=a(Nt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(b)!=="svelte-um70rn"&&(b.textContent=z),E=h(Nt),x=a(Nt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),I=h(Nt),C=a(Nt,"P",{class:!0,"data-svelte-h":!0}),k(C)!=="svelte-lsgunw"&&(C.textContent=w),Nt.forEach(d),M=h(X),N=a(X,"DIV",{class:!0});var hl=m(N);P=a(hl,"LABEL",{for:!0,class:!0});var _l=m(P);Z=D(_l,"Pitch Shift: "),O=D(_l,A),Q=D(_l,de),ne=D(_l," semitones"),_l.forEach(d),Ne=h(hl),B=a(hl,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),oe=h(hl),j=a(hl,"DIV",{class:!0,"data-svelte-h":!0}),k(j)!=="svelte-2jy9ov"&&(j.innerHTML=S),hl.forEach(d),K=h(X),ae=a(X,"DIV",{class:!0});var $e=m(ae);R=a($e,"LABEL",{for:!0,class:!0});var jt=m(R);Ee=D(jt,"Speed: "),le=D(jt,te),G=D(jt,"x"),jt.forEach(d),ue=h($e),re=a($e,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Te=h($e),Me=a($e,"DIV",{class:!0,"data-svelte-h":!0}),k(Me)!=="svelte-i2pupp"&&(Me.innerHTML=Re),$e.forEach(d),Ke=h(X),ce=a(X,"DIV",{class:!0});var Et=m(ce);Ie=a(Et,"H5",{style:!0,class:!0,"data-svelte-h":!0}),k(Ie)!=="svelte-1htbl6t"&&(Ie.textContent=Ze),_t=h(Et),Ae=a(Et,"DIV",{class:!0});var ol=m(Ae);ze=a(ol,"LABEL",{for:!0,class:!0});var $t=m(ze);Se=D($t,"Index Rate: "),pe=D($t,gt),$t.forEach(d),We=h(ol),qe=a(ol,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),De=h(ol),Pe=a(ol,"P",{class:!0,"data-svelte-h":!0}),k(Pe)!=="svelte-gwtx8f"&&(Pe.textContent=lt),ol.forEach(d),bt=h(Et),fe=a(Et,"DIV",{class:!0});var gl=m(fe);je=a(gl,"LABEL",{for:!0,class:!0});var Pl=m(je);ye=D(Pl,"Volume Envelope: "),at=D(Pl,Ue),Pl.forEach(d),zt=h(gl),$=a(gl,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),It=h(gl),Ge=a(gl,"P",{class:!0,"data-svelte-h":!0}),k(Ge)!=="svelte-avm4fg"&&(Ge.textContent=rt),gl.forEach(d),Be=h(Et),He=a(Et,"DIV",{class:!0});var el=m(He);Le=a(el,"LABEL",{for:!0,class:!0});var Tl=m(Le);be=D(Tl,"Consonant Protection: "),Ve=D(Tl,st),Tl.forEach(d),W=h(el),F=a(el,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),y=h(el),J=a(el,"P",{class:!0,"data-svelte-h":!0}),k(J)!=="svelte-kqnp3s"&&(J.textContent=Je),el.forEach(d),he=h(Et),ge=a(Et,"DIV",{class:!0});var et=m(ge);xe=a(et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(xe)!=="svelte-t7rcbk"&&(xe.textContent=me),it=h(et),ve=a(et,"SELECT",{id:!0,class:!0});var bl=m(ve);ke=a(bl,"OPTION",{"data-svelte-h":!0}),k(ke)!=="svelte-uvv0i8"&&(ke.textContent=ut),Oe=a(bl,"OPTION",{"data-svelte-h":!0}),k(Oe)!=="svelte-btvj46"&&(Oe.textContent=Lt),Xe=a(bl,"OPTION",{"data-svelte-h":!0}),k(Xe)!=="svelte-jes2vf"&&(Xe.textContent=Ut),xt=a(bl,"OPTION",{"data-svelte-h":!0}),k(xt)!=="svelte-vwgk4t"&&(xt.textContent=St),bl.forEach(d),Ce=h(et),q=a(et,"P",{class:!0,"data-svelte-h":!0}),k(q)!=="svelte-15k5x1r"&&(q.textContent=se),et.forEach(d),Ht=h(Et),we=a(Et,"DIV",{class:!0});var tl=m(we);ct=a(tl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(ct)!=="svelte-1b3hxy2"&&(ct.textContent=vl),wt=h(tl),Fe=a(tl,"SELECT",{id:!0,class:!0});var tt=m(Fe);vt=a(tt,"OPTION",{"data-svelte-h":!0}),k(vt)!=="svelte-uap9xp"&&(vt.textContent=nt),dt=a(tt,"OPTION",{"data-svelte-h":!0}),k(dt)!=="svelte-10gxt1x"&&(dt.textContent=Ot),tt.forEach(d),dl=h(tl),mt=a(tl,"P",{class:!0,style:!0,"data-svelte-h":!0}),k(mt)!=="svelte-nmo9gq"&&(mt.textContent=kt),fl=h(tl),Jt=a(tl,"P",{class:!0,"data-svelte-h":!0}),k(Jt)!=="svelte-1lik364"&&(Jt.textContent=Dt),tl.forEach(d),Ft=h(Et),Yt=a(Et,"DIV",{class:!0,"data-svelte-h":!0}),k(Yt)!=="svelte-5dm0g7"&&(Yt.innerHTML=xl),Et.forEach(d),ml=h(X),sl=a(X,"DIV",{class:!0});var ht=m(sl);Qt=a(ht,"LABEL",{class:!0});var Ll=m(Qt);Ye=a(Ll,"INPUT",{type:!0,class:!0}),wl=D(Ll,`
            Auto-fallback to Piper if model unavailable`),Ll.forEach(d),ht.forEach(d),Xt=h(X),Mt=a(X,"DIV",{class:!0});var ll=m(Mt);qt=a(ll,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(qt)!=="svelte-fl8faz"&&(qt.textContent=nl),Vl=h(ll),Ct=a(ll,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),m(Ct).forEach(d),Rt=h(ll),Bt=a(ll,"BUTTON",{class:!0});var At=m(Bt);pl=D(At,Zt),At.forEach(d),ll.forEach(d),X.forEach(d),this.h()},h(){o(s,"class","svelte-6zxxgu"),o(c,"class","svelte-6zxxgu"),o(i,"class","setting-group svelte-6zxxgu"),o(b,"for","rvc-speaker"),o(b,"class","svelte-6zxxgu"),o(x,"id","rvc-speaker"),o(x,"type","text"),o(x,"placeholder","default"),x.disabled=n[2],o(x,"class","svelte-6zxxgu"),o(C,"class","hint svelte-6zxxgu"),o(p,"class","setting-group svelte-6zxxgu"),o(P,"for","rvc-pitch"),o(P,"class","svelte-6zxxgu"),o(B,"id","rvc-pitch"),o(B,"type","range"),o(B,"min","-12"),o(B,"max","12"),o(B,"step","1"),B.disabled=n[2],o(B,"class","svelte-6zxxgu"),o(j,"class","range-labels svelte-6zxxgu"),o(N,"class","setting-group svelte-6zxxgu"),o(R,"for","rvc-speed"),o(R,"class","svelte-6zxxgu"),o(re,"id","rvc-speed"),o(re,"type","range"),o(re,"min","0.5"),o(re,"max","2.0"),o(re,"step","0.05"),re.disabled=n[2],o(re,"class","svelte-6zxxgu"),o(Me,"class","range-labels svelte-6zxxgu"),o(ae,"class","setting-group svelte-6zxxgu"),ot(Ie,"margin","1rem 0 0.5rem 0"),ot(Ie,"color","#6b7280"),ot(Ie,"font-size","0.875rem"),o(Ie,"class","svelte-6zxxgu"),o(ze,"for","rvc-index-rate"),o(ze,"class","svelte-6zxxgu"),o(qe,"id","rvc-index-rate"),o(qe,"type","range"),o(qe,"min","0.0"),o(qe,"max","1.0"),o(qe,"step","0.05"),qe.disabled=n[2],o(qe,"class","svelte-6zxxgu"),o(Pe,"class","hint svelte-6zxxgu"),o(Ae,"class","setting-group svelte-6zxxgu"),o(je,"for","rvc-volume-envelope"),o(je,"class","svelte-6zxxgu"),o($,"id","rvc-volume-envelope"),o($,"type","range"),o($,"min","0.0"),o($,"max","1.0"),o($,"step","0.05"),$.disabled=n[2],o($,"class","svelte-6zxxgu"),o(Ge,"class","hint svelte-6zxxgu"),o(fe,"class","setting-group svelte-6zxxgu"),o(Le,"for","rvc-protect"),o(Le,"class","svelte-6zxxgu"),o(F,"id","rvc-protect"),o(F,"type","range"),o(F,"min","0.0"),o(F,"max","0.5"),o(F,"step","0.01"),F.disabled=n[2],o(F,"class","svelte-6zxxgu"),o(J,"class","hint svelte-6zxxgu"),o(He,"class","setting-group svelte-6zxxgu"),o(xe,"for","rvc-f0-method"),o(xe,"class","svelte-6zxxgu"),ke.__value="rmvpe",V(ke,ke.__value),Oe.__value="crepe",V(Oe,Oe.__value),Xe.__value="harvest",V(Xe,Xe.__value),xt.__value="dio",V(xt,xt.__value),o(ve,"id","rvc-f0-method"),ve.disabled=n[2],o(ve,"class","svelte-6zxxgu"),n[0].rvc.f0Method===void 0&&cl(()=>n[42].call(ve)),o(q,"class","hint svelte-6zxxgu"),o(ge,"class","setting-group svelte-6zxxgu"),o(ct,"for","rvc-device"),o(ct,"class","svelte-6zxxgu"),vt.__value="cuda",V(vt,vt.__value),dt.__value="cpu",V(dt,dt.__value),o(Fe,"id","rvc-device"),Fe.disabled=n[2],o(Fe,"class","svelte-6zxxgu"),n[0].rvc.device===void 0&&cl(()=>n[43].call(Fe)),o(mt,"class","hint svelte-6zxxgu"),ot(mt,"color","#f59e0b"),ot(mt,"font-weight","500"),o(Jt,"class","hint svelte-6zxxgu"),o(we,"class","setting-group svelte-6zxxgu"),o(Yt,"class","quality-tips svelte-6zxxgu"),o(ce,"class","advanced-settings svelte-6zxxgu"),o(Ye,"type","checkbox"),Ye.disabled=n[2],o(Ye,"class","svelte-6zxxgu"),o(Qt,"class","checkbox-label svelte-6zxxgu"),o(sl,"class","setting-group svelte-6zxxgu"),o(qt,"for","rvc-test-text"),o(qt,"class","svelte-6zxxgu"),o(Ct,"id","rvc-test-text"),o(Ct,"rows","2"),o(Ct,"placeholder","Enter text to test RVC voice conversion..."),Ct.disabled=Tt=n[6]||n[2],o(Ct,"class","svelte-6zxxgu"),o(Bt,"class","test-button rvc-test svelte-6zxxgu"),Bt.disabled=kl=n[6]||n[2],o(Mt,"class","provider-test-section svelte-6zxxgu"),o(e,"class","provider-settings svelte-6zxxgu")},m(ee,X){U(ee,e,X),l(e,s),l(e,u),l(e,i),l(i,c),l(i,T),Zl(v,i,null),l(e,f),l(e,p),l(p,b),l(p,E),l(p,x),V(x,n[0].rvc.speakerId),l(p,I),l(p,C),l(e,M),l(e,N),l(N,P),l(P,Z),l(P,O),l(P,Q),l(P,ne),l(N,Ne),l(N,B),V(B,n[0].rvc.pitchShift),l(N,oe),l(N,j),l(e,K),l(e,ae),l(ae,R),l(R,Ee),l(R,le),l(R,G),l(ae,ue),l(ae,re),V(re,n[0].rvc.speed),l(ae,Te),l(ae,Me),l(e,Ke),l(e,ce),l(ce,Ie),l(ce,_t),l(ce,Ae),l(Ae,ze),l(ze,Se),l(ze,pe),l(Ae,We),l(Ae,qe),V(qe,n[0].rvc.indexRate),l(Ae,De),l(Ae,Pe),l(ce,bt),l(ce,fe),l(fe,je),l(je,ye),l(je,at),l(fe,zt),l(fe,$),V($,n[0].rvc.volumeEnvelope),l(fe,It),l(fe,Ge),l(ce,Be),l(ce,He),l(He,Le),l(Le,be),l(Le,Ve),l(He,W),l(He,F),V(F,n[0].rvc.protect),l(He,y),l(He,J),l(ce,he),l(ce,ge),l(ge,xe),l(ge,it),l(ge,ve),l(ve,ke),l(ve,Oe),l(ve,Xe),l(ve,xt),ft(ve,n[0].rvc.f0Method,!0),l(ge,Ce),l(ge,q),l(ce,Ht),l(ce,we),l(we,ct),l(we,wt),l(we,Fe),l(Fe,vt),l(Fe,dt),ft(Fe,n[0].rvc.device,!0),l(we,dl),l(we,mt),l(we,fl),l(we,Jt),l(ce,Ft),l(ce,Yt),l(e,ml),l(e,sl),l(sl,Qt),l(Qt,Ye),Ye.checked=n[0].rvc.autoFallbackToPiper,l(Qt,wl),l(e,Xt),l(e,Mt),l(Mt,qt),l(Mt,Vl),l(Mt,Ct),V(Ct,n[5]),l(Mt,Rt),l(Mt,Bt),l(Bt,pl),Qe=!0,pt||(Dl=[H(x,"input",n[36]),H(B,"change",n[37]),H(B,"input",n[37]),H(re,"change",n[38]),H(re,"input",n[38]),H(qe,"change",n[39]),H(qe,"input",n[39]),H($,"change",n[40]),H($,"input",n[40]),H(F,"change",n[41]),H(F,"input",n[41]),H(ve,"change",n[42]),H(Fe,"change",n[43]),H(Ye,"change",n[44]),H(Ct,"input",n[45]),H(Bt,"click",n[46])],pt=!0)},p(ee,X){(!Qe||X[0]&4)&&(x.disabled=ee[2]),X[0]&1&&x.value!==ee[0].rvc.speakerId&&V(x,ee[0].rvc.speakerId),(!Qe||X[0]&1)&&A!==(A=ee[0].rvc.pitchShift>0?"+":"")&&_e(O,A),(!Qe||X[0]&1)&&de!==(de=ee[0].rvc.pitchShift+"")&&_e(Q,de),(!Qe||X[0]&4)&&(B.disabled=ee[2]),X[0]&1&&V(B,ee[0].rvc.pitchShift),(!Qe||X[0]&1)&&te!==(te=ee[0].rvc.speed.toFixed(2)+"")&&_e(le,te),(!Qe||X[0]&4)&&(re.disabled=ee[2]),X[0]&1&&V(re,ee[0].rvc.speed),(!Qe||X[0]&1)&&gt!==(gt=(ee[0].rvc.indexRate??1).toFixed(2)+"")&&_e(pe,gt),(!Qe||X[0]&4)&&(qe.disabled=ee[2]),X[0]&1&&V(qe,ee[0].rvc.indexRate),(!Qe||X[0]&1)&&Ue!==(Ue=(ee[0].rvc.volumeEnvelope??0).toFixed(2)+"")&&_e(at,Ue),(!Qe||X[0]&4)&&($.disabled=ee[2]),X[0]&1&&V($,ee[0].rvc.volumeEnvelope),(!Qe||X[0]&1)&&st!==(st=(ee[0].rvc.protect??.15).toFixed(2)+"")&&_e(Ve,st),(!Qe||X[0]&4)&&(F.disabled=ee[2]),X[0]&1&&V(F,ee[0].rvc.protect),(!Qe||X[0]&4)&&(ve.disabled=ee[2]),X[0]&1&&ft(ve,ee[0].rvc.f0Method),(!Qe||X[0]&4)&&(Fe.disabled=ee[2]),X[0]&1&&ft(Fe,ee[0].rvc.device),(!Qe||X[0]&4)&&(Ye.disabled=ee[2]),X[0]&1&&(Ye.checked=ee[0].rvc.autoFallbackToPiper),(!Qe||X[0]&68&&Tt!==(Tt=ee[6]||ee[2]))&&(Ct.disabled=Tt),X[0]&32&&V(Ct,ee[5]),(!Qe||X[0]&64)&&Zt!==(Zt=ee[6]?"üîä Playing...":"‚ñ∂Ô∏è Test RVC")&&_e(pl,Zt),(!Qe||X[0]&68&&kl!==(kl=ee[6]||ee[2]))&&(Bt.disabled=kl)},i(ee){Qe||(yt(v.$$.fragment,ee),Qe=!0)},o(ee){Kt(v.$$.fragment,ee),Qe=!1},d(ee){ee&&d(e),Xl(v),pt=!1,Fl(Dl)}}}function en(n){let e,s,t="GPT-SoVITS Settings",u,i,c,g="Server Status",T,v,f,p,b,z="Server URL",E,x,I,C,w,M="Speaker ID",N,P,Z,A,O,de,Q=n[0].sovits.temperature.toFixed(2)+"",ne,Ne,B,oe,j,S="<span>Stable</span> <span>Balanced</span> <span>Creative</span>",K,ae,R,Ee,te=n[0].sovits.speed.toFixed(2)+"",le,G,ue,re,Te,Me,Re="<span>Slower</span> <span>Normal</span> <span>Faster</span>",Ke,ce,Ie,Ze,_t,Ae,ze,Se,gt="Reference Audio Management",pe,We,qe="Generate reference.wav from the latest recorded sample in your voice profile.",De,Pe,lt=n[7]?"üîÑ Generating...":"üéØ Generate Reference Audio",bt,fe,je,ye,Ue,at="Test Cloned Voice",zt,$,It,Ge,rt,Be=n[6]?"üîä Playing...":"‚ñ∂Ô∏è Test SoVITS",He,Le,be,st,Ve;return v=new ts({props:{serverName:"GPT-SoVITS",statusEndpoint:"/api/sovits-server",controlEndpoint:"/api/sovits-server",autoRefresh:!0,refreshInterval:15e3}}),{c(){e=r("div"),s=r("h4"),s.textContent=t,u=_(),i=r("div"),c=r("label"),c.textContent=g,T=_(),es(v.$$.fragment),f=_(),p=r("div"),b=r("label"),b.textContent=z,E=_(),x=r("input"),I=_(),C=r("div"),w=r("label"),w.textContent=M,N=_(),P=r("input"),Z=_(),A=r("div"),O=r("label"),de=L("Temperature: "),ne=L(Q),Ne=_(),B=r("input"),oe=_(),j=r("div"),j.innerHTML=S,K=_(),ae=r("div"),R=r("label"),Ee=L("Speed: "),le=L(te),G=L("x"),ue=_(),re=r("input"),Te=_(),Me=r("div"),Me.innerHTML=Re,Ke=_(),ce=r("div"),Ie=r("label"),Ze=r("input"),_t=L(`
            Auto-fallback to Piper if unavailable`),Ae=_(),ze=r("div"),Se=r("label"),Se.textContent=gt,pe=_(),We=r("p"),We.textContent=qe,De=_(),Pe=r("button"),bt=L(lt),je=_(),ye=r("div"),Ue=r("label"),Ue.textContent=at,zt=_(),$=r("textarea"),Ge=_(),rt=r("button"),He=L(Be),this.h()},l(W){e=a(W,"DIV",{class:!0});var F=m(e);s=a(F,"H4",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-1ak8jyj"&&(s.textContent=t),u=h(F),i=a(F,"DIV",{class:!0});var y=m(i);c=a(y,"LABEL",{class:!0,"data-svelte-h":!0}),k(c)!=="svelte-108nlw7"&&(c.textContent=g),T=h(y),$l(v.$$.fragment,y),y.forEach(d),f=h(F),p=a(F,"DIV",{class:!0});var J=m(p);b=a(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(b)!=="svelte-x78qlu"&&(b.textContent=z),E=h(J),x=a(J,"INPUT",{id:!0,type:!0,class:!0}),J.forEach(d),I=h(F),C=a(F,"DIV",{class:!0});var Je=m(C);w=a(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(w)!=="svelte-13k82e2"&&(w.textContent=M),N=h(Je),P=a(Je,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Je.forEach(d),Z=h(F),A=a(F,"DIV",{class:!0});var he=m(A);O=a(he,"LABEL",{for:!0,class:!0});var ge=m(O);de=D(ge,"Temperature: "),ne=D(ge,Q),ge.forEach(d),Ne=h(he),B=a(he,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),oe=h(he),j=a(he,"DIV",{class:!0,"data-svelte-h":!0}),k(j)!=="svelte-1j0ljzj"&&(j.innerHTML=S),he.forEach(d),K=h(F),ae=a(F,"DIV",{class:!0});var xe=m(ae);R=a(xe,"LABEL",{for:!0,class:!0});var me=m(R);Ee=D(me,"Speed: "),le=D(me,te),G=D(me,"x"),me.forEach(d),ue=h(xe),re=a(xe,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Te=h(xe),Me=a(xe,"DIV",{class:!0,"data-svelte-h":!0}),k(Me)!=="svelte-i2pupp"&&(Me.innerHTML=Re),xe.forEach(d),Ke=h(F),ce=a(F,"DIV",{class:!0});var it=m(ce);Ie=a(it,"LABEL",{class:!0});var ve=m(Ie);Ze=a(ve,"INPUT",{type:!0,class:!0}),_t=D(ve,`
            Auto-fallback to Piper if unavailable`),ve.forEach(d),it.forEach(d),Ae=h(F),ze=a(F,"DIV",{class:!0});var ke=m(ze);Se=a(ke,"LABEL",{class:!0,"data-svelte-h":!0}),k(Se)!=="svelte-1ae1phq"&&(Se.textContent=gt),pe=h(ke),We=a(ke,"P",{class:!0,"data-svelte-h":!0}),k(We)!=="svelte-ycl7t9"&&(We.textContent=qe),De=h(ke),Pe=a(ke,"BUTTON",{class:!0});var ut=m(Pe);bt=D(ut,lt),ut.forEach(d),ke.forEach(d),je=h(F),ye=a(F,"DIV",{class:!0});var Oe=m(ye);Ue=a(Oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(Ue)!=="svelte-1u4x2km"&&(Ue.textContent=at),zt=h(Oe),$=a(Oe,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),m($).forEach(d),Ge=h(Oe),rt=a(Oe,"BUTTON",{class:!0});var Lt=m(rt);He=D(Lt,Be),Lt.forEach(d),Oe.forEach(d),F.forEach(d),this.h()},h(){o(s,"class","svelte-6zxxgu"),o(c,"class","svelte-6zxxgu"),o(i,"class","setting-group svelte-6zxxgu"),o(b,"for","sovits-url"),o(b,"class","svelte-6zxxgu"),o(x,"id","sovits-url"),o(x,"type","text"),x.disabled=n[2],o(x,"class","svelte-6zxxgu"),o(p,"class","setting-group svelte-6zxxgu"),o(w,"for","sovits-speaker"),o(w,"class","svelte-6zxxgu"),o(P,"id","sovits-speaker"),o(P,"type","text"),o(P,"placeholder","default"),P.disabled=n[2],o(P,"class","svelte-6zxxgu"),o(C,"class","setting-group svelte-6zxxgu"),o(O,"for","sovits-temp"),o(O,"class","svelte-6zxxgu"),o(B,"id","sovits-temp"),o(B,"type","range"),o(B,"min","0.1"),o(B,"max","1.0"),o(B,"step","0.05"),B.disabled=n[2],o(B,"class","svelte-6zxxgu"),o(j,"class","range-labels svelte-6zxxgu"),o(A,"class","setting-group svelte-6zxxgu"),o(R,"for","sovits-speed"),o(R,"class","svelte-6zxxgu"),o(re,"id","sovits-speed"),o(re,"type","range"),o(re,"min","0.5"),o(re,"max","2.0"),o(re,"step","0.05"),re.disabled=n[2],o(re,"class","svelte-6zxxgu"),o(Me,"class","range-labels svelte-6zxxgu"),o(ae,"class","setting-group svelte-6zxxgu"),o(Ze,"type","checkbox"),Ze.disabled=n[2],o(Ze,"class","svelte-6zxxgu"),o(Ie,"class","checkbox-label svelte-6zxxgu"),o(ce,"class","setting-group svelte-6zxxgu"),o(Se,"class","svelte-6zxxgu"),o(We,"class","hint svelte-6zxxgu"),o(Pe,"class","btn-generate-reference svelte-6zxxgu"),Pe.disabled=fe=n[7]||n[2],o(ze,"class","setting-group svelte-6zxxgu"),o(Ue,"for","sovits-test-text"),o(Ue,"class","svelte-6zxxgu"),o($,"id","sovits-test-text"),o($,"rows","2"),o($,"placeholder","Enter text to test your cloned voice..."),$.disabled=It=n[6]||n[2],o($,"class","svelte-6zxxgu"),o(rt,"class","test-button sovits-test svelte-6zxxgu"),rt.disabled=Le=n[6]||n[2],o(ye,"class","provider-test-section svelte-6zxxgu"),o(e,"class","provider-settings svelte-6zxxgu")},m(W,F){U(W,e,F),l(e,s),l(e,u),l(e,i),l(i,c),l(i,T),Zl(v,i,null),l(e,f),l(e,p),l(p,b),l(p,E),l(p,x),V(x,n[0].sovits.serverUrl),l(e,I),l(e,C),l(C,w),l(C,N),l(C,P),V(P,n[0].sovits.speakerId),l(e,Z),l(e,A),l(A,O),l(O,de),l(O,ne),l(A,Ne),l(A,B),V(B,n[0].sovits.temperature),l(A,oe),l(A,j),l(e,K),l(e,ae),l(ae,R),l(R,Ee),l(R,le),l(R,G),l(ae,ue),l(ae,re),V(re,n[0].sovits.speed),l(ae,Te),l(ae,Me),l(e,Ke),l(e,ce),l(ce,Ie),l(Ie,Ze),Ze.checked=n[0].sovits.autoFallbackToPiper,l(Ie,_t),l(e,Ae),l(e,ze),l(ze,Se),l(ze,pe),l(ze,We),l(ze,De),l(ze,Pe),l(Pe,bt),l(e,je),l(e,ye),l(ye,Ue),l(ye,zt),l(ye,$),V($,n[5]),l(ye,Ge),l(ye,rt),l(rt,He),be=!0,st||(Ve=[H(x,"input",n[29]),H(P,"input",n[30]),H(B,"change",n[31]),H(B,"input",n[31]),H(re,"change",n[32]),H(re,"input",n[32]),H(Ze,"change",n[33]),H(Pe,"click",n[19]),H($,"input",n[34]),H(rt,"click",n[35])],st=!0)},p(W,F){(!be||F[0]&4)&&(x.disabled=W[2]),F[0]&1&&x.value!==W[0].sovits.serverUrl&&V(x,W[0].sovits.serverUrl),(!be||F[0]&4)&&(P.disabled=W[2]),F[0]&1&&P.value!==W[0].sovits.speakerId&&V(P,W[0].sovits.speakerId),(!be||F[0]&1)&&Q!==(Q=W[0].sovits.temperature.toFixed(2)+"")&&_e(ne,Q),(!be||F[0]&4)&&(B.disabled=W[2]),F[0]&1&&V(B,W[0].sovits.temperature),(!be||F[0]&1)&&te!==(te=W[0].sovits.speed.toFixed(2)+"")&&_e(le,te),(!be||F[0]&4)&&(re.disabled=W[2]),F[0]&1&&V(re,W[0].sovits.speed),(!be||F[0]&4)&&(Ze.disabled=W[2]),F[0]&1&&(Ze.checked=W[0].sovits.autoFallbackToPiper),(!be||F[0]&128)&&lt!==(lt=W[7]?"üîÑ Generating...":"üéØ Generate Reference Audio")&&_e(bt,lt),(!be||F[0]&132&&fe!==(fe=W[7]||W[2]))&&(Pe.disabled=fe),(!be||F[0]&68&&It!==(It=W[6]||W[2]))&&($.disabled=It),F[0]&32&&V($,W[5]),(!be||F[0]&64)&&Be!==(Be=W[6]?"üîä Playing...":"‚ñ∂Ô∏è Test SoVITS")&&_e(He,Be),(!be||F[0]&68&&Le!==(Le=W[6]||W[2]))&&(rt.disabled=Le)},i(W){be||(yt(v.$$.fragment,W),be=!0)},o(W){Kt(v.$$.fragment,W),be=!1},d(W){W&&d(e),Xl(v),st=!1,Fl(Ve)}}}function tn(n){let e,s,t="Piper Settings",u,i,c,g="Voice Model",T,v,f,p,b,z,E=n[0].piper.speakingRate.toFixed(2)+"",x,I,C,w,M,N,P="<span>Slower</span> <span>Normal</span> <span>Faster</span>",Z,A,O,de="Test Piper Voice",Q,ne,Ne,B,oe,j=n[6]?"üîä Playing...":"‚ñ∂Ô∏è Test Piper",S,K,ae,R,Ee=Sl(n[0].piper.voices),te=[];for(let le=0;le<Ee.length;le+=1)te[le]=Cs(fs(n,Ee,le));return{c(){e=r("div"),s=r("h4"),s.textContent=t,u=_(),i=r("div"),c=r("label"),c.textContent=g,T=_(),v=r("select");for(let le=0;le<te.length;le+=1)te[le].c();f=_(),p=r("div"),b=r("label"),z=L("Speaking Rate: "),x=L(E),I=L("x"),C=_(),w=r("input"),M=_(),N=r("div"),N.innerHTML=P,Z=_(),A=r("div"),O=r("label"),O.textContent=de,Q=_(),ne=r("textarea"),B=_(),oe=r("button"),S=L(j),this.h()},l(le){e=a(le,"DIV",{class:!0});var G=m(e);s=a(G,"H4",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-veuykh"&&(s.textContent=t),u=h(G),i=a(G,"DIV",{class:!0});var ue=m(i);c=a(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(c)!=="svelte-xbbo56"&&(c.textContent=g),T=h(ue),v=a(ue,"SELECT",{id:!0,class:!0});var re=m(v);for(let ce=0;ce<te.length;ce+=1)te[ce].l(re);re.forEach(d),ue.forEach(d),f=h(G),p=a(G,"DIV",{class:!0});var Te=m(p);b=a(Te,"LABEL",{for:!0,class:!0});var Me=m(b);z=D(Me,"Speaking Rate: "),x=D(Me,E),I=D(Me,"x"),Me.forEach(d),C=h(Te),w=a(Te,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),M=h(Te),N=a(Te,"DIV",{class:!0,"data-svelte-h":!0}),k(N)!=="svelte-i2pupp"&&(N.innerHTML=P),Te.forEach(d),Z=h(G),A=a(G,"DIV",{class:!0});var Re=m(A);O=a(Re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),k(O)!=="svelte-1aop1wv"&&(O.textContent=de),Q=h(Re),ne=a(Re,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),m(ne).forEach(d),B=h(Re),oe=a(Re,"BUTTON",{class:!0});var Ke=m(oe);S=D(Ke,j),Ke.forEach(d),Re.forEach(d),G.forEach(d),this.h()},h(){o(s,"class","svelte-6zxxgu"),o(c,"for","piper-voice"),o(c,"class","svelte-6zxxgu"),o(v,"id","piper-voice"),v.disabled=n[2],o(v,"class","svelte-6zxxgu"),n[0].piper.currentVoice===void 0&&cl(()=>n[25].call(v)),o(i,"class","setting-group svelte-6zxxgu"),o(b,"for","piper-rate"),o(b,"class","svelte-6zxxgu"),o(w,"id","piper-rate"),o(w,"type","range"),o(w,"min","0.5"),o(w,"max","2.0"),o(w,"step","0.05"),w.disabled=n[2],o(w,"class","svelte-6zxxgu"),o(N,"class","range-labels svelte-6zxxgu"),o(p,"class","setting-group svelte-6zxxgu"),o(O,"for","piper-test-text"),o(O,"class","svelte-6zxxgu"),o(ne,"id","piper-test-text"),o(ne,"rows","2"),o(ne,"placeholder","Enter text to test Piper..."),ne.disabled=Ne=n[6]||n[2],o(ne,"class","svelte-6zxxgu"),o(oe,"class","test-button piper-test svelte-6zxxgu"),oe.disabled=K=n[6]||n[2],o(A,"class","provider-test-section svelte-6zxxgu"),o(e,"class","provider-settings svelte-6zxxgu")},m(le,G){U(le,e,G),l(e,s),l(e,u),l(e,i),l(i,c),l(i,T),l(i,v);for(let ue=0;ue<te.length;ue+=1)te[ue]&&te[ue].m(v,null);ft(v,n[0].piper.currentVoice,!0),l(e,f),l(e,p),l(p,b),l(b,z),l(b,x),l(b,I),l(p,C),l(p,w),V(w,n[0].piper.speakingRate),l(p,M),l(p,N),l(e,Z),l(e,A),l(A,O),l(A,Q),l(A,ne),V(ne,n[5]),l(A,B),l(A,oe),l(oe,S),ae||(R=[H(v,"change",n[25]),H(w,"change",n[26]),H(w,"input",n[26]),H(ne,"input",n[27]),H(oe,"click",n[28])],ae=!0)},p(le,G){if(G[0]&1){Ee=Sl(le[0].piper.voices);let ue;for(ue=0;ue<Ee.length;ue+=1){const re=fs(le,Ee,ue);te[ue]?te[ue].p(re,G):(te[ue]=Cs(re),te[ue].c(),te[ue].m(v,null))}for(;ue<te.length;ue+=1)te[ue].d(1);te.length=Ee.length}G[0]&4&&(v.disabled=le[2]),G[0]&1&&ft(v,le[0].piper.currentVoice),G[0]&1&&E!==(E=le[0].piper.speakingRate.toFixed(2)+"")&&_e(x,E),G[0]&4&&(w.disabled=le[2]),G[0]&1&&V(w,le[0].piper.speakingRate),G[0]&68&&Ne!==(Ne=le[6]||le[2])&&(ne.disabled=Ne),G[0]&32&&V(ne,le[5]),G[0]&64&&j!==(j=le[6]?"üîä Playing...":"‚ñ∂Ô∏è Test Piper")&&_e(S,j),G[0]&68&&K!==(K=le[6]||le[2])&&(oe.disabled=K)},i:Wt,o:Wt,d(le){le&&d(e),Ql(te,le),ae=!1,Fl(R)}}}function ln(n){let e,s="Heart (English, Female, High)",t,u="Bella (English, Female, High)",i,c="Sarah (English, Female, High)",g,T="Adam (English, Male, High)",v,f="Michael (English, Male, High)";return{c(){e=r("option"),e.textContent=s,t=r("option"),t.textContent=u,i=r("option"),i.textContent=c,g=r("option"),g.textContent=T,v=r("option"),v.textContent=f,this.h()},l(p){e=a(p,"OPTION",{"data-svelte-h":!0}),k(e)!=="svelte-c4590v"&&(e.textContent=s),t=a(p,"OPTION",{"data-svelte-h":!0}),k(t)!=="svelte-1l8amof"&&(t.textContent=u),i=a(p,"OPTION",{"data-svelte-h":!0}),k(i)!=="svelte-zzg7gt"&&(i.textContent=c),g=a(p,"OPTION",{"data-svelte-h":!0}),k(g)!=="svelte-1c894g7"&&(g.textContent=T),v=a(p,"OPTION",{"data-svelte-h":!0}),k(v)!=="svelte-1t0x5h1"&&(v.textContent=f),this.h()},h(){e.__value="af_heart",V(e,e.__value),t.__value="af_bella",V(t,t.__value),i.__value="af_sarah",V(i,i.__value),g.__value="am_adam",V(g,g.__value),v.__value="am_michael",V(v,v.__value)},m(p,b){U(p,e,b),U(p,t,b),U(p,i,b),U(p,g,b),U(p,v,b)},p:Wt,d(p){p&&(d(e),d(t),d(i),d(g),d(v))}}}function sn(n){let e,s=n[0].kokoro.voices.some(Ps),t,u=Sl(n[0].kokoro.voices.filter(Vs)),i=[];for(let g=0;g<u.length;g+=1)i[g]=bs(ds(n,u,g));let c=s&&xs(n);return{c(){e=r("optgroup");for(let g=0;g<i.length;g+=1)i[g].c();c&&c.c(),t=Kl(),this.h()},l(g){e=a(g,"OPTGROUP",{label:!0});var T=m(e);for(let v=0;v<i.length;v+=1)i[v].l(T);T.forEach(d),c&&c.l(g),t=Kl(),this.h()},h(){o(e,"label","Built-in Voices")},m(g,T){U(g,e,T);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(e,null);c&&c.m(g,T),U(g,t,T)},p(g,T){if(T[0]&1){u=Sl(g[0].kokoro.voices.filter(Vs));let v;for(v=0;v<u.length;v+=1){const f=ds(g,u,v);i[v]?i[v].p(f,T):(i[v]=bs(f),i[v].c(),i[v].m(e,null))}for(;v<i.length;v+=1)i[v].d(1);i.length=u.length}T[0]&1&&(s=g[0].kokoro.voices.some(Ps)),s?c?c.p(g,T):(c=xs(g),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},d(g){g&&(d(e),d(t)),Ql(i,g),c&&c.d(g)}}}function bs(n){let e,s=n[76].name+"",t,u,i=n[76].lang+"",c,g,T=n[76].gender+"",v,f,p=n[76].quality+"",b,z,E;return{c(){e=r("option"),t=L(s),u=L(" ("),c=L(i),g=L(", "),v=L(T),f=L(", "),b=L(p),z=L(`)
                  `),this.h()},l(x){e=a(x,"OPTION",{});var I=m(e);t=D(I,s),u=D(I," ("),c=D(I,i),g=D(I,", "),v=D(I,T),f=D(I,", "),b=D(I,p),z=D(I,`)
                  `),I.forEach(d),this.h()},h(){e.__value=E=n[76].id,V(e,e.__value)},m(x,I){U(x,e,I),l(e,t),l(e,u),l(e,c),l(e,g),l(e,v),l(e,f),l(e,b),l(e,z)},p(x,I){I[0]&1&&s!==(s=x[76].name+"")&&_e(t,s),I[0]&1&&i!==(i=x[76].lang+"")&&_e(c,i),I[0]&1&&T!==(T=x[76].gender+"")&&_e(v,T),I[0]&1&&p!==(p=x[76].quality+"")&&_e(b,p),I[0]&1&&E!==(E=x[76].id)&&(e.__value=E,V(e,e.__value))},d(x){x&&d(e)}}}function xs(n){let e,s=Sl(n[0].kokoro.voices.filter(Ds)),t=[];for(let u=0;u<s.length;u+=1)t[u]=ms(vs(n,s,u));return{c(){e=r("optgroup");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=a(u,"OPTGROUP",{label:!0});var i=m(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(d),this.h()},h(){o(e,"label","Custom Voicepacks")},m(u,i){U(u,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(u,i){if(i[0]&1){s=Sl(u[0].kokoro.voices.filter(Ds));let c;for(c=0;c<s.length;c+=1){const g=vs(u,s,c);t[c]?t[c].p(g,i):(t[c]=ms(g),t[c].c(),t[c].m(e,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=s.length}},d(u){u&&d(e),Ql(t,u)}}}function ms(n){let e,s=n[76].name+"",t,u,i;return{c(){e=r("option"),t=L(s),u=_(),this.h()},l(c){e=a(c,"OPTION",{});var g=m(e);t=D(g,s),u=h(g),g.forEach(d),this.h()},h(){e.__value=i=n[76].id,V(e,e.__value)},m(c,g){U(c,e,g),l(e,t),l(e,u)},p(c,g){g[0]&1&&s!==(s=c[76].name+"")&&_e(t,s),g[0]&1&&i!==(i=c[76].id)&&(e.__value=i,V(e,e.__value))},d(c){c&&d(e)}}}function nn(n){let e;return{c(){e=L("Choose from 54 built-in voices across 8 languages")},l(s){e=D(s,"Choose from 54 built-in voices across 8 languages")},m(s,t){U(s,e,t)},d(s){s&&d(e)}}}function on(n){let e;return{c(){e=L("Choose from 54 built-in voices or your custom trained voicepacks")},l(s){e=D(s,"Choose from 54 built-in voices or your custom trained voicepacks")},m(s,t){U(s,e,t)},d(s){s&&d(e)}}}function ks(n){let e,s,t,u,i,c="Normalize Custom Voicepack Volume",g,T,v="Automatically boost quiet custom voicepacks to -3dB peak. Enable if your voicepack sounds too quiet. Disable for natural volume levels.",f,p,b='<strong class="svelte-6zxxgu">‚úì Using Custom Voicepack</strong> <p class="svelte-6zxxgu">Currently using your trained voicepack. Select a built-in voice from the dropdown above to switch back.</p>',z,E;return{c(){e=r("div"),s=r("label"),t=r("input"),u=_(),i=r("span"),i.textContent=c,g=_(),T=r("p"),T.textContent=v,f=_(),p=r("div"),p.innerHTML=b,this.h()},l(x){e=a(x,"DIV",{class:!0});var I=m(e);s=a(I,"LABEL",{class:!0});var C=m(s);t=a(C,"INPUT",{type:!0,class:!0}),u=h(C),i=a(C,"SPAN",{"data-svelte-h":!0}),k(i)!=="svelte-10t4g85"&&(i.textContent=c),C.forEach(d),g=h(I),T=a(I,"P",{class:!0,"data-svelte-h":!0}),k(T)!=="svelte-95vjbg"&&(T.textContent=v),I.forEach(d),f=h(x),p=a(x,"DIV",{class:!0,"data-svelte-h":!0}),k(p)!=="svelte-1lk7xht"&&(p.innerHTML=b),this.h()},h(){o(t,"type","checkbox"),t.disabled=n[2],o(t,"class","svelte-6zxxgu"),o(s,"class","checkbox-label svelte-6zxxgu"),o(T,"class","hint svelte-6zxxgu"),o(e,"class","setting-group svelte-6zxxgu"),o(p,"class","custom-voicepack-info svelte-6zxxgu")},m(x,I){U(x,e,I),l(e,s),l(s,t),t.checked=n[0].kokoro.normalizeCustomVoicepacks,l(s,u),l(s,i),l(e,g),l(e,T),U(x,f,I),U(x,p,I),z||(E=H(t,"change",n[51]),z=!0)},p(x,I){I[0]&4&&(t.disabled=x[2]),I[0]&1&&(t.checked=x[0].kokoro.normalizeCustomVoicepacks)},d(x){x&&(d(e),d(f),d(p)),z=!1,E()}}}function Cs(n){let e,s=n[76].name+"",t,u,i=n[76].language+"",c,g,T;return{c(){e=r("option"),t=L(s),u=L(" ("),c=L(i),g=L(")"),this.h()},l(v){e=a(v,"OPTION",{});var f=m(e);t=D(f,s),u=D(f," ("),c=D(f,i),g=D(f,")"),f.forEach(d),this.h()},h(){e.__value=T=n[76].id,V(e,e.__value)},m(v,f){U(v,e,f),l(e,t),l(e,u),l(e,c),l(e,g)},p(v,f){f[0]&1&&s!==(s=v[76].name+"")&&_e(t,s),f[0]&1&&i!==(i=v[76].language+"")&&_e(c,i),f[0]&1&&T!==(T=v[76].id)&&(e.__value=T,V(e,e.__value))},d(v){v&&d(e)}}}function Ts(n){let e,s,t="üé§ Speech-to-Text (Whisper)",u,i,c,g="Model Size",T,v,f,p="Tiny (~75MB, fastest)",b,z="Base (~140MB, balanced)",E,x="Small (~460MB, more accurate)",I,C="Medium (~1.5GB, most accurate)",w,M,N="Smaller models are faster but less accurate. GPU recommended for medium/large models.",P,Z,A,O="Processing Device",de,Q,ne,Ne="CPU",B,oe="GPU (CUDA)",j,S,K="GPU processing is 10-50x faster than CPU. Requires NVIDIA GPU with CUDA support.",ae,R,Ee,te="Compute Type",le,G,ue,re="INT8 (fastest, CPU-friendly)",Te,Me="FLOAT16 (balanced, GPU-optimized)",Re,Ke="FLOAT32 (highest precision)",ce,Ie,Ze="Use INT8 for CPU, FLOAT16 for GPU. FLOAT32 only if precision is critical.",_t,Ae,ze,Se="Language",gt,pe,We,qe="English",De,Pe="Spanish",lt,bt="French",fe,je="German",ye,Ue="Italian",at,zt="Portuguese",$,It="Japanese",Ge,rt="Korean",Be,He="Chinese",Le,be,st,Ve,W,F,y,J="Persistent server keeps model in memory for instant transcription (~1-3 second speedup per request)",Je,he,ge,xe,me,it="üéß Hardware Button Capture",ve,ke,ut,Oe,Lt,Xe,Ut,xt="Allows play/pause buttons on Bluetooth earbuds and headphones to trigger voice input. Creates a background audio session.",St,Ce,q,se="‚öôÔ∏è Voice Activity Detection Settings",Ht,we,ct,vl,wt=(n[0].stt.vad?.voiceThreshold??12)+"",Fe,vt,nt,dt,Ot,dl="<span>0 (Very Sensitive)</span> <span>50</span> <span>100 (Less Sensitive)</span>",mt,kt,fl="How loud audio needs to be to register as speech. Lower = more sensitive to quiet speech.",Jt,Dt,Ft,Yt,xl=(n[0].stt.vad?.silenceDelay??5e3)/1e3+"",ml,sl,Qt,Ye,wl,Xt,Mt="<span>1s (Quick)</span> <span>15s</span> <span>30s (Patient)</span>",qt,nl,Vl="How long to wait in silence before auto-stopping. Higher = allows longer pauses mid-sentence.",Ct,Tt,Rt,Bt,Zt=(n[0].stt.vad?.minDuration??500)+"",pl,kl,Qe,pt,Dl,ee,X="<span>100ms (Short)</span> <span>2.5s</span> <span>5s (Long)</span>",Cl,Nt,hl="Minimum recording length to prevent accidental clicks from triggering transcription.",_l,$e,jt,Et="Test Voice Detection",ol,$t,gl="Click to start recording. Speak naturally, and the system will auto-stop after silence using your current settings.",Pl,el,Tl,et,bl,tl,tt=n[0].stt.useServer&&Es(n),ht=n[11]&&zs(n);function Ll(ie,Y){return ie[12]?un:cn}let ll=Ll(n),At=ll(n),Pt=n[15]&&Is(n),Vt=n[16]&&Ss(n);return{c(){e=r("div"),s=r("h4"),s.textContent=t,u=_(),i=r("div"),c=r("label"),c.textContent=g,T=_(),v=r("select"),f=r("option"),f.textContent=p,b=r("option"),b.textContent=z,E=r("option"),E.textContent=x,I=r("option"),I.textContent=C,w=_(),M=r("p"),M.textContent=N,P=_(),Z=r("div"),A=r("label"),A.textContent=O,de=_(),Q=r("select"),ne=r("option"),ne.textContent=Ne,B=r("option"),B.textContent=oe,j=_(),S=r("p"),S.textContent=K,ae=_(),R=r("div"),Ee=r("label"),Ee.textContent=te,le=_(),G=r("select"),ue=r("option"),ue.textContent=re,Te=r("option"),Te.textContent=Me,Re=r("option"),Re.textContent=Ke,ce=_(),Ie=r("p"),Ie.textContent=Ze,_t=_(),Ae=r("div"),ze=r("label"),ze.textContent=Se,gt=_(),pe=r("select"),We=r("option"),We.textContent=qe,De=r("option"),De.textContent=Pe,lt=r("option"),lt.textContent=bt,fe=r("option"),fe.textContent=je,ye=r("option"),ye.textContent=Ue,at=r("option"),at.textContent=zt,$=r("option"),$.textContent=It,Ge=r("option"),Ge.textContent=rt,Be=r("option"),Be.textContent=He,Le=_(),be=r("div"),st=r("label"),Ve=r("input"),W=L(`
            Use persistent Whisper server (recommended)`),F=_(),y=r("p"),y.textContent=J,Je=_(),tt&&tt.c(),he=_(),ht&&ht.c(),ge=_(),xe=r("div"),me=r("h5"),me.textContent=it,ve=_(),ke=r("div"),ut=r("label"),Oe=r("input"),Lt=L(`
              Enable earbud/headphone button capture`),Xe=_(),Ut=r("p"),Ut.textContent=xt,St=_(),Ce=r("div"),q=r("h5"),q.textContent=se,Ht=_(),we=r("div"),ct=r("label"),vl=L("Voice Threshold: "),Fe=L(wt),vt=_(),nt=r("input"),dt=_(),Ot=r("div"),Ot.innerHTML=dl,mt=_(),kt=r("p"),kt.textContent=fl,Jt=_(),Dt=r("div"),Ft=r("label"),Yt=L("Silence Delay: "),ml=L(xl),sl=L(" seconds"),Qt=_(),Ye=r("input"),wl=_(),Xt=r("div"),Xt.innerHTML=Mt,qt=_(),nl=r("p"),nl.textContent=Vl,Ct=_(),Tt=r("div"),Rt=r("label"),Bt=L("Minimum Duration: "),pl=L(Zt),kl=L("ms"),Qe=_(),pt=r("input"),Dl=_(),ee=r("div"),ee.innerHTML=X,Cl=_(),Nt=r("p"),Nt.textContent=hl,_l=_(),$e=r("div"),jt=r("label"),jt.textContent=Et,ol=_(),$t=r("p"),$t.textContent=gl,Pl=_(),At.c(),el=_(),Pt&&Pt.c(),Tl=_(),Vt&&Vt.c(),this.h()},l(ie){e=a(ie,"DIV",{class:!0});var Y=m(e);s=a(Y,"H4",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-sjorki"&&(s.textContent=t),u=h(Y),i=a(Y,"DIV",{class:!0});var Ol=m(i);c=a(Ol,"LABEL",{class:!0,"data-svelte-h":!0}),k(c)!=="svelte-1hgjfne"&&(c.textContent=g),T=h(Ol),v=a(Ol,"SELECT",{class:!0});var yl=m(v);f=a(yl,"OPTION",{"data-svelte-h":!0}),k(f)!=="svelte-1c7lcxv"&&(f.textContent=p),b=a(yl,"OPTION",{"data-svelte-h":!0}),k(b)!=="svelte-1aii786"&&(b.textContent=z),E=a(yl,"OPTION",{"data-svelte-h":!0}),k(E)!=="svelte-2tc3xw"&&(E.textContent=x),I=a(yl,"OPTION",{"data-svelte-h":!0}),k(I)!=="svelte-1sevt08"&&(I.textContent=C),yl.forEach(d),w=h(Ol),M=a(Ol,"P",{class:!0,"data-svelte-h":!0}),k(M)!=="svelte-ua2nsk"&&(M.textContent=N),Ol.forEach(d),P=h(Y),Z=a(Y,"DIV",{class:!0});var Nl=m(Z);A=a(Nl,"LABEL",{class:!0,"data-svelte-h":!0}),k(A)!=="svelte-16dd9cf"&&(A.textContent=O),de=h(Nl),Q=a(Nl,"SELECT",{class:!0});var ls=m(Q);ne=a(ls,"OPTION",{"data-svelte-h":!0}),k(ne)!=="svelte-1bgr52m"&&(ne.textContent=Ne),B=a(ls,"OPTION",{"data-svelte-h":!0}),k(B)!=="svelte-1lr25s3"&&(B.textContent=oe),ls.forEach(d),j=h(Nl),S=a(Nl,"P",{class:!0,"data-svelte-h":!0}),k(S)!=="svelte-1rkbk2n"&&(S.textContent=K),Nl.forEach(d),ae=h(Y),R=a(Y,"DIV",{class:!0});var Al=m(R);Ee=a(Al,"LABEL",{class:!0,"data-svelte-h":!0}),k(Ee)!=="svelte-1akpt81"&&(Ee.textContent=te),le=h(Al),G=a(Al,"SELECT",{class:!0});var Ml=m(G);ue=a(Ml,"OPTION",{"data-svelte-h":!0}),k(ue)!=="svelte-k568ov"&&(ue.textContent=re),Te=a(Ml,"OPTION",{"data-svelte-h":!0}),k(Te)!=="svelte-kc8a6z"&&(Te.textContent=Me),Re=a(Ml,"OPTION",{"data-svelte-h":!0}),k(Re)!=="svelte-o87cxx"&&(Re.textContent=Ke),Ml.forEach(d),ce=h(Al),Ie=a(Al,"P",{class:!0,"data-svelte-h":!0}),k(Ie)!=="svelte-124qwwg"&&(Ie.textContent=Ze),Al.forEach(d),_t=h(Y),Ae=a(Y,"DIV",{class:!0});var Rl=m(Ae);ze=a(Rl,"LABEL",{class:!0,"data-svelte-h":!0}),k(ze)!=="svelte-1t5id1a"&&(ze.textContent=Se),gt=h(Rl),pe=a(Rl,"SELECT",{class:!0});var al=m(pe);We=a(al,"OPTION",{"data-svelte-h":!0}),k(We)!=="svelte-1bjraht"&&(We.textContent=qe),De=a(al,"OPTION",{"data-svelte-h":!0}),k(De)!=="svelte-36revo"&&(De.textContent=Pe),lt=a(al,"OPTION",{"data-svelte-h":!0}),k(lt)!=="svelte-1mzqoq2"&&(lt.textContent=bt),fe=a(al,"OPTION",{"data-svelte-h":!0}),k(fe)!=="svelte-hpaull"&&(fe.textContent=je),ye=a(al,"OPTION",{"data-svelte-h":!0}),k(ye)!=="svelte-1vlgt3z"&&(ye.textContent=Ue),at=a(al,"OPTION",{"data-svelte-h":!0}),k(at)!=="svelte-65556x"&&(at.textContent=zt),$=a(al,"OPTION",{"data-svelte-h":!0}),k($)!=="svelte-b5b4d4"&&($.textContent=It),Ge=a(al,"OPTION",{"data-svelte-h":!0}),k(Ge)!=="svelte-1tkaqkc"&&(Ge.textContent=rt),Be=a(al,"OPTION",{"data-svelte-h":!0}),k(Be)!=="svelte-a5xoll"&&(Be.textContent=He),al.forEach(d),Rl.forEach(d),Le=h(Y),be=a(Y,"DIV",{class:!0});var Bl=m(be);st=a(Bl,"LABEL",{class:!0});var ss=m(st);Ve=a(ss,"INPUT",{type:!0,class:!0}),W=D(ss,`
            Use persistent Whisper server (recommended)`),ss.forEach(d),F=h(Bl),y=a(Bl,"P",{class:!0,"data-svelte-h":!0}),k(y)!=="svelte-1w9vfsv"&&(y.textContent=J),Bl.forEach(d),Je=h(Y),tt&&tt.l(Y),he=h(Y),ht&&ht.l(Y),ge=h(Y),xe=a(Y,"DIV",{class:!0});var Hl=m(xe);me=a(Hl,"H5",{style:!0,"data-svelte-h":!0}),k(me)!=="svelte-1ot3qfl"&&(me.textContent=it),ve=h(Hl),ke=a(Hl,"DIV",{class:!0});var ql=m(ke);ut=a(ql,"LABEL",{class:!0});var ns=m(ut);Oe=a(ns,"INPUT",{type:!0,class:!0}),Lt=D(ns,`
              Enable earbud/headphone button capture`),ns.forEach(d),Xe=h(ql),Ut=a(ql,"P",{class:!0,"data-svelte-h":!0}),k(Ut)!=="svelte-pm0ys0"&&(Ut.textContent=xt),ql.forEach(d),Hl.forEach(d),St=h(Y),Ce=a(Y,"DIV",{class:!0});var rl=m(Ce);q=a(rl,"H5",{style:!0,"data-svelte-h":!0}),k(q)!=="svelte-xstftn"&&(q.textContent=se),Ht=h(rl),we=a(rl,"DIV",{class:!0});var El=m(we);ct=a(El,"LABEL",{for:!0,class:!0});var os=m(ct);vl=D(os,"Voice Threshold: "),Fe=D(os,wt),os.forEach(d),vt=h(El),nt=a(El,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),dt=h(El),Ot=a(El,"DIV",{class:!0,"data-svelte-h":!0}),k(Ot)!=="svelte-c5wo38"&&(Ot.innerHTML=dl),mt=h(El),kt=a(El,"P",{class:!0,"data-svelte-h":!0}),k(kt)!=="svelte-1axqhph"&&(kt.textContent=fl),El.forEach(d),Jt=h(rl),Dt=a(rl,"DIV",{class:!0});var zl=m(Dt);Ft=a(zl,"LABEL",{for:!0,class:!0});var jl=m(Ft);Yt=D(jl,"Silence Delay: "),ml=D(jl,xl),sl=D(jl," seconds"),jl.forEach(d),Qt=h(zl),Ye=a(zl,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),wl=h(zl),Xt=a(zl,"DIV",{class:!0,"data-svelte-h":!0}),k(Xt)!=="svelte-j67z5q"&&(Xt.innerHTML=Mt),qt=h(zl),nl=a(zl,"P",{class:!0,"data-svelte-h":!0}),k(nl)!=="svelte-1jdqnjx"&&(nl.textContent=Vl),zl.forEach(d),Ct=h(rl),Tt=a(rl,"DIV",{class:!0});var Il=m(Tt);Rt=a(Il,"LABEL",{for:!0,class:!0});var Gl=m(Rt);Bt=D(Gl,"Minimum Duration: "),pl=D(Gl,Zt),kl=D(Gl,"ms"),Gl.forEach(d),Qe=h(Il),pt=a(Il,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Dl=h(Il),ee=a(Il,"DIV",{class:!0,"data-svelte-h":!0}),k(ee)!=="svelte-uepytw"&&(ee.innerHTML=X),Cl=h(Il),Nt=a(Il,"P",{class:!0,"data-svelte-h":!0}),k(Nt)!=="svelte-hrdur9"&&(Nt.textContent=hl),Il.forEach(d),_l=h(rl),$e=a(rl,"DIV",{class:!0});var il=m($e);jt=a(il,"LABEL",{class:!0,"data-svelte-h":!0}),k(jt)!=="svelte-d3hwyj"&&(jt.textContent=Et),ol=h(il),$t=a(il,"P",{class:!0,"data-svelte-h":!0}),k($t)!=="svelte-131mda3"&&($t.textContent=gl),Pl=h(il),At.l(il),el=h(il),Pt&&Pt.l(il),Tl=h(il),Vt&&Vt.l(il),il.forEach(d),rl.forEach(d),Y.forEach(d),this.h()},h(){o(s,"class","subsection-title svelte-6zxxgu"),o(c,"class","svelte-6zxxgu"),f.__value="tiny.en",V(f,f.__value),b.__value="base.en",V(b,b.__value),E.__value="small.en",V(E,E.__value),I.__value="medium.en",V(I,I.__value),v.disabled=n[2],o(v,"class","svelte-6zxxgu"),n[0].stt.model===void 0&&cl(()=>n[55].call(v)),o(M,"class","hint svelte-6zxxgu"),o(i,"class","setting-group svelte-6zxxgu"),o(A,"class","svelte-6zxxgu"),ne.__value="cpu",V(ne,ne.__value),B.__value="cuda",V(B,B.__value),Q.disabled=n[2],o(Q,"class","svelte-6zxxgu"),n[0].stt.device===void 0&&cl(()=>n[56].call(Q)),o(S,"class","hint svelte-6zxxgu"),o(Z,"class","setting-group svelte-6zxxgu"),o(Ee,"class","svelte-6zxxgu"),ue.__value="int8",V(ue,ue.__value),Te.__value="float16",V(Te,Te.__value),Re.__value="float32",V(Re,Re.__value),G.disabled=n[2],o(G,"class","svelte-6zxxgu"),n[0].stt.computeType===void 0&&cl(()=>n[57].call(G)),o(Ie,"class","hint svelte-6zxxgu"),o(R,"class","setting-group svelte-6zxxgu"),o(ze,"class","svelte-6zxxgu"),We.__value="en",V(We,We.__value),De.__value="es",V(De,De.__value),lt.__value="fr",V(lt,lt.__value),fe.__value="de",V(fe,fe.__value),ye.__value="it",V(ye,ye.__value),at.__value="pt",V(at,at.__value),$.__value="ja",V($,$.__value),Ge.__value="ko",V(Ge,Ge.__value),Be.__value="zh",V(Be,Be.__value),pe.disabled=n[2],o(pe,"class","svelte-6zxxgu"),n[0].stt.language===void 0&&cl(()=>n[58].call(pe)),o(Ae,"class","setting-group svelte-6zxxgu"),o(Ve,"type","checkbox"),Ve.disabled=n[2],o(Ve,"class","svelte-6zxxgu"),o(st,"class","checkbox-label svelte-6zxxgu"),o(y,"class","hint svelte-6zxxgu"),o(be,"class","setting-group svelte-6zxxgu"),ot(me,"margin","1.5rem 0 1rem 0"),ot(me,"color","#6b7280"),ot(me,"font-size","1rem"),ot(me,"font-weight","600"),o(Oe,"type","checkbox"),Oe.checked=n[9],Oe.disabled=n[2],o(Oe,"class","svelte-6zxxgu"),o(ut,"class","checkbox-label svelte-6zxxgu"),o(Ut,"class","hint svelte-6zxxgu"),o(ke,"class","setting-group svelte-6zxxgu"),o(xe,"class","hardware-controls-section"),ot(q,"margin","1.5rem 0 1rem 0"),ot(q,"color","#6b7280"),ot(q,"font-size","1rem"),ot(q,"font-weight","600"),o(ct,"for","vad-threshold"),o(ct,"class","svelte-6zxxgu"),o(nt,"id","vad-threshold"),o(nt,"type","range"),o(nt,"min","0"),o(nt,"max","100"),o(nt,"step","1"),nt.disabled=n[2],o(nt,"class","svelte-6zxxgu"),o(Ot,"class","range-labels svelte-6zxxgu"),o(kt,"class","hint svelte-6zxxgu"),o(we,"class","setting-group svelte-6zxxgu"),o(Ft,"for","vad-silence-delay"),o(Ft,"class","svelte-6zxxgu"),o(Ye,"id","vad-silence-delay"),o(Ye,"type","range"),o(Ye,"min","1000"),o(Ye,"max","30000"),o(Ye,"step","500"),Ye.disabled=n[2],o(Ye,"class","svelte-6zxxgu"),o(Xt,"class","range-labels svelte-6zxxgu"),o(nl,"class","hint svelte-6zxxgu"),o(Dt,"class","setting-group svelte-6zxxgu"),o(Rt,"for","vad-min-duration"),o(Rt,"class","svelte-6zxxgu"),o(pt,"id","vad-min-duration"),o(pt,"type","range"),o(pt,"min","100"),o(pt,"max","5000"),o(pt,"step","100"),pt.disabled=n[2],o(pt,"class","svelte-6zxxgu"),o(ee,"class","range-labels svelte-6zxxgu"),o(Nt,"class","hint svelte-6zxxgu"),o(Tt,"class","setting-group svelte-6zxxgu"),o(jt,"class","svelte-6zxxgu"),o($t,"class","hint svelte-6zxxgu"),o($e,"class","vad-test-section svelte-6zxxgu"),o(Ce,"class","vad-settings-section svelte-6zxxgu"),o(e,"class","stt-section svelte-6zxxgu")},m(ie,Y){U(ie,e,Y),l(e,s),l(e,u),l(e,i),l(i,c),l(i,T),l(i,v),l(v,f),l(v,b),l(v,E),l(v,I),ft(v,n[0].stt.model,!0),l(i,w),l(i,M),l(e,P),l(e,Z),l(Z,A),l(Z,de),l(Z,Q),l(Q,ne),l(Q,B),ft(Q,n[0].stt.device,!0),l(Z,j),l(Z,S),l(e,ae),l(e,R),l(R,Ee),l(R,le),l(R,G),l(G,ue),l(G,Te),l(G,Re),ft(G,n[0].stt.computeType,!0),l(R,ce),l(R,Ie),l(e,_t),l(e,Ae),l(Ae,ze),l(Ae,gt),l(Ae,pe),l(pe,We),l(pe,De),l(pe,lt),l(pe,fe),l(pe,ye),l(pe,at),l(pe,$),l(pe,Ge),l(pe,Be),ft(pe,n[0].stt.language,!0),l(e,Le),l(e,be),l(be,st),l(st,Ve),Ve.checked=n[0].stt.useServer,l(st,W),l(be,F),l(be,y),l(e,Je),tt&&tt.m(e,null),l(e,he),ht&&ht.m(e,null),l(e,ge),l(e,xe),l(xe,me),l(xe,ve),l(xe,ke),l(ke,ut),l(ut,Oe),l(ut,Lt),l(ke,Xe),l(ke,Ut),l(e,St),l(e,Ce),l(Ce,q),l(Ce,Ht),l(Ce,we),l(we,ct),l(ct,vl),l(ct,Fe),l(we,vt),l(we,nt),V(nt,n[0].stt.vad.voiceThreshold),l(we,dt),l(we,Ot),l(we,mt),l(we,kt),l(Ce,Jt),l(Ce,Dt),l(Dt,Ft),l(Ft,Yt),l(Ft,ml),l(Ft,sl),l(Dt,Qt),l(Dt,Ye),V(Ye,n[0].stt.vad.silenceDelay),l(Dt,wl),l(Dt,Xt),l(Dt,qt),l(Dt,nl),l(Ce,Ct),l(Ce,Tt),l(Tt,Rt),l(Rt,Bt),l(Rt,pl),l(Rt,kl),l(Tt,Qe),l(Tt,pt),V(pt,n[0].stt.vad.minDuration),l(Tt,Dl),l(Tt,ee),l(Tt,Cl),l(Tt,Nt),l(Ce,_l),l(Ce,$e),l($e,jt),l($e,ol),l($e,$t),l($e,Pl),At.m($e,null),l($e,el),Pt&&Pt.m($e,null),l($e,Tl),Vt&&Vt.m($e,null),et=!0,bl||(tl=[H(v,"change",n[55]),H(Q,"change",n[56]),H(G,"change",n[57]),H(pe,"change",n[58]),H(Ve,"change",n[59]),H(Oe,"change",n[62]),H(nt,"change",n[63]),H(nt,"input",n[63]),H(Ye,"change",n[64]),H(Ye,"input",n[64]),H(pt,"change",n[65]),H(pt,"input",n[65])],bl=!0)},p(ie,Y){(!et||Y[0]&4)&&(v.disabled=ie[2]),Y[0]&1&&ft(v,ie[0].stt.model),(!et||Y[0]&4)&&(Q.disabled=ie[2]),Y[0]&1&&ft(Q,ie[0].stt.device),(!et||Y[0]&4)&&(G.disabled=ie[2]),Y[0]&1&&ft(G,ie[0].stt.computeType),(!et||Y[0]&4)&&(pe.disabled=ie[2]),Y[0]&1&&ft(pe,ie[0].stt.language),(!et||Y[0]&4)&&(Ve.disabled=ie[2]),Y[0]&1&&(Ve.checked=ie[0].stt.useServer),ie[0].stt.useServer?tt?(tt.p(ie,Y),Y[0]&1&&yt(tt,1)):(tt=Es(ie),tt.c(),yt(tt,1),tt.m(e,he)):tt&&(Wl(),Kt(tt,1,1,()=>{tt=null}),Jl()),ie[11]?ht?ht.p(ie,Y):(ht=zs(ie),ht.c(),ht.m(e,ge)):ht&&(ht.d(1),ht=null),(!et||Y[0]&512)&&(Oe.checked=ie[9]),(!et||Y[0]&4)&&(Oe.disabled=ie[2]),(!et||Y[0]&1)&&wt!==(wt=(ie[0].stt.vad?.voiceThreshold??12)+"")&&_e(Fe,wt),(!et||Y[0]&4)&&(nt.disabled=ie[2]),Y[0]&1&&V(nt,ie[0].stt.vad.voiceThreshold),(!et||Y[0]&1)&&xl!==(xl=(ie[0].stt.vad?.silenceDelay??5e3)/1e3+"")&&_e(ml,xl),(!et||Y[0]&4)&&(Ye.disabled=ie[2]),Y[0]&1&&V(Ye,ie[0].stt.vad.silenceDelay),(!et||Y[0]&1)&&Zt!==(Zt=(ie[0].stt.vad?.minDuration??500)+"")&&_e(pl,Zt),(!et||Y[0]&4)&&(pt.disabled=ie[2]),Y[0]&1&&V(pt,ie[0].stt.vad.minDuration),ll===(ll=Ll(ie))&&At?At.p(ie,Y):(At.d(1),At=ll(ie),At&&(At.c(),At.m($e,el))),ie[15]?Pt?Pt.p(ie,Y):(Pt=Is(ie),Pt.c(),Pt.m($e,Tl)):Pt&&(Pt.d(1),Pt=null),ie[16]?Vt?Vt.p(ie,Y):(Vt=Ss(ie),Vt.c(),Vt.m($e,null)):Vt&&(Vt.d(1),Vt=null)},i(ie){et||(yt(tt),et=!0)},o(ie){Kt(tt),et=!1},d(ie){ie&&d(e),tt&&tt.d(),ht&&ht.d(),At.d(),Pt&&Pt.d(),Vt&&Vt.d(),bl=!1,Fl(tl)}}}function Es(n){let e,s,t,u,i,c,g="Automatically start Whisper server when MetaHuman starts",T,v,f,p="Server Status",b,z,E,x,I;return z=new ts({props:{serverName:"Whisper STT",statusEndpoint:"/api/whisper-server",controlEndpoint:"/api/whisper-server",autoRefresh:!0,refreshInterval:15e3}}),{c(){e=r("div"),s=r("label"),t=r("input"),u=L(`
              Auto-start server on boot`),i=_(),c=r("p"),c.textContent=g,T=_(),v=r("div"),f=r("label"),f.textContent=p,b=_(),es(z.$$.fragment),this.h()},l(C){e=a(C,"DIV",{class:!0});var w=m(e);s=a(w,"LABEL",{class:!0});var M=m(s);t=a(M,"INPUT",{type:!0,class:!0}),u=D(M,`
              Auto-start server on boot`),M.forEach(d),i=h(w),c=a(w,"P",{class:!0,"data-svelte-h":!0}),k(c)!=="svelte-1curxyp"&&(c.textContent=g),w.forEach(d),T=h(C),v=a(C,"DIV",{class:!0});var N=m(v);f=a(N,"LABEL",{class:!0,"data-svelte-h":!0}),k(f)!=="svelte-108nlw7"&&(f.textContent=p),b=h(N),$l(z.$$.fragment,N),N.forEach(d),this.h()},h(){o(t,"type","checkbox"),t.disabled=n[2],o(t,"class","svelte-6zxxgu"),o(s,"class","checkbox-label svelte-6zxxgu"),o(c,"class","hint svelte-6zxxgu"),o(e,"class","setting-group svelte-6zxxgu"),o(f,"class","svelte-6zxxgu"),o(v,"class","setting-group svelte-6zxxgu")},m(C,w){U(C,e,w),l(e,s),l(s,t),t.checked=n[0].stt.autoStart,l(s,u),l(e,i),l(e,c),U(C,T,w),U(C,v,w),l(v,f),l(v,b),Zl(z,v,null),E=!0,x||(I=H(t,"change",n[60]),x=!0)},p(C,w){(!E||w[0]&4)&&(t.disabled=C[2]),w[0]&1&&(t.checked=C[0].stt.autoStart)},i(C){E||(yt(z.$$.fragment,C),E=!0)},o(C){Kt(z.$$.fragment,C),E=!1},d(C){C&&(d(e),d(T),d(v)),Xl(z),x=!1,I()}}}function zs(n){let e,s,t="üì± Native Device Voice Mode",u,i,c,g,T,v,f,p,b,z='<div class="comparison-item svelte-6zxxgu"><strong class="svelte-6zxxgu">Native Device:</strong> <ul class="svelte-6zxxgu"><li class="svelte-6zxxgu">‚ö° Instant response</li> <li class="svelte-6zxxgu">üì¥ Works offline</li> <li class="svelte-6zxxgu">üîã Lower battery usage</li> <li class="svelte-6zxxgu">üó£Ô∏è Generic device voice</li></ul></div> <div class="comparison-item svelte-6zxxgu"><strong class="svelte-6zxxgu">Remote Server:</strong> <ul class="svelte-6zxxgu"><li class="svelte-6zxxgu">üéØ More accurate STT (Whisper)</li> <li class="svelte-6zxxgu">üé≠ Custom trained voice</li> <li class="svelte-6zxxgu">üåê Requires network</li> <li class="svelte-6zxxgu">‚è±Ô∏è ~1-2s latency</li></ul></div>',E,x;function I(M,N){return M[10]?rn:an}let C=I(n),w=C(n);return{c(){e=r("div"),s=r("h5"),s.textContent=t,u=_(),i=r("div"),c=r("label"),g=r("input"),T=L(`
                Use device's built-in voice (faster, works offline)`),v=_(),f=r("p"),w.c(),p=_(),b=r("div"),b.innerHTML=z,this.h()},l(M){e=a(M,"DIV",{class:!0});var N=m(e);s=a(N,"H5",{style:!0,"data-svelte-h":!0}),k(s)!=="svelte-gqr72a"&&(s.textContent=t),u=h(N),i=a(N,"DIV",{class:!0});var P=m(i);c=a(P,"LABEL",{class:!0});var Z=m(c);g=a(Z,"INPUT",{type:!0,class:!0}),T=D(Z,`
                Use device's built-in voice (faster, works offline)`),Z.forEach(d),v=h(P),f=a(P,"P",{class:!0});var A=m(f);w.l(A),A.forEach(d),p=h(P),b=a(P,"DIV",{class:!0,"data-svelte-h":!0}),k(b)!=="svelte-1mv9afj"&&(b.innerHTML=z),P.forEach(d),N.forEach(d),this.h()},h(){ot(s,"margin","1.5rem 0 1rem 0"),ot(s,"color","#6b7280"),ot(s,"font-size","1rem"),ot(s,"font-weight","600"),o(g,"type","checkbox"),g.checked=n[10],g.disabled=n[2],o(g,"class","svelte-6zxxgu"),o(c,"class","checkbox-label svelte-6zxxgu"),o(f,"class","hint svelte-6zxxgu"),o(b,"class","native-voice-comparison svelte-6zxxgu"),o(i,"class","setting-group svelte-6zxxgu"),o(e,"class","native-voice-section svelte-6zxxgu")},m(M,N){U(M,e,N),l(e,s),l(e,u),l(e,i),l(i,c),l(c,g),l(c,T),l(i,v),l(i,f),w.m(f,null),l(i,p),l(i,b),E||(x=H(g,"change",n[61]),E=!0)},p(M,N){N[0]&1024&&(g.checked=M[10]),N[0]&4&&(g.disabled=M[2]),C!==(C=I(M))&&(w.d(1),w=C(M),w&&(w.c(),w.m(f,null)))},d(M){M&&d(e),w.d(),E=!1,x()}}}function an(n){let e,s="Remote Mode Active",t;return{c(){e=r("strong"),e.textContent=s,t=L(" - Using server-based Whisper (STT) and your custom trained voice (TTS). More accurate transcription and personalized voice, but requires network.")},l(u){e=a(u,"STRONG",{"data-svelte-h":!0}),k(e)!=="svelte-1dainxt"&&(e.textContent=s),t=D(u," - Using server-based Whisper (STT) and your custom trained voice (TTS). More accurate transcription and personalized voice, but requires network.")},m(u,i){U(u,e,i),U(u,t,i)},d(u){u&&(d(e),d(t))}}}function rn(n){let e,s="‚úì Native Mode Active",t;return{c(){e=r("strong"),e.textContent=s,t=L(" - Using your device's speech recognition and text-to-speech. Faster response, no network needed, but uses generic device voice."),this.h()},l(u){e=a(u,"STRONG",{style:!0,"data-svelte-h":!0}),k(e)!=="svelte-1vhym2p"&&(e.textContent=s),t=D(u," - Using your device's speech recognition and text-to-speech. Faster response, no network needed, but uses generic device voice."),this.h()},h(){ot(e,"color","#10b981")},m(u,i){U(u,e,i),U(u,t,i)},d(u){u&&(d(e),d(t))}}}function un(n){let e,s,t,u,i=n[13].toFixed(0)+"",c,g,T,v,f,p,b,z,E,x="‚ùå Cancel",I,C;function w(P,Z){return P[14]?dn:vn}let M=w(n),N=M(n);return{c(){e=r("div"),s=r("div"),t=r("div"),u=L("Volume: "),c=L(i),g=_(),N.c(),T=_(),v=r("div"),f=r("div"),p=_(),b=r("div"),z=_(),E=r("button"),E.textContent=x,this.h()},l(P){e=a(P,"DIV",{class:!0});var Z=m(e);s=a(Z,"DIV",{class:!0});var A=m(s);t=a(A,"DIV",{class:!0});var O=m(t);u=D(O,"Volume: "),c=D(O,i),g=h(O),N.l(O),O.forEach(d),T=h(A),v=a(A,"DIV",{class:!0});var de=m(v);f=a(de,"DIV",{class:!0,style:!0}),m(f).forEach(d),p=h(de),b=a(de,"DIV",{class:!0,style:!0}),m(b).forEach(d),de.forEach(d),A.forEach(d),z=h(Z),E=a(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),k(E)!=="svelte-1is14cv"&&(E.textContent=x),Z.forEach(d),this.h()},h(){o(t,"class","vad-volume-label svelte-6zxxgu"),o(f,"class","vad-volume-fill svelte-6zxxgu"),ot(f,"width",n[13]+"%"),Yl(f,"speaking",n[14]),o(b,"class","vad-threshold-marker svelte-6zxxgu"),ot(b,"left",(n[0].stt.vad?.voiceThreshold??12)+"%"),o(v,"class","vad-volume-bar svelte-6zxxgu"),o(s,"class","vad-volume-meter svelte-6zxxgu"),o(E,"class","test-button vad-cancel svelte-6zxxgu"),o(e,"class","vad-test-active svelte-6zxxgu")},m(P,Z){U(P,e,Z),l(e,s),l(s,t),l(t,u),l(t,c),l(t,g),N.m(t,null),l(s,T),l(s,v),l(v,f),l(v,p),l(v,b),l(e,z),l(e,E),I||(C=H(E,"click",n[23]),I=!0)},p(P,Z){Z[0]&8192&&i!==(i=P[13].toFixed(0)+"")&&_e(c,i),M!==(M=w(P))&&(N.d(1),N=M(P),N&&(N.c(),N.m(t,null))),Z[0]&8192&&ot(f,"width",P[13]+"%"),Z[0]&16384&&Yl(f,"speaking",P[14]),Z[0]&1&&ot(b,"left",(P[0].stt.vad?.voiceThreshold??12)+"%")},d(P){P&&d(e),N.d(),I=!1,C()}}}function cn(n){let e,s,t,u;return{c(){e=r("button"),s=L("üé§ Start VAD Test"),this.h()},l(i){e=a(i,"BUTTON",{class:!0});var c=m(e);s=D(c,"üé§ Start VAD Test"),c.forEach(d),this.h()},h(){o(e,"class","test-button vad-start svelte-6zxxgu"),e.disabled=n[2]},m(i,c){U(i,e,c),l(e,s),t||(u=H(e,"click",n[22]),t=!0)},p(i,c){c[0]&4&&(e.disabled=i[2])},d(i){i&&d(e),t=!1,u()}}}function vn(n){let e,s="‚ö™ Silence";return{c(){e=r("span"),e.textContent=s,this.h()},l(t){e=a(t,"SPAN",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-3lczih"&&(e.textContent=s),this.h()},h(){o(e,"class","silence-indicator svelte-6zxxgu")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function dn(n){let e,s="üî¥ SPEAKING";return{c(){e=r("span"),e.textContent=s,this.h()},l(t){e=a(t,"SPAN",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-vx98ii"&&(e.textContent=s),this.h()},h(){o(e,"class","speaking-indicator svelte-6zxxgu")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function Is(n){let e,s,t="Transcription:",u,i,c;return{c(){e=r("div"),s=r("strong"),s.textContent=t,u=_(),i=r("p"),c=L(n[15]),this.h()},l(g){e=a(g,"DIV",{class:!0});var T=m(e);s=a(T,"STRONG",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-1tviyaq"&&(s.textContent=t),u=h(T),i=a(T,"P",{class:!0});var v=m(i);c=D(v,n[15]),v.forEach(d),T.forEach(d),this.h()},h(){o(s,"class","svelte-6zxxgu"),o(i,"class","svelte-6zxxgu"),o(e,"class","vad-transcription-result svelte-6zxxgu")},m(g,T){U(g,e,T),l(e,s),l(e,u),l(e,i),l(i,c)},p(g,T){T[0]&32768&&_e(c,g[15])},d(g){g&&d(e)}}}function Ss(n){let e,s;return{c(){e=r("div"),s=L(n[16]),this.h()},l(t){e=a(t,"DIV",{class:!0});var u=m(e);s=D(u,n[16]),u.forEach(d),this.h()},h(){o(e,"class","vad-test-error svelte-6zxxgu")},m(t,u){U(t,e,u),l(e,s)},p(t,u){u[0]&65536&&_e(s,t[16])},d(t){t&&d(e)}}}function ws(n){let e,s="üí° Tip: Log in or create an account to customize your own voice settings!";return{c(){e=r("p"),e.textContent=s,this.h()},l(t){e=a(t,"P",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-8vd1jx"&&(e.textContent=s),this.h()},h(){o(e,"class","guest-hint svelte-6zxxgu")},m(t,u){U(t,e,u)},d(t){t&&d(e)}}}function fn(n){let e,s,t="üéôÔ∏è Voice Settings",u,i,c,g;const T=[Xs,Qs,Ys],v=[];function f(p,b){return p[1]?0:p[3]?1:p[0]?2:-1}return~(i=f(n))&&(c=v[i]=T[i](n)),{c(){e=r("div"),s=r("h3"),s.textContent=t,u=_(),c&&c.c(),this.h()},l(p){e=a(p,"DIV",{class:!0});var b=m(e);s=a(b,"H3",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-1kasyns"&&(s.textContent=t),u=h(b),c&&c.l(b),b.forEach(d),this.h()},h(){o(s,"class","section-title svelte-6zxxgu"),o(e,"class","voice-settings svelte-6zxxgu")},m(p,b){U(p,e,b),l(e,s),l(e,u),~i&&v[i].m(e,null),g=!0},p(p,b){let z=i;i=f(p),i===z?~i&&v[i].p(p,b):(c&&(Wl(),Kt(v[z],1,1,()=>{v[z]=null}),Jl()),~i?(c=v[i],c?c.p(p,b):(c=v[i]=T[i](p),c.c()),yt(c,1),c.m(e,null)):c=null)},i(p){g||(yt(c),g=!0)},o(p){Kt(c),g=!1},d(p){p&&d(e),~i&&v[i].d()}}}const pn=n=>n.isCustom,Ps=n=>n.isCustom,Vs=n=>!n.isCustom,Ds=n=>n.isCustom;function hn(n,e,s){let t=null,u=!0,i=!1,c=null,g=null,T="Hello! This is a test of the text to speech system.",v=!1,f=null,p=!1,b=!1,z=!1,E=!1,x=!1,I=!1,C=0,w=!1,M="",N=null,P=null,Z=[],A=null,O=null,de=null;const ne=Object.entries({piper:{name:"Piper TTS",icon:"üéôÔ∏è",description:"Fast, neural text-to-speech with multiple voice models",color:"#3b82f6"},sovits:{name:"GPT-SoVITS",icon:"ü§ñ",description:"Few-shot voice cloning using reference audio",color:"#10b981"},rvc:{name:"RVC",icon:"üé≠",description:"High-fidelity voice conversion with pitch control",color:"#8b5cf6"},kokoro:{name:"Kokoro TTS",icon:"ü´Ä",description:"54 pre-built voices across 8 languages (StyleTTS2)",color:"#f59e0b"}});async function Ne(){try{s(1,u=!0),s(11,x=typeof window<"u"&&!!window.Capacitor&&window.Capacitor.isNativePlatform?.()===!0),console.log("[VoiceSettings] Capacitor app detected:",x),s(9,z=localStorage.getItem("mh-hardware-buttons")==="true"),s(10,E=localStorage.getItem("mh-native-voice-mode")==="true");const y=await Ul("/api/voice-settings");if(!y.ok)throw new Error("Failed to load voice settings");s(0,t=await y.json()),s(8,b=!1),t&&t.rvc&&(s(0,t.rvc.indexRate=t.rvc.indexRate??1,t),s(0,t.rvc.volumeEnvelope=t.rvc.volumeEnvelope??0,t),s(0,t.rvc.protect=t.rvc.protect??.15,t),s(0,t.rvc.f0Method=t.rvc.f0Method||"rmvpe",t),s(0,t.rvc.device=t.rvc.device||"cuda",t)),t&&t.kokoro&&(s(0,t.kokoro.device=t.kokoro.device||"cpu",t),s(0,t.kokoro.normalizeCustomVoicepacks=t.kokoro.normalizeCustomVoicepacks??!0,t)),t&&t.stt&&(s(0,t.stt.model=t.stt.model||"base.en",t),s(0,t.stt.device=t.stt.device||"cpu",t),s(0,t.stt.computeType=t.stt.computeType||"int8",t),s(0,t.stt.language=t.stt.language||"en",t),s(0,t.stt.useServer=t.stt.useServer??!0,t),s(0,t.stt.autoStart=t.stt.autoStart??!0,t),s(0,t.stt.serverStatus=t.stt.serverStatus||"unknown",t),s(0,t.stt.vad=t.stt.vad??{voiceThreshold:12,silenceDelay:5e3,minDuration:500},t)),s(3,c=null)}catch(y){s(3,c=String(y)),console.error("[VoiceSettings] Load error:",y)}finally{s(1,u=!1)}}async function B(){try{s(2,i=!0),s(4,g=null),s(3,c=null),console.log("[VoiceSettings] Saving config:",{provider:t?.provider});const y=await Ul("/api/voice-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),J=await y.json();if(!y.ok)throw J.error?.includes("Authentication required")?(s(8,b=!0),s(3,c="We apologize! You're viewing this profile as a guest and can't save settings. You can still test the voice to hear how it sounds! üéôÔ∏è"),new Error(c)):new Error(J.error||"Failed to save settings");s(4,g=J.message||"Settings saved successfully!"),setTimeout(()=>{s(4,g=null)},5e3),window.dispatchEvent(new CustomEvent("voice-settings-updated")),console.log("[VoiceSettings] Dispatched voice-settings-updated event")}catch(y){c||s(3,c=String(y)),console.error("[VoiceSettings] Save error:",y)}finally{s(2,i=!1)}}async function oe(){if(!(!t||t.provider!=="sovits")){if(b){s(3,c="We apologize! You're viewing this profile as a guest and can't modify voice settings. Only the profile owner can generate reference audio. üéôÔ∏è");return}try{s(7,p=!0),s(4,g=null),s(3,c=null);const y=await Ul("/api/sovits-training",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"set-reference-latest",provider:"gpt-sovits",speakerId:t.sovits?.speakerId||"default"})}),J=await y.json();if(!y.ok){if(J.error?.includes("Authentication required")){s(8,b=!0),s(3,c="We apologize! You're viewing this profile as a guest and can't modify voice settings. Only the profile owner can generate reference audio. üéôÔ∏è");return}throw new Error(J.error||"Failed to generate reference audio")}s(4,g=J.message||"Reference audio regenerated successfully!"),setTimeout(()=>{s(4,g=null)},5e3)}catch(y){c||s(3,c=String(y)),console.error("[VoiceSettings] Generate reference error:",y)}finally{s(7,p=!1)}}}async function j(y){if(!t)return;const J=y||t.provider;try{s(6,v=!0),s(3,c=null),f&&(f.pause(),f=null),console.log("[VoiceSettings] Testing voice with provider:",J);let he={text:`${T} [${Date.now()}]`,provider:J};if(J==="piper"&&t.piper){const it=t.piper.voices.find(ve=>ve.id===t.piper.currentVoice);if(!it){s(3,c="Please select a voice"),s(6,v=!1);return}he.voiceId=it.modelPath,he.speakingRate=t.piper.speakingRate}else if(J==="sovits"&&t.sovits)he.voiceId=t.sovits.speakerId,he.speed=t.sovits.speed;else if(J==="rvc"&&t.rvc)he.voiceId=t.rvc.speakerId,he.pitchShift=t.rvc.pitchShift,he.speed=t.rvc.speed;else if(J==="kokoro"&&t.kokoro)if(t.kokoro.voice.startsWith("custom_")){try{await B()}catch(it){if(!String(it).includes("Authentication required")){s(3,c="Failed to save custom voicepack settings before testing"),s(6,v=!1);return}s(8,b=!0),console.log("[VoiceSettings] Guest user testing with profile owner's voice settings")}he.langCode=t.kokoro.langCode,he.speed=t.kokoro.speed}else he.voiceId=t.kokoro.voice,he.langCode=t.kokoro.langCode,he.speed=t.kokoro.speed;const ge=await Ul("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)});if(!ge.ok)throw new Error("Failed to generate audio");const xe=await ge.blob(),me=URL.createObjectURL(xe);f=new Audio(me),f.onended=()=>{URL.revokeObjectURL(me),s(6,v=!1)},f.onerror=()=>{s(3,c="Failed to play audio"),s(6,v=!1)},await f.play()}catch(Je){s(3,c=String(Je)),console.error("[VoiceSettings] Test error:",Je),s(6,v=!1)}}function S(y){t&&(console.log("[VoiceSettings] Switching provider:",t.provider,"‚Üí",y),s(0,t={...t,provider:y}),console.log("[VoiceSettings] Provider switched. Current:",t.provider))}async function K(){if(t?.stt?.vad)try{s(16,N=null),s(15,M=""),s(14,w=!1),s(13,C=0),Z=[];const y=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),J=new AudioContext,Je=J.createMediaStreamSource(y);A=J.createAnalyser(),A.fftSize=2048,A.smoothingTimeConstant=.8,Je.connect(A),P=new MediaRecorder(y,{mimeType:"audio/webm"}),P.ondataavailable=he=>{he.data.size>0&&Z.push(he.data)},P.start(),s(12,I=!0),de=Date.now(),ae()}catch(y){s(16,N=`Failed to start recording: ${y.message}`),console.error("[VAD Test] Error:",y)}}function ae(){if(!I||!A||!t?.stt?.vad)return;const y=()=>{if(!I||!A)return;s(13,C=Us(A,150));const J=t?.stt?.vad?.voiceThreshold??12,Je=t?.stt?.vad?.silenceDelay??5e3;C>J?(w||(console.log("[VAD Test] Speech started"),s(14,w=!0)),O&&(clearTimeout(O),O=null)):w&&!O&&(O=window.setTimeout(()=>{console.log("[VAD Test] Silence detected, stopping"),s(14,w=!1),R()},Je)),requestAnimationFrame(y)};requestAnimationFrame(y)}async function R(){if(!(!P||!t?.stt?.vad))try{s(12,I=!1),s(14,w=!1),O&&(clearTimeout(O),O=null);const y=de?Date.now()-de:0,J=t.stt.vad.minDuration??500;if(y<J){console.log(`[VAD Test] Recording too short (${y}ms), ignoring`),s(16,N=`Recording too short (${y}ms). Minimum: ${J}ms`),P.state!=="inactive"&&P.stop(),P.stream.getTracks().forEach(me=>me.stop());return}const Je=await new Promise((me,it)=>{const ve=P,ke=Z;if(ve.onstop=()=>{if(console.log(`[VAD Test] Recorder stopped, ${ke.length} chunks collected`),ke.length===0){it(new Error("No audio data recorded"));return}const ut=new Blob(ke,{type:"audio/webm"});console.log(`[VAD Test] Created blob: ${ut.size} bytes`),me(ut)},ve.state!=="inactive")ve.stop();else{if(ke.length===0){it(new Error("No audio data recorded"));return}const ut=new Blob(ke,{type:"audio/webm"});me(ut)}});P.stream.getTracks().forEach(me=>me.stop()),s(15,M="Transcribing...");const he=await Je.arrayBuffer();console.log(`[VAD Test] Sending ${he.byteLength} bytes to STT`);const ge=await Ul("/api/stt?format=webm",{method:"POST",body:he});if(!ge.ok){const me=await ge.text();throw new Error(`STT failed: ${ge.status} - ${me}`)}const xe=await ge.json();s(15,M=xe.transcript||xe.text||"(no speech detected)"),console.log("[VAD Test] Transcription:",M)}catch(y){s(16,N=`${y.message}`),s(15,M=""),console.error("[VAD Test] Error:",y)}finally{s(13,C=0)}}function Ee(){s(12,I=!1),s(14,w=!1),O&&(clearTimeout(O),O=null),P&&P.state!=="inactive"&&(P.stop(),P.stream.getTracks().forEach(y=>y.stop())),s(13,C=0),s(15,M="")}As(Ne);const te=y=>S(y);function le(){t.piper.currentVoice=ul(this),s(0,t)}function G(){t.piper.speakingRate=Gt(this.value),s(0,t)}function ue(){T=this.value,s(5,T)}const re=()=>j("piper");function Te(){t.sovits.serverUrl=this.value,s(0,t)}function Me(){t.sovits.speakerId=this.value,s(0,t)}function Re(){t.sovits.temperature=Gt(this.value),s(0,t)}function Ke(){t.sovits.speed=Gt(this.value),s(0,t)}function ce(){t.sovits.autoFallbackToPiper=this.checked,s(0,t)}function Ie(){T=this.value,s(5,T)}const Ze=()=>j("sovits");function _t(){t.rvc.speakerId=this.value,s(0,t)}function Ae(){t.rvc.pitchShift=Gt(this.value),s(0,t)}function ze(){t.rvc.speed=Gt(this.value),s(0,t)}function Se(){t.rvc.indexRate=Gt(this.value),s(0,t)}function gt(){t.rvc.volumeEnvelope=Gt(this.value),s(0,t)}function pe(){t.rvc.protect=Gt(this.value),s(0,t)}function We(){t.rvc.f0Method=ul(this),s(0,t)}function qe(){t.rvc.device=ul(this),s(0,t)}function De(){t.rvc.autoFallbackToPiper=this.checked,s(0,t)}function Pe(){T=this.value,s(5,T)}const lt=()=>j("rvc");function bt(){t.kokoro.voice=ul(this),s(0,t)}function fe(){t.kokoro.langCode=ul(this),s(0,t)}function je(){t.kokoro.speed=Gt(this.value),s(0,t)}function ye(){t.kokoro.device=ul(this),s(0,t)}function Ue(){t.kokoro.normalizeCustomVoicepacks=this.checked,s(0,t)}function at(){t.kokoro.autoFallbackToPiper=this.checked,s(0,t)}function zt(){T=this.value,s(5,T)}const $=()=>j("kokoro");function It(){t.stt.model=ul(this),s(0,t)}function Ge(){t.stt.device=ul(this),s(0,t)}function rt(){t.stt.computeType=ul(this),s(0,t)}function Be(){t.stt.language=ul(this),s(0,t)}function He(){t.stt.useServer=this.checked,s(0,t)}function Le(){t.stt.autoStart=this.checked,s(0,t)}const be=y=>{s(10,E=y.currentTarget.checked),localStorage.setItem("mh-native-voice-mode",E?"true":"false"),window.dispatchEvent(new CustomEvent("voice-settings-updated"))},st=y=>{s(9,z=y.currentTarget.checked),localStorage.setItem("mh-hardware-buttons",z?"true":"false")};function Ve(){t.stt.vad.voiceThreshold=Gt(this.value),s(0,t)}function W(){t.stt.vad.silenceDelay=Gt(this.value),s(0,t)}function F(){t.stt.vad.minDuration=Gt(this.value),s(0,t)}return[t,u,i,c,g,T,v,p,b,z,E,x,I,C,w,M,N,ne,B,oe,j,S,K,Ee,te,le,G,ue,re,Te,Me,Re,Ke,ce,Ie,Ze,_t,Ae,ze,Se,gt,pe,We,qe,De,Pe,lt,bt,fe,je,ye,Ue,at,zt,$,It,Ge,rt,Be,He,Le,be,st,Ve,W,F]}class zn extends Ls{constructor(e){super(),Os(this,e,hn,fn,Ns,{},null,[-1,-1,-1])}}export{zn as default};
