const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/native-llm.Sn3FR0s1.js","assets/api-config.BAZ_dc_Y.js","assets/index.BJPD4Al_.js","assets/index.CXATIzgh.js","assets/bigBrotherTerminal.CEpnOPL3.js","assets/index.enr_Xien.js","assets/Dashboard.sQi7MIt0.js","assets/TaskManager.DKF5Dxlm.js","assets/security-policy.CnYnD1q2.js","assets/ApprovalQueue.BEZSdcx7.js","assets/approvals.C7XgzU4f.js","assets/Terminal.D1ni3Z8b.js","assets/MemoryControls.DwM1JVCn.js","assets/AudioUpload.BMbA9cUr.js","assets/AudioUpload.Ouh38mW2.css","assets/AudioRecorder.DnwhuuBC.js","assets/VoiceTrainingWidget.Vkzonhk3.js","assets/VoiceTrainingWidget.ChL1k5SX.css","assets/VoiceSettings.DgajoOwk.js","assets/navigation.BajXnvhT.js","assets/clear-events.DBrEJJ6T.js","assets/server-health.C6FYljDX.js","assets/node-bridge.CdnDofoo.js","assets/local-memory.qidMz0ak.js","assets/VoiceSettings.hQV73ATz.css","assets/AdapterDashboard.B4hXyDEB.js","assets/fetch-timeout.D037UL0m.js","assets/AdapterDashboard.B5T-chDg.css","assets/TrainingMonitor.JsyWuucy.js","assets/TrainingMonitor.B5RQ6_GM.css","assets/OnboardingWizard.C3Wcx7rB.js","assets/OnboardingWizard.BPhHV1nf.css","assets/TrainingWizard.DKZ2sbdU.js","assets/TrainingWizard.CLlHAoks.css","assets/TrainingHistory.Dw8MX1ju.js","assets/TrainingHistory.C0YZTW5d.css","assets/DatasetManagement.BRLgkI4G.js","assets/DatasetManagement.D8cEt3Wc.css","assets/SystemControls.IEhJK_MP.js","assets/SystemControls.CKdxER_2.css","assets/Lifeline.6IWMOYI6.js","assets/Lifeline.Bc0qQI7Q.css","assets/OvernightLearnings.BWSIS0j5.js","assets/sleep-status.CfEiTtxi.js","assets/SystemSettings.BduLY-r0.js","assets/SystemSettings.B_gbxBgS.css","assets/BackendSettings.C8irhXHr.js","assets/profile-sync.fcLjFkDy.js","assets/BackendSettings.CGoXPJFS.css","assets/SecuritySettings.BK2SyQjt.js","assets/SecuritySettings.BXtRF2i3.css","assets/NetworkSettings.BKQbY9pH.js","assets/NetworkSettings.BDr02RZd.css","assets/ChatSettings.Dne0_BHX.js","assets/MemoryEditor.CfwSt3n6.js","assets/PersonaGenerator.DVURBmex.js","assets/PersonaGenerator.72-o0MLJ.css","assets/PersonaEditor.BGilrD59.js","assets/PersonaEditor.D_yGa63X.css","assets/AddonsManager.DOXFmHtL.js","assets/AddonsManager.CXN5mnGb.css","assets/SchedulerSettings.EPUGNoKl.js","assets/BoredomControl.QHmUuVIE.js","assets/SchedulerSettings.DCK3g1id.css","assets/ProfileLocation.BFTEhEan.js","assets/ProfileLocation.CN7lgZfY.css","assets/ServerSettings.DVRlfntk.js","assets/SyncStatus.DyP8ueQL.js","assets/SyncStatus.B3tXut5I.css","assets/ServerSettings.B9uJZFfi.css","assets/TerminalManager.CSiQX4tE.js","assets/AgencyDashboard.DkMN3HjB.js","assets/AgencyDashboard.BKQkw7oJ.css","assets/SystemCoderDashboard.CGh0Zl2O.js","assets/SystemCoderDashboard.DWfYqoV_.css"])))=>i.map(i=>d[i]);
import{am as $s,an as zs,ao as tn,a4 as Re,I as le,a5 as Be,J as ee,ap as js,S as Gt,i as Jt,s as Yt,n as m,d as u,p as fe,a as b,b as c,c as a,e as d,f as p,q as Z,h as A,j as h,t as x,k as P,v as mt,z as Ut,x as de,X as ot,Y as it,W as Ns,U as As,g as X,V as $t,r as Ge,u as wt,P as H,a2 as Ps,aq as qs,H as ke,K as we,L as qe,M as ye,O as ve,_ as He,l as Xe,D as Ue,A as Qt,ah as Ws,ar as zn,w as Yn,as as Vs,y as Gs,N as ft,o as Os,at as Qn,Z as Js,R as Kn,m as Ys,Q as Jn,a3 as Qs,af as Se}from"./api-config.BAZ_dc_Y.js";import{y as Ks,a as Xn}from"./navigation.BajXnvhT.js";import{c as Xs}from"./security-policy.CnYnD1q2.js";import{t as Zs}from"./clear-events.DBrEJJ6T.js";import{w as tt,d as jn}from"./index.enr_Xien.js";import{h as xs,i as Zn,f as xn}from"./server-health.C6FYljDX.js";import{getPersona as qn,saveMemory as eo,getDisplayMessages as to,appendToBuffer as el}from"./local-memory.qidMz0ak.js";const Rs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function nt(i,e){const l=e.token={};function t(n,s,o,r){if(e.token!==l)return;e.resolved=r;let f=e.ctx;o!==void 0&&(f=f.slice(),f[o]=r);const v=n&&(e.current=n)(f);let _=!1;e.block&&(e.blocks?e.blocks.forEach((k,S)=>{S!==s&&k&&(Re(),le(k,1,1,()=>{e.blocks[S]===k&&(e.blocks[S]=null)}),Be())}):e.block.d(1),v.c(),ee(v,1),v.m(e.mount(),e.anchor),_=!0),e.block=v,e.blocks&&(e.blocks[s]=v),_&&js()}if($s(i)){const n=zs();if(i.then(s=>{tn(n),t(e.then,1,e.value,s),tn(null)},s=>{if(tn(n),t(e.catch,2,e.error,s),tn(null),!e.hasCatch)throw s}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,i),!0;e.resolved=i}}function lt(i,e,l){const t=e.slice(),{resolved:n}=i;i.current===i.then&&(t[i.value]=n),i.current===i.catch&&(t[i.error]=n),i.block.p(t,l)}function no(i){let e,l,t,n,s,o,r,f;return{c(){e=h("div"),l=h("details"),t=h("summary"),n=x(i[1]),s=P(),o=h("div"),r=h("pre"),f=x(i[0]),this.h()},l(v){e=d(v,"DIV",{class:!0});var _=p(e);l=d(_,"DETAILS",{class:!0});var k=p(l);t=d(k,"SUMMARY",{class:!0});var S=p(t);n=Z(S,i[1]),S.forEach(u),s=A(k),o=d(k,"DIV",{class:!0});var y=p(o);r=d(y,"PRE",{class:!0});var R=p(r);f=Z(R,i[0]),R.forEach(u),y.forEach(u),k.forEach(u),_.forEach(u),this.h()},h(){a(t,"class","summary svelte-1lx2w68"),a(r,"class","svelte-1lx2w68"),a(o,"class","steps svelte-1lx2w68"),l.open=i[2],a(l,"class","thinking-details svelte-1lx2w68"),a(e,"class","thinking-container svelte-1lx2w68")},m(v,_){b(v,e,_),c(e,l),c(l,t),c(t,n),c(l,s),c(l,o),c(o,r),c(r,f)},p(v,[_]){_&2&&fe(n,v[1]),_&1&&fe(f,v[0]),_&4&&(l.open=v[2])},i:m,o:m,d(v){v&&u(e)}}}function lo(i,e,l){let{steps:t=""}=e,{label:n="ðŸ¤” Thinking..."}=e,{initiallyOpen:s=!0}=e;return i.$$set=o=>{"steps"in o&&l(0,t=o.steps),"label"in o&&l(1,n=o.label),"initiallyOpen"in o&&l(2,s=o.initiallyOpen)},[t,n,s]}class on extends Gt{constructor(e){super(),Jt(this,e,lo,no,Yt,{steps:0,label:1,initiallyOpen:2})}}function tl(i){let e,l,t="â†© Replying to:",n,s,o=i[2].content.substring(0,60)+"",r,f=i[2].content.length>60?"...":"",v,_,k,S="âœ•",y,R;return{c(){e=h("div"),l=h("span"),l.textContent=t,n=P(),s=h("span"),r=x(o),v=x(f),_=P(),k=h("button"),k.textContent=S,this.h()},l(B){e=d(B,"DIV",{class:!0});var M=p(e);l=d(M,"SPAN",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1ha98va"&&(l.textContent=t),n=A(M),s=d(M,"SPAN",{class:!0});var C=p(s);r=Z(C,o),v=Z(C,f),C.forEach(u),_=A(M),k=d(M,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(k)!=="svelte-s7dt6v"&&(k.textContent=S),M.forEach(u),this.h()},h(){a(l,"class","reply-label"),a(s,"class","reply-preview"),a(k,"class","reply-cancel"),a(k,"title","Cancel reply"),a(e,"class","reply-indicator")},m(B,M){b(B,e,M),c(e,l),c(e,n),c(e,s),c(s,r),c(s,v),c(e,_),c(e,k),y||(R=de(k,"click",i[19]),y=!0)},p(B,M){M&4&&o!==(o=B[2].content.substring(0,60)+"")&&fe(r,o),M&4&&f!==(f=B[2].content.length>60?"...":"")&&fe(v,f)},d(B){B&&u(e),y=!1,R()}}}function nl(i){let e,l,t="ðŸŽ¤",n,s,o;return{c(){e=h("div"),l=h("span"),l.textContent=t,n=P(),s=h("span"),o=x(i[8]),this.h()},l(r){e=d(r,"DIV",{class:!0});var f=p(e);l=d(f,"SPAN",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1adpdsz"&&(l.textContent=t),n=A(f),s=d(f,"SPAN",{class:!0});var v=p(s);o=Z(v,i[8]),v.forEach(u),f.forEach(u),this.h()},h(){a(l,"class","interim-icon svelte-9pfxv6"),a(s,"class","interim-text svelte-9pfxv6"),a(e,"class","interim-transcript svelte-9pfxv6")},m(r,f){b(r,e,f),c(e,l),c(e,n),c(e,s),c(s,o)},p(r,f){f&256&&fe(o,r[8])},d(r){r&&u(e)}}}function ll(i){let e,l='<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span class="stop-text">Stop</span>',t,n;return{c(){e=h("button"),e.innerHTML=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-gimvgw"&&(e.innerHTML=l),this.h()},h(){a(e,"class","input-stop-btn stop-thinking"),a(e,"title","Stop thinking")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[12]),t=!0)},p:m,d(s){s&&u(e),t=!1,n()}}}function sl(i){let e,l='<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg>',t,n;return{c(){e=h("button"),e.innerHTML=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-dmbseq"&&(e.innerHTML=l),this.h()},h(){a(e,"class","input-stop-btn"),a(e,"title","Stop speaking")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[18]),t=!0)},p:m,d(s){s&&u(e),t=!1,n()}}}function so(i){let e,l;return{c(){e=it("svg"),l=it("path"),this.h()},l(t){e=ot(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0});var n=p(e);l=ot(n,"path",{d:!0}),p(l).forEach(u),n.forEach(u),this.h()},h(){a(l,"d","M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3zM19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"),a(e,"width","18"),a(e,"height","18"),a(e,"viewBox","0 0 24 24"),a(e,"fill","currentColor")},m(t,n){b(t,e,n),c(e,l)},d(t){t&&u(e)}}}function oo(i){let e,l;return{c(){e=it("svg"),l=it("path"),this.h()},l(t){e=ot(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0});var n=p(e);l=ot(n,"path",{d:!0}),p(l).forEach(u),n.forEach(u),this.h()},h(){a(l,"d","M9 9c-.5-.5-1.5-1-3-1M9 15c-.5.5-1.5 1-3 1M15 9c.5-.5 1.5-1 3-1M15 15c.5.5 1.5 1 3 1M12 12v.01"),a(e,"width","20"),a(e,"height","20"),a(e,"viewBox","0 0 24 24"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"stroke-width","2"),a(e,"class","waiting-icon")},m(t,n){b(t,e,n),c(e,l)},d(t){t&&u(e)}}}function io(i){let e,l,t,n,s,o;return{c(){e=it("svg"),l=it("rect"),t=it("rect"),n=it("rect"),s=it("rect"),o=it("rect"),this.h()},l(r){e=ot(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var f=p(e);l=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(l).forEach(u),t=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(t).forEach(u),n=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(n).forEach(u),s=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(s).forEach(u),o=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(o).forEach(u),f.forEach(u),this.h()},h(){a(l,"x","2"),a(l,"y","8"),a(l,"width","2"),a(l,"height","8"),a(l,"rx","1"),a(l,"class","svelte-9pfxv6"),a(t,"x","6"),a(t,"y","4"),a(t,"width","2"),a(t,"height","16"),a(t,"rx","1"),a(t,"class","svelte-9pfxv6"),a(n,"x","10"),a(n,"y","10"),a(n,"width","2"),a(n,"height","4"),a(n,"rx","1"),a(n,"class","svelte-9pfxv6"),a(s,"x","14"),a(s,"y","6"),a(s,"width","2"),a(s,"height","12"),a(s,"rx","1"),a(s,"class","svelte-9pfxv6"),a(o,"x","18"),a(o,"y","9"),a(o,"width","2"),a(o,"height","6"),a(o,"rx","1"),a(o,"class","svelte-9pfxv6"),a(e,"width","20"),a(e,"height","20"),a(e,"viewBox","0 0 24 24"),a(e,"fill","currentColor"),a(e,"class","recording-icon")},m(r,f){b(r,e,f),c(e,l),c(e,t),c(e,n),c(e,s),c(e,o)},d(r){r&&u(e)}}}function ro(i){let e,l;return{c(){e=it("svg"),l=it("path"),this.h()},l(t){e=ot(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var n=p(e);l=ot(n,"path",{d:!0}),p(l).forEach(u),n.forEach(u),this.h()},h(){a(l,"d","M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"),a(e,"width","20"),a(e,"height","20"),a(e,"viewBox","0 0 24 24"),a(e,"fill","currentColor"),a(e,"class","conversation-icon svelte-9pfxv6")},m(t,n){b(t,e,n),c(e,l)},d(t){t&&u(e)}}}function ao(i){let e,l,t,n,s,o;return{c(){e=it("svg"),l=it("rect"),t=it("rect"),n=it("rect"),s=it("rect"),o=it("rect"),this.h()},l(r){e=ot(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var f=p(e);l=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(l).forEach(u),t=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(t).forEach(u),n=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(n).forEach(u),s=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(s).forEach(u),o=ot(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),p(o).forEach(u),f.forEach(u),this.h()},h(){a(l,"x","2"),a(l,"y","8"),a(l,"width","2"),a(l,"height","8"),a(l,"rx","1"),a(l,"class","svelte-9pfxv6"),a(t,"x","6"),a(t,"y","4"),a(t,"width","2"),a(t,"height","16"),a(t,"rx","1"),a(t,"class","svelte-9pfxv6"),a(n,"x","10"),a(n,"y","10"),a(n,"width","2"),a(n,"height","4"),a(n,"rx","1"),a(n,"class","svelte-9pfxv6"),a(s,"x","14"),a(s,"y","6"),a(s,"width","2"),a(s,"height","12"),a(s,"rx","1"),a(s,"class","svelte-9pfxv6"),a(o,"x","18"),a(o,"y","9"),a(o,"width","2"),a(o,"height","6"),a(o,"rx","1"),a(o,"class","svelte-9pfxv6"),a(e,"width","20"),a(e,"height","20"),a(e,"viewBox","0 0 24 24"),a(e,"fill","currentColor"),a(e,"class","recording-icon")},m(r,f){b(r,e,f),c(e,l),c(e,t),c(e,n),c(e,s),c(e,o)},d(r){r&&u(e)}}}function co(i){let e,l;return{c(){e=it("svg"),l=it("path"),this.h()},l(t){e=ot(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var n=p(e);l=ot(n,"path",{d:!0}),p(l).forEach(u),n.forEach(u),this.h()},h(){a(l,"d","M12 1C7.03 1 3 5.03 3 10v4c0 1.66 1.34 3 3 3h1v-7H5.5c.32-3.52 3.3-6.25 6.91-6.25s6.59 2.73 6.91 6.25H17v7h1c1.66 0 3-1.34 3-3v-4c0-4.97-4.03-9-9-9zm-1 17h2v2h-2v-2z"),a(e,"width","20"),a(e,"height","20"),a(e,"viewBox","0 0 24 24"),a(e,"fill","currentColor"),a(e,"class","wake-word-icon svelte-9pfxv6")},m(t,n){b(t,e,n),c(e,l)},d(t){t&&u(e)}}}function uo(i){let e,l,t,n,s,o,r,f,v,_,k,S,y,R,B,M,C,N,U,O=i[2]&&tl(i),$=i[8]&&nl(i),g=i[1]&&ll(i),L=i[7]&&sl(i);function D(T,Y){return T[5]?co:T[6]&&T[3]?ao:T[6]?ro:T[4]&&T[3]?io:T[4]?oo:so}let E=D(i),I=E(i);return{c(){e=h("div"),O&&O.c(),l=P(),$&&$.c(),t=P(),n=h("div"),s=h("textarea"),o=P(),r=h("div"),g&&g.c(),f=P(),L&&L.c(),v=P(),_=h("button"),I.c(),y=P(),R=h("button"),B=it("svg"),M=it("path"),this.h()},l(T){e=d(T,"DIV",{class:!0});var Y=p(e);O&&O.l(Y),l=A(Y),$&&$.l(Y),t=A(Y),n=d(Y,"DIV",{class:!0});var W=p(n);s=d(W,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),p(s).forEach(u),o=A(W),r=d(W,"DIV",{class:!0});var z=p(r);g&&g.l(z),f=A(z),L&&L.l(z),v=A(z),_=d(z,"BUTTON",{class:!0,title:!0});var V=p(_);I.l(V),V.forEach(u),y=A(z),R=d(z,"BUTTON",{class:!0});var J=p(R);B=ot(J,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var ne=p(B);M=ot(ne,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(M).forEach(u),ne.forEach(u),J.forEach(u),z.forEach(u),W.forEach(u),Y.forEach(u),this.h()},h(){a(s,"placeholder","Message your MetaHuman..."),a(s,"rows","1"),a(s,"class","chat-input"),s.disabled=i[1],a(_,"class",k="mic-btn "+(i[3]?"recording":"")+" "+(i[4]?"continuous":"")+" "+(i[6]?"conversation":"")+" "+(i[5]?"wake-word":"")+" "+(i[7]?"interrupt-ready":"")+" svelte-9pfxv6"),a(_,"title",S=i[7]?"Tap to interrupt and speak":i[5]?'Listening for "hey greg"â€¦':i[6]?i[3]?"Listeningâ€¦":"Conversation mode - just talk!":i[4]?i[3]?"Listening continuouslyâ€¦":"Continuous mode active":i[3]?"Listeningâ€¦ tap to stop":"Tap to speak, hold for conversation"),_.disabled=i[1],a(M,"stroke-linecap","round"),a(M,"stroke-linejoin","round"),a(M,"stroke-width","2"),a(M,"d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"),a(B,"class","w-5 h-5"),a(B,"fill","none"),a(B,"stroke","currentColor"),a(B,"viewBox","0 0 24 24"),a(R,"class","send-btn"),R.disabled=C=!i[0].trim()||i[1],a(r,"class","input-actions"),a(n,"class","input-row"),a(e,"class","input-wrapper")},m(T,Y){b(T,e,Y),O&&O.m(e,null),c(e,l),$&&$.m(e,null),c(e,t),c(e,n),c(n,s),Ut(s,i[0]),c(n,o),c(n,r),g&&g.m(r,null),c(r,f),L&&L.m(r,null),c(r,v),c(r,_),I.m(_,null),i[22](_),c(r,y),c(r,R),c(R,B),c(B,M),N||(U=[de(s,"input",i[21]),de(s,"keypress",i[10]),de(_,"click",i[13]),de(_,"contextmenu",i[14]),de(_,"touchstart",i[15]),de(_,"touchend",i[16]),de(_,"touchmove",i[17]),de(R,"click",i[11])],N=!0)},p(T,[Y]){T[2]?O?O.p(T,Y):(O=tl(T),O.c(),O.m(e,l)):O&&(O.d(1),O=null),T[8]?$?$.p(T,Y):($=nl(T),$.c(),$.m(e,t)):$&&($.d(1),$=null),Y&2&&(s.disabled=T[1]),Y&1&&Ut(s,T[0]),T[1]?g?g.p(T,Y):(g=ll(T),g.c(),g.m(r,f)):g&&(g.d(1),g=null),T[7]?L?L.p(T,Y):(L=sl(T),L.c(),L.m(r,v)):L&&(L.d(1),L=null),E!==(E=D(T))&&(I.d(1),I=E(T),I&&(I.c(),I.m(_,null))),Y&248&&k!==(k="mic-btn "+(T[3]?"recording":"")+" "+(T[4]?"continuous":"")+" "+(T[6]?"conversation":"")+" "+(T[5]?"wake-word":"")+" "+(T[7]?"interrupt-ready":"")+" svelte-9pfxv6")&&a(_,"class",k),Y&248&&S!==(S=T[7]?"Tap to interrupt and speak":T[5]?'Listening for "hey greg"â€¦':T[6]?T[3]?"Listeningâ€¦":"Conversation mode - just talk!":T[4]?T[3]?"Listening continuouslyâ€¦":"Continuous mode active":T[3]?"Listeningâ€¦ tap to stop":"Tap to speak, hold for conversation")&&a(_,"title",S),Y&2&&(_.disabled=T[1]),Y&3&&C!==(C=!T[0].trim()||T[1])&&(R.disabled=C)},i:m,o:m,d(T){T&&u(e),O&&O.d(),$&&$.d(),g&&g.d(),L&&L.d(),I.d(),i[22](null),N=!1,mt(U)}}}const fo=500,ol=10;function ho(i,e,l){let{input:t=""}=e,{loading:n=!1}=e,{selectedMessage:s=null}=e,{isRecording:o=!1}=e,{isContinuousMode:r=!1}=e,{isWakeWordListening:f=!1}=e,{isConversationMode:v=!1}=e,{ttsIsPlaying:_=!1}=e,{lengthMode:k="auto"}=e,{interimTranscript:S=""}=e;const y=Ns();let R=null,B=!1,M;function C(V){y("keypress",{event:V})}function N(){y("send")}function U(){y("stop")}function O(){if(_){y("ttsStopAndListen");return}B||y("micClick"),B=!1}function $(V){V.preventDefault(),y("micContextMenu")}let g=0,L=0;function D(V){V.preventDefault(),console.log("[InputArea] touchstart - starting long-press timer"),B=!1,V.touches.length>0&&(g=V.touches[0].clientX,L=V.touches[0].clientY),R=setTimeout(()=>{console.log("[InputArea] Long press detected! Dispatching micLongPress"),B=!0,navigator.vibrate&&navigator.vibrate(50),y("micLongPress")},fo)}function E(V){console.log("[InputArea] touchend - isLongPress:",B),R&&(clearTimeout(R),R=null,console.log("[InputArea] Short tap detected, dispatching micClick"),y("micClick")),V.preventDefault()}function I(V){if(R&&V.touches.length>0){const J=Math.abs(V.touches[0].clientX-g),ne=Math.abs(V.touches[0].clientY-L);(J>ol||ne>ol)&&(console.log("[InputArea] touchmove - finger moved too much, cancelling long-press"),clearTimeout(R),R=null)}}function T(){y("ttsStop")}function Y(){y("clearSelection")}As(()=>{R&&clearTimeout(R)});function W(){t=this.value,l(0,t)}function z(V){$t[V?"unshift":"push"](()=>{M=V,l(9,M)})}return i.$$set=V=>{"input"in V&&l(0,t=V.input),"loading"in V&&l(1,n=V.loading),"selectedMessage"in V&&l(2,s=V.selectedMessage),"isRecording"in V&&l(3,o=V.isRecording),"isContinuousMode"in V&&l(4,r=V.isContinuousMode),"isWakeWordListening"in V&&l(5,f=V.isWakeWordListening),"isConversationMode"in V&&l(6,v=V.isConversationMode),"ttsIsPlaying"in V&&l(7,_=V.ttsIsPlaying),"lengthMode"in V&&l(20,k=V.lengthMode),"interimTranscript"in V&&l(8,S=V.interimTranscript)},[t,n,s,o,r,f,v,_,S,M,C,N,U,O,$,D,E,I,T,Y,k,W,z]}class vo extends Gt{constructor(e){super(),Jt(this,e,ho,uo,Yt,{input:0,loading:1,selectedMessage:2,isRecording:3,isContinuousMode:4,isWakeWordListening:5,isConversationMode:6,ttsIsPlaying:7,lengthMode:20,interimTranscript:8})}}const{Map:_o}=Rs;function il(i,e,l){const t=i.slice();return t[19]=e[l],t}function rl(i,e,l){const t=i.slice();return t[22]=e[l],t[24]=l,t}function mo(i){const e=i.slice(),l=e[8](e[22]);return e[25]=l,e}function al(i){let e,l,t,n;const s=[go,po],o=[];function r(v,_){return v[22].role==="reasoning"?0:1}function f(v,_){return _===1?mo(v):v}return e=r(i),l=o[e]=s[e](f(i,e)),{c(){l.c(),t=H()},l(v){l.l(v),t=H()},m(v,_){o[e].m(v,_),b(v,t,_),n=!0},p(v,_){let k=e;e=r(v),e===k?o[e].p(f(v,e),_):(Re(),le(o[k],1,1,()=>{o[k]=null}),Be(),l=o[e],l?l.p(f(v,e),_):(l=o[e]=s[e](f(v,e)),l.c()),ee(l,1),l.m(t.parentNode,t))},i(v){n||(ee(l),n=!0)},o(v){le(l),n=!1},d(v){v&&u(t),o[e].d(v)}}}function po(i){let e,l,t,n,s,o,r=zt(i[22].timestamp)+"",f,v,_,k,S=i[25].content+"",y,R,B,M='<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3zM19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8"></path></svg>',C,N,U,O,$,g=i[25].thinking&&cl(i);function L(W,z){return W[22].role==="user"?To:W[22].role==="assistant"?yo:W[22].role==="reflection"?wo:W[22].role==="dream"?ko:bo}let D=L(i),E=D(i),I=i[22].role==="assistant"&&i[22].relPath&&fl(i);function T(...W){return i[15](i[22],...W)}function Y(){return i[16](i[22],i[24])}return{c(){g&&g.c(),e=P(),l=h("div"),t=h("div"),n=h("span"),E.c(),s=P(),o=h("span"),f=x(r),v=P(),I&&I.c(),_=P(),k=h("div"),y=x(S),R=P(),B=h("button"),B.innerHTML=M,this.h()},l(W){g&&g.l(W),e=A(W),l=d(W,"DIV",{class:!0,"data-facet":!0,role:!0,tabindex:!0});var z=p(l);t=d(z,"DIV",{class:!0});var V=p(t);n=d(V,"SPAN",{class:!0});var J=p(n);E.l(J),J.forEach(u),s=A(V),o=d(V,"SPAN",{class:!0});var ne=p(o);f=Z(ne,r),ne.forEach(u),v=A(V),I&&I.l(V),V.forEach(u),_=A(z),k=d(z,"DIV",{class:!0});var re=p(k);y=Z(re,S),R=A(re),B=d(re,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(B)!=="svelte-1v2jgst"&&(B.innerHTML=M),re.forEach(u),z.forEach(u),this.h()},h(){a(n,"class","message-role"),a(o,"class","message-time"),a(t,"class","message-header"),a(B,"class","msg-mic-btn"),a(B,"title","Listen to this message"),a(k,"class","message-content"),a(l,"class",C="message message-"+i[22].role),a(l,"data-facet",N=i[22].meta?.facet||"default"),a(l,"role","button"),a(l,"tabindex","0"),ve(l,"message-selected",i[2]===i[24])},m(W,z){g&&g.m(W,z),b(W,e,z),b(W,l,z),c(l,t),c(t,n),E.m(n,null),c(t,s),c(t,o),c(o,f),c(t,v),I&&I.m(t,null),c(l,_),c(l,k),c(k,y),c(k,R),c(k,B),U=!0,O||($=[de(B,"click",T),de(l,"click",Y)],O=!0)},p(W,z){i=W,i[25].thinking?g?(g.p(i,z),z&1&&ee(g,1)):(g=cl(i),g.c(),ee(g,1),g.m(e.parentNode,e)):g&&(Re(),le(g,1,1,()=>{g=null}),Be()),D===(D=L(i))&&E?E.p(i,z):(E.d(1),E=D(i),E&&(E.c(),E.m(n,null))),(!U||z&1)&&r!==(r=zt(i[22].timestamp)+"")&&fe(f,r),i[22].role==="assistant"&&i[22].relPath?I?I.p(i,z):(I=fl(i),I.c(),I.m(t,null)):I&&(I.d(1),I=null),(!U||z&1)&&S!==(S=i[25].content+"")&&fe(y,S),(!U||z&1&&C!==(C="message message-"+i[22].role))&&a(l,"class",C),(!U||z&1&&N!==(N=i[22].meta?.facet||"default"))&&a(l,"data-facet",N),(!U||z&5)&&ve(l,"message-selected",i[2]===i[24])},i(W){U||(ee(g),U=!0)},o(W){le(g),U=!1},d(W){W&&(u(e),u(l)),g&&g.d(W),E.d(),I&&I.d(),O=!1,mt($)}}}function go(i){let e,l;return e=new on({props:{steps:i[22].content,label:i[22].meta?.label??(i[22].meta?.stage?ln({...i[22].meta.stage,timestamp:i[22].timestamp}):"ðŸ¤” Reasoning Â· "+zt(i[22].timestamp)),initiallyOpen:!1}}),{c(){ye(e.$$.fragment)},l(t){qe(e.$$.fragment,t)},m(t,n){we(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.steps=t[22].content),n&1&&(s.label=t[22].meta?.label??(t[22].meta?.stage?ln({...t[22].meta.stage,timestamp:t[22].timestamp}):"ðŸ¤” Reasoning Â· "+zt(t[22].timestamp))),e.$set(s)},i(t){l||(ee(e.$$.fragment,t),l=!0)},o(t){le(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function cl(i){let e,l;return e=new on({props:{steps:i[25].thinking,label:"ðŸ§  Reasoning Â· "+zt(i[22].timestamp),initiallyOpen:!1}}),{c(){ye(e.$$.fragment)},l(t){qe(e.$$.fragment,t)},m(t,n){we(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.steps=t[25].thinking),n&1&&(s.label="ðŸ§  Reasoning Â· "+zt(t[22].timestamp)),e.$set(s)},i(t){l||(ee(e.$$.fragment,t),l=!0)},o(t){le(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function bo(i){let e;return{c(){e=x("System")},l(l){e=Z(l,"System")},m(l,t){b(l,e,t)},p:m,d(l){l&&u(e)}}}function ko(i){let e;return{c(){e=x("ðŸŒ™ Dream")},l(l){e=Z(l,"ðŸŒ™ Dream")},m(l,t){b(l,e,t)},p:m,d(l){l&&u(e)}}}function wo(i){let e;return{c(){e=x("ðŸ’­ Idle Thought")},l(l){e=Z(l,"ðŸ’­ Idle Thought")},m(l,t){b(l,e,t)},p:m,d(l){l&&u(e)}}}function yo(i){let e;function l(s,o){return s[22].meta?.isCuriosityQuestion?So:Co}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function To(i){let e;return{c(){e=x("You")},l(l){e=Z(l,"You")},m(l,t){b(l,e,t)},p:m,d(l){l&&u(e)}}}function Co(i){let e,l,t=i[22].meta?.facet&&i[22].meta.facet!=="default"&&ul(i);return{c(){e=x("MetaHuman"),t&&t.c(),l=H()},l(n){e=Z(n,"MetaHuman"),t&&t.l(n),l=H()},m(n,s){b(n,e,s),t&&t.m(n,s),b(n,l,s)},p(n,s){n[22].meta?.facet&&n[22].meta.facet!=="default"?t?t.p(n,s):(t=ul(n),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(n){n&&(u(e),u(l)),t&&t.d(n)}}}function So(i){let e,l="ðŸ’­ I'm curious:";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-8fwzhy"&&(e.textContent=l),this.h()},h(){a(e,"class","curiosity-label")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function ul(i){let e,l,t=i[22].meta.facet+"",n,s;return{c(){e=h("span"),l=x("Â· "),n=x(t),this.h()},l(o){e=d(o,"SPAN",{class:!0,title:!0});var r=p(e);l=Z(r,"Â· "),n=Z(r,t),r.forEach(u),this.h()},h(){a(e,"class","facet-indicator"),a(e,"title",s="Speaking as "+i[22].meta.facet+" facet")},m(o,r){b(o,e,r),c(e,l),c(e,n)},p(o,r){r&1&&t!==(t=o[22].meta.facet+"")&&fe(n,t),r&1&&s!==(s="Speaking as "+o[22].meta.facet+" facet")&&a(e,"title",s)},d(o){o&&u(e)}}}function fl(i){let e,l,t="âˆ’",n,s,o="+",r,f;function v(){return i[13](i[22])}function _(){return i[14](i[22])}return{c(){e=h("span"),l=h("button"),l.textContent=t,n=P(),s=h("button"),s.textContent=o,this.h()},l(k){e=d(k,"SPAN",{class:!0});var S=p(e);l=d(S,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(l)!=="svelte-1xa9sss"&&(l.textContent=t),n=A(S),s=d(S,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(s)!=="svelte-wzz1bn"&&(s.textContent=o),S.forEach(u),this.h()},h(){a(l,"class","msg-btn bad"),a(l,"title","Delete from memory"),a(s,"class","msg-btn good"),a(s,"title","Mark as correct"),a(e,"class","message-actions")},m(k,S){b(k,e,S),c(e,l),c(e,n),c(e,s),r||(f=[de(l,"click",v),de(s,"click",_)],r=!0)},p(k,S){i=k},d(k){k&&u(e),r=!1,mt(f)}}}function dl(i){let e,l,t=(i[1]==="inner"?i[22].role==="reflection"||i[22].role==="dream"||i[22].role==="reasoning":i[22].role!=="reflection"&&i[22].role!=="dream")&&al(i);return{c(){t&&t.c(),e=H()},l(n){t&&t.l(n),e=H()},m(n,s){t&&t.m(n,s),b(n,e,s),l=!0},p(n,s){(n[1]==="inner"?n[22].role==="reflection"||n[22].role==="dream"||n[22].role==="reasoning":n[22].role!=="reflection"&&n[22].role!=="dream")?t?(t.p(n,s),s&3&&ee(t,1)):(t=al(n),t.c(),ee(t,1),t.m(e.parentNode,e)):t&&(Re(),le(t,1,1,()=>{t=null}),Be())},i(n){l||(ee(t),l=!0)},o(n){le(t),l=!1},d(n){n&&u(e),t&&t.d(n)}}}function hl(i){let e=[],l=new _o,t,n,s=Ge(i[4]);const o=r=>r[19].timestamp+"-"+r[19].round+"-"+r[19].stage;for(let r=0;r<s.length;r+=1){let f=il(i,s,r),v=o(f);l.set(v,e[r]=vl(v,f))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=H()},l(r){for(let f=0;f<e.length;f+=1)e[f].l(r);t=H()},m(r,f){for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(r,f);b(r,t,f),n=!0},p(r,f){f&16&&(s=Ge(r[4]),Re(),e=Ps(e,f,o,1,r,s,l,t.parentNode,qs,vl,t,il),Be())},i(r){if(!n){for(let f=0;f<s.length;f+=1)ee(e[f]);n=!0}},o(r){for(let f=0;f<e.length;f+=1)le(e[f]);n=!1},d(r){r&&u(t);for(let f=0;f<e.length;f+=1)e[f].d(r)}}}function vl(i,e){let l,t,n;return t=new on({props:{steps:e[19].content,label:ln(e[19]),initiallyOpen:!0}}),{key:i,first:null,c(){l=H(),ye(t.$$.fragment),this.h()},l(s){l=H(),qe(t.$$.fragment,s),this.h()},h(){this.first=l},m(s,o){b(s,l,o),we(t,s,o),n=!0},p(s,o){e=s;const r={};o&16&&(r.steps=e[19].content),o&16&&(r.label=ln(e[19])),t.$set(r)},i(s){n||(ee(t.$$.fragment,s),n=!0)},o(s){le(t.$$.fragment,s),n=!1},d(s){s&&u(l),ke(t,s)}}}function _l(i){let e,l;return e=new on({props:{steps:i[6],label:i[7],initiallyOpen:!0}}),{c(){ye(e.$$.fragment)},l(t){qe(e.$$.fragment,t)},m(t,n){we(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.steps=t[6]),n&128&&(s.label=t[7]),e.$set(s)},i(t){l||(ee(e.$$.fragment,t),l=!0)},o(t){le(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function ml(i){let e,l='<div class="message-header"><span class="message-role">MetaHuman</span></div> <div class="message-content typing"><span class="typing-dot"></span> <span class="typing-dot"></span> <span class="typing-dot"></span></div>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1kfcgg0"&&(e.innerHTML=l),this.h()},h(){a(e,"class","message message-assistant")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function Eo(i){let e,l,t,n,s,o=Ge(i[0]),r=[];for(let S=0;S<o.length;S+=1)r[S]=dl(rl(i,o,S));const f=S=>le(r[S],1,1,()=>{r[S]=null});let v=i[4].length>0&&hl(i),_=i[5]&&_l(i),k=i[3]&&i[4].length===0&&ml();return{c(){e=h("div");for(let S=0;S<r.length;S+=1)r[S].c();l=P(),v&&v.c(),t=P(),_&&_.c(),n=P(),k&&k.c(),this.h()},l(S){e=d(S,"DIV",{class:!0});var y=p(e);for(let R=0;R<r.length;R+=1)r[R].l(y);l=A(y),v&&v.l(y),t=A(y),_&&_.l(y),n=A(y),k&&k.l(y),y.forEach(u),this.h()},h(){a(e,"class","messages-list")},m(S,y){b(S,e,y);for(let R=0;R<r.length;R+=1)r[R]&&r[R].m(e,null);c(e,l),v&&v.m(e,null),c(e,t),_&&_.m(e,null),c(e,n),k&&k.m(e,null),s=!0},p(S,[y]){if(y&7943){o=Ge(S[0]);let R;for(R=0;R<o.length;R+=1){const B=rl(S,o,R);r[R]?(r[R].p(B,y),ee(r[R],1)):(r[R]=dl(B),r[R].c(),ee(r[R],1),r[R].m(e,l))}for(Re(),R=o.length;R<r.length;R+=1)f(R);Be()}S[4].length>0?v?(v.p(S,y),y&16&&ee(v,1)):(v=hl(S),v.c(),ee(v,1),v.m(e,t)):v&&(Re(),le(v,1,1,()=>{v=null}),Be()),S[5]?_?(_.p(S,y),y&32&&ee(_,1)):(_=_l(S),_.c(),ee(_,1),_.m(e,n)):_&&(Re(),le(_,1,1,()=>{_=null}),Be()),S[3]&&S[4].length===0?k||(k=ml(),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i(S){if(!s){for(let y=0;y<o.length;y+=1)ee(r[y]);ee(v),ee(_),s=!0}},o(S){r=r.filter(Boolean);for(let y=0;y<r.length;y+=1)le(r[y]);le(v),le(_),s=!1},d(S){S&&u(e),wt(r,S),v&&v.d(),_&&_.d(),k&&k.d()}}}function pl(i){if(!i||typeof i!="string")return{thinking:null,content:String(i||"")};const e=/<think>([\s\S]*?)<\/think>/gi,l=i.match(e);if(!l||l.length===0)return{thinking:null,content:i.trim()};let t="";for(const s of l){const o=s.replace(/<\/?think>/gi,"").trim();o&&(t+=(t?`

`:"")+o)}const n=i.replace(e,"").replace(/^\s*\n+/,"").trim();return{thinking:t||null,content:n}}function zt(i){return new Date(i).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function ln(i){const e=String(i.stage||"plan").replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase());return`ðŸ¤” Round ${i.round}: ${e}`}function Mo(i,e,l){let{messages:t=[]}=e,{mode:n="conversation"}=e,{selectedMessageIndex:s=null}=e,{loading:o=!1}=e,{reasoningStages:r=[]}=e,{showThinkingIndicator:f=!1}=e,{thinkingSteps:v=""}=e,{thinkingStatusLabel:_=""}=e;const k=Ns(),S=new Map;function y(g){const L=typeof g.content=="string"?g.content:String(g.content||"");if(g.role!=="assistant")return{thinking:null,content:L};const D=L;if(S.has(D))return S.get(D);const E=pl(L);return S.set(D,E),E}function R(g,L){k("messageClick",{message:g,index:L})}function B(g){k("deleteMessage",{relPath:g})}function M(g,L){k("validateMessage",{relPath:g,status:L})}function C(g,L){g.stopPropagation();const{content:D}=pl(L);k("speakMessage",{content:D})}const N=g=>B(g.relPath),U=g=>M(g.relPath,"correct"),O=(g,L)=>C(L,g.content),$=(g,L)=>R(g,L);return i.$$set=g=>{"messages"in g&&l(0,t=g.messages),"mode"in g&&l(1,n=g.mode),"selectedMessageIndex"in g&&l(2,s=g.selectedMessageIndex),"loading"in g&&l(3,o=g.loading),"reasoningStages"in g&&l(4,r=g.reasoningStages),"showThinkingIndicator"in g&&l(5,f=g.showThinkingIndicator),"thinkingSteps"in g&&l(6,v=g.thinkingSteps),"thinkingStatusLabel"in g&&l(7,_=g.thinkingStatusLabel)},[t,n,s,o,r,f,v,_,y,R,B,M,C,N,U,O,$]}class Io extends Gt{constructor(e){super(),Jt(this,e,Mo,Eo,Yt,{messages:0,mode:1,selectedMessageIndex:2,loading:3,reasoningStages:4,showThinkingIndicator:5,thinkingSteps:6,thinkingStatusLabel:7})}}function Bn(i,e=150){const l=new Uint8Array(i.frequencyBinCount);i.getByteFrequencyData(l);const n=48e3/i.fftSize,s=Math.floor(80/n),o=Math.floor(3e3/n);let r=0,f=0;for(let _=s;_<=o&&_<l.length;_++)r+=l[_],f++;const v=f>0?r/f:0;return Math.min(100,v/255*e)}let Ft=null;async function Et(){if(Ft)return Ft;if(!Bs()){const{NativeVoiceWeb:e}=await He(async()=>{const{NativeVoiceWeb:l}=await import("./native-voice-web.Qyr_GgnC.js");return{NativeVoiceWeb:l}},[]);return Ft=new e,Ft}const{registerPlugin:i}=await He(async()=>{const{registerPlugin:e}=await import("./index.CXATIzgh.js");return{registerPlugin:e}},[]);return Ft=i("NativeVoice",{web:()=>He(()=>import("./native-voice-web.Qyr_GgnC.js"),[]).then(e=>new e.NativeVoiceWeb)}),Ft}const Do={async isAvailable(){return(await Et()).isAvailable()},async startListening(i){return(await Et()).startListening(i)},async stopListening(){return(await Et()).stopListening()},async cancelListening(){return(await Et()).cancelListening()},async speak(i){return(await Et()).speak(i)},async stopSpeaking(){return(await Et()).stopSpeaking()},async getVoices(){return(await Et()).getVoices()},async enableHardwareButtons(){return(await Et()).enableHardwareButtons()},async disableHardwareButtons(){return(await Et()).disableHardwareButtons()},async isHardwareButtonsEnabled(){return(await Et()).isHardwareButtonsEnabled()},async addListener(i,e){return(await Et()).addListener(i,e)},async removeAllListeners(){return(await Et()).removeAllListeners()}};function Bs(){return typeof window>"u"?!1:window.Capacitor?.isNativePlatform?.()===!0}const Lo=6e4,No=3e4;function gl(){return typeof window>"u"||typeof localStorage>"u"?!1:localStorage.getItem("mh-native-voice-mode")==="true"}function bl(){return typeof window>"u"?!1:"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}function Un(i){if(!i)return"";let e=i;return e=e.replace(/<think>[\s\S]*?<\/think>/gi," "),e=e.replace(/```[\s\S]*?```/g," "),e=e.replace(/`([^`]+)`/g,"$1"),e=e.replace(/!\[[^\]]*\]\([^)]+\)/g," "),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,"$1"),e=e.replace(/[*_]{1,3}([^*_]+)[*_]{1,3}/g,"$1"),e=e.replace(/^#{1,6}\s*/gm,""),e=e.replace(/^\s*[-+*]\s+/gm,""),e=e.replace(/<\/?[^>]+>/g," "),e=e.replace(/[*/]{2,}/g," "),e=e.replace(/\s+/g," ").trim(),e}function Ao(){let i=null,e=null,l=0,t=!1,n=null,s=null,o=0,r=null,f=0;const v=tt(!1),_=tt(!1),k=tt(!1),S=tt({current:0,total:0});let y=[],R=0,B=!1,M=null;const C=2;let N=!1;function U(){if(n){try{n.stop()}catch{}n=null}v.set(!1),O()}function O(){M&&(M.abort(),M=null);for(const Q of y)try{Q.audio.pause(),URL.revokeObjectURL(Q.audio.src)}catch{}y=[],R=0,B=!1,N=!1,k.set(!1),S.set({current:0,total:0})}function $(){e&&(e.abort(),e=null),_.set(!1)}async function g(){if(!t)try{i=i||new(window.AudioContext||window.webkitAudioContext);const Q=i.createBuffer(1,1,22050),G=i.createBufferSource();G.buffer=Q,G.connect(i.destination),G.start(0),await i.resume(),t=!0}catch(Q){console.warn("[useTTS] Failed to unlock audio:",Q)}}async function L(){const Q=Date.now();if(s&&Q-o<Lo)return s;try{const G=await Xe("/api/voice-models");if(G.ok){const ie=await G.json(),ae={multiVoice:!!ie.multiVoice&&Array.isArray(ie.models)&&ie.models.length>1,models:Array.isArray(ie.models)?ie.models:void 0};return s=ae,o=Q,ae}}catch(G){console.warn("[useTTS] Failed to fetch voice models:",G)}return{multiVoice:!1}}async function D(){const Q=Date.now();if(r&&Q-f<No)return r.provider;try{const G=await Xe("/api/voice-settings");if(G.ok){const ie=await G.json();return r={provider:ie.provider},f=Q,ie.provider}}catch(G){console.warn("[useTTS] Failed to fetch voice provider:",G)}}function E(){Promise.all([L(),D()]).catch(Q=>{console.warn("[useTTS] Voice prefetch failed:",Q)})}async function I(Q){if(gl()&&bl())return console.log("[useTTS] Native voice mode enabled - routing to native TTS"),ne(Q);console.log("[useTTS] ðŸ”Š speakText called (WEB AUDIO API VERSION - no session steal)"),console.log("[useTTS] speakText called with text length:",Q.length);const G=Un(Q);if(console.log("[useTTS] normalized text length:",G?.length||0),!G){console.log("[useTTS] No speech text after normalization, aborting");return}const ie=++l;U(),$();const ae=new AbortController;e=ae,_.set(!0);try{console.log("[useTTS] Fetching voice metadata...");const[{multiVoice:he,models:oe},se]=await Promise.all([L(),D()]);he&&oe&&console.log(`[useTTS] Multi-voice mode active with ${oe.length} voices`),console.log("[useTTS] Fetching TTS from /api/tts...");const j={text:G};se&&(j.provider=se),he&&oe&&(j.models=oe);const K=await Xe("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j),signal:ae.signal});if(ie!==l)return;if(e=null,_.set(!1),!K.ok){console.warn("[useTTS] TTS request failed:",K.status);return}const te=await K.arrayBuffer();if(ie!==l)return;i=i||new(window.AudioContext||window.webkitAudioContext),i.state==="suspended"&&await i.resume();const q=await i.decodeAudioData(te);if(ie!==l)return;n=i.createBufferSource(),n.buffer=q,n.connect(i.destination),v.set(!0),console.log("[useTTS] Playing via Web Audio API (no media session steal)"),n.onended=()=>{ie===l&&(console.log("[useTTS] Web Audio playback ended"),v.set(!1),n=null)},n.start(0)}catch(he){if(ae.signal.aborted)return;console.warn("[useTTS] speakText failed:",he),v.set(!1)}finally{e===ae&&(e=null),_.set(!1)}}async function T(Q,G){console.log("[useTTS] speakTextStreaming called with text length:",Q.length);const ie=Un(Q);if(console.log("[useTTS] normalized text length:",ie?.length||0),!ie){console.log("[useTTS] No speech text after normalization, aborting");return}U(),$(),y=[],R=0,B=!1,N=!1,M=new AbortController,k.set(!0),_.set(!0);try{const ae=await D();console.log("[useTTS] Streaming with provider:",ae);const he={text:ie,provider:ae};G?.pitchShift!==void 0&&(he.pitchShift=G.pitchShift),G?.speed!==void 0&&(he.speed=G.speed);const oe=await Xe("/api/tts-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he),signal:M.signal});if(!oe.ok)throw new Error(`Streaming TTS request failed: ${oe.status}`);if(!oe.body)throw new Error("No response body for streaming");const se=oe.body.getReader(),j=new TextDecoder;let K="";for(console.log("[useTTS] SSE stream started");;){const{done:te,value:q}=await se.read();if(te){console.log("[useTTS] SSE stream ended");break}K+=j.decode(q,{stream:!0});const ce=K.split(`

`);K=ce.pop()||"";for(const ue of ce)if(ue.startsWith("data: "))try{const Ie=JSON.parse(ue.slice(6));if(Ie.event==="complete"){console.log("[useTTS] Stream complete:",Ie.total_chunks,"chunks"),N=!0,_.set(!1),Y();continue}if(Ie.event==="error")throw console.error("[useTTS] Stream error:",Ie.error),new Error(Ie.error);if(Ie.audio_base64){console.log(`[useTTS] Received chunk ${Ie.chunk_index+1}/${Ie.total_sentences}`),S.set({current:Ie.chunk_index+1,total:Ie.total_sentences});const me=atob(Ie.audio_base64),De=new Uint8Array(me.length);for(let Le=0;Le<me.length;Le++)De[Le]=me.charCodeAt(Le);const Ne=new Blob([De],{type:"audio/wav"}),ze=URL.createObjectURL(Ne),We=new Audio(ze);y.push({index:Ie.chunk_index,audio:We,played:!1});const Pe=y.filter(Le=>!Le.played).length;console.log(`[useTTS] Buffered chunks: ${Pe}/${C}`);const Ce=Pe>=C||Ie.is_final;Ce&&!Ue(v)&&(console.log("[useTTS] Buffer threshold reached, starting playback"),_.set(!1),v.set(!0)),Ce&&Y()}}catch(Ie){console.warn("[useTTS] Failed to parse SSE event:",Ie)}}await W()}catch(ae){if(ae.name==="AbortError"){console.log("[useTTS] Streaming aborted");return}console.warn("[useTTS] Streaming failed:",ae),console.log("[useTTS] Falling back to non-streaming TTS"),O(),await I(Q)}finally{_.set(!1),k.set(!1)}}function Y(){if(B)return;const Q=y.find(ie=>ie.index===R&&!ie.played);if(!Q)return;const G=y.filter(ie=>!ie.played).length;if(G<C&&!N){console.log(`[useTTS] Waiting for buffer: ${G}/${C} chunks`);return}B=!0,Q.played=!0,console.log(`[useTTS] Playing chunk ${Q.index} (buffer: ${G-1} remaining)`),Q.audio.onended=()=>{console.log(`[useTTS] Chunk ${Q.index} finished`),URL.revokeObjectURL(Q.audio.src),B=!1,R++,Y(),y.every(ae=>ae.played)&&N&&v.set(!1)},Q.audio.onerror=()=>{console.warn(`[useTTS] Chunk ${Q.index} playback error`),URL.revokeObjectURL(Q.audio.src),B=!1,R++,Y()},Q.audio.play().catch(ie=>{console.warn(`[useTTS] Failed to play chunk ${Q.index}:`,ie),B=!1,R++,Y()})}function W(){return new Promise(Q=>{const G=()=>{y.length>0&&y.every(ae=>ae.played)&&!B&&N?(v.set(!1),Q()):setTimeout(G,100)};G()})}function z(){if($(),U(),O(),J(),i){try{i.close()}catch{}i=null}}let V=null;function J(){typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.cancel(),V=null}async function ne(Q){const G=Un(Q);if(!G){console.log("[useTTS] No speech text after normalization, aborting");return}if(U(),J(),Bs()){console.log("[useTTS] ðŸ”Š Using Capacitor NativeVoice plugin (true Android TTS)");try{v.set(!0),await Do.speak({text:G,rate:1,pitch:1}),v.set(!1);return}catch(ie){console.warn("[useTTS] Capacitor TTS failed, falling back to Web Speech API:",ie),v.set(!1)}}return console.log("[useTTS] ðŸ”Š Using Web Speech API"),new Promise((ie,ae)=>{try{V=new SpeechSynthesisUtterance(G),V.rate=1,V.pitch=1,V.volume=1;const he=window.speechSynthesis.getVoices();if(he.length>0){const oe=he.find(se=>se.name.includes("Google")&&se.lang.startsWith("en"))||he.find(se=>se.lang.startsWith("en"))||he[0];oe&&(V.voice=oe,console.log("[useTTS] Using voice:",oe.name))}V.onstart=()=>{console.log("[useTTS] Native TTS started"),v.set(!0)},V.onend=()=>{console.log("[useTTS] Native TTS ended"),v.set(!1),V=null,ie()},V.onerror=oe=>{console.warn("[useTTS] Native TTS error:",oe.error),v.set(!1),V=null,ae(new Error(oe.error))},window.speechSynthesis.speak(V)}catch(he){console.error("[useTTS] Native TTS failed:",he),v.set(!1),ae(he)}})}async function re(Q,G){return gl()&&bl()?(console.log("[useTTS] Native voice mode enabled - using device TTS"),ne(Q)):G?.streaming?T(Q,{pitchShift:G.pitchShift,speed:G.speed}):I(Q)}return{isPlaying:v,isLoading:_,isStreaming:k,streamProgress:S,speak:re,speakText:I,speakTextStreaming:T,speakTextNative:ne,stopActiveAudio:U,stopNativeTTS:J,stopStreaming:O,cancelInFlightTts:$,ensureAudioUnlocked:g,prefetchVoiceResources:E,cleanup:z}}const Wn=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;function Fn(){return!!Wn}function Hn(){Xe("/api/activity-ping",{method:"POST"}).catch(()=>{})}function Po(i){const{getTTSPlaying:e,onTranscript:l,onSystemMessage:t,isComponentMounted:n}=i;let s=null,o=null,r=[],f=null,v=null,_=null,k=null,S=!1,y=!1,R=12,B=1400,M=500;const C=5,N=1200,U=200,O=900,$=3e4;let g=!1,L=null,D=null,E="IDLE";function I(_e){const be=E;switch(!{IDLE:["READY"],READY:["LISTENING","IDLE"],LISTENING:["PROCESSING","READY","IDLE"],PROCESSING:["SPEAKING","READY","IDLE"],SPEAKING:["COOLDOWN","IDLE"],COOLDOWN:["READY","IDLE"]}[be].includes(_e)&&_e!=="IDLE"&&console.warn(`[ConversationState] Invalid transition: ${be} â†’ ${_e}`),E=_e,_e){case"IDLE":dt(),Je();break;case"READY":break;case"LISTENING":break;case"PROCESSING":dt(),Je();break;case"SPEAKING":dt(),Je();break}}let T=null,Y=null,W=null,z=!1,V=null,J=0,ne=!1,re=null,Q=null,G=null,ie=null,ae=null,he=!1,oe=0,se=0,j="",K=0,te=!1,q=0;const ce=tt(!1),ue=tt(!1),Ie=tt(""),me=tt(!1),De=tt(""),Ne=tt("unknown"),ze=tt(!1),We=tt(!1),Pe=tt(!1);let Ce=null,Le=!1;function Ee(){return Le?"native":"whisper"}function Oe(_e){_e==="auto"?Le=Fn():_e==="native"?Fn()?Le=!0:(console.warn("[useMicrophone] Native speech recognition not available, falling back to Whisper"),Le=!1):Le=!1,console.log("[useMicrophone] STT backend set to:",Ee())}async function Qe(){try{const _e=await Xe("/api/voice-settings");if(_e.ok){const be=await _e.json();be.stt?.vad&&(R=be.stt.vad.voiceThreshold??12,B=be.stt.vad.silenceDelay??5e3,M=be.stt.vad.minDuration??500,console.log("[useMicrophone] Loaded VAD settings (desktop):",{MIC_VOICE_THRESHOLD:R,MIC_SILENCE_DELAY:B,MIC_MIN_DURATION:M}));const $e=be.stt?.serverStatus;$e==="running"?(Ne.set("ready"),console.log("[useMicrophone] Whisper server ready")):$e==="starting"||$e==="loading"?(Ne.set("loading"),console.log("[useMicrophone] Whisper server starting...")):$e==="stopped"||$e==="disabled"?Ne.set("stopped"):Ne.set("unknown")}}catch(_e){console.error("[useMicrophone] Failed to load VAD settings:",_e),Ne.set("error")}}function st(){console.log("[useMicrophone] Exiting conversation mode"),g=!1,ze.set(!1),I("IDLE"),L&&(clearTimeout(L),L=null),D&&(clearTimeout(D),D=null)}function Ae(){L&&clearTimeout(L),L=setTimeout(()=>{console.log("[useMicrophone] Conversation mode timed out"),st()},$)}function yt(){if(!g||!n())return;D&&(clearTimeout(D),D=null),K=Date.now(),I("PROCESSING");const _e=Math.max(700,N),be=te?_e:_e+400,$e=te?800:1100;console.log("[useMicrophone] State=PROCESSING, waiting for TTS (minWait="+$e+"ms, cooldown="+be+"ms, gotTranscript:",te,")"),te=!1;const Ve=()=>{if(!g||!n()){I("IDLE");return}const je=Date.now()-K,ht=e();switch(E){case"PROCESSING":ht?(I("SPEAKING"),D=setTimeout(Ve,200)):je<$e?D=setTimeout(Ve,200):(console.log("[useMicrophone] No TTS after",$e,"ms, going to COOLDOWN"),I("COOLDOWN"),D=setTimeout(Ve,100));break;case"SPEAKING":ht?D=setTimeout(Ve,200):(console.log("[useMicrophone] TTS finished, entering COOLDOWN ("+be+"ms)"),I("COOLDOWN"),D=setTimeout(Ve,be));break;case"COOLDOWN":ht?(console.log("[useMicrophone] TTS restarted during cooldown, back to SPEAKING"),I("SPEAKING"),D=setTimeout(Ve,200)):(console.log("[useMicrophone] Cooldown complete, entering READY state"),I("READY"),Ae(),at());break;default:console.warn("[useMicrophone] Unexpected state in restart loop:",E);break}};D=setTimeout(Ve,100)}async function at(){if(!(!g||!n())&&!z){console.log("[useMicrophone] Starting conversation VAD (threshold:",R,", sustainedFrames:",C,")"),J=0;try{T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),Y=new AudioContext;const _e=Y.createMediaStreamSource(T);W=Y.createAnalyser(),W.fftSize=256,_e.connect(W),z=!0,q=Date.now(),Ze()}catch(_e){console.error("[useMicrophone] Failed to start conversation VAD:",_e),z=!1}}}function dt(){if(z=!1,V&&(cancelAnimationFrame(V),V=null),T&&(T.getTracks().forEach(_e=>_e.stop()),T=null),Y){try{Y.close()}catch{}Y=null}W=null}async function Ct(){if(!ne){console.log("[useMicrophone] Starting conversation silence monitor (silenceDelay:",B,"ms)");try{Q=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),G=new AudioContext;const _e=G.createMediaStreamSource(Q);ie=G.createAnalyser(),ie.fftSize=256,_e.connect(ie),ne=!0,he=!1,Ye()}catch(_e){console.error("[useMicrophone] Failed to start silence monitor:",_e)}}}function Je(){if(ne=!1,re&&(clearTimeout(re),re=null),ae&&(cancelAnimationFrame(ae),ae=null),Q&&(Q.getTracks().forEach(_e=>_e.stop()),Q=null),G){try{G.close()}catch{}G=null}ie=null,he=!1,oe=0}function Ye(){if(!ne||!ie)return;if(E!=="LISTENING"){Je();return}if(e()){re&&(clearTimeout(re),re=null),console.warn("[useMicrophone] TTS playing during LISTENING state - stopping monitor"),Je();return}if(Bn(ie,150)>R)he||(oe=Date.now()),he=!0,re&&(clearTimeout(re),re=null);else if(he&&!re){if((oe?Date.now()-oe:0)<O){ae=requestAnimationFrame(Ye);return}console.log("[useMicrophone] Silence detected, starting timer ("+B+"ms)"),re=setTimeout(async()=>{console.log("[useMicrophone] Silence timer expired");const $e=Ue(De);let Ve=j;if($e.trim()&&(Ve+=" "+$e.trim()),Ve=Ve.trim(),console.log("[useMicrophone] Full transcript to send:",Ve),Ce)try{Ce.stop()}catch{}Je(),Ve?(console.log("[useMicrophone] Conversation mode: sending accumulated transcript:",Ve),j="",te=!0,l(Ve),se=0):(console.log("[useMicrophone] Conversation mode: no transcript detected, backing off"),j="",se+=1,se>=2&&Te())},B)}ae=requestAnimationFrame(Ye)}function Ze(){if(!z||!W||!g){dt();return}if(E!=="READY"){console.log("[useMicrophone] VAD blocked - state is",E,"(not READY)"),dt();return}if(e()){J=0,console.log("[useMicrophone] TTS detected during VAD, transitioning to SPEAKING"),I("SPEAKING"),dt(),yt();return}if(Date.now()-q<U){J=0,V=requestAnimationFrame(Ze);return}const be=Bn(W,150);if(be>R){if(J++,J>=C){console.log("[useMicrophone] Sustained voice detected (vol:",be,", frames:",J,"), starting speech recognition"),J=0,dt(),I("LISTENING"),bt(!0),Ct();return}}else J=0;V=requestAnimationFrame(Ze)}function Te(){st(),dt(),Je(),ct()}function Ke(){console.log("[useMicrophone] Long-press/right-click: using Whisper continuous mode"),ut()}function bt(_e=!1){if(typeof window<"u"&&!window.isSecureContext){console.warn("[useMicrophone] Not in secure context (HTTPS required for microphone)"),t("ðŸ”’ Microphone requires HTTPS. Access via https:// instead of http://");return}if(!Wn){console.warn("[useMicrophone] Native speech recognition not available"),t("âš ï¸ Native speech recognition not available on this device");return}if(e()){console.log("[useMicrophone] TTS playing, not starting speech recognition");return}if(Ce){try{Ce.abort()}catch{}Ce=null}try{Ce=new Wn,Ce.continuous=_e,Ce.interimResults=!0,Ce.lang="en-US",Ce.onstart=()=>{console.log("[useMicrophone] Native speech recognition started (continuous:",_e,")"),ce.set(!0),me.set(!0),De.set(""),j="",Hn()},Ce.onresult=be=>{let $e="",Ve="";for(let je=be.resultIndex;je<be.results.length;je++){const ht=be.results[je];ht.isFinal?Ve+=ht[0].transcript:$e+=ht[0].transcript}if(Ve.trim()&&(j+=" "+Ve.trim(),j=j.trim()),$e&&De.set($e),Ve.trim())if(console.log("[useMicrophone] Native transcript (final):",Ve,"accumulated:",j),De.set(""),te=!0,g&&Ce?.continuous)console.log("[useMicrophone] Conversation mode: accumulating, not sending yet");else{const je=Ve.trim(),ht=je.split(/\s+/).length;Ue(ue)&&ht<3&&je.length<15?console.log("[useMicrophone] Continuous mode: ignoring short transcript (likely noise):",je):l(je)}},Ce.onerror=be=>{if(console.error("[useMicrophone] Native speech error:",be.error,be.message),be.error==="no-speech")console.log("[useMicrophone] No speech detected");else if(be.error!=="aborted")if(be.error==="not-allowed"){const $e=typeof window<"u"&&window.isSecureContext;t($e?"ðŸŽ¤ Microphone access denied. Please allow microphone in browser settings.":"ðŸ”’ Microphone requires HTTPS.")}else be.error==="network"?t("ðŸŒ Network error during speech recognition. Check your connection."):t(`âš ï¸ Speech recognition error: ${be.error}`);ct()},Ce.onend=()=>{if(console.log("[useMicrophone] Native speech recognition ended"),_e&&Ue(ue)&&n())if(!e())console.log("[useMicrophone] Restarting continuous native speech recognition..."),setTimeout(()=>{Ue(ue)&&n()&&!e()&&bt(!0)},200);else{console.log("[useMicrophone] TTS playing, waiting to restart continuous mode...");const be=()=>{!Ue(ue)||!n()||(e()?setTimeout(be,200):(console.log("[useMicrophone] TTS finished, waiting for cooldown before restart"),setTimeout(()=>{Ue(ue)&&n()&&!e()&&(console.log("[useMicrophone] Cooldown complete, restarting continuous mode"),bt(!0))},800)))};setTimeout(be,200)}else if(g&&n()){console.log("[useMicrophone] Conversation mode: recognition ended"),Je();const be=Ue(De);let $e=j;be.trim()&&($e+=" "+be.trim()),$e=$e.trim(),$e&&(console.log("[useMicrophone] Sending transcript from onend:",$e),te=!0,l($e)),j="",ce.set(!1),me.set(!1),De.set(""),yt()}else ce.set(!1),me.set(!1),De.set("")},Ce.onspeechend=()=>{console.log("[useMicrophone] Speech ended (user stopped talking)")},Ce.start()}catch(be){console.error("[useMicrophone] Failed to start native speech:",be),t("âš ï¸ Failed to start speech recognition"),ce.set(!1),me.set(!1)}}function ct(){if(D&&(clearTimeout(D),D=null),Ce){try{Ce.abort()}catch{}Ce=null}ce.set(!1),me.set(!1),De.set("")}async function Tt(_e=!1){if(Ue(ce))return;const be=_e||Ue(ue);Le?(console.log("[useMicrophone] Using native speech recognition"),bt(be)):(console.log("[useMicrophone] Using Whisper backend"),await ge())}function pt(){if(Ce){ct();return}It()}function It(){if(Ue(ce)){console.log("[useMicrophone] Stopping Whisper recording, chunks collected:",r.length);try{o&&o.state!=="inactive"&&o.stop()}catch(_e){console.error("[useMicrophone] Error stopping recorder:",_e)}if(k&&(clearTimeout(k),k=null),ce.set(!1),S=!1,y=!1,!Ue(ue)){try{s?.getTracks().forEach(_e=>_e.stop())}catch{}s=null;try{_?.close()}catch{}_=null,v=null}}}async function ge(){if(!Ue(ce))try{if(!(typeof window<"u"&&window.isSecureContext&&!!navigator.mediaDevices?.getUserMedia)){console.warn("[useMicrophone] getUserMedia unavailable (insecure context or unsupported browser)");return}s=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),_=new AudioContext;const be=_.createMediaStreamSource(s);v=_.createAnalyser(),v.fftSize=256,be.connect(v),r=[];const $e=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";o=new MediaRecorder(s,{mimeType:$e}),o.ondataavailable=Ve=>{Ve.data?.size&&r.push(Ve.data)},o.onstop=()=>{Me()},Ue(ue)||(o.start(),ce.set(!0),f=Date.now(),Hn()),rt()}catch(_e){console.error("[useMicrophone] Failed to start mic:",_e)}}async function Me(){try{const _e=new Blob(r,{type:"audio/webm"}),be=f?Date.now()-f:0;if(console.log("[useMicrophone] Finalizing recording:",be,"ms, blob size:",_e.size,"bytes"),be<M){console.log(`[useMicrophone] Recording too short (${be}ms), ignoring`);return}if(_e.size===0){console.log("[useMicrophone] Recording has no data (0 bytes), ignoring");return}const $e=await _e.arrayBuffer(),Ve=await Xe(`/api/stt?format=webm&collect=1&dur=${be}`,{method:"POST",headers:{"Content-Type":"audio/webm"},body:$e});if(Ve.ok){const je=await Ve.json();if(console.log("[useMicrophone] STT response:",je),je?.transcript&&je.transcript.trim()){const ht=je.transcript.trim(),At=ht.split(/\s+/).length;Ue(ue)&&At<3&&ht.length<15?console.log("[useMicrophone] Continuous mode: ignoring short transcript (likely noise):",ht):l(ht)}else console.log("[useMicrophone] No transcript detected (empty or null response)")}else{const je=await Ve.text();Ve.status===500&&je.includes("WHISPER_LOADING")?(console.log("[useMicrophone] Whisper model still loading..."),t("â³ Voice recognition is still loading... please wait a moment and try again.")):console.error("[useMicrophone] STT request failed:",Ve.status,Ve.statusText)}}catch(_e){console.error("[useMicrophone] STT failed:",_e)}finally{if(r=[],f=null,ce.set(!1),S=!1,Ue(ue)&&n())if(!e())console.log("[useMicrophone] Continuous mode: restarting VAD..."),rt();else{console.log("[useMicrophone] Continuous mode: waiting for TTS to finish...");const _e=()=>{!Ue(ue)||!n()||(e()?setTimeout(_e,200):(console.log("[useMicrophone] TTS finished, cooldown before VAD restart..."),setTimeout(()=>{Ue(ue)&&n()&&!e()&&(console.log("[useMicrophone] Restarting VAD after cooldown"),rt())},800)))};setTimeout(_e,200)}}}function rt(){const _e=v;if(!_e)return;const be=()=>{if(!n()||!v)return;if(e()){if(Ue(ce)){const Ve=f?Date.now()-f:0;Ve<M?(S=!1,k&&(clearTimeout(k),k=null,y=!1)):(console.log("[useMicrophone] TTS started, stopping recording (had",Ve,"ms)"),pt())}else S=!1;requestAnimationFrame(be);return}if(Bn(_e,150)>R){if(!S&&(console.log("[useMicrophone] Speech started"),S=!0,y=!1,Ue(ue)&&!Ue(ce)&&s)){if(o&&o.state==="recording"){console.log("[useMicrophone] WARNING: Recorder already recording, skipping start"),ce.set(!0),requestAnimationFrame(be);return}console.log("[useMicrophone] Auto-starting recording (continuous mode)");const Ve=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";r=[],o=new MediaRecorder(s,{mimeType:Ve}),o.ondataavailable=je=>{je.data?.size&&r.push(je.data)},o.onstop=()=>{Me()};try{o.start(),ce.set(!0),f=Date.now(),Hn()}catch(je){console.error("[useMicrophone] Failed to start recorder:",je),ce.set(!1)}}k&&(clearTimeout(k),k=null,y=!1)}else S&&Ue(ce)&&!k&&(f?Date.now()-f:0)>=M&&(y||(console.log("[useMicrophone] Silence detected, starting timer..."),y=!0),k=window.setTimeout(()=>{console.log("[useMicrophone] Silence timer expired, stopping recording"),S=!1,y=!1,pt()},B));requestAnimationFrame(be)};requestAnimationFrame(be)}function ut(){if(Ue(ue)){ue.set(!1),Ce&&ct(),Ue(ce)&&pt();try{s?.getTracks().forEach(be=>be.stop())}catch{}s=null;try{_?.close()}catch{}_=null,v=null}else ue.set(!0),Tt(!0)}function gt(){if(L&&(clearTimeout(L),L=null),D&&(clearTimeout(D),D=null),g=!1,dt(),Je(),Ce){try{Ce.abort()}catch{}Ce=null}k&&(clearTimeout(k),k=null);try{s?.getTracks().forEach(_e=>_e.stop())}catch{}s=null;try{_?.close()}catch{}_=null,v=null,ce.set(!1),me.set(!1),De.set(""),ze.set(!1)}let St=!1;function Nt(){if(typeof navigator>"u"||!("mediaSession"in navigator)){console.warn("[MediaSession] API not available in this browser");return}if(St){console.log("[MediaSession] Already enabled");return}const _e=new Audio;_e.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",_e.loop=!0,_e.volume=.001,navigator.mediaSession.metadata=new MediaMetadata({title:"MetaHuman Voice Input",artist:"Ready to listen",album:"Voice Assistant"}),navigator.mediaSession.setActionHandler("play",()=>{console.log("[MediaSession] Play pressed - starting mic"),_e.play().catch(()=>{}),Ue(ce)||g||Ke(),navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new MediaMetadata({title:"MetaHuman Voice Input",artist:"Listening...",album:"Voice Assistant"})}),navigator.mediaSession.setActionHandler("pause",()=>{console.log("[MediaSession] Pause pressed - toggling mic"),Ue(ce)?(pt(),navigator.mediaSession.metadata=new MediaMetadata({title:"MetaHuman Voice Input",artist:"Ready to listen",album:"Voice Assistant"})):(g||Ke(),navigator.mediaSession.metadata=new MediaMetadata({title:"MetaHuman Voice Input",artist:"Listening...",album:"Voice Assistant"})),navigator.mediaSession.playbackState=Ue(ce)?"playing":"paused"}),navigator.mediaSession.setActionHandler("stop",()=>{console.log("[MediaSession] Stop pressed - stopping mic"),Ue(ce)&&pt(),g&&Ke(),_e.pause(),navigator.mediaSession.playbackState="none",navigator.mediaSession.metadata=new MediaMetadata({title:"MetaHuman Voice Input",artist:"Stopped",album:"Voice Assistant"})}),_e.play().then(()=>{console.log("[MediaSession] Enabled - hardware buttons will trigger mic"),St=!0,navigator.mediaSession.playbackState="paused"}).catch(be=>{console.warn("[MediaSession] Could not start - user interaction required first:",be.message)})}function Dt(){typeof navigator>"u"||!("mediaSession"in navigator)||(navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.metadata=null,St=!1,console.log("[MediaSession] Disabled"))}return{isRecording:ce,isContinuousMode:ue,queuedMessage:Ie,isNativeMode:me,interimTranscript:De,whisperStatus:Ne,isConversationMode:ze,isWakeWordListening:We,wakeWordDetected:Pe,loadVADSettings:Qe,startMic:Tt,stopMic:pt,toggleContinuousMode:ut,toggleConversationMode:Ke,cleanup:gt,setupMediaSession:Nt,disableMediaSession:Dt,getSTTBackend:Ee,setSTTBackend:Oe,isNativeSpeechAvailable:Fn}}function Vo(i){const{getCurrentMode:e,getReasoningDepth:l,getConversationSessionId:t,getReasoningStagesCount:n}=i;let s=null;const o=tt([]),r=tt("ðŸ¤” Thinkingâ€¦"),f=tt(!1),v=tt(!1),_=jn(o,I=>I.join(`

`)),k=jn([f,o],([I,T])=>I&&n()===0&&T.length>0);function S(){s&&(s.close(),s=null),s=new EventSource("/api/monitor/stream"),s.onmessage=I=>{try{const T=JSON.parse(I.data);y(T)}catch(T){console.warn("[thinking-trace] Failed to parse audit event",T)}},s.onerror=I=>{console.warn("[thinking-trace] Audit stream disconnected",I)}}function y(I){if(!Ue(f))return;const T=t();if(!(I.details?.sessionId===T||I.details?.conversationId===T||I.details?.taskId===T))return;const W=R(I),z=Ue(v)?[]:Ue(o);v.set(!1),o.set([...z,W].slice(-40))}function R(I){const T=B(I.event),Y=M(I.details||{});return Y?`${T} ${Y}`:T}function B(I){return I.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase())}function M(I){const T=["goal","action","skill","iteration","reason","summary","model","modelId","provider","latencyMs","tokens","path","inputs","outputs","message","status"],Y=[];for(const W of T){if(!(W in I))continue;const z=I[W];if(z!=null)if(typeof z=="object"){const V=JSON.stringify(z,null,2);Y.push(`${W}: ${C(V)}`)}else Y.push(`${W}: ${C(String(z))}`)}if(Y.length===0){const W=Object.entries(I).filter(([,z])=>typeof z!="object"||z===null).map(([z,V])=>`${z}: ${C(String(V??""))}`);Y.push(...W)}return Y.join(" Â· ")}function C(I,T=320){return I.length<=T?I:`${I.slice(0,T)}â€¦`}function N(){if((e()||"dual")==="emulation")r.set("ðŸ¤” Processing..."),o.set(["Generating response..."]);else{const T=l();r.set(T>0?"ðŸ§  Operator planningâ€¦":"ðŸ¤” Thinkingâ€¦"),o.set(["Awaiting operator telemetryâ€¦"])}f.set(!0),v.set(!0),S()}function U(){f.set(!1),v.set(!1),o.set([])}function O(I){o.set(I)}function $(I){r.set(I)}function g(I){f.set(I)}function L(I,T=10){o.update(Y=>[...Y,I].slice(-T))}function D(){return Ue(o)}function E(){s&&(s.close(),s=null)}return{trace:o,statusLabel:r,active:f,steps:_,showIndicator:k,start:N,stop:U,setTrace:O,setStatusLabel:$,setActive:g,appendTrace:L,getTrace:D,cleanup:E}}function Oo(i){const{getMode:e,onMessagesChange:l}=i,t=tt([]),n=tt(null),s=tt(null),o=tt("");l&&t.subscribe(l);function r(C,N,U,O=null){const $=(N||"").trim();if(!$||C!=="reasoning"&&Ue(t).slice(-3).some(E=>E.role===C&&(E.content||"").trim()===$))return;const g={role:C,content:$,timestamp:Date.now(),relPath:U,meta:O};t.update(L=>[...L,g])}async function f(){const C=e();try{return(await Xe(`/api/conversation-buffer?mode=${C}`,{method:"DELETE"})).ok?(console.log(`[useMessages] Cleared server buffer (mode: ${C})`),!0):(console.error("[useMessages] Failed to clear server buffer"),!1)}catch(N){return console.error("[useMessages] Error clearing server buffer:",N),!1}}async function v(C){try{const N=await Xe("/api/memories/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({relPath:C})}),U=await N.json();if(!N.ok||!U.success)throw new Error(U.error||"Failed to delete");return t.update(O=>O.filter($=>$.relPath!==C)),!0}catch(N){return console.error("[useMessages] Failed to delete message:",N),!1}}function _(){t.set([]),n.set(null),s.set(null)}function k(C,N){n.set(C),s.set(N)}function S(){const C=Ue(n);return{questionId:C?.meta?.curiosityQuestionId||null,content:C?.content||null}}function y(){n.set(null),s.set(null)}function R(){const C=`${Date.now()}-${Math.random().toString(36).substring(7)}`;return o.set(C),C}function B(C){return new Date(C).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function M(C){const N=String(C.stage||"plan").replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase());return`ðŸ¤” Round ${C.round}: ${N}`}return{messages:t,selectedMessage:n,selectedMessageIndex:s,conversationSessionId:o,pushMessage:r,clearServerBuffer:f,deleteMessage:v,clearMessages:_,selectMessage:k,getReplyToMetadata:S,clearSelection:y,generateSessionId:R,formatTime:B,formatReasoningLabel:M}}function Ro(){let i=null;function e(){i&&clearTimeout(i),i=window.setTimeout(()=>{Xe("/api/activity-ping",{method:"POST"}).then(t=>{t.ok||console.error("[activity] Failed to signal activity")}).catch(t=>console.error("[activity] Error signaling activity:",t))},3e3)}function l(){i&&(clearTimeout(i),i=null)}return{signalActivity:e,clearActivity:l}}function Bo(){const i=tt(!0),e=tt(!0),l=tt(0),t=tt(null),n=tt("ollama");async function s(){try{const r=await Xe("/api/boot");if(!r.ok)return;const f=await r.json(),v=f.backendStatus||f.ollamaStatus;v&&(i.set(v.running),e.set(v.hasModels),l.set(v.modelCount||0),t.set(v.error||null),v.activeBackend&&n.set(v.activeBackend))}catch(r){console.error("[backend] Failed to check status:",r),t.set("Failed to check backend status")}}function o(){return Ue(i)&&Ue(e)}return{running:i,hasModels:e,modelCount:l,error:t,activeBackend:n,checkStatus:s,isReady:o}}const Ot={offline:{id:"offline",name:"On-Device",description:"Qwen3-1.7B running locally via llama.cpp",model:"qwen3-1.7b",maxTokens:2048,capabilities:["chat","memory-search"],minBatteryPercent:5,requiresNetwork:!1,priority:3},server:{id:"server",name:"Home Server",description:"Qwen3:14B on local Ollama server",model:"qwen3:14b",maxTokens:8192,capabilities:["chat","code","analysis","creative","memory-search","task-planning"],minBatteryPercent:10,requiresNetwork:!0,priority:1},cloud:{id:"cloud",name:"Cloud",description:"Qwen3-Coder-30B on RunPod",model:"qwen3-coder-30b",maxTokens:32768,capabilities:["chat","code","analysis","creative","memory-search","task-planning","long-context"],minBatteryPercent:15,requiresNetwork:!0,priority:2}},rn={mode:"auto",lowBatteryThreshold:15,offlineLatencyThreshold:2e3,enableCloudFallback:!0},an=tt(rn),Us=tt({offline:{tier:"offline",available:!1,lastCheck:new Date},server:{tier:"server",available:!1,lastCheck:new Date},cloud:{tier:"cloud",available:!1,lastCheck:new Date}}),Fs=tt({batteryLevel:100,batteryCharging:!1,networkType:"unknown",saveDataMode:!1}),sn=tt("server");jn(sn,i=>Ot[i]);async function Uo(){const i={batteryLevel:100,batteryCharging:!1,networkType:"unknown",saveDataMode:!1};if("getBattery"in navigator)try{const l=await navigator.getBattery();i.batteryLevel=Math.round(l.level*100),i.batteryCharging=l.charging}catch{}const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e&&(i.networkEffectiveType=e.effectiveType,i.saveDataMode=e.saveData||!1,e.type))switch(e.type){case"wifi":i.networkType="wifi";break;case"cellular":i.networkType="cellular";break;case"ethernet":i.networkType="ethernet";break;case"none":i.networkType="none";break;default:i.networkType="unknown"}return navigator.onLine||(i.networkType="none"),Qt(),i}async function Fo(){const i={tier:"offline",available:!1,lastCheck:new Date};if(Qt())try{const{NativeLLM:e}=await He(async()=>{const{NativeLLM:t}=await import("./native-llm.Sn3FR0s1.js");return{NativeLLM:t}},__vite__mapDeps([0,1])),l=await e.isModelLoaded();i.available=l.loaded,l.loaded||(i.error="Model not loaded")}catch{i.error="Native LLM plugin not available"}else i.error="Offline mode only available on mobile";return i}async function Ho(){const i={tier:"server",available:!1,lastCheck:new Date};try{const e=await Ws()||window.location.origin,l=Date.now(),t=await fetch(`${e}/api/boot`,{method:"GET",credentials:"include",signal:AbortSignal.timeout(5e3)});i.latencyMs=Date.now()-l,t.ok?i.available=!0:i.error=`Server returned ${t.status}`}catch(e){i.error=e instanceof Error?e.message:"Connection failed"}return i}async function $o(){const i={tier:"cloud",available:!1,lastCheck:new Date};try{const e="https://api.metahuman.cloud",l=Date.now(),t=await fetch(`${e}/health`,{method:"GET",signal:AbortSignal.timeout(1e4)});i.latencyMs=Date.now()-l,t.ok?i.available=!0:i.error=`Cloud returned ${t.status}`}catch(e){i.error=e instanceof Error?e.message:"Cloud connection failed"}return i}async function Ht(i=["chat"]){const e=await Uo();Fs.set(e);const[l,t,n]=await Promise.all([Fo(),Ho(),$o()]),s={offline:l,server:t,cloud:n};Us.set(s);let o=rn;if(an.subscribe(k=>o=k)(),o.mode==="manual"&&o.manualTier&&s[o.manualTier].available)return sn.set(o.manualTier),{selectedTier:o.manualTier,reason:"Manual selection",alternatives:kl(o.manualTier,s,e,i),deviceStatus:e,tierStatuses:s};const f=Object.keys(Ot).filter(k=>{const S=Ot[k];return i.every(y=>S.capabilities.includes(y))}).filter(k=>{const S=Ot[k];return!(!s[k].available||e.batteryLevel<S.minBatteryPercent&&!e.batteryCharging||S.requiresNetwork&&e.networkType==="none")});let v,_;return f.length===0?(v="offline",_="No tiers available - offline fallback"):o.mode==="prefer-offline"&&f.includes("offline")?(v="offline",_="User preference: offline mode"):o.mode==="prefer-server"&&f.includes("server")?(v="server",_="User preference: home server"):o.mode==="prefer-cloud"&&f.includes("cloud")?(v="cloud",_="User preference: cloud mode"):(v=zo(f,s,e,o),_=jo(v,s,e,o)),sn.set(v),{selectedTier:v,reason:_,alternatives:kl(v,s,e,i),deviceStatus:e,tierStatuses:s}}function zo(i,e,l,t){if(l.batteryLevel<t.lowBatteryThreshold&&!l.batteryCharging&&i.includes("offline"))return"offline";if(l.saveDataMode){if(i.includes("offline"))return"offline";if(i.includes("server"))return"server"}if((l.networkEffectiveType==="slow-2g"||l.networkEffectiveType==="2g")&&i.includes("offline"))return"offline";const n=e.server.latencyMs||0;if(n>t.offlineLatencyThreshold){if(t.enableCloudFallback&&i.includes("cloud")&&(e.cloud.latencyMs||1/0)<n)return"cloud";if(i.includes("offline"))return"offline"}return i.sort((s,o)=>Ot[s].priority-Ot[o].priority)[0]}function jo(i,e,l,t){if(i==="offline"){if(l.batteryLevel<t.lowBatteryThreshold)return`Low battery (${l.batteryLevel}%) - using offline mode`;if(l.networkType==="none")return"No network connection - using offline mode";if(l.saveDataMode)return"Data saver enabled - using offline mode";const n=e.server.latencyMs||0;if(n>t.offlineLatencyThreshold)return`High server latency (${n}ms) - using offline mode`}if(i==="server"){const n=e.server.latencyMs;return n?`Home server connected (${n}ms)`:"Home server connected"}if(i==="cloud"){if(!e.server.available)return"Home server unavailable - using cloud";const n=e.server.latencyMs||0,s=e.cloud.latencyMs||0;return s<n?`Cloud faster than server (${s}ms vs ${n}ms)`:"Using cloud backend"}return"Auto-selected"}function kl(i,e,l,t){return Object.keys(Ot).filter(n=>{if(n===i)return!1;const s=Ot[n],o=e[n];return t.every(r=>s.capabilities.includes(r))?o.available:!1}).sort((n,s)=>Ot[n].priority-Ot[s].priority)}async function qo(){if(Qt())try{const{Preferences:i}=await He(async()=>{const{Preferences:l}=await import("./index.BJPD4Al_.js");return{Preferences:l}},__vite__mapDeps([2,1,3])),{value:e}=await i.get({key:"tier_config"});if(e){const l=JSON.parse(e);an.set({...rn,...l})}}catch{}}async function Wo(i){if(an.set(i),!!Qt())try{const{Preferences:e}=await He(async()=>{const{Preferences:l}=await import("./index.BJPD4Al_.js");return{Preferences:l}},__vite__mapDeps([2,1,3]));await e.set({key:"tier_config",value:JSON.stringify(i)})}catch{}}async function Hc(i,e){let l=rn;an.subscribe(t=>l=t)(),await Wo({...l,mode:i,manualTier:i==="manual"?e:void 0}),await Ht()}let Gn=!1,nn=null;async function $c(){if(Gn){let e="server";sn.subscribe(n=>e=n)();let l={batteryLevel:100,batteryCharging:!1,networkType:"unknown",saveDataMode:!1};Fs.subscribe(n=>l=n)();let t={};return Us.subscribe(n=>t=n)(),{selectedTier:e,reason:"Previously selected",alternatives:[],deviceStatus:l,tierStatuses:t}}await qo();const i=await Ht();return nn=setInterval(async()=>{await Ht()},6e4),typeof window<"u"&&(window.addEventListener("online",()=>Ht()),window.addEventListener("offline",()=>Ht())),Gn=!0,i}function zc(){nn&&(clearInterval(nn),nn=null),Gn=!1}function jc(i){switch(i){case"offline":return"ðŸ“±";case"server":return"ðŸ ";case"cloud":return"â˜ï¸"}}function qc(i){switch(i){case"chat":return"ðŸ’¬";case"code":return"ðŸ’»";case"analysis":return"ðŸ”";case"creative":return"ðŸŽ¨";case"memory-search":return"ðŸ§ ";case"task-planning":return"ðŸ“‹";case"long-context":return"ðŸ“š"}}async function Bt(){const{NativeLLM:i}=await He(async()=>{const{NativeLLM:e}=await import("./native-llm.Sn3FR0s1.js");return{NativeLLM:e}},__vite__mapDeps([0,1]));return i}class Go{loaded=!1;currentModel=null;async isLoaded(){try{const l=await(await Bt()).isModelLoaded();return this.loaded=l.loaded,this.currentModel=l.modelName||null,this.loaded}catch{return!1}}async ensureLoaded(){if(!this.loaded)try{const e=await Bt(),l=await e.isModelLoaded();if(l.loaded){this.loaded=!0,this.currentModel=l.modelName||null;return}const n=(await e.listModels()).models;if(n.length===0)throw new Error("No offline model available. Download one in Settings â†’ Server â†’ On-Device AI.");const o=[...n].sort((f,v)=>f.sizeMB-v.sizeMB)[0],r=await e.loadModel({modelPath:o.path,contextSize:2048});if(!r.success)throw new Error(r.error||"Failed to load model");this.loaded=!0,this.currentModel=o.name}catch(e){throw new Error(`Failed to load offline model: ${e instanceof Error?e.message:"Unknown error"}`)}}async unload(){if(this.loaded)try{await(await Bt()).unloadModel(),this.loaded=!1,this.currentModel=null}catch(e){console.error("Failed to unload model:",e)}}getLoadedModel(){return this.currentModel}async chat(e,l){await this.ensureLoaded();let t=l;if(!t)try{const f=await qn("core");f?.data?.summary?t=f.data.summary:f?.data?.name&&(t=`${f.data.name}`)}catch{}const s=[{role:"system",content:t?`You are ${t}. Respond naturally and briefly.`:"You are a helpful assistant. Respond naturally and briefly."},{role:"user",content:e}];return(await(await Bt()).chat({messages:s})).response}async generate(e,l){return await this.ensureLoaded(),(await(await Bt()).generate({prompt:e,maxTokens:l?.maxTokens||256,temperature:l?.temperature||.7})).text}async chatStream(e,l,t){await this.ensureLoaded();let n=l;if(!n)try{const v=await qn("core");v?.data?.summary&&(n=v.data.summary)}catch{}const o=`${n?`You are ${n}. Respond naturally and briefly.`:"You are a helpful assistant. Respond naturally and briefly."}

User: ${e}
Assistant:`,r=await Bt(),f=await r.addListener("inferenceToken",v=>{t(v.token)});try{return(await r.generate({prompt:o,maxTokens:512})).text}finally{f.remove()}}async isAvailable(){try{return(await(await Bt()).listModels()).models.length>0}catch{return!1}}async getAvailableModels(){try{const e=await Bt(),l=await e.listModels(),t=await e.isModelLoaded();return l.models.map(n=>({name:n.name,loaded:t.loaded&&t.modelName===n.name,contextSize:2048}))}catch{return[]}}}const $n=new Go;class Jo{conversationHistory=[];maxHistoryLength=10;async sendMessage(e,l){const t=Date.now();let n;l?.forceTier?n=l.forceTier:n=(await Ht(["chat"])).selectedTier;let s,o;try{switch(n){case"offline":const _=await this.executeOffline(e,l);s=_.response,o=_.model;break;case"server":const k=await this.executeServer(e,l);s=k.response,o=k.model;break;case"cloud":const S=await this.executeCloud(e,l);s=S.response,o=S.model;break;default:throw new Error(`Unknown tier: ${n}`)}}catch(_){const k=await this.executeFallback(e,n,l,_);s=k.response,o=k.model,n=k.tier}this.conversationHistory.push({role:"user",content:e}),this.conversationHistory.push({role:"assistant",content:s}),this.conversationHistory.length>this.maxHistoryLength*2&&(this.conversationHistory=this.conversationHistory.slice(-this.maxHistoryLength*2));const r=crypto.randomUUID(),f=new Date().toISOString();await eo({id:r,type:"conversation",content:`User: ${e}

Assistant: ${s}`,timestamp:f,metadata:{tier:n,model:o,latencyMs:Date.now()-t,cognitiveMode:"dual"}});const v=Date.now()-t;return{response:s,tier:n,model:o,memoryId:r,latencyMs:v}}async executeOffline(e,l){if(!await $n.isAvailable())throw new Error("No offline model available");let n;try{n=(await qn("core"))?.data?.summary}catch{}const s=await $n.chat(e,n),o=$n.getLoadedModel()||"qwen3-1.7b-q4";return{response:s,model:o}}async executeServer(e,l){if(!Ue(xs).connected)throw new Error("Server not connected");const n={message:e};l?.includeHistory&&this.conversationHistory.length>0&&(n.history=this.conversationHistory.slice(-(l.historyLimit||6)));const s=await Xe("/api/persona_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error(`Server returned ${s.status}`);const o=await s.json();return{response:o.response||o.content||"",model:o.model||"qwen3:14b"}}async executeCloud(e,l){const t={message:e,useCloud:!0};l?.includeHistory&&this.conversationHistory.length>0&&(t.history=this.conversationHistory.slice(-(l.historyLimit||6)));const n=await Xe("/api/persona_chat?tier=cloud",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Cloud returned ${n.status}`);const s=await n.json();return{response:s.response||s.content||"",model:s.model||"qwen3-coder-30b"}}async executeFallback(e,l,t,n){console.warn(`Tier ${l} failed:`,n);const s=["server","cloud","offline"].filter(o=>o!==l);for(const o of s)try{switch(o){case"offline":return{...await this.executeOffline(e,t),tier:o};case"server":return{...await this.executeServer(e,t),tier:o};case"cloud":return{...await this.executeCloud(e,t),tier:o}}}catch(r){console.warn(`Fallback tier ${o} also failed:`,r);continue}throw new Error("All tiers unavailable. Check your connection or download an offline model.")}clearHistory(){this.conversationHistory=[]}getHistory(){return[...this.conversationHistory]}setHistory(e){this.conversationHistory=[...e]}async getBatteryStatus(){if("getBattery"in navigator)try{const e=await navigator.getBattery();return{level:e.level,charging:e.charging}}catch{}return{level:1,charging:!0}}}const Yo=new Jo;function wl(i){let e,l="On";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-14bk6vo"&&(e.textContent=l),this.h()},h(){a(e,"class","thinking-badge")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function yl(i){let e;function l(s,o){return s[6]?Xo:s[7]?Ko:Qo}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Qo(i){let e,l="BB";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1s63u7m"&&(e.textContent=l),this.h()},h(){a(e,"class","big-brother-badge")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function Ko(i){let e,l="â‹¯";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-6qneaz"&&(e.textContent=l),this.h()},h(){a(e,"class","big-brother-badge checking")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function Xo(i){let e,l="â—";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1ntkvuq"&&(e.textContent=l),this.h()},h(){a(e,"class","big-brother-badge ready")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function Tl(i){let e,l,t="ðŸ’­",n,s,o,r,f,v=i[12]&&Cl();return{c(){e=h("button"),l=h("span"),l.textContent=t,n=P(),v&&v.c(),this.h()},l(_){e=d(_,"BUTTON",{class:!0,title:!0});var k=p(e);l=d(k,"SPAN",{style:!0,"data-svelte-h":!0}),X(l)!=="svelte-129qiy9"&&(l.textContent=t),n=A(k),v&&v.l(k),k.forEach(u),this.h()},h(){Kn(l,"font-size","18px"),Kn(l,"line-height","1"),a(e,"class",s="icon-btn "+(i[12]?"active":"")),a(e,"title",o=i[12]?"Disable inner dialog voice (boredom service)":"Enable inner dialog voice (boredom service)")},m(_,k){b(_,e,k),c(e,l),c(e,n),v&&v.m(e,null),r||(f=de(e,"click",i[73]),r=!0)},p(_,k){_[12]?v||(v=Cl(),v.c(),v.m(e,null)):v&&(v.d(1),v=null),k[0]&4096&&s!==(s="icon-btn "+(_[12]?"active":""))&&a(e,"class",s),k[0]&4096&&o!==(o=_[12]?"Disable inner dialog voice (boredom service)":"Enable inner dialog voice (boredom service)")&&a(e,"title",o)},d(_){_&&u(e),v&&v.d(),r=!1,f()}}}function Cl(i){let e,l="Inner On";return{c(){e=h("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1q6666b"&&(e.textContent=l),this.h()},h(){a(e,"class","badge")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function Sl(i){let e,l='<span class="clear-icon" aria-hidden="true">ðŸ—‘ï¸</span> <span class="clear-text">Clear</span>',t,n;return{c(){e=h("button"),e.innerHTML=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(e)!=="svelte-11uw8e3"&&(e.innerHTML=l),this.h()},h(){a(e,"class","clear-btn"),a(e,"title","Clear chat history")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[64]),t=!0)},p:m,d(s){s&&u(e),t=!1,n()}}}function El(i){let e,l,t="âš ï¸",n,s,o,r,f,v,_,k,S="Recheck Status",y,R;function B(g,L){return g[18]?Zo:xo}let M=B(i),C=M(i);function N(g,L){if(!g[18])return ti;if(g[21]===0)return ei}let U=N(i),O=U&&U(i),$=i[22]&&Ml(i);return{c(){e=h("div"),l=h("div"),l.textContent=t,n=P(),s=h("div"),o=h("div"),C.c(),r=P(),f=h("div"),O&&O.c(),v=P(),$&&$.c(),_=P(),k=h("button"),k.textContent=S,this.h()},l(g){e=d(g,"DIV",{class:!0});var L=p(e);l=d(L,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-dwi5dc"&&(l.textContent=t),n=A(L),s=d(L,"DIV",{class:!0});var D=p(s);o=d(D,"DIV",{class:!0});var E=p(o);C.l(E),E.forEach(u),r=A(D),f=d(D,"DIV",{class:!0});var I=p(f);O&&O.l(I),v=A(I),$&&$.l(I),I.forEach(u),_=A(D),k=d(D,"BUTTON",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-zs5dv"&&(k.textContent=S),D.forEach(u),L.forEach(u),this.h()},h(){a(l,"class","warning-icon"),a(o,"class","warning-title"),a(f,"class","warning-message"),a(k,"class","warning-refresh-btn"),a(s,"class","warning-content"),a(e,"class","ollama-warning-banner")},m(g,L){b(g,e,L),c(e,l),c(e,n),c(e,s),c(s,o),C.m(o,null),c(s,r),c(s,f),O&&O.m(f,null),c(f,v),$&&$.m(f,null),c(s,_),c(s,k),y||(R=de(k,"click",i[65]),y=!0)},p(g,L){M===(M=B(g))&&C?C.p(g,L):(C.d(1),C=M(g),C&&(C.c(),C.m(o,null))),U===(U=N(g))&&O?O.p(g,L):(O&&O.d(1),O=U&&U(g),O&&(O.c(),O.m(f,v))),g[22]?$?$.p(g,L):($=Ml(g),$.c(),$.m(f,null)):$&&($.d(1),$=null)},d(g){g&&u(e),C.d(),O&&O.d(),$&&$.d(),y=!1,R()}}}function Zo(i){let e;return{c(){e=x("No Language Models Loaded")},l(l){e=Z(l,"No Language Models Loaded")},m(l,t){b(l,e,t)},p:m,d(l){l&&u(e)}}}function xo(i){let e=i[20]==="vllm"?"vLLM Server Not Running":"Ollama Service Not Running",l;return{c(){l=x(e)},l(t){l=Z(t,e)},m(t,n){b(t,l,n)},p(t,n){n[0]&1048576&&e!==(e=t[20]==="vllm"?"vLLM Server Not Running":"Ollama Service Not Running")&&fe(l,e)},d(t){t&&u(l)}}}function ei(i){let e;function l(s,o){return s[20]==="vllm"?li:ni}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ti(i){let e;function l(s,o){return s[20]==="vllm"?oi:si}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ni(i){let e,l,t="ollama pull";return{c(){e=x("No models are currently loaded. Please install a model using: "),l=h("code"),l.textContent=t},l(n){e=Z(n,"No models are currently loaded. Please install a model using: "),l=d(n,"CODE",{"data-svelte-h":!0}),X(l)!=="svelte-5p5hjb"&&(l.textContent=t)},m(n,s){b(n,e,s),b(n,l,s)},d(n){n&&(u(e),u(l))}}}function li(i){let e;return{c(){e=x("No model is loaded in vLLM. Configure and start the server from Settings â†’ Backend.")},l(l){e=Z(l,"No model is loaded in vLLM. Configure and start the server from Settings â†’ Backend.")},m(l,t){b(l,e,t)},d(l){l&&u(e)}}}function si(i){let e,l,t="systemctl start ollama";return{c(){e=x("The Ollama service is not running. Please start it using: "),l=h("code"),l.textContent=t},l(n){e=Z(n,"The Ollama service is not running. Please start it using: "),l=d(n,"CODE",{"data-svelte-h":!0}),X(l)!=="svelte-1xt8pl4"&&(l.textContent=t)},m(n,s){b(n,e,s),b(n,l,s)},d(n){n&&(u(e),u(l))}}}function oi(i){let e;return{c(){e=x("The vLLM server is not running. Start it from Settings â†’ Backend or use the vLLM control panel.")},l(l){e=Z(l,"The vLLM server is not running. Start it from Settings â†’ Backend or use the vLLM control panel.")},m(l,t){b(l,e,t)},d(l){l&&u(e)}}}function Ml(i){let e,l,t;return{c(){e=h("div"),l=x("Error: "),t=x(i[22]),this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);l=Z(s,"Error: "),t=Z(s,i[22]),s.forEach(u),this.h()},h(){a(e,"class","warning-error")},m(n,s){b(n,e,s),c(e,l),c(e,t)},p(n,s){s[0]&4194304&&fe(t,n[22])},d(n){n&&u(e)}}}function ii(i){let e,l,t,n;return e=new Io({props:{messages:i[17],mode:i[8],selectedMessageIndex:i[23],loading:i[0],reasoningStages:i[1],showThinkingIndicator:i[3],thinkingSteps:i[2],thinkingStatusLabel:i[24]}}),e.$on("messageClick",i[77]),e.$on("deleteMessage",i[78]),e.$on("validateMessage",i[79]),e.$on("speakMessage",i[80]),{c(){ye(e.$$.fragment),l=P(),t=h("div"),this.h()},l(s){qe(e.$$.fragment,s),l=A(s),t=d(s,"DIV",{class:!0}),p(t).forEach(u),this.h()},h(){a(t,"class","scroll-sentinel")},m(s,o){we(e,s,o),b(s,l,o),b(s,t,o),i[81](t),n=!0},p(s,o){const r={};o[0]&131072&&(r.messages=s[17]),o[0]&256&&(r.mode=s[8]),o[0]&8388608&&(r.selectedMessageIndex=s[23]),o[0]&1&&(r.loading=s[0]),o[0]&2&&(r.reasoningStages=s[1]),o[0]&8&&(r.showThinkingIndicator=s[3]),o[0]&4&&(r.thinkingSteps=s[2]),o[0]&16777216&&(r.thinkingStatusLabel=s[24]),e.$set(r)},i(s){n||(ee(e.$$.fragment,s),n=!0)},o(s){le(e.$$.fragment,s),n=!1},d(s){s&&(u(l),u(t)),ke(e,s),i[81](null)}}}function ri(i){let e,l,t="ðŸ§  => ðŸ’»",n,s,o="MetaHuman OS",r,f,v,_,k,S="Tell me how you will take over the world?",y,R,B="Wimmy wham wham wozzle!?",M,C,N="Tell me about yourself in the most technical way possible.",U,O;function $(D,E){return D[8]==="conversation"?ci:ai}let g=$(i),L=g(i);return{c(){e=h("div"),l=h("div"),l.textContent=t,n=P(),s=h("h2"),s.textContent=o,r=P(),f=h("p"),L.c(),v=P(),_=h("div"),k=h("button"),k.textContent=S,y=P(),R=h("button"),R.textContent=B,M=P(),C=h("button"),C.textContent=N,this.h()},l(D){e=d(D,"DIV",{class:!0});var E=p(e);l=d(E,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1kmro46"&&(l.textContent=t),n=A(E),s=d(E,"H2",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-7oad52"&&(s.textContent=o),r=A(E),f=d(E,"P",{class:!0});var I=p(f);L.l(I),I.forEach(u),v=A(E),_=d(E,"DIV",{class:!0});var T=p(_);k=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-1b04yno"&&(k.textContent=S),y=A(T),R=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(R)!=="svelte-hgcz1m"&&(R.textContent=B),M=A(T),C=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(C)!=="svelte-9ob4gq"&&(C.textContent=N),T.forEach(u),E.forEach(u),this.h()},h(){a(l,"class","welcome-icon"),a(s,"class","welcome-title"),a(f,"class","welcome-subtitle"),a(k,"class","suggestion"),a(R,"class","suggestion"),a(C,"class","suggestion"),a(_,"class","welcome-suggestions"),a(e,"class","welcome-screen")},m(D,E){b(D,e,E),c(e,l),c(e,n),c(e,s),c(e,r),c(e,f),L.m(f,null),c(e,v),c(e,_),c(_,k),c(_,y),c(_,R),c(_,M),c(_,C),U||(O=[de(k,"click",i[74]),de(R,"click",i[75]),de(C,"click",i[76])],U=!0)},p(D,E){g!==(g=$(D))&&(L.d(1),L=g(D),L&&(L.c(),L.m(f,null)))},i:m,o:m,d(D){D&&u(e),L.d(),U=!1,mt(O)}}}function ai(i){let e;return{c(){e=x("Explore your MetaHuman's inner dialogue")},l(l){e=Z(l,"Explore your MetaHuman's inner dialogue")},m(l,t){b(l,e,t)},d(l){l&&u(e)}}}function ci(i){let e;return{c(){e=x("Start a conversation with your digital personality extension")},l(l){e=Z(l,"Start a conversation with your digital personality extension")},m(l,t){b(l,e,t)},d(l){l&&u(e)}}}function ui(i){let e,l,t,n,s,o="ðŸ’¬",r,f,v="Conversation",_,k,S,y,R="ðŸ’­",B,M,C="Inner Dialogue",N,U,O,$,g='<span class="control-icon" aria-hidden="true">ðŸ“</span>',L,D,E,I="Auto",T,Y="Concise",W,z="Detailed",V,J,ne,re="ðŸ§ ",Q,G,ie,ae,he,oe,se="ðŸ¤–",j,K,te,q,ce,ue,Ie,me,De,Ne,ze,We,Pe,Ce,Le,Ee,Oe,Qe,st,Ae,yt,at,dt,Ct,Je=i[13]&&wl(),Ye=i[5]&&yl(i),Ze=i[8]==="inner"&&Tl(i),Te=i[17].length>0&&Sl(i),Ke=(!i[18]||!i[19])&&El(i);const bt=[ri,ii],ct=[];function Tt(ge,Me){return ge[17].length===0?0:1}Ee=Tt(i),Oe=ct[Ee]=bt[Ee](i);function pt(ge){i[83](ge)}let It={loading:i[0],selectedMessage:i[16],isRecording:i[25],isContinuousMode:i[26],isWakeWordListening:i[27],isConversationMode:i[28],ttsIsPlaying:i[29],interimTranscript:i[30],lengthMode:i[9]};return i[4]!==void 0&&(It.input=i[4]),Ae=new vo({props:It}),$t.push(()=>zn(Ae,"input",pt)),Ae.$on("send",i[58]),Ae.$on("stop",i[59]),Ae.$on("keypress",i[84]),Ae.$on("micClick",i[85]),Ae.$on("micLongPress",i[86]),Ae.$on("micContextMenu",i[87]),Ae.$on("ttsStop",i[88]),Ae.$on("ttsStopAndListen",i[89]),Ae.$on("clearSelection",i[90]),Ae.$on("lengthModeChange",i[91]),{c(){e=h("div"),l=h("div"),t=h("div"),n=h("button"),s=h("span"),s.textContent=o,r=P(),f=h("span"),f.textContent=v,k=P(),S=h("button"),y=h("span"),y.textContent=R,B=P(),M=h("span"),M.textContent=C,U=P(),O=h("div"),$=h("label"),$.innerHTML=g,L=P(),D=h("select"),E=h("option"),E.textContent=I,T=h("option"),T.textContent=Y,W=h("option"),W.textContent=z,V=P(),J=h("button"),ne=h("span"),ne.textContent=re,Q=P(),Je&&Je.c(),ae=P(),he=h("button"),oe=h("span"),oe.textContent=se,j=P(),Ye&&Ye.c(),q=P(),ce=h("div"),ue=h("button"),Ie=it("svg"),me=it("path"),ze=P(),Ze&&Ze.c(),We=P(),Te&&Te.c(),Pe=P(),Ke&&Ke.c(),Ce=P(),Le=h("div"),Oe.c(),Qe=P(),st=h("div"),ye(Ae.$$.fragment),this.h()},l(ge){e=d(ge,"DIV",{class:!0});var Me=p(e);l=d(Me,"DIV",{class:!0});var rt=p(l);t=d(rt,"DIV",{class:!0});var ut=p(t);n=d(ut,"BUTTON",{class:!0,"aria-label":!0});var gt=p(n);s=d(gt,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),X(s)!=="svelte-128n1j6"&&(s.textContent=o),r=A(gt),f=d(gt,"SPAN",{class:!0,"data-svelte-h":!0}),X(f)!=="svelte-xu1zj8"&&(f.textContent=v),gt.forEach(u),k=A(ut),S=d(ut,"BUTTON",{class:!0,"aria-label":!0});var St=p(S);y=d(St,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),X(y)!=="svelte-47j4pn"&&(y.textContent=R),B=A(St),M=d(St,"SPAN",{class:!0,"data-svelte-h":!0}),X(M)!=="svelte-21j9l3"&&(M.textContent=C),St.forEach(u),ut.forEach(u),U=A(rt),O=d(rt,"DIV",{class:!0});var Nt=p(O);$=d(Nt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),X($)!=="svelte-1ia38n4"&&($.innerHTML=g),L=A(Nt),D=d(Nt,"SELECT",{id:!0,"aria-label":!0});var Dt=p(D);E=d(Dt,"OPTION",{"data-svelte-h":!0}),X(E)!=="svelte-13uzty"&&(E.textContent=I),T=d(Dt,"OPTION",{"data-svelte-h":!0}),X(T)!=="svelte-inqhtm"&&(T.textContent=Y),W=d(Dt,"OPTION",{"data-svelte-h":!0}),X(W)!=="svelte-11okfe6"&&(W.textContent=z),Dt.forEach(u),Nt.forEach(u),V=A(rt),J=d(rt,"BUTTON",{class:!0,title:!0});var _e=p(J);ne=d(_e,"SPAN",{class:!0,"data-svelte-h":!0}),X(ne)!=="svelte-yn5zhx"&&(ne.textContent=re),Q=A(_e),Je&&Je.l(_e),_e.forEach(u),ae=A(rt),he=d(rt,"BUTTON",{class:!0,title:!0});var be=p(he);oe=d(be,"SPAN",{class:!0,"data-svelte-h":!0}),X(oe)!=="svelte-d85pym"&&(oe.textContent=se),j=A(be),Ye&&Ye.l(be),be.forEach(u),q=A(rt),ce=d(rt,"DIV",{class:!0});var $e=p(ce);ue=d($e,"BUTTON",{class:!0,title:!0});var Ve=p(ue);Ie=ot(Ve,"svg",{width:!0,height:!0,viewBox:!0,fill:!0});var je=p(Ie);me=ot(je,"path",{d:!0}),p(me).forEach(u),je.forEach(u),Ve.forEach(u),ze=A($e),Ze&&Ze.l($e),$e.forEach(u),We=A(rt),Te&&Te.l(rt),rt.forEach(u),Pe=A(Me),Ke&&Ke.l(Me),Ce=A(Me),Le=d(Me,"DIV",{class:!0});var ht=p(Le);Oe.l(ht),ht.forEach(u),Qe=A(Me),st=d(Me,"DIV",{class:!0});var At=p(st);qe(Ae.$$.fragment,At),At.forEach(u),Me.forEach(u),this.h()},h(){a(s,"class","mode-icon"),a(s,"aria-hidden","true"),a(f,"class","mode-label"),a(n,"class",_=i[8]==="conversation"?"mode-btn active":"mode-btn"),a(n,"aria-label","Conversation mode"),a(y,"class","mode-icon"),a(y,"aria-hidden","true"),a(M,"class","mode-label"),a(S,"class",N=i[8]==="inner"?"mode-btn active":"mode-btn"),a(S,"aria-label","Inner dialogue mode"),a(t,"class","mode-toggle"),a($,"class","control-label"),a($,"for","length-select"),E.__value="auto",Ut(E,E.__value),T.__value="concise",Ut(T,T.__value),W.__value="detailed",Ut(W,W.__value),a(D,"id","length-select"),a(D,"aria-label","Response length"),i[9]===void 0&&Gs(()=>i[71].call(D)),a(O,"class","length-toggle"),a(ne,"class","thinking-icon"),a(J,"class",G="thinking-toggle "+(i[13]?"active":"")),a(J,"title",ie=i[13]?"Thinking ON - Model reasons before answering (click to disable)":"Thinking OFF - Direct responses (click to enable reasoning)"),J.disabled=i[14],ve(J,"loading",i[14]),a(oe,"class","big-brother-icon"),a(he,"class",K="big-brother-toggle "+(i[5]?"active":"")+" "+(i[6]?"ready":"")),a(he,"title",te=i[5]?i[6]?"Big Brother active - Claude CLI ready âœ“":i[7]?"Big Brother active - Starting Claude CLI...":"Big Brother active - Claude CLI not ready":"Big Brother mode off - Click to enable CLI escalation"),a(me,"d","M3 10v4h4l5 5V5L7 10H3zM16.5 12a4.5 4.5 0 00-1.5-3.356V15.356A4.5 4.5 0 0016.5 12z"),a(Ie,"width","18"),a(Ie,"height","18"),a(Ie,"viewBox","0 0 24 24"),a(Ie,"fill","currentColor"),a(ue,"class",De="icon-btn "+(i[11]?"tts-active":"")),a(ue,"title",Ne=i[11]?"Disable speech":"Enable speech"),a(ce,"class","quick-audio"),a(l,"class","mode-toggle-container sm:gap-3"),a(Le,"class","messages-container"),a(st,"class","input-container"),a(e,"class","chat-interface")},m(ge,Me){b(ge,e,Me),c(e,l),c(l,t),c(t,n),c(n,s),c(n,r),c(n,f),c(t,k),c(t,S),c(S,y),c(S,B),c(S,M),c(l,U),c(l,O),c(O,$),c(O,L),c(O,D),c(D,E),c(D,T),c(D,W),Yn(D,i[9],!0),c(l,V),c(l,J),c(J,ne),c(J,Q),Je&&Je.m(J,null),c(l,ae),c(l,he),c(he,oe),c(he,j),Ye&&Ye.m(he,null),c(l,q),c(l,ce),c(ce,ue),c(ue,Ie),c(Ie,me),c(ce,ze),Ze&&Ze.m(ce,null),c(l,We),Te&&Te.m(l,null),c(e,Pe),Ke&&Ke.m(e,null),c(e,Ce),c(e,Le),ct[Ee].m(Le,null),i[82](Le),c(e,Qe),c(e,st),we(Ae,st,null),at=!0,dt||(Ct=[de(n,"click",i[69]),de(S,"click",i[70]),de(D,"change",i[71]),de(J,"click",i[56]),de(he,"click",i[62]),de(ue,"click",i[72])],dt=!0)},p(ge,Me){(!at||Me[0]&256&&_!==(_=ge[8]==="conversation"?"mode-btn active":"mode-btn"))&&a(n,"class",_),(!at||Me[0]&256&&N!==(N=ge[8]==="inner"?"mode-btn active":"mode-btn"))&&a(S,"class",N),Me[0]&512&&Yn(D,ge[9]),ge[13]?Je||(Je=wl(),Je.c(),Je.m(J,null)):Je&&(Je.d(1),Je=null),(!at||Me[0]&8192&&G!==(G="thinking-toggle "+(ge[13]?"active":"")))&&a(J,"class",G),(!at||Me[0]&8192&&ie!==(ie=ge[13]?"Thinking ON - Model reasons before answering (click to disable)":"Thinking OFF - Direct responses (click to enable reasoning)"))&&a(J,"title",ie),(!at||Me[0]&16384)&&(J.disabled=ge[14]),(!at||Me[0]&24576)&&ve(J,"loading",ge[14]),ge[5]?Ye?Ye.p(ge,Me):(Ye=yl(ge),Ye.c(),Ye.m(he,null)):Ye&&(Ye.d(1),Ye=null),(!at||Me[0]&96&&K!==(K="big-brother-toggle "+(ge[5]?"active":"")+" "+(ge[6]?"ready":"")))&&a(he,"class",K),(!at||Me[0]&224&&te!==(te=ge[5]?ge[6]?"Big Brother active - Claude CLI ready âœ“":ge[7]?"Big Brother active - Starting Claude CLI...":"Big Brother active - Claude CLI not ready":"Big Brother mode off - Click to enable CLI escalation"))&&a(he,"title",te),(!at||Me[0]&2048&&De!==(De="icon-btn "+(ge[11]?"tts-active":"")))&&a(ue,"class",De),(!at||Me[0]&2048&&Ne!==(Ne=ge[11]?"Disable speech":"Enable speech"))&&a(ue,"title",Ne),ge[8]==="inner"?Ze?Ze.p(ge,Me):(Ze=Tl(ge),Ze.c(),Ze.m(ce,null)):Ze&&(Ze.d(1),Ze=null),ge[17].length>0?Te?Te.p(ge,Me):(Te=Sl(ge),Te.c(),Te.m(l,null)):Te&&(Te.d(1),Te=null),!ge[18]||!ge[19]?Ke?Ke.p(ge,Me):(Ke=El(ge),Ke.c(),Ke.m(e,Ce)):Ke&&(Ke.d(1),Ke=null);let rt=Ee;Ee=Tt(ge),Ee===rt?ct[Ee].p(ge,Me):(Re(),le(ct[rt],1,1,()=>{ct[rt]=null}),Be(),Oe=ct[Ee],Oe?Oe.p(ge,Me):(Oe=ct[Ee]=bt[Ee](ge),Oe.c()),ee(Oe,1),Oe.m(Le,null));const ut={};Me[0]&1&&(ut.loading=ge[0]),Me[0]&65536&&(ut.selectedMessage=ge[16]),Me[0]&33554432&&(ut.isRecording=ge[25]),Me[0]&67108864&&(ut.isContinuousMode=ge[26]),Me[0]&134217728&&(ut.isWakeWordListening=ge[27]),Me[0]&268435456&&(ut.isConversationMode=ge[28]),Me[0]&536870912&&(ut.ttsIsPlaying=ge[29]),Me[0]&1073741824&&(ut.interimTranscript=ge[30]),Me[0]&512&&(ut.lengthMode=ge[9]),!yt&&Me[0]&16&&(yt=!0,ut.input=ge[4],Vs(()=>yt=!1)),Ae.$set(ut)},i(ge){at||(ee(Oe),ee(Ae.$$.fragment,ge),at=!0)},o(ge){le(Oe),le(Ae.$$.fragment,ge),at=!1},d(ge){ge&&u(e),Je&&Je.d(),Ye&&Ye.d(),Ze&&Ze.d(),Te&&Te.d(),Ke&&Ke.d(),ct[Ee].d(),i[82](null),ke(Ae),dt=!1,mt(Ct)}}}function fi(i,e,l){let t,n,s,o,r,f,v,_,k,S,y,R,B,M,C,N,U,O,$,g,L,D;ft(i,Xs,w=>l(101,_=w));let E="",I=!1,T=[],Y=0;const W=["Off","Quick","Focused","Deep"],z=w=>Math.max(0,Math.min(W.length-1,Math.round(w)));let V=!1,J=!1,ne=!1,re=null,Q=null,G="conversation",ie="auto",ae,he=!0,oe=null,se=!1,j=!1,K=!1,te=!1,q=!1;const ce=Ao(),{isPlaying:ue,isLoading:Ie}=ce;ft(i,ue,w=>l(29,L=w));const me=Oo({getMode:()=>G,onMessagesChange:w=>{}}),{messages:De,selectedMessage:Ne,selectedMessageIndex:ze,conversationSessionId:We}=me;ft(i,De,w=>l(17,k=w)),ft(i,Ne,w=>l(16,s=w)),ft(i,ze,w=>l(23,C=w)),ft(i,We,w=>l(100,n=w));const Pe=Ro(),Ce=Bo(),{running:Le,hasModels:Ee,modelCount:Oe,error:Qe,activeBackend:st}=Ce;ft(i,Le,w=>l(18,S=w)),ft(i,Ee,w=>l(19,y=w)),ft(i,Oe,w=>l(21,B=w)),ft(i,Qe,w=>l(22,M=w)),ft(i,st,w=>l(20,R=w));const Ae=Po({getTTSPlaying:()=>Ue(ue),onTranscript:w=>{Ue(Ae.isContinuousMode)||Ue(Ae.isConversationMode)?I?(console.log("[chat-queue] LLM busy, queueing message:",w.substring(0,50)+(w.length>50?"...":"")),Ae.queuedMessage.set(w)):(console.log("[chat-mic] Transcribed & sending:",w.substring(0,50)+(w.length>50?"...":"")),l(4,E=w),je()):(console.log("[chat-mic] Transcribed:",w.substring(0,50)+(w.length>50?"...":"")),l(4,E=w),je())},onSystemMessage:w=>{me.pushMessage("system",w)},isComponentMounted:()=>rt}),{isRecording:yt,isContinuousMode:at,queuedMessage:dt,interimTranscript:Ct,isNativeMode:Je,isWakeWordListening:Ye,isConversationMode:Ze}=Ae;ft(i,yt,w=>l(25,U=w)),ft(i,at,w=>l(26,O=w)),ft(i,dt,w=>l(66,t=w)),ft(i,Ct,w=>l(30,D=w)),ft(i,Ye,w=>l(27,$=w)),ft(i,Ze,w=>l(28,g=w));const Te=Vo({getCurrentMode:()=>_||"dual",getReasoningDepth:()=>Y,getConversationSessionId:()=>n,getReasoningStagesCount:()=>T.length}),{trace:Ke,statusLabel:bt,active:ct,steps:Tt,showIndicator:pt}=Te;ft(i,Ke,w=>l(67,r=w)),ft(i,bt,w=>l(24,N=w)),ft(i,ct,w=>l(68,f=w)),ft(i,Tt,w=>l(2,o=w)),ft(i,pt,w=>l(3,v=w));const It=Ks.subscribe(w=>{q=w});let ge,Me=null,rt=!0;function ut(){try{const w=localStorage.getItem("chatPrefs");if(!w){l(11,se=!1);return}const F=JSON.parse(w);typeof F.ttsEnabled=="boolean"&&l(11,se=F.ttsEnabled),typeof F.reasoningDepth=="number"?Y=z(F.reasoningDepth):typeof F.reasoningEnabled=="boolean"&&(Y=F.reasoningEnabled?2:0),typeof F.boredomTtsEnabled=="boolean"&&l(12,j=F.boredomTtsEnabled),typeof F.bigBrotherEnabled=="boolean"&&l(5,V=F.bigBrotherEnabled)}catch{}}function gt(){try{const w={ttsEnabled:se,reasoningDepth:Y,reasoningEnabled:Y>0,bigBrotherEnabled:V,boredomTtsEnabled:j};localStorage.setItem("chatPrefs",JSON.stringify(w))}catch{}}async function St(){try{const w=await Xe("/api/llm-backend/status");if(w.ok){const F=await w.json();F.config?.vllm?.enableThinking!==void 0&&l(13,K=F.config.vllm.enableThinking)}}catch(w){console.error("[thinking-mode] Failed to load status:",w)}}async function Nt(){if(!te){l(14,te=!0);try{const w=!K;(await Xe("/api/llm-backend/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({vllm:{enableThinking:w}})})).ok?(l(13,K=w),console.log(`[thinking-mode] ${w?"Enabled":"Disabled"} - model will ${w?"show <think> tags":"respond directly"}`)):console.error("[thinking-mode] Failed to update config")}catch(w){console.error("[thinking-mode] Error toggling:",w)}finally{l(14,te=!1)}}}Os(async()=>{ut(),St(),Ae.loadVADSettings(),localStorage.getItem("mh-hardware-buttons")==="true"&&(console.log("[chat] Hardware button capture enabled by user preference"),Ae.setupMediaSession()),se&&ce.prefetchVoiceResources();try{const pe=await Xe("/api/big-brother-config");if(pe.ok){const xe=await pe.json();if(xe.success&&xe.config&&(l(5,V=xe.config.enabled??!1),gt(),V)){const Pt=await Xt();!Pt?.ready&&Pt?.installed?await Zt():Pt?.ready&&l(6,J=!0)}}}catch(pe){console.error("[big-brother] Failed to load config:",pe)}setInterval(async()=>{V&&await Xt()},1e4),Ce.checkStatus();try{const pe=localStorage.getItem("mh_conversation_session_id");if(pe)We.set(pe);else{const xe=me.generateSessionId();localStorage.setItem("mh_conversation_session_id",xe)}}catch{me.generateSessionId()}be(G),console.log(`[ChatInterface] Connected to ${G} buffer stream`),Me=new IntersectionObserver(pe=>{he=pe[0].isIntersecting},{threshold:.1}),ge&&Me.observe(ge);const F=()=>{!document.hidden&&(!Q||Q.readyState===EventSource.CLOSED)&&(console.log("[chat] Tab visible, reconnecting buffer stream"),be(G))};document.addEventListener("visibilitychange",F),oe=()=>{document.removeEventListener("visibilitychange",F)},window.addEventListener("voice-settings-updated",Dt)});function Dt(){console.log("[chat-mic] Voice settings updated, reloading..."),Ae.loadVADSettings()}async function _e(w){try{console.log(`[chat] Fetching ${w} buffer from server...`);const F=await Xe(`/api/buffer?mode=${w}`);if(F.ok){const pe=await F.json();if(Array.isArray(pe.messages)){console.log(`[chat] Loaded ${pe.messages.length} messages from ${w} buffer`),De.set(pe.messages);return}}console.warn("[chat] Buffer fetch returned non-OK status:",F.status)}catch(F){console.warn("[chat] Server buffer fetch failed, trying local storage:",F)}try{console.log(`[chat] Fetching ${w} from local storage...`);const F=await to(w);console.log(`[chat] Loaded ${F.length} messages from local storage`);const pe=F.map(xe=>({role:xe.role,content:xe.content,timestamp:xe.timestamp,meta:xe.meta}));De.set(pe)}catch(F){console.error("[chat] Local buffer fetch also failed:",F),De.set([])}}function be(w){_e(w),Q&&Q.close(),console.log(`[chat] Connecting to ${w} buffer stream...`),Q=Qn(`/api/buffer-stream?mode=${w}`),Q.onmessage=F=>{try{const pe=JSON.parse(F.data);if(console.log(`[chat] Buffer stream message type: ${pe.type}`),pe.type==="error"){console.error("[chat] Buffer stream auth error:",pe.error),me.pushMessage("system",`âš ï¸ ${pe.error}`);return}if(pe.type==="connected"){console.log(`[chat] Buffer stream connected, watching: ${pe.bufferPath}`);return}pe.type==="update"&&Array.isArray(pe.messages)&&(console.log(`[chat] Buffer update (${w}): ${pe.messages.length} messages`),De.set(pe.messages))}catch(pe){console.error("[chat] Buffer stream parse error:",pe)}},Q.onerror=F=>{if(console.error("[chat] Buffer stream error - connection may have been reset:",F),!Ue(Zn)){console.log("[chat] Now offline, switching to local storage mode"),_e(w);return}setTimeout(()=>{console.log("[chat] Attempting buffer stream reconnection..."),be(w)},3e3)}}function $e(){Q&&(console.log("[chat] Disconnecting buffer stream"),Q.close(),Q=null)}As(()=>{rt=!1,oe?.(),re?.close(),$e(),Pe.clearActivity(),ce.cleanup(),Te.cleanup(),It(),Me&&(Me.disconnect(),Me=null),typeof window<"u"&&window.removeEventListener("voice-settings-updated",Dt),Ae.disableMediaSession(),Ae.cleanup()}),Js(()=>{he&&ae&&l(10,ae.scrollTop=ae.scrollHeight,ae)});async function Ve(){const w=E.trim();if(w){l(4,E=""),me.clearSelection(),me.pushMessage("user",w),await el(G,{role:"user",content:w}),l(0,I=!0),Te.start(),Te.setStatusLabel("ðŸ”„ Selecting best tier...");try{console.log("[sendMessage-offline] Using UnifiedChat for offline/tiered routing");const F=await Yo.sendMessage(w);console.log(`[sendMessage-offline] Response from tier: ${F.tier} (${F.model})`),me.pushMessage("assistant",F.response,void 0,{tier:F.tier,model:F.model,latencyMs:F.latencyMs}),await el(G,{role:"assistant",content:F.response,meta:{tier:F.tier,model:F.model}}),se&&F.response&&ce.speakText(F.response),Te.stop()}catch(F){console.error("[sendMessage-offline] Error:",F);const pe=F instanceof Error?F.message:"Failed to get response";me.pushMessage("system",`âš ï¸ ${pe}`),Te.stop()}finally{l(0,I=!1)}}}async function je(){if(!E.trim()||I)return;let w=Ue(Zn);const{isCapacitorNative:F}=await He(async()=>{const{isCapacitorNative:Lt}=await import("./api-config.BAZ_dc_Y.js").then(et=>et.au);return{isCapacitorNative:Lt}},[]);if((F()||!w)&&(w=(await xn()).connected),!w){await Ve();return}if(!Ce.isReady()){const et=Ue(st)==="vllm"?"Cannot send message: vLLM server is not running. Please start vLLM from Settings â†’ Backend.":"Cannot send message: Ollama is not running or no models are loaded. Please start Ollama and load a model first.";alert(et);return}await ce.ensureAudioUnlocked(),se&&ce.prefetchVoiceResources(),Pe.signalActivity();const pe=E.trim();l(4,E="");const xe=me.getReplyToMetadata(),Pt=xe.questionId,jt=xe.content;me.clearSelection(),me.pushMessage("user",pe),l(0,I=!0),l(1,T=[]),Te.start(),console.log("[sendMessage] Step 1: Set loading state");try{console.log("[sendMessage] Step 2: Entered try block");let Lt={};try{const kt=localStorage.getItem("llmOptions");kt&&(Lt=JSON.parse(kt))}catch{}console.log("[sendMessage] Step 3: Got llm_opts");const et=new URLSearchParams({message:pe,mode:G,length:ie,reason:String(Y>0),reasoningDepth:String(Y),llm:JSON.stringify(Lt),sessionId:n});if(console.log("[sendMessage] Step 4: Created URLSearchParams"),et.set("yolo",String(q)),Pt&&(et.set("replyToQuestionId",Pt),console.log("[reply-to] Replying to curiosity question:",Pt)),jt&&(et.set("replyToContent",jt.substring(0,500)),console.log("[reply-to] Replying to message:",jt.substring(0,100))),console.log("[sendMessage] Step 5: Setting up chat request"),console.log("[sendMessage] URL:",`/api/persona_chat?${et.toString()}`),et.set("graph","true"),F()){et.set("stream","false"),console.log("[sendMessage] Mobile: Using apiFetch with stream=false");try{Te.setActive(!0),Te.setStatusLabel("ðŸ”„ Processing...");const kt=await Xe(`/api/persona_chat?${et.toString()}`),_t=await kt.json();if(Te.stop(),!kt.ok||_t.error){const Fe=_t.error||"Unknown error occurred";me.pushMessage("system",`âš ï¸ ${Fe}`),l(0,I=!1),l(1,T=[]);return}_t.response&&(me.pushMessage("assistant",_t.response,void 0,{facet:_t.facet}),se&&_t.response&&ce.speakText(_t.response)),l(0,I=!1),l(1,T=[])}catch(kt){console.error("[sendMessage] Mobile fetch error:",kt),me.pushMessage("system",`Error: ${kt.message||"Failed to send message."}`),Te.stop(),l(0,I=!1),l(1,T=[])}}else re&&(console.log("[sendMessage] Closing existing EventSource..."),re.close(),re=null),re=Qn(`/api/persona_chat?${et.toString()}`),console.log("[sendMessage] Step 6: EventSource created!"),re.onmessage=kt=>{console.log("[EventSource] onmessage fired, raw event.data:",kt.data.substring(0,200));try{const{type:_t,data:Fe}=JSON.parse(kt.data);if(console.log("[EventSource] Parsed type:",_t,"data keys:",Object.keys(Fe)),_t==="progress"){if(Fe&&Fe.message){Te.setActive(!0);const vt=Fe.message;console.log("[Progress Event] step:",Fe.step,"message:",vt.substring(0,100)),Fe.step==="loading_graph"?(Te.setStatusLabel("ðŸ“‹ Loading workflow..."),Te.setTrace([vt])):Fe.step==="graph_loaded"?(Te.setStatusLabel("âš™ï¸ Executing pipeline..."),Te.setTrace([vt])):Fe.step==="node_executing"?(Te.setStatusLabel("ðŸ”„ Processing..."),Te.appendTrace(`â–¸ ${vt}`,10)):Fe.step==="thinking"?(console.log("[Thinking Event] Appending to trace:",vt.substring(0,150)),console.log("[Thinking Event] Current trace length:",Te.getTrace().length),console.log("[Thinking Event] reasoningStages.length:",T.length),Te.setStatusLabel("ðŸ§  Thinking..."),Te.appendTrace(vt,10),console.log("[Thinking Event] New trace length:",Te.getTrace().length)):Fe.step==="node_error"?(Te.setStatusLabel("âš ï¸ Error detected..."),Te.appendTrace(`âœ— ${vt}`,10)):(Fe.step==="graph_complete"&&Te.setStatusLabel("âœ“ Completed, finalizing..."),Te.appendTrace(vt,10))}}else if(_t==="cancelled")Te.stop(),me.pushMessage("system",Fe.message||"â¸ï¸ Request cancelled"),l(0,I=!1),l(1,T=[]),re?.close();else if(_t==="reasoning"){if(Te.stop(),typeof Fe=="string")l(1,T=[{round:1,stage:"plan",content:Fe,timestamp:Date.now()}]);else if(Fe&&typeof Fe=="object"){const vt={round:Number(Fe.round)>0?Number(Fe.round):1,stage:String(Fe.stage||"plan"),content:String(Fe.content||""),timestamp:Date.now()};l(1,T=[...T,vt])}}else if(_t==="answer")Te.stop(),T.length>0&&(G==="inner"&&T.forEach(vt=>{const en=`${me.formatReasoningLabel(vt)} Â· ${me.formatTime(vt.timestamp)}`;me.pushMessage("reasoning",vt.content,void 0,{stage:vt,label:en})}),l(1,T=[])),Fe.duplicate||me.pushMessage("assistant",Fe.response,Fe?.saved?.assistantRelPath,{facet:Fe.facet}),console.log("[chat-tts] Auto-TTS check - ttsEnabled:",se,"hasResponse:",!!Fe.response,"responseLength:",Fe.response?.length||0),se&&Fe.response?(console.log("[chat-tts] Auto-TTS FIRING - speaking response:",Fe.response.substring(0,50)),ce.speakText(Fe.response)):console.log("[chat-tts] Auto-TTS SKIPPED - enabled:",se,"mode:",G,"hasResponse:",!!Fe.response),l(0,I=!1),re?.close();else if(_t==="system_message")Fe.content&&me.pushMessage("system",Fe.content);else if(_t==="error"){const vt=Fe.message||"Unknown error occurred",en=Fe.suggestion||"",Hs=Fe.isGPUError||vt.includes("GPU")||vt.includes("memory");console.error("[chat] Server error:",vt);let Rn=`âš ï¸ ${vt}`;en?Rn+=`

ðŸ’¡ ${en}`:Hs&&(Rn+=`

ðŸ’¡ Try refreshing the page or wait a moment for GPU memory to clear.`),me.pushMessage("system",Rn),Te.stop(),l(0,I=!1),l(1,T=[]),re?.close();return}}catch(_t){console.error("Chat stream error:",_t),me.pushMessage("system",`Error: ${_t.message||"Failed to process server response."}`),Te.stop(),l(0,I=!1),l(1,T=[]),re?.close()}},re.onerror=async kt=>{if(console.error("[EventSource] onerror fired! Error:",kt),console.error("[EventSource] ReadyState:",re?.readyState),re?.close(),!(await xn()).connected){console.log("[EventSource] Server confirmed offline, falling back to UnifiedChat");const Fe=Ue(De);Fe.length>0&&Fe[Fe.length-1].role==="user"&&De.set(Fe.slice(0,-1)),l(4,E=pe),Te.stop(),l(0,I=!1),l(1,T=[]),await Ve();return}me.pushMessage("system","Error: Connection to the server was lost. Try again or check server status."),Te.stop(),l(0,I=!1),l(1,T=[])}}catch(Lt){console.error("Chat setup error:",Lt),me.pushMessage("system","Error: Could not send message."),Te.stop(),l(0,I=!1),l(1,T=[])}}async function ht(){if(!(!I||!n))try{console.log("[stop-request] Cancelling session:",n);const w=await Xe("/api/cancel-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:n,reason:"User clicked stop button"})});w.ok?console.log("[stop-request] Cancellation requested successfully"):console.error("[stop-request] Failed to cancel:",await w.text())}catch(w){console.error("[stop-request] Error cancelling request:",w)}}async function At(w){Pe.signalActivity(),w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),await je())}async function Kt(w){await me.deleteMessage(w)||alert("Failed to delete message")}async function Xt(){try{const w=await Xe("/api/claude-session");if(w.ok){const F=await w.json();if(F.success&&F.status)return l(6,J=F.status.ready),F.status}}catch(w){console.error("[claude-session] Failed to check status:",w)}return null}async function Zt(){if(!ne){l(7,ne=!0);try{console.log("[claude-session] Starting Claude CLI session...");const F=await(await Xe("/api/claude-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"start"})})).json();if(F.success&&F.status){if(l(6,J=F.status.ready),console.log("[claude-session] Status:",F.message),J){const{openBigBrotherTerminal:pe}=await He(async()=>{const{openBigBrotherTerminal:xe}=await import("./bigBrotherTerminal.CEpnOPL3.js");return{openBigBrotherTerminal:xe}},__vite__mapDeps([4,5,1]));pe()}}else console.error("[claude-session] Failed to start:",F.error)}catch(w){console.error("[claude-session] Error starting session:",w)}finally{l(7,ne=!1)}}}async function cn(){try{await Xe("/api/claude-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"stop"})}),l(6,J=!1)}catch(w){console.error("[claude-session] Error stopping session:",w)}}async function un(){const w=V;l(5,V=!V),gt();try{const F=await Xe("/api/big-brother-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:V,provider:"claude-code",escalateOnStuck:!0,escalateOnRepeatedFailures:!0,maxRetries:1,includeFullScratchpad:!0,autoApplySuggestions:!1})});if(!F.ok){const pe=await F.json();console.error("[big-brother] Failed to update config:",pe.error),l(5,V=w),gt();return}V?await Zt():await cn()}catch(F){console.error("[big-brother] Error updating config:",F),l(5,V=w),gt()}}async function xt(w,F){try{const pe=await Xe("/api/memories/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({relPath:w,status:F})}),xe=await pe.json();if(!pe.ok||!xe.success)throw new Error(xe.error||"Failed to validate")}catch(pe){alert(pe.message)}}async function fn(){me.clearMessages(),l(1,T=[]),Te.stop();try{const F=me.generateSessionId();localStorage.setItem("mh_conversation_session_id",F)}catch{me.generateSessionId()}Zs();try{const F=await Xe("/api/audit/clear",{method:"DELETE"});if(!F.ok)console.warn("Failed to clear audit logs:",F.statusText);else{const pe=await F.json();console.log("Audit logs cleared:",pe.message)}}catch(F){console.warn("Error clearing audit logs:",F)}await me.clearServerBuffer()?console.log("[ChatInterface] Server buffer cleared successfully"):console.warn("[ChatInterface] Failed to clear server buffer")}function dn(){Ce.checkStatus()}const hn=()=>{l(8,G="conversation"),be("conversation")},vn=()=>{l(8,G="inner"),be("inner")};function _n(){ie=Ys(this),l(9,ie)}const mn=()=>{l(11,se=!se),se&&ce.prefetchVoiceResources(),gt()},pn=()=>{l(12,j=!j),gt()},gn=()=>{l(4,E="Tell me how you will take over the world?"),je()},bn=()=>{l(4,E="Wimmy wham wham wozzle!?"),je()},kn=()=>{l(4,E="Tell me about yourself in the most technical way possible"),je()},wn=w=>{C===w.detail.index?me.clearSelection():me.selectMessage(w.detail.message,w.detail.index)},yn=w=>Kt(w.detail.relPath),Tn=w=>xt(w.detail.relPath,w.detail.status),Cn=w=>{se&&ce.speakText(w.detail.content)};function Sn(w){$t[w?"unshift":"push"](()=>{ge=w,l(15,ge)})}function En(w){$t[w?"unshift":"push"](()=>{ae=w,l(10,ae)})}function Mn(w){E=w,l(4,E),l(0,I),l(66,t)}const In=w=>At(w.detail.event),Dn=()=>{if($){console.log("[chat-mic] Stopping wake word detection"),Ae.stopWakeWordDetection();return}if(g){console.log("[chat-mic] Stopping conversation mode"),Ae.toggleConversationMode();return}if(O){Ae.toggleContinuousMode();return}U?Ae.stopMic():Ae.startMic()},Ln=()=>{console.log("[chat-mic] Long press detected, toggling conversation mode"),Ae.toggleConversationMode()},Nn=()=>{console.log("[chat-mic] Right-click detected, toggling conversation mode"),Ae.toggleConversationMode()},An=()=>{ce.stopActiveAudio(),ce.cancelInFlightTts()},Pn=()=>{console.log("[chat-mic] Tap-to-interrupt: stopping TTS and starting to listen"),ce.stopActiveAudio(),ce.cancelInFlightTts(),g||Ae.toggleConversationMode()},Vn=()=>me.clearSelection(),On=w=>{l(9,ie=w.detail.mode)};return i.$$.update=()=>{if(i.$$.dirty[0]&14|i.$$.dirty[2]&96&&console.log("[ThinkingIndicator] showIndicator:",v,"active:",f,"trace.length:",r.length,"reasoningStages.length:",T.length,"steps:",o.substring(0,100)),i.$$.dirty[0]&1|i.$$.dirty[2]&16&&!I&&t.trim()){console.log("[chat-queue] LLM finished, sending queued message:",t.substring(0,50)+(t.length>50?"...":""));const w=t;dt.set(""),l(4,E=w),je()}},[I,T,o,v,E,V,J,ne,G,ie,ae,se,j,K,te,ge,s,k,S,y,R,B,M,C,N,U,O,$,g,L,D,ce,ue,me,De,Ne,ze,We,Le,Ee,Oe,Qe,st,Ae,yt,at,dt,Ct,Ye,Ze,Ke,bt,ct,Tt,pt,gt,Nt,be,je,ht,At,Kt,un,xt,fn,dn,t,r,f,hn,vn,_n,mn,pn,gn,bn,kn,wn,yn,Tn,Cn,Sn,En,Mn,In,Dn,Ln,Nn,An,Pn,Vn,On]}class di extends Gt{constructor(e){super(),Jt(this,e,fi,ui,Yt,{},null,[-1,-1,-1,-1])}}const{Map:hi}=Rs;function Il(i,e,l){const t=i.slice();return t[157]=e[l],t}function Dl(i,e,l){const t=i.slice();return t[160]=e[l],t}function Ll(i,e,l){const t=i.slice();return t[154]=e[l],t}function Nl(i,e,l){const t=i.slice();t[122]=e[l];const n=Rt(t[122]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function Al(i,e,l){const t=i.slice();return t[151]=e[l],t}function Pl(i,e,l){const t=i.slice();t[122]=e[l];const n=Rt(t[122]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function Vl(i,e,l){const t=i.slice();return t[137]=e[l],t}function Ol(i,e,l){const t=i.slice();return t[140]=e[l],t}function Rl(i,e,l){const t=i.slice();t[122]=e[l];const n=Rt(t[122]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function Bl(i,e,l){const t=i.slice();return t[137]=e[l],t}function Ul(i,e,l){const t=i.slice();return t[140]=e[l],t}function Fl(i,e,l){const t=i.slice();t[132]=e[l];const n=Rt(t[132]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function Hl(i,e,l){const t=i.slice();t[129]=e[l];const n=Rt(t[129]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function $l(i,e,l){const t=i.slice();t[122]=e[l];const n=Rt(t[122]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function zl(i,e,l){const t=i.slice();t[122]=e[l];const n=Rt(t[122]);t[123]=n;const s=t[123]?!!t[21][t[123]]:!1;return t[124]=s,t}function vi(i){let e,l,t='<h2 class="view-title">ðŸ”§ System Coder</h2> <p class="view-subtitle">Self-healing code maintenance agent</p>',n,s,o,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Si,then:Ci,catch:Ti,value:121,blocks:[,,,]};return nt(i[35]("SystemCoderDashboard"),r),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),r.block.c(),this.h()},l(f){e=d(f,"DIV",{class:!0});var v=p(e);l=d(v,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1a9twdg"&&(l.innerHTML=t),n=A(v),s=d(v,"DIV",{class:!0});var _=p(s);r.block.l(_),_.forEach(u),v.forEach(u),this.h()},h(){a(l,"class","view-header"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(f,v){b(f,e,v),c(e,l),c(e,n),c(e,s),r.block.m(s,r.anchor=null),r.mount=()=>s,r.anchor=null,o=!0},p(f,v){i=f,lt(r,i,v)},i(f){o||(ee(r.block),o=!0)},o(f){for(let v=0;v<3;v+=1){const _=r.blocks[v];le(_)}o=!1},d(f){f&&u(e),r.block.d(),r.token=null,r=null}}}function _i(i){let e,l,t='<h2 class="view-title">ðŸŽ¯ Agency</h2> <p class="view-subtitle">Autonomous desires and intentions</p>',n,s,o,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Ii,then:Mi,catch:Ei,value:121,blocks:[,,,]};return nt(i[35]("AgencyDashboard"),r),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),r.block.c(),this.h()},l(f){e=d(f,"DIV",{class:!0});var v=p(e);l=d(v,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-194kjlz"&&(l.innerHTML=t),n=A(v),s=d(v,"DIV",{class:!0});var _=p(s);r.block.l(_),_.forEach(u),v.forEach(u),this.h()},h(){a(l,"class","view-header"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(f,v){b(f,e,v),c(e,l),c(e,n),c(e,s),r.block.m(s,r.anchor=null),r.mount=()=>s,r.anchor=null,o=!0},p(f,v){i=f,lt(r,i,v)},i(f){o||(ee(r.block),o=!0)},o(f){for(let v=0;v<3;v+=1){const _=r.blocks[v];le(_)}o=!1},d(f){f&&u(e),r.block.d(),r.token=null,r=null}}}function mi(i){let e,l,t='<h2 class="view-title">ðŸ’» Terminal</h2> <p class="view-subtitle">Multiple terminals with tab management</p>',n,s,o,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Ni,then:Li,catch:Di,value:121,blocks:[,,,]};return nt(i[35]("TerminalManager"),r),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),r.block.c(),this.h()},l(f){e=d(f,"DIV",{class:!0});var v=p(e);l=d(v,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-yv8rjl"&&(l.innerHTML=t),n=A(v),s=d(v,"DIV",{class:!0});var _=p(s);r.block.l(_),_.forEach(u),v.forEach(u),this.h()},h(){a(l,"class","view-header svelte-amswgv"),a(s,"class","view-content terminal-iframe-container svelte-amswgv"),a(e,"class","view-container terminal-view svelte-amswgv")},m(f,v){b(f,e,v),c(e,l),c(e,n),c(e,s),r.block.m(s,r.anchor=null),r.mount=()=>s,r.anchor=null,o=!0},p(f,v){i=f,lt(r,i,v)},i(f){o||(ee(r.block),o=!0)},o(f){for(let v=0;v<3;v+=1){const _=r.blocks[v];le(_)}o=!1},d(f){f&&u(e),r.block.d(),r.token=null,r=null}}}function pi(i){let e,l,t='<h2 class="view-title">âš™ï¸ System</h2> <p class="view-subtitle">Tools &amp; settings</p>',n,s,o,r,f="Chat",v,_,k="Settings",S,y,R="Backend",B,M,C="Security",N,U,O="Storage",$,g,L="Network",D,E,I,T="Addons",Y,W,z="Scheduler",V,J,ne="Lifeline",re,Q,G,ie,ae,he,oe=i[10]&&jl(i);const se=[$i,Hi,Fi,Ui,Bi,Ri,Oi,Vi,Pi,Ai],j=[];function K(te,q){return te[18]==="chat"?0:te[18]==="settings"?1:te[18]==="backend"?2:te[18]==="security"?3:te[18]==="storage"?4:te[18]==="network"?5:te[18]==="addons"?6:te[18]==="lifeline"?7:te[18]==="scheduler"?8:te[18]==="server"?9:-1}return~(Q=K(i))&&(G=j[Q]=se[Q](i)),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),o=h("div"),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),M=h("button"),M.textContent=C,N=P(),U=h("button"),U.textContent=O,$=P(),g=h("button"),g.textContent=L,D=P(),oe&&oe.c(),E=P(),I=h("button"),I.textContent=T,Y=P(),W=h("button"),W.textContent=z,V=P(),J=h("button"),J.textContent=ne,re=P(),G&&G.c(),this.h()},l(te){e=d(te,"DIV",{class:!0});var q=p(e);l=d(q,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-ab0pen"&&(l.innerHTML=t),n=A(q),s=d(q,"DIV",{class:!0});var ce=p(s);o=d(ce,"DIV",{class:!0});var ue=p(o);r=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-kbqfmk"&&(r.textContent=f),v=A(ue),_=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-x5g7up"&&(_.textContent=k),S=A(ue),y=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-11e33s0"&&(y.textContent=R),B=A(ue),M=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(M)!=="svelte-1y4wyt0"&&(M.textContent=C),N=A(ue),U=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(U)!=="svelte-ewycoj"&&(U.textContent=O),$=A(ue),g=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-1iwgxk6"&&(g.textContent=L),D=A(ue),oe&&oe.l(ue),E=A(ue),I=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(I)!=="svelte-1eph9j3"&&(I.textContent=T),Y=A(ue),W=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(W)!=="svelte-hnkeaz"&&(W.textContent=z),V=A(ue),J=d(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),X(J)!=="svelte-7zuu2a"&&(J.textContent=ne),ue.forEach(u),re=A(ce),G&&G.l(ce),ce.forEach(u),q.forEach(u),this.h()},h(){a(l,"class","view-header svelte-amswgv"),a(r,"class","tab-button"),ve(r,"active",i[18]==="chat"),a(_,"class","tab-button"),ve(_,"active",i[18]==="settings"),a(y,"class","tab-button"),ve(y,"active",i[18]==="backend"),a(M,"class","tab-button"),ve(M,"active",i[18]==="security"),a(U,"class","tab-button"),ve(U,"active",i[18]==="storage"),a(g,"class","tab-button"),ve(g,"active",i[18]==="network"),a(I,"class","tab-button"),ve(I,"active",i[18]==="addons"),a(W,"class","tab-button"),ve(W,"active",i[18]==="scheduler"),a(J,"class","tab-button"),ve(J,"active",i[18]==="lifeline"),a(o,"class","tab-group"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container svelte-amswgv"),ve(e,"terminal-view",i[18]==="terminal")},m(te,q){b(te,e,q),c(e,l),c(e,n),c(e,s),c(s,o),c(o,r),c(o,v),c(o,_),c(o,S),c(o,y),c(o,B),c(o,M),c(o,N),c(o,U),c(o,$),c(o,g),c(o,D),oe&&oe.m(o,null),c(o,E),c(o,I),c(o,Y),c(o,W),c(o,V),c(o,J),c(s,re),~Q&&j[Q].m(s,null),ie=!0,ae||(he=[de(r,"click",i[103]),de(_,"click",i[104]),de(y,"click",i[105]),de(M,"click",i[106]),de(U,"click",i[107]),de(g,"click",i[108]),de(I,"click",i[110]),de(W,"click",i[111]),de(J,"click",i[112])],ae=!0)},p(te,q){(!ie||q[0]&262144)&&ve(r,"active",te[18]==="chat"),(!ie||q[0]&262144)&&ve(_,"active",te[18]==="settings"),(!ie||q[0]&262144)&&ve(y,"active",te[18]==="backend"),(!ie||q[0]&262144)&&ve(M,"active",te[18]==="security"),(!ie||q[0]&262144)&&ve(U,"active",te[18]==="storage"),(!ie||q[0]&262144)&&ve(g,"active",te[18]==="network"),te[10]?oe?oe.p(te,q):(oe=jl(te),oe.c(),oe.m(o,E)):oe&&(oe.d(1),oe=null),(!ie||q[0]&262144)&&ve(I,"active",te[18]==="addons"),(!ie||q[0]&262144)&&ve(W,"active",te[18]==="scheduler"),(!ie||q[0]&262144)&&ve(J,"active",te[18]==="lifeline");let ce=Q;Q=K(te),Q===ce?~Q&&j[Q].p(te,q):(G&&(Re(),le(j[ce],1,1,()=>{j[ce]=null}),Be()),~Q?(G=j[Q],G?G.p(te,q):(G=j[Q]=se[Q](te),G.c()),ee(G,1),G.m(s,null)):G=null),(!ie||q[0]&262144)&&ve(e,"terminal-view",te[18]==="terminal")},i(te){ie||(ee(G),ie=!0)},o(te){le(G),ie=!1},d(te){te&&u(e),oe&&oe.d(),~Q&&j[Q].d(),ae=!1,mt(he)}}}function gi(i){let e,l,t='<h2 class="view-title">ðŸ‘¤ Persona</h2> <p class="view-subtitle">Identity, personality &amp; memory</p>',n,s,o,r,f="Editor",v,_,k="Memory",S,y,R="Generator",B,M,C,N,U,O;const $=[kr,br,gr],g=[];function L(D,E){return D[6]==="editor"?0:D[6]==="memory"?1:D[6]==="generator"?2:-1}return~(M=L(i))&&(C=g[M]=$[M](i)),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),o=h("div"),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),C&&C.c(),this.h()},l(D){e=d(D,"DIV",{class:!0});var E=p(e);l=d(E,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1ix6u14"&&(l.innerHTML=t),n=A(E),s=d(E,"DIV",{class:!0});var I=p(s);o=d(I,"DIV",{class:!0});var T=p(o);r=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-aqqw5f"&&(r.textContent=f),v=A(T),_=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-1bn6f11"&&(_.textContent=k),S=A(T),y=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-1mmp5yz"&&(y.textContent=R),T.forEach(u),B=A(I),C&&C.l(I),I.forEach(u),E.forEach(u),this.h()},h(){a(l,"class","view-header"),a(r,"class","tab-button"),ve(r,"active",i[6]==="editor"),a(_,"class","tab-button"),ve(_,"active",i[6]==="memory"),a(y,"class","tab-button"),ve(y,"active",i[6]==="generator"),a(o,"class","tab-group"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(D,E){b(D,e,E),c(e,l),c(e,n),c(e,s),c(s,o),c(o,r),c(o,v),c(o,_),c(o,S),c(o,y),c(s,B),~M&&g[M].m(s,null),N=!0,U||(O=[de(r,"click",i[65]),de(_,"click",i[66]),de(y,"click",i[67])],U=!0)},p(D,E){(!N||E[0]&64)&&ve(r,"active",D[6]==="editor"),(!N||E[0]&64)&&ve(_,"active",D[6]==="memory"),(!N||E[0]&64)&&ve(y,"active",D[6]==="generator");let I=M;M=L(D),M===I?~M&&g[M].p(D,E):(C&&(Re(),le(g[I],1,1,()=>{g[I]=null}),Be()),~M?(C=g[M],C?C.p(D,E):(C=g[M]=$[M](D),C.c()),ee(C,1),C.m(s,null)):C=null)},i(D){N||(ee(C),N=!0)},o(D){le(C),N=!1},d(D){D&&u(e),~M&&g[M].d(),U=!1,mt(O)}}}function bi(i){let e,l,t='<h2 class="view-title">ðŸ§  AI Training</h2> <p class="view-subtitle">LoRA datasets, training &amp; adapters</p>',n,s,o,r,f="ðŸ§™ Training Wizard",v,_,k="ðŸ“œ Training History",S,y,R="ðŸ“Š Dataset Management",B,M,C="âš™ï¸ System Controls",N,U,O="ðŸ“¡ Training Monitor",$,g,L,D,E,I;const T=[Fa,Ua,Ba,Ra,Oa],Y=[];function W(z,V){return z[17]==="wizard"?0:z[17]==="datasets"?1:z[17]==="manage"?2:z[17]==="system"?3:z[17]==="monitor"?4:-1}return~(g=W(i))&&(L=Y[g]=T[g](i)),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),o=h("div"),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),M=h("button"),M.textContent=C,N=P(),U=h("button"),U.textContent=O,$=P(),L&&L.c(),this.h()},l(z){e=d(z,"DIV",{class:!0});var V=p(e);l=d(V,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1bu4zpl"&&(l.innerHTML=t),n=A(V),s=d(V,"DIV",{class:!0});var J=p(s);o=d(J,"DIV",{class:!0});var ne=p(o);r=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1j352r6"&&(r.textContent=f),v=A(ne),_=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-9q04f"&&(_.textContent=k),S=A(ne),y=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-remxgk"&&(y.textContent=R),B=A(ne),M=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(M)!=="svelte-8xkll"&&(M.textContent=C),N=A(ne),U=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),X(U)!=="svelte-1fg8q5s"&&(U.textContent=O),ne.forEach(u),$=A(J),L&&L.l(J),J.forEach(u),V.forEach(u),this.h()},h(){a(l,"class","view-header"),a(r,"class","tab-button"),ve(r,"active",i[17]==="wizard"),a(_,"class","tab-button"),ve(_,"active",i[17]==="datasets"),a(y,"class","tab-button"),ve(y,"active",i[17]==="manage"),a(M,"class","tab-button"),ve(M,"active",i[17]==="system"),a(U,"class","tab-button"),ve(U,"active",i[17]==="monitor"),a(o,"class","tab-group"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(z,V){b(z,e,V),c(e,l),c(e,n),c(e,s),c(s,o),c(o,r),c(o,v),c(o,_),c(o,S),c(o,y),c(o,B),c(o,M),c(o,N),c(o,U),c(s,$),~g&&Y[g].m(s,null),D=!0,E||(I=[de(r,"click",i[60]),de(_,"click",i[61]),de(y,"click",i[62]),de(M,"click",i[63]),de(U,"click",i[64])],E=!0)},p(z,V){(!D||V[0]&131072)&&ve(r,"active",z[17]==="wizard"),(!D||V[0]&131072)&&ve(_,"active",z[17]==="datasets"),(!D||V[0]&131072)&&ve(y,"active",z[17]==="manage"),(!D||V[0]&131072)&&ve(M,"active",z[17]==="system"),(!D||V[0]&131072)&&ve(U,"active",z[17]==="monitor");let J=g;g=W(z),g===J?~g&&Y[g].p(z,V):(L&&(Re(),le(Y[J],1,1,()=>{Y[J]=null}),Be()),~g?(L=Y[g],L?L.p(z,V):(L=Y[g]=T[g](z),L.c()),ee(L,1),L.m(s,null)):L=null)},i(z){D||(ee(L),D=!0)},o(z){le(L),D=!1},d(z){z&&u(e),~g&&Y[g].d(),E=!1,mt(I)}}}function ki(i){let e,l,t='<h2 class="view-title">ðŸŽ¤ Voice</h2> <p class="view-subtitle">Audio upload, transcription &amp; voice training</p>',n,s,o,r,f="Upload & Transcribe",v,_,k="Voice Clone Training",S,y,R="Voice Settings",B,M,C,N,U,O;const $=[lc,nc,tc],g=[];function L(D,E){return D[8]==="upload"?0:D[8]==="training"?1:D[8]==="settings"?2:-1}return~(M=L(i))&&(C=g[M]=$[M](i)),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),o=h("div"),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),C&&C.c(),this.h()},l(D){e=d(D,"DIV",{class:!0});var E=p(e);l=d(E,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-fhb5gv"&&(l.innerHTML=t),n=A(E),s=d(E,"DIV",{class:!0});var I=p(s);o=d(I,"DIV",{class:!0});var T=p(o);r=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1fnw5nm"&&(r.textContent=f),v=A(T),_=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-1eipdgv"&&(_.textContent=k),S=A(T),y=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-17pgivl"&&(y.textContent=R),T.forEach(u),B=A(I),C&&C.l(I),I.forEach(u),E.forEach(u),this.h()},h(){a(l,"class","view-header"),a(r,"class","tab-button"),ve(r,"active",i[8]==="upload"),a(_,"class","tab-button"),ve(_,"active",i[8]==="training"),a(y,"class","tab-button"),ve(y,"active",i[8]==="settings"),a(o,"class","tab-group"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(D,E){b(D,e,E),c(e,l),c(e,n),c(e,s),c(s,o),c(o,r),c(o,v),c(o,_),c(o,S),c(o,y),c(s,B),~M&&g[M].m(s,null),N=!0,U||(O=[de(r,"click",i[57]),de(_,"click",i[58]),de(y,"click",i[59])],U=!0)},p(D,E){(!N||E[0]&256)&&ve(r,"active",D[8]==="upload"),(!N||E[0]&256)&&ve(_,"active",D[8]==="training"),(!N||E[0]&256)&&ve(y,"active",D[8]==="settings");let I=M;M=L(D),M===I?~M&&g[M].p(D,E):(C&&(Re(),le(g[I],1,1,()=>{g[I]=null}),Be()),~M?(C=g[M],C?C.p(D,E):(C=g[M]=$[M](D),C.c()),ee(C,1),C.m(s,null)):C=null)},i(D){N||(ee(C),N=!0)},o(D){le(C),N=!1},d(D){D&&u(e),~M&&g[M].d(),U=!1,mt(O)}}}function wi(i){let e,l,t='<h2 class="view-title">ðŸ“Š Dashboard</h2> <p class="view-subtitle">Overview, tasks &amp; approvals</p>',n,s,o,r,f="Overview",v,_,k="Tasks",S,y,R="Approvals",B,M,C,N,U,O;const $=[gc,pc,mc],g=[];function L(D,E){return D[19]==="overview"?0:D[19]==="tasks"?1:D[19]==="approvals"?2:-1}return~(M=L(i))&&(C=g[M]=$[M](i)),{c(){e=h("div"),l=h("div"),l.innerHTML=t,n=P(),s=h("div"),o=h("div"),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),C&&C.c(),this.h()},l(D){e=d(D,"DIV",{class:!0});var E=p(e);l=d(E,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1klzbjm"&&(l.innerHTML=t),n=A(E),s=d(E,"DIV",{class:!0});var I=p(s);o=d(I,"DIV",{class:!0});var T=p(o);r=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-2xssqd"&&(r.textContent=f),v=A(T),_=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-11xas10"&&(_.textContent=k),S=A(T),y=d(T,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-95z69q"&&(y.textContent=R),T.forEach(u),B=A(I),C&&C.l(I),I.forEach(u),E.forEach(u),this.h()},h(){a(l,"class","view-header"),a(r,"class","tab-button"),ve(r,"active",i[19]==="overview"),a(_,"class","tab-button"),ve(_,"active",i[19]==="tasks"),a(y,"class","tab-button"),ve(y,"active",i[19]==="approvals"),a(o,"class","tab-group"),a(s,"class","view-content svelte-amswgv"),a(e,"class","view-container")},m(D,E){b(D,e,E),c(e,l),c(e,n),c(e,s),c(s,o),c(o,r),c(o,v),c(o,_),c(o,S),c(o,y),c(s,B),~M&&g[M].m(s,null),N=!0,U||(O=[de(r,"click",i[54]),de(_,"click",i[55]),de(y,"click",i[56])],U=!0)},p(D,E){(!N||E[0]&524288)&&ve(r,"active",D[19]==="overview"),(!N||E[0]&524288)&&ve(_,"active",D[19]==="tasks"),(!N||E[0]&524288)&&ve(y,"active",D[19]==="approvals");let I=M;M=L(D),M===I?~M&&g[M].p(D,E):(C&&(Re(),le(g[I],1,1,()=>{g[I]=null}),Be()),~M?(C=g[M],C?C.p(D,E):(C=g[M]=$[M](D),C.c()),ee(C,1),C.m(s,null)):C=null)},i(D){N||(ee(C),N=!0)},o(D){le(C),N=!1},d(D){D&&u(e),~M&&g[M].d(),U=!1,mt(O)}}}function yi(i){let e,l;return e=new di({}),{c(){ye(e.$$.fragment)},l(t){qe(e.$$.fragment,t)},m(t,n){we(e,t,n),l=!0},p:m,i(t){l||(ee(e.$$.fragment,t),l=!0)},o(t){le(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function Ti(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ci(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Si(i){let e,l="Loading system coder dashboard...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-19gfzo1"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Ei(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Mi(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Ii(i){let e,l="Loading agency dashboard...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1eesfs0"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Di(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Li(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Ni(i){let e,l="Loading terminal manager...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-mi55us"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function jl(i){let e,l="ðŸ“¡ Server",t,n;return{c(){e=h("button"),e.textContent=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-p4vh7b"&&(e.textContent=l),this.h()},h(){a(e,"class","tab-button"),ve(e,"active",i[18]==="server")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[109]),t=!0)},p(s,o){o[0]&262144&&ve(e,"active",s[18]==="server")},d(s){s&&u(e),t=!1,n()}}}function Ai(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:qi,then:ji,catch:zi,value:121,blocks:[,,,]};return nt(i[35]("ServerSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Pi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Ji,then:Gi,catch:Wi,value:121,blocks:[,,,]};return nt(i[35]("SchedulerSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Vi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Ki,then:Qi,catch:Yi,value:121,blocks:[,,,]};return nt(i[35]("Lifeline"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Oi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:xi,then:Zi,catch:Xi,value:121,blocks:[,,,]};return nt(i[35]("AddonsManager"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ri(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:nr,then:tr,catch:er,value:121,blocks:[,,,]};return nt(i[35]("NetworkSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Bi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:or,then:sr,catch:lr,value:121,blocks:[,,,]};return nt(i[35]("ProfileLocation"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ui(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:ar,then:rr,catch:ir,value:121,blocks:[,,,]};return nt(i[35]("SecuritySettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Fi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:fr,then:ur,catch:cr,value:121,blocks:[,,,]};return nt(i[35]("BackendSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Hi(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:vr,then:hr,catch:dr,value:121,blocks:[,,,]};return nt(i[35]("SystemSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function $i(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:pr,then:mr,catch:_r,value:121,blocks:[,,,]};return nt(i[35]("ChatSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function zi(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ji(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function qi(i){let e,l="Loading server settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-r5w61v"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Wi(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Gi(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Ji(i){let e,l="Loading scheduler settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1fvappz"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Yi(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Qi(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Ki(i){let e,l="Loading lifeline...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1teu3vt"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Xi(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Zi(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function xi(i){let e,l="Loading addons manager...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1qv8469"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function er(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function tr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function nr(i){let e,l="Loading network settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-12p8k38"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function lr(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function sr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function or(i){let e,l="Loading storage settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1ta3bif"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function ir(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function rr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function ar(i){let e,l="Loading security settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-ho38bw"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function cr(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ur(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function fr(i){let e,l="Loading backend settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-c28zhu"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function dr(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function hr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function vr(i){let e,l="Loading system settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-y8dk61"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function _r(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function mr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function pr(i){let e,l="Loading chat settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-i6ncvo"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function gr(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Tr,then:yr,catch:wr,value:121,blocks:[,,,]};return nt(i[35]("PersonaGenerator"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function br(i){let e,l,t,n,s="Episodic",o,r,f="Reflections",v,_,k="Tasks",S,y,R="Curated",B,M,C="AI Ingestor",N,U,O="Audio",$,g,L="Dreams ðŸ’­",D,E,I="Curiosity â“",T,Y,W="Functions ðŸ”§",z,V=!["tasks","curated","curiosity","functions"].includes(i[7]),J,ne,re,Q,G,ie={ctx:i,current:null,token:null,hasCatch:!1,pending:Er,then:Sr,catch:Cr,value:121,blocks:[,,,]};nt(i[35]("MemoryControls"),ie);let ae=V&&ql(i);function he(j,K){if(j[15])return Ur;if(j[16])return Br;if(j[7]==="episodic"&&j[0].length===0)return Rr;if(j[7]==="episodic")return Or;if(j[7]==="reflections")return Vr;if(j[7]==="tasks")return Pr;if(j[7]==="curated")return Ar;if(j[7]==="ai-ingestor")return Nr;if(j[7]==="audio")return Lr;if(j[7]==="dreams")return Dr;if(j[7]==="curiosity")return Ir;if(j[7]==="functions")return Mr}let oe=he(i),se=oe&&oe(i);return{c(){e=h("div"),ie.block.c(),l=P(),t=h("div"),n=h("button"),n.textContent=s,o=P(),r=h("button"),r.textContent=f,v=P(),_=h("button"),_.textContent=k,S=P(),y=h("button"),y.textContent=R,B=P(),M=h("button"),M.textContent=C,N=P(),U=h("button"),U.textContent=O,$=P(),g=h("button"),g.textContent=L,D=P(),E=h("button"),E.textContent=I,T=P(),Y=h("button"),Y.textContent=W,z=P(),ae&&ae.c(),J=P(),se&&se.c(),ne=H(),this.h()},l(j){e=d(j,"DIV",{class:!0});var K=p(e);ie.block.l(K),K.forEach(u),l=A(j),t=d(j,"DIV",{class:!0});var te=p(t);n=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(n)!=="svelte-1uo0o50"&&(n.textContent=s),o=A(te),r=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1jn0666"&&(r.textContent=f),v=A(te),_=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-j68gpi"&&(_.textContent=k),S=A(te),y=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-cnqisy"&&(y.textContent=R),B=A(te),M=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(M)!=="svelte-15nxnvv"&&(M.textContent=C),N=A(te),U=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(U)!=="svelte-1oan0xe"&&(U.textContent=O),$=A(te),g=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-10ahhug"&&(g.textContent=L),D=A(te),E=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(E)!=="svelte-z0auoe"&&(E.textContent=I),T=A(te),Y=d(te,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Y)!=="svelte-1kvbbv"&&(Y.textContent=W),te.forEach(u),z=A(j),ae&&ae.l(j),J=A(j),se&&se.l(j),ne=H(),this.h()},h(){a(e,"class","memory-section"),a(n,"class","tab-button"),ve(n,"active",i[7]==="episodic"),a(r,"class","tab-button"),ve(r,"active",i[7]==="reflections"),a(_,"class","tab-button"),ve(_,"active",i[7]==="tasks"),a(y,"class","tab-button"),ve(y,"active",i[7]==="curated"),a(M,"class","tab-button"),ve(M,"active",i[7]==="ai-ingestor"),a(U,"class","tab-button"),ve(U,"active",i[7]==="audio"),a(g,"class","tab-button"),ve(g,"active",i[7]==="dreams"),a(E,"class","tab-button"),ve(E,"active",i[7]==="curiosity"),a(Y,"class","tab-button"),ve(Y,"active",i[7]==="functions"),a(t,"class","tab-group")},m(j,K){b(j,e,K),ie.block.m(e,ie.anchor=null),ie.mount=()=>e,ie.anchor=null,b(j,l,K),b(j,t,K),c(t,n),c(t,o),c(t,r),c(t,v),c(t,_),c(t,S),c(t,y),c(t,B),c(t,M),c(t,N),c(t,U),c(t,$),c(t,g),c(t,D),c(t,E),c(t,T),c(t,Y),b(j,z,K),ae&&ae.m(j,K),b(j,J,K),se&&se.m(j,K),b(j,ne,K),re=!0,Q||(G=[de(n,"click",i[68]),de(r,"click",i[69]),de(_,"click",i[70]),de(y,"click",i[71]),de(M,"click",i[72]),de(U,"click",i[73]),de(g,"click",i[74]),de(E,"click",i[75]),de(Y,"click",i[76])],Q=!0)},p(j,K){i=j,lt(ie,i,K),(!re||K[0]&128)&&ve(n,"active",i[7]==="episodic"),(!re||K[0]&128)&&ve(r,"active",i[7]==="reflections"),(!re||K[0]&128)&&ve(_,"active",i[7]==="tasks"),(!re||K[0]&128)&&ve(y,"active",i[7]==="curated"),(!re||K[0]&128)&&ve(M,"active",i[7]==="ai-ingestor"),(!re||K[0]&128)&&ve(U,"active",i[7]==="audio"),(!re||K[0]&128)&&ve(g,"active",i[7]==="dreams"),(!re||K[0]&128)&&ve(E,"active",i[7]==="curiosity"),(!re||K[0]&128)&&ve(Y,"active",i[7]==="functions"),K[0]&128&&(V=!["tasks","curated","curiosity","functions"].includes(i[7])),V?ae?ae.p(i,K):(ae=ql(i),ae.c(),ae.m(J.parentNode,J)):ae&&(ae.d(1),ae=null),oe===(oe=he(i))&&se?se.p(i,K):(se&&se.d(1),se=oe&&oe(i),se&&(se.c(),se.m(ne.parentNode,ne)))},i(j){re||(ee(ie.block),re=!0)},o(j){for(let K=0;K<3;K+=1){const te=ie.blocks[K];le(te)}re=!1},d(j){j&&(u(e),u(l),u(t),u(z),u(J),u(ne)),ie.block.d(),ie.token=null,ie=null,ae&&ae.d(j),se&&se.d(j),Q=!1,mt(G)}}}function kr(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Va,then:Pa,catch:Aa,value:121,blocks:[,,,]};return nt(i[35]("PersonaEditor"),t),{c(){e=h("div"),t.block.c(),this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);t.block.l(s),s.forEach(u),this.h()},h(){a(e,"class","persona-editor-wrapper svelte-amswgv")},m(n,s){b(n,e,s),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(),t.token=null,t=null}}}function wr(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function yr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Tr(i){let e,l="Loading persona generator...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1pczhi2"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Cr(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Sr(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s()),e.$on("captured",i[37])),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),e.$on("captured",o[37]),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Er(i){let e,l="Loading memory controls...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-n7aryk"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function ql(i){let e,l,t,n,s,o,r,f,v,_,k,S,y,R,B=i[4]&&Wl(i),M=i[28]>0&&Gl(i),C=i[29]>1&&Yl(i);return{c(){e=h("div"),l=h("div"),t=it("svg"),n=it("circle"),s=it("path"),o=P(),r=h("input"),f=P(),B&&B.c(),v=P(),_=h("div"),M&&M.c(),k=P(),C&&C.c(),S=H(),this.h()},l(N){e=d(N,"DIV",{class:!0});var U=p(e);l=d(U,"DIV",{class:!0});var O=p(l);t=ot(O,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var $=p(t);n=ot($,"circle",{cx:!0,cy:!0,r:!0}),p(n).forEach(u),s=ot($,"path",{d:!0}),p(s).forEach(u),$.forEach(u),o=A(O),r=d(O,"INPUT",{type:!0,placeholder:!0,class:!0}),f=A(O),B&&B.l(O),O.forEach(u),v=A(U),_=d(U,"DIV",{class:!0});var g=p(_);M&&M.l(g),g.forEach(u),U.forEach(u),k=A(N),C&&C.l(N),S=H(),this.h()},h(){a(n,"cx","11"),a(n,"cy","11"),a(n,"r","8"),a(s,"d","m21 21-4.35-4.35"),a(t,"class","search-icon svelte-amswgv"),a(t,"viewBox","0 0 24 24"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"stroke-width","2"),a(r,"type","text"),a(r,"placeholder","Search memories..."),a(r,"class","search-input svelte-amswgv"),a(l,"class","search-box svelte-amswgv"),a(_,"class","pagination-info svelte-amswgv"),a(e,"class","memory-controls-bar svelte-amswgv")},m(N,U){b(N,e,U),c(e,l),c(l,t),c(t,n),c(t,s),c(l,o),c(l,r),Ut(r,i[4]),c(l,f),B&&B.m(l,null),c(e,v),c(e,_),M&&M.m(_,null),b(N,k,U),C&&C.m(N,U),b(N,S,U),y||(R=de(r,"input",i[77]),y=!0)},p(N,U){U[0]&16&&r.value!==N[4]&&Ut(r,N[4]),N[4]?B?B.p(N,U):(B=Wl(N),B.c(),B.m(l,null)):B&&(B.d(1),B=null),N[28]>0?M?M.p(N,U):(M=Gl(N),M.c(),M.m(_,null)):M&&(M.d(1),M=null),N[29]>1?C?C.p(N,U):(C=Yl(N),C.c(),C.m(S.parentNode,S)):C&&(C.d(1),C=null)},d(N){N&&(u(e),u(k),u(S)),B&&B.d(),M&&M.d(),C&&C.d(N),y=!1,R()}}}function Wl(i){let e,l="Ã—",t,n;return{c(){e=h("button"),e.textContent=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1s44031"&&(e.textContent=l),this.h()},h(){a(e,"class","search-clear svelte-amswgv")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[78]),t=!0)},p:m,d(s){s&&u(e),t=!1,n()}}}function Gl(i){let e,l,t,n=i[28]===1?"memory":"memories",s,o,r=i[4]&&Jl();return{c(){e=h("span"),l=x(i[28]),t=P(),s=x(n),o=P(),r&&r.c(),this.h()},l(f){e=d(f,"SPAN",{class:!0});var v=p(e);l=Z(v,i[28]),t=A(v),s=Z(v,n),o=A(v),r&&r.l(v),v.forEach(u),this.h()},h(){a(e,"class","item-count svelte-amswgv")},m(f,v){b(f,e,v),c(e,l),c(e,t),c(e,s),c(e,o),r&&r.m(e,null)},p(f,v){v[0]&268435456&&fe(l,f[28]),v[0]&268435456&&n!==(n=f[28]===1?"memory":"memories")&&fe(s,n),f[4]?r||(r=Jl(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(f){f&&u(e),r&&r.d()}}}function Jl(i){let e;return{c(){e=x("(filtered)")},l(l){e=Z(l,"(filtered)")},m(l,t){b(l,e,t)},d(l){l&&u(e)}}}function Yl(i){let e,l,t,n,s,o,r,f,v,_,k,S,y,R,B,M,C,N,U,O,$,g,L,D;return{c(){e=h("div"),l=h("button"),t=x("Â«Â«"),s=P(),o=h("button"),r=x("Â«"),v=P(),_=h("span"),k=x("Page "),S=x(i[5]),y=x(" of "),R=x(i[29]),B=P(),M=h("button"),C=x("Â»"),U=P(),O=h("button"),$=x("Â»Â»"),this.h()},l(E){e=d(E,"DIV",{class:!0});var I=p(e);l=d(I,"BUTTON",{class:!0,title:!0});var T=p(l);t=Z(T,"Â«Â«"),T.forEach(u),s=A(I),o=d(I,"BUTTON",{class:!0,title:!0});var Y=p(o);r=Z(Y,"Â«"),Y.forEach(u),v=A(I),_=d(I,"SPAN",{class:!0});var W=p(_);k=Z(W,"Page "),S=Z(W,i[5]),y=Z(W," of "),R=Z(W,i[29]),W.forEach(u),B=A(I),M=d(I,"BUTTON",{class:!0,title:!0});var z=p(M);C=Z(z,"Â»"),z.forEach(u),U=A(I),O=d(I,"BUTTON",{class:!0,title:!0});var V=p(O);$=Z(V,"Â»Â»"),V.forEach(u),I.forEach(u),this.h()},h(){a(l,"class","page-btn svelte-amswgv"),l.disabled=n=i[5]===1,a(l,"title","First page"),a(o,"class","page-btn svelte-amswgv"),o.disabled=f=i[5]===1,a(o,"title","Previous page"),a(_,"class","page-indicator svelte-amswgv"),a(M,"class","page-btn svelte-amswgv"),M.disabled=N=i[5]===i[29],a(M,"title","Next page"),a(O,"class","page-btn svelte-amswgv"),O.disabled=g=i[5]===i[29],a(O,"title","Last page"),a(e,"class","pagination-controls svelte-amswgv")},m(E,I){b(E,e,I),c(e,l),c(l,t),c(e,s),c(e,o),c(o,r),c(e,v),c(e,_),c(_,k),c(_,S),c(_,y),c(_,R),c(e,B),c(e,M),c(M,C),c(e,U),c(e,O),c(O,$),L||(D=[de(l,"click",i[79]),de(o,"click",i[80]),de(M,"click",i[81]),de(O,"click",i[82])],L=!0)},p(E,I){I[0]&32&&n!==(n=E[5]===1)&&(l.disabled=n),I[0]&32&&f!==(f=E[5]===1)&&(o.disabled=f),I[0]&32&&fe(S,E[5]),I[0]&536870912&&fe(R,E[29]),I[0]&536870944&&N!==(N=E[5]===E[29])&&(M.disabled=N),I[0]&536870944&&g!==(g=E[5]===E[29])&&(O.disabled=g)},d(E){E&&u(e),L=!1,mt(D)}}}function Mr(i){let e;function l(s,o){return s[14].length>0?Hr:Fr}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","functions-list svelte-amswgv")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Ir(i){let e;function l(s,o){return s[13].length>0?zr:$r}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","memory-list")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Dr(i){let e;function l(s,o){return s[32].length>0?qr:jr}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Lr(i){let e;function l(s,o){return s[2].length===0?Xr:Kr}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Nr(i){let e;function l(s,o){return s[1].length===0?sa:la}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Ar(i){let e,l,t=Ge(i[12]),n=[];for(let o=0;o<t.length;o+=1)n[o]=bs(Fl(i,t,o));let s=i[12].length===0&&ks();return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();l=P(),s&&s.c(),this.h()},l(o){e=d(o,"DIV",{class:!0});var r=p(e);for(let f=0;f<n.length;f+=1)n[f].l(r);l=A(r),s&&s.l(r),r.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(o,r){b(o,e,r);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c(e,l),s&&s.m(e,null)},p(o,r){if(r[0]&6295552|r[1]&128){t=Ge(o[12]);let f;for(f=0;f<t.length;f+=1){const v=Fl(o,t,f);n[f]?n[f].p(v,r):(n[f]=bs(v),n[f].c(),n[f].m(e,l))}for(;f<n.length;f+=1)n[f].d(1);n.length=t.length}o[12].length===0?s||(s=ks(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&u(e),wt(n,o),s&&s.d()}}}function Pr(i){let e,l,t=Ge(i[11]),n=[];for(let o=0;o<t.length;o+=1)n[o]=ys(Hl(i,t,o));let s=i[11].length===0&&Ts();return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();l=P(),s&&s.c(),this.h()},l(o){e=d(o,"DIV",{class:!0});var r=p(e);for(let f=0;f<n.length;f+=1)n[f].l(r);l=A(r),s&&s.l(r),r.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(o,r){b(o,e,r);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c(e,l),s&&s.m(e,null)},p(o,r){if(r[0]&6293504|r[1]&128){t=Ge(o[11]);let f;for(f=0;f<t.length;f+=1){const v=Hl(o,t,f);n[f]?n[f].p(v,r):(n[f]=ys(v),n[f].c(),n[f].m(e,l))}for(;f<n.length;f+=1)n[f].d(1);n.length=t.length}o[11].length===0?s||(s=Ts(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&u(e),wt(n,o),s&&s.d()}}}function Vr(i){let e;function l(s,o){return s[3].length===0?wa:ka}let t=l(i),n=t(i);return{c(){e=h("div"),n.c(),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);n.l(o),o.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&u(e),n.d()}}}function Or(i){let e,l=Ge(i[34]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ds(zl(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(u),this.h()},h(){a(e,"class","events-list svelte-amswgv")},m(n,s){b(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s[0]&207618048|s[1]&3464){l=Ge(n[34]);let o;for(o=0;o<l.length;o+=1){const r=zl(n,l,o);t[o]?t[o].p(r,s):(t[o]=Ds(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function Rr(i){let e,l='<div class="empty-icon">ðŸ§©</div> <div class="empty-title">No memories yet</div> <div class="empty-description">Capture observations using the <code>mh capture</code> command</div>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-eilwb9"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Br(i){let e,l,t="âš ï¸",n,s,o="Failed to load memories",r,f,v;return{c(){e=h("div"),l=h("div"),l.textContent=t,n=P(),s=h("div"),s.textContent=o,r=P(),f=h("div"),v=x(i[16]),this.h()},l(_){e=d(_,"DIV",{class:!0});var k=p(e);l=d(k,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-hw6j07"&&(l.textContent=t),n=A(k),s=d(k,"DIV",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-c4bcr4"&&(s.textContent=o),r=A(k),f=d(k,"DIV",{class:!0});var S=p(f);v=Z(S,i[16]),S.forEach(u),k.forEach(u),this.h()},h(){a(l,"class","empty-icon"),a(s,"class","empty-title"),a(f,"class","empty-description"),a(e,"class","empty-state")},m(_,k){b(_,e,k),c(e,l),c(e,n),c(e,s),c(e,r),c(e,f),c(f,v)},p(_,k){k[0]&65536&&fe(v,_[16])},d(_){_&&u(e)}}}function Ur(i){let e,l="Loading memories...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-r2ft8c"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Fr(i){let e,l=`<div class="empty-icon">ðŸ”§</div> <div class="empty-title">No Functions Yet</div> <div class="empty-description">Functions are automatically learned from successful operator executions.
                  The system will create draft functions as it discovers multi-step patterns.</div>`;return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-6yxgs1"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Hr(i){let e,l=Ge(i[14]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Kl(Il(i,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);b(n,e,s)},p(n,s){if(s[0]&16384){l=Ge(n[14]);let o;for(o=0;o<l.length;o+=1){const r=Il(n,l,o);t[o]?t[o].p(r,s):(t[o]=Kl(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function Ql(i){let e,l=i[160]+"",t;return{c(){e=h("span"),t=x(l),this.h()},l(n){e=d(n,"SPAN",{class:!0});var s=p(e);t=Z(s,l),s.forEach(u),this.h()},h(){a(e,"class","skill-tag svelte-amswgv")},m(n,s){b(n,e,s),c(e,t)},p(n,s){s[0]&16384&&l!==(l=n[160]+"")&&fe(t,l)},d(n){n&&u(e)}}}function Kl(i){let e,l,t,n,s,o=i[157].trustLevel==="verified"?"âœ“":"ðŸ“",r,f,v,_=i[157].title+"",k,S,y,R=i[157].trustLevel+"",B,M,C,N,U=i[157].summary+"",O,$,g,L,D,E,I="Uses:",T,Y,W=i[157].usageCount+"",z,V,J,ne,re="Quality:",Q,G,ie=i[157].qualityScore?(i[157].qualityScore*100).toFixed(0)+"%":"N/A",ae,he,oe,se,j="Skills:",K,te,q=i[157].skillsUsed.length+"",ce,ue,Ie,me,De,Ne,ze=new Date(i[157].createdAt).toLocaleString()+"",We,Pe,Ce=Ge(i[157].skillsUsed),Le=[];for(let Ee=0;Ee<Ce.length;Ee+=1)Le[Ee]=Ql(Dl(i,Ce,Ee));return{c(){e=h("div"),l=h("div"),t=h("div"),n=h("div"),s=h("span"),r=x(o),f=P(),v=h("span"),k=x(_),S=P(),y=h("span"),B=x(R),C=P(),N=h("div"),O=x(U),$=P(),g=h("div"),L=h("div"),D=h("div"),E=h("span"),E.textContent=I,T=P(),Y=h("span"),z=x(W),V=P(),J=h("div"),ne=h("span"),ne.textContent=re,Q=P(),G=h("span"),ae=x(ie),he=P(),oe=h("div"),se=h("span"),se.textContent=j,K=P(),te=h("span"),ce=x(q),ue=P(),Ie=h("div");for(let Ee=0;Ee<Le.length;Ee+=1)Le[Ee].c();me=P(),De=h("div"),Ne=h("div"),We=x(ze),Pe=P(),this.h()},l(Ee){e=d(Ee,"DIV",{class:!0});var Oe=p(e);l=d(Oe,"DIV",{class:!0});var Qe=p(l);t=d(Qe,"DIV",{class:!0});var st=p(t);n=d(st,"DIV",{class:!0});var Ae=p(n);s=d(Ae,"SPAN",{class:!0});var yt=p(s);r=Z(yt,o),yt.forEach(u),f=A(Ae),v=d(Ae,"SPAN",{class:!0});var at=p(v);k=Z(at,_),at.forEach(u),S=A(Ae),y=d(Ae,"SPAN",{class:!0});var dt=p(y);B=Z(dt,R),dt.forEach(u),Ae.forEach(u),C=A(st),N=d(st,"DIV",{class:!0});var Ct=p(N);O=Z(Ct,U),Ct.forEach(u),st.forEach(u),Qe.forEach(u),$=A(Oe),g=d(Oe,"DIV",{class:!0});var Je=p(g);L=d(Je,"DIV",{class:!0});var Ye=p(L);D=d(Ye,"DIV",{class:!0});var Ze=p(D);E=d(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),X(E)!=="svelte-lfbcrk"&&(E.textContent=I),T=A(Ze),Y=d(Ze,"SPAN",{class:!0});var Te=p(Y);z=Z(Te,W),Te.forEach(u),Ze.forEach(u),V=A(Ye),J=d(Ye,"DIV",{class:!0});var Ke=p(J);ne=d(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),X(ne)!=="svelte-152ssih"&&(ne.textContent=re),Q=A(Ke),G=d(Ke,"SPAN",{class:!0});var bt=p(G);ae=Z(bt,ie),bt.forEach(u),Ke.forEach(u),he=A(Ye),oe=d(Ye,"DIV",{class:!0});var ct=p(oe);se=d(ct,"SPAN",{class:!0,"data-svelte-h":!0}),X(se)!=="svelte-11hsyde"&&(se.textContent=j),K=A(ct),te=d(ct,"SPAN",{class:!0});var Tt=p(te);ce=Z(Tt,q),Tt.forEach(u),ct.forEach(u),Ye.forEach(u),ue=A(Je),Ie=d(Je,"DIV",{class:!0});var pt=p(Ie);for(let Me=0;Me<Le.length;Me+=1)Le[Me].l(pt);pt.forEach(u),Je.forEach(u),me=A(Oe),De=d(Oe,"DIV",{class:!0});var It=p(De);Ne=d(It,"DIV",{class:!0});var ge=p(Ne);We=Z(ge,ze),ge.forEach(u),It.forEach(u),Pe=A(Oe),Oe.forEach(u),this.h()},h(){a(s,"class","function-icon svelte-amswgv"),a(v,"class","function-title svelte-amswgv"),a(y,"class",M="function-trust-badge "+i[157].trustLevel+" svelte-amswgv"),a(n,"class","function-title-row svelte-amswgv"),a(N,"class","function-summary svelte-amswgv"),a(t,"class","function-header-content svelte-amswgv"),a(l,"class","event-card-header"),a(E,"class","stat-label svelte-amswgv"),a(Y,"class","stat-value svelte-amswgv"),a(D,"class","stat-item svelte-amswgv"),a(ne,"class","stat-label svelte-amswgv"),a(G,"class","stat-value svelte-amswgv"),a(J,"class","stat-item svelte-amswgv"),a(se,"class","stat-label svelte-amswgv"),a(te,"class","stat-value svelte-amswgv"),a(oe,"class","stat-item svelte-amswgv"),a(L,"class","function-stats svelte-amswgv"),a(Ie,"class","function-skills svelte-amswgv"),a(g,"class","function-body svelte-amswgv"),a(Ne,"class","event-card-time"),a(De,"class","event-card-meta"),a(e,"class","event-card function-card svelte-amswgv")},m(Ee,Oe){b(Ee,e,Oe),c(e,l),c(l,t),c(t,n),c(n,s),c(s,r),c(n,f),c(n,v),c(v,k),c(n,S),c(n,y),c(y,B),c(t,C),c(t,N),c(N,O),c(e,$),c(e,g),c(g,L),c(L,D),c(D,E),c(D,T),c(D,Y),c(Y,z),c(L,V),c(L,J),c(J,ne),c(J,Q),c(J,G),c(G,ae),c(L,he),c(L,oe),c(oe,se),c(oe,K),c(oe,te),c(te,ce),c(g,ue),c(g,Ie);for(let Qe=0;Qe<Le.length;Qe+=1)Le[Qe]&&Le[Qe].m(Ie,null);c(e,me),c(e,De),c(De,Ne),c(Ne,We),c(e,Pe)},p(Ee,Oe){if(Oe[0]&16384&&o!==(o=Ee[157].trustLevel==="verified"?"âœ“":"ðŸ“")&&fe(r,o),Oe[0]&16384&&_!==(_=Ee[157].title+"")&&fe(k,_),Oe[0]&16384&&R!==(R=Ee[157].trustLevel+"")&&fe(B,R),Oe[0]&16384&&M!==(M="function-trust-badge "+Ee[157].trustLevel+" svelte-amswgv")&&a(y,"class",M),Oe[0]&16384&&U!==(U=Ee[157].summary+"")&&fe(O,U),Oe[0]&16384&&W!==(W=Ee[157].usageCount+"")&&fe(z,W),Oe[0]&16384&&ie!==(ie=Ee[157].qualityScore?(Ee[157].qualityScore*100).toFixed(0)+"%":"N/A")&&fe(ae,ie),Oe[0]&16384&&q!==(q=Ee[157].skillsUsed.length+"")&&fe(ce,q),Oe[0]&16384){Ce=Ge(Ee[157].skillsUsed);let Qe;for(Qe=0;Qe<Ce.length;Qe+=1){const st=Dl(Ee,Ce,Qe);Le[Qe]?Le[Qe].p(st,Oe):(Le[Qe]=Ql(st),Le[Qe].c(),Le[Qe].m(Ie,null))}for(;Qe<Le.length;Qe+=1)Le[Qe].d(1);Le.length=Ce.length}Oe[0]&16384&&ze!==(ze=new Date(Ee[157].createdAt).toLocaleString()+"")&&fe(We,ze)},d(Ee){Ee&&u(e),wt(Le,Ee)}}}function $r(i){let e,l=`<div class="empty-icon">â“</div> <div class="empty-title">No Curiosity Questions Yet</div> <div class="empty-description">The curiosity system asks thoughtful questions during idle periods.
                Adjust settings in System â†’ Settings to enable.</div>`;return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1inc4kj"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function zr(i){let e,l=Ge(i[13]),t=[];for(let n=0;n<l.length;n+=1)t[n]=xl(Ll(i,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);b(n,e,s)},p(n,s){if(s[0]&8192|s[1]&256){l=Ge(n[13]);let o;for(o=0;o<l.length;o+=1){const r=Ll(n,l,o);t[o]?t[o].p(r,s):(t[o]=xl(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function Xl(i){let e,l="Reply in Chat",t,n;return{c(){e=h("button"),e.textContent=l,this.h()},l(s){e=d(s,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1ozsifs"&&(e.textContent=l),this.h()},h(){a(e,"class","btn-reply svelte-amswgv")},m(s,o){b(s,e,o),t||(n=de(e,"click",i[102]),t=!0)},d(s){s&&u(e),t=!1,n()}}}function Zl(i){let e,l,t=new Date(i[154].answeredAt).toLocaleDateString()+"",n;return{c(){e=h("span"),l=x("Answered "),n=x(t),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=p(e);l=Z(o,"Answered "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","answered-badge svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&8192&&t!==(t=new Date(s[154].answeredAt).toLocaleDateString()+"")&&fe(n,t)},d(s){s&&u(e)}}}function xl(i){let e,l,t,n=i[154].status==="pending"?"â“":"âœ…",s,o,r,f,v=i[154].status+"",_,k,S,y=new Date(i[154].askedAt).toLocaleString()+"",R,B,M,C=i[154].question+"",N,U,O,$,g="View Details",L,D,E,I,T;function Y(){return i[101](i[154])}let W=i[154].status==="pending"&&Xl(i),z=i[154].answeredAt&&Zl(i);return{c(){e=h("div"),l=h("div"),t=h("span"),s=x(n),o=P(),r=h("div"),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),B=P(),M=h("div"),N=x(C),U=P(),O=h("div"),$=h("button"),$.textContent=g,L=P(),W&&W.c(),D=P(),z&&z.c(),E=P(),this.h()},l(V){e=d(V,"DIV",{class:!0});var J=p(e);l=d(J,"DIV",{class:!0});var ne=p(l);t=d(ne,"SPAN",{class:!0});var re=p(t);s=Z(re,n),re.forEach(u),o=A(ne),r=d(ne,"DIV",{class:!0});var Q=p(r);f=d(Q,"SPAN",{class:!0});var G=p(f);_=Z(G,v),G.forEach(u),k=A(Q),S=d(Q,"SPAN",{class:!0});var ie=p(S);R=Z(ie,y),ie.forEach(u),Q.forEach(u),ne.forEach(u),B=A(J),M=d(J,"DIV",{class:!0});var ae=p(M);N=Z(ae,C),ae.forEach(u),U=A(J),O=d(J,"DIV",{class:!0});var he=p(O);$=d(he,"BUTTON",{class:!0,"data-svelte-h":!0}),X($)!=="svelte-9el5gj"&&($.textContent=g),L=A(he),W&&W.l(he),D=A(he),z&&z.l(he),he.forEach(u),E=A(J),J.forEach(u),this.h()},h(){a(t,"class","event-icon"),a(f,"class","event-card-type"),a(S,"class","event-card-time"),a(r,"class","event-card-meta"),a(l,"class","event-card-header"),a(M,"class","event-card-content question-text svelte-amswgv"),a($,"class","btn-view svelte-amswgv"),a(O,"class","event-card-footer"),a(e,"class","event-card curiosity-question svelte-amswgv"),ve(e,"pending",i[154].status==="pending"),ve(e,"answered",i[154].status==="answered")},m(V,J){b(V,e,J),c(e,l),c(l,t),c(t,s),c(l,o),c(l,r),c(r,f),c(f,_),c(r,k),c(r,S),c(S,R),c(e,B),c(e,M),c(M,N),c(e,U),c(e,O),c(O,$),c(O,L),W&&W.m(O,null),c(O,D),z&&z.m(O,null),c(e,E),I||(T=de($,"click",Y),I=!0)},p(V,J){i=V,J[0]&8192&&n!==(n=i[154].status==="pending"?"â“":"âœ…")&&fe(s,n),J[0]&8192&&v!==(v=i[154].status+"")&&fe(_,v),J[0]&8192&&y!==(y=new Date(i[154].askedAt).toLocaleString()+"")&&fe(R,y),J[0]&8192&&C!==(C=i[154].question+"")&&fe(N,C),i[154].status==="pending"?W||(W=Xl(i),W.c(),W.m(O,D)):W&&(W.d(1),W=null),i[154].answeredAt?z?z.p(i,J):(z=Zl(i),z.c(),z.m(O,null)):z&&(z.d(1),z=null),J[0]&8192&&ve(e,"pending",i[154].status==="pending"),J[0]&8192&&ve(e,"answered",i[154].status==="answered")},d(V){V&&u(e),W&&W.d(),z&&z.d(),I=!1,T()}}}function jr(i){let e,l="No dreams recorded recently. Dreams are generated during the nightly sleep cycle based on recent memories.";return{c(){e=h("p"),e.textContent=l,this.h()},l(t){e=d(t,"P",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1uvetw"&&(e.textContent=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function qr(i){let e=[],l=new hi,t,n=Ge(i[32]);const s=o=>o[122].id;for(let o=0;o<n.length;o+=1){let r=Nl(i,n,o),f=s(r);l.set(f,e[o]=ls(f,r))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=H()},l(o){for(let r=0;r<e.length;r+=1)e[r].l(o);t=H()},m(o,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(o,r);b(o,t,r)},p(o,r){r[0]&6291456|r[1]&386&&(n=Ge(o[32]),e=Ps(e,r,s,1,o,n,l,t.parentNode,Qs,ls,t,Nl))},d(o){o&&u(t);for(let r=0;r<e.length;r+=1)e[r].d(o)}}}function es(i){let e;function l(s,o){return s[122].relPath?Gr:Wr}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Wr(i){let e,l,t=i[122].content+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[1]&2&&t!==(t=s[122].content+"")&&fe(n,t)},d(s){s&&u(e)}}}function Gr(i){let e;function l(s,o){return s[22][s[122].relPath]?.status==="loading"?Qr:s[22][s[122].relPath]?.status==="error"?Yr:Jr}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Jr(i){let e,l,t=(i[22][i[122].relPath]?.content??i[122].content)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4194304|o[1]&2&&t!==(t=(s[22][s[122].relPath]?.content??s[122].content)+"")&&fe(n,t)},d(s){s&&u(e)}}}function Yr(i){let e,l,t=i[22][i[122].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load dream: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load dream: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4194304|o[1]&2&&t!==(t=s[22][s[122].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function Qr(i){let e,l="Loading dream memoryâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-qw950a"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function ts(i){let e,l,t=Ge(i[122].metadata.sources),n=[];for(let s=0;s<t.length;s+=1)n[s]=ns(Al(i,t,s));return{c(){e=h("div"),l=x(`Sources:
                       `);for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,`Sources:
                       `);for(let r=0;r<n.length;r+=1)n[r].l(o);o.forEach(u),this.h()},h(){a(e,"class","event-links svelte-amswgv")},m(s,o){b(s,e,o),c(e,l);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,o){if(o[1]&2){t=Ge(s[122].metadata.sources);let r;for(r=0;r<t.length;r+=1){const f=Al(s,t,r);n[r]?n[r].p(f,o):(n[r]=ns(f),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(s){s&&u(e),wt(n,s)}}}function ns(i){let e,l=i[151].slice(0,10)+"",t,n;return{c(){e=h("span"),t=x(l),n=x("..."),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=p(e);t=Z(o,l),n=Z(o,"..."),o.forEach(u),this.h()},h(){a(e,"class","event-link svelte-amswgv")},m(s,o){b(s,e,o),c(e,t),c(e,n)},p(s,o){o[1]&2&&l!==(l=s[151].slice(0,10)+"")&&fe(t,l)},d(s){s&&u(e)}}}function ls(i,e){let l,t,n,s,o=Mt(e[122].content)+"",r,f,v,_=e[124]?"â–²":"â–¼",k,S,y,R=e[124]?"Collapse memory":"Expand memory",B,M,C,N,U,O='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',$,g,L,D,E=new Date(e[122].timestamp).toLocaleString()+"",I,T,Y,W,z;function V(){return e[99](e[122])}function J(){return e[100](e[122])}let ne=e[124]&&es(e),re=e[122].metadata?.sources&&e[122].metadata.sources.length>0&&ts(e);return{key:i,first:null,c(){l=h("div"),t=h("div"),n=h("button"),s=h("span"),r=x(o),f=P(),v=h("span"),k=x(_),S=P(),y=h("span"),B=x(R),C=P(),N=h("div"),U=h("button"),U.innerHTML=O,$=P(),ne&&ne.c(),g=P(),L=h("div"),D=h("div"),I=x(E),T=P(),re&&re.c(),Y=P(),this.h()},l(Q){l=d(Q,"DIV",{class:!0});var G=p(l);t=d(G,"DIV",{class:!0});var ie=p(t);n=d(ie,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var ae=p(n);s=d(ae,"SPAN",{class:!0});var he=p(s);r=Z(he,o),he.forEach(u),f=A(ae),v=d(ae,"SPAN",{class:!0,"aria-hidden":!0});var oe=p(v);k=Z(oe,_),oe.forEach(u),S=A(ae),y=d(ae,"SPAN",{class:!0});var se=p(y);B=Z(se,R),se.forEach(u),ae.forEach(u),C=A(ie),N=d(ie,"DIV",{class:!0});var j=p(N);U=d(j,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(U)!=="svelte-1uv3qb"&&(U.innerHTML=O),j.forEach(u),ie.forEach(u),$=A(G),ne&&ne.l(G),g=A(G),L=d(G,"DIV",{class:!0});var K=p(L);D=d(K,"DIV",{class:!0});var te=p(D);I=Z(te,E),te.forEach(u),T=A(K),re&&re.l(K),K.forEach(u),Y=A(G),G.forEach(u),this.h()},h(){a(s,"class","event-card-title"),a(v,"class","event-toggle-icon svelte-amswgv"),a(v,"aria-hidden","true"),a(y,"class","sr-only svelte-amswgv"),a(n,"class","event-title-button svelte-amswgv"),a(n,"type","button"),a(n,"aria-expanded",M=e[124]),a(U,"class","val-btn edit svelte-amswgv"),a(U,"title","Edit dream"),a(N,"class","validation-controls svelte-amswgv"),a(t,"class","event-card-header"),a(D,"class","event-card-time"),a(L,"class","event-card-meta"),a(l,"class","event-card dream-card svelte-amswgv"),this.first=l},m(Q,G){b(Q,l,G),c(l,t),c(t,n),c(n,s),c(s,r),c(n,f),c(n,v),c(v,k),c(n,S),c(n,y),c(y,B),c(t,C),c(t,N),c(N,U),c(l,$),ne&&ne.m(l,null),c(l,g),c(l,L),c(L,D),c(D,I),c(L,T),re&&re.m(L,null),c(l,Y),W||(z=[de(n,"click",V),de(U,"click",Jn(J))],W=!0)},p(Q,G){e=Q,G[1]&2&&o!==(o=Mt(e[122].content)+"")&&fe(r,o),G[0]&2097152|G[1]&2&&_!==(_=e[124]?"â–²":"â–¼")&&fe(k,_),G[0]&2097152|G[1]&2&&R!==(R=e[124]?"Collapse memory":"Expand memory")&&fe(B,R),G[0]&2097152|G[1]&2&&M!==(M=e[124])&&a(n,"aria-expanded",M),e[124]?ne?ne.p(e,G):(ne=es(e),ne.c(),ne.m(l,g)):ne&&(ne.d(1),ne=null),G[1]&2&&E!==(E=new Date(e[122].timestamp).toLocaleString()+"")&&fe(I,E),e[122].metadata?.sources&&e[122].metadata.sources.length>0?re?re.p(e,G):(re=ts(e),re.c(),re.m(L,null)):re&&(re.d(1),re=null)},d(Q){Q&&u(l),ne&&ne.d(),re&&re.d(),W=!1,mt(z)}}}function Kr(i){let e,l=Ge(i[30]),t=[];for(let n=0;n<l.length;n+=1)t[n]=us(Pl(i,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);b(n,e,s)},p(n,s){if(s[0]&1281359872|s[1]&3200){l=Ge(n[30]);let o;for(o=0;o<l.length;o+=1){const r=Pl(n,l,o);t[o]?t[o].p(r,s):(t[o]=us(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function Xr(i){let e,l=`<div class="empty-icon">ðŸŽµ</div> <div class="empty-title">No Audio Transcript memories</div> <div class="empty-description">Audio transcript memories are created when audio files are processed and transcribed.
                  Upload audio files to create transcript memories.</div>`;return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1ki3n9s"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function ss(i){let e;function l(s,o){return s[122].relPath?xr:Zr}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Zr(i){let e,l,t=i[122].content+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&1073741824&&t!==(t=s[122].content+"")&&fe(n,t)},d(s){s&&u(e)}}}function xr(i){let e;function l(s,o){return s[22][s[122].relPath]?.status==="loading"?na:s[22][s[122].relPath]?.status==="error"?ta:ea}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ea(i){let e,l,t=(i[22][i[122].relPath]?.content??i[122].content)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&1077936128&&t!==(t=(s[22][s[122].relPath]?.content??s[122].content)+"")&&fe(n,t)},d(s){s&&u(e)}}}function ta(i){let e,l,t=i[22][i[122].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load transcript: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load transcript: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&1077936128&&t!==(t=s[22][s[122].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function na(i){let e,l="Loading audio transcriptâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1enpoug"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function os(i){let e,l=i[122].validation.status+"",t,n;return{c(){e=h("div"),t=x(l),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);t=Z(o,l),o.forEach(u),this.h()},h(){a(e,"class",n="event-valid "+i[122].validation.status+" svelte-amswgv")},m(s,o){b(s,e,o),c(e,t)},p(s,o){o[0]&1073741824&&l!==(l=s[122].validation.status+"")&&fe(t,l),o[0]&1073741824&&n!==(n="event-valid "+s[122].validation.status+" svelte-amswgv")&&a(e,"class",n)},d(s){s&&u(e)}}}function is(i){let e,l=Ge(i[122].tags),t=[];for(let n=0;n<l.length;n+=1)t[n]=rs(Ol(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(u),this.h()},h(){a(e,"class","event-tags svelte-amswgv")},m(n,s){b(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s[0]&1073741824){l=Ge(n[122].tags);let o;for(o=0;o<l.length;o+=1){const r=Ol(n,l,o);t[o]?t[o].p(r,s):(t[o]=rs(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function rs(i){let e,l=i[140]+"",t;return{c(){e=h("span"),t=x(l),this.h()},l(n){e=d(n,"SPAN",{class:!0});var s=p(e);t=Z(s,l),s.forEach(u),this.h()},h(){a(e,"class","event-tag svelte-amswgv")},m(n,s){b(n,e,s),c(e,t)},p(n,s){s[0]&1073741824&&l!==(l=n[140]+"")&&fe(t,l)},d(n){n&&u(e)}}}function as(i){let e,l=Ge(i[122].links),t=[];for(let n=0;n<l.length;n+=1)t[n]=cs(Vl(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(u),this.h()},h(){a(e,"class","event-links svelte-amswgv")},m(n,s){b(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s[0]&1073741824){l=Ge(n[122].links);let o;for(o=0;o<l.length;o+=1){const r=Vl(n,l,o);t[o]?t[o].p(r,s):(t[o]=cs(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function cs(i){let e,l=i[137].type+"",t,n,s=i[137].target+"",o;return{c(){e=h("span"),t=x(l),n=x(": "),o=x(s),this.h()},l(r){e=d(r,"SPAN",{class:!0});var f=p(e);t=Z(f,l),n=Z(f,": "),o=Z(f,s),f.forEach(u),this.h()},h(){a(e,"class","event-link svelte-amswgv")},m(r,f){b(r,e,f),c(e,t),c(e,n),c(e,o)},p(r,f){f[0]&1073741824&&l!==(l=r[137].type+"")&&fe(t,l),f[0]&1073741824&&s!==(s=r[137].target+"")&&fe(o,s)},d(r){r&&u(e)}}}function us(i){let e,l,t,n,s=Mt(i[122].content)+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U,O,$,g,L,D,E,I,T,Y,W=new Date(i[122].timestamp).toLocaleString()+"",z,V,J,ne,re,Q,G;function ie(){return i[96](i[122])}function ae(){return i[97](i[122])}function he(){return i[98](i[122])}let oe=i[124]&&ss(i),se=i[122].validation?.status&&os(i),j=i[122].tags&&i[122].tags.length>0&&is(i),K=i[122].links&&i[122].links.length>0&&as(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),C=h("div"),N=h("button"),U=x("+"),$=P(),g=h("button"),L=x("âˆ’"),E=P(),oe&&oe.c(),I=P(),T=h("div"),Y=h("div"),z=x(W),V=P(),se&&se.c(),J=P(),j&&j.c(),ne=P(),K&&K.c(),re=P(),this.h()},l(te){e=d(te,"DIV",{class:!0});var q=p(e);l=d(q,"DIV",{class:!0});var ce=p(l);t=d(ce,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var ue=p(t);n=d(ue,"SPAN",{class:!0});var Ie=p(n);o=Z(Ie,s),Ie.forEach(u),r=A(ue),f=d(ue,"SPAN",{class:!0,"aria-hidden":!0});var me=p(f);_=Z(me,v),me.forEach(u),k=A(ue),S=d(ue,"SPAN",{class:!0});var De=p(S);R=Z(De,y),De.forEach(u),ue.forEach(u),M=A(ce),C=d(ce,"DIV",{class:!0});var Ne=p(C);N=d(Ne,"BUTTON",{class:!0,title:!0});var ze=p(N);U=Z(ze,"+"),ze.forEach(u),$=A(Ne),g=d(Ne,"BUTTON",{class:!0,title:!0});var We=p(g);L=Z(We,"âˆ’"),We.forEach(u),Ne.forEach(u),ce.forEach(u),E=A(q),oe&&oe.l(q),I=A(q),T=d(q,"DIV",{class:!0});var Pe=p(T);Y=d(Pe,"DIV",{class:!0});var Ce=p(Y);z=Z(Ce,W),Ce.forEach(u),V=A(Pe),se&&se.l(Pe),J=A(Pe),j&&j.l(Pe),ne=A(Pe),K&&K.l(Pe),Pe.forEach(u),re=A(q),q.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(N,"class","val-btn good svelte-amswgv"),a(N,"title","Mark as correct"),N.disabled=O=i[26][i[122].relPath]||i[122].validation?.status==="correct",a(g,"class","val-btn bad svelte-amswgv"),a(g,"title","Delete memory"),g.disabled=D=i[27][i[122].relPath],a(C,"class","validation-controls svelte-amswgv"),a(l,"class","event-card-header"),a(Y,"class","event-card-time"),a(T,"class","event-card-meta"),a(e,"class","event-card audio-transcript-card svelte-amswgv")},m(te,q){b(te,e,q),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(l,M),c(l,C),c(C,N),c(N,U),c(C,$),c(C,g),c(g,L),c(e,E),oe&&oe.m(e,null),c(e,I),c(e,T),c(T,Y),c(Y,z),c(T,V),se&&se.m(T,null),c(T,J),j&&j.m(T,null),c(T,ne),K&&K.m(T,null),c(e,re),Q||(G=[de(t,"click",ie),de(N,"click",ae),de(g,"click",he)],Q=!0)},p(te,q){i=te,q[0]&1073741824&&s!==(s=Mt(i[122].content)+"")&&fe(o,s),q[0]&1075838976&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),q[0]&1075838976&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),q[0]&1075838976&&B!==(B=i[124])&&a(t,"aria-expanded",B),q[0]&1140850688&&O!==(O=i[26][i[122].relPath]||i[122].validation?.status==="correct")&&(N.disabled=O),q[0]&1207959552&&D!==(D=i[27][i[122].relPath])&&(g.disabled=D),i[124]?oe?oe.p(i,q):(oe=ss(i),oe.c(),oe.m(e,I)):oe&&(oe.d(1),oe=null),q[0]&1073741824&&W!==(W=new Date(i[122].timestamp).toLocaleString()+"")&&fe(z,W),i[122].validation?.status?se?se.p(i,q):(se=os(i),se.c(),se.m(T,J)):se&&(se.d(1),se=null),i[122].tags&&i[122].tags.length>0?j?j.p(i,q):(j=is(i),j.c(),j.m(T,ne)):j&&(j.d(1),j=null),i[122].links&&i[122].links.length>0?K?K.p(i,q):(K=as(i),K.c(),K.m(T,null)):K&&(K.d(1),K=null)},d(te){te&&u(e),oe&&oe.d(),se&&se.d(),j&&j.d(),K&&K.d(),Q=!1,mt(G)}}}function la(i){let e,l=Ge(i[31]),t=[];for(let n=0;n<l.length;n+=1)t[n]=ps(Rl(i,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);b(n,e,s)},p(n,s){if(s[0]&207618048|s[1]&3201){l=Ge(n[31]);let o;for(o=0;o<l.length;o+=1){const r=Rl(n,l,o);t[o]?t[o].p(r,s):(t[o]=ps(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function sa(i){let e,l=`<div class="empty-icon">ðŸ¤–</div> <div class="empty-title">No AI Ingestor memories</div> <div class="empty-description">AI Ingestor memories are created when files are processed through the AI Ingestor agent.
                  Run the ingestor to create AI-processed memories from inbox files.</div>`;return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-vo5884"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function fs(i){let e;function l(s,o){return s[122].relPath?ia:oa}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function oa(i){let e,l,t=i[122].content+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[1]&1&&t!==(t=s[122].content+"")&&fe(n,t)},d(s){s&&u(e)}}}function ia(i){let e;function l(s,o){return s[22][s[122].relPath]?.status==="loading"?ca:s[22][s[122].relPath]?.status==="error"?aa:ra}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ra(i){let e,l,t=(i[22][i[122].relPath]?.content??i[122].content)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4194304|o[1]&1&&t!==(t=(s[22][s[122].relPath]?.content??s[122].content)+"")&&fe(n,t)},d(s){s&&u(e)}}}function aa(i){let e,l,t=i[22][i[122].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load memory: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load memory: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4194304|o[1]&1&&t!==(t=s[22][s[122].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function ca(i){let e,l="Loading AI ingestor memoryâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-9yux9u"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function ds(i){let e,l=i[122].validation.status+"",t,n;return{c(){e=h("div"),t=x(l),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);t=Z(o,l),o.forEach(u),this.h()},h(){a(e,"class",n="event-valid "+i[122].validation.status+" svelte-amswgv")},m(s,o){b(s,e,o),c(e,t)},p(s,o){o[1]&1&&l!==(l=s[122].validation.status+"")&&fe(t,l),o[1]&1&&n!==(n="event-valid "+s[122].validation.status+" svelte-amswgv")&&a(e,"class",n)},d(s){s&&u(e)}}}function hs(i){let e,l=Ge(i[122].tags),t=[];for(let n=0;n<l.length;n+=1)t[n]=vs(Ul(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(u),this.h()},h(){a(e,"class","event-tags svelte-amswgv")},m(n,s){b(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s[1]&1){l=Ge(n[122].tags);let o;for(o=0;o<l.length;o+=1){const r=Ul(n,l,o);t[o]?t[o].p(r,s):(t[o]=vs(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function vs(i){let e,l=i[140]+"",t;return{c(){e=h("span"),t=x(l),this.h()},l(n){e=d(n,"SPAN",{class:!0});var s=p(e);t=Z(s,l),s.forEach(u),this.h()},h(){a(e,"class","event-tag svelte-amswgv")},m(n,s){b(n,e,s),c(e,t)},p(n,s){s[1]&1&&l!==(l=n[140]+"")&&fe(t,l)},d(n){n&&u(e)}}}function _s(i){let e,l=Ge(i[122].links),t=[];for(let n=0;n<l.length;n+=1)t[n]=ms(Bl(i,l,n));return{c(){e=h("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var s=p(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(u),this.h()},h(){a(e,"class","event-links svelte-amswgv")},m(n,s){b(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s[1]&1){l=Ge(n[122].links);let o;for(o=0;o<l.length;o+=1){const r=Bl(n,l,o);t[o]?t[o].p(r,s):(t[o]=ms(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function ms(i){let e,l=i[137].type+"",t,n,s=i[137].target+"",o;return{c(){e=h("span"),t=x(l),n=x(": "),o=x(s),this.h()},l(r){e=d(r,"SPAN",{class:!0});var f=p(e);t=Z(f,l),n=Z(f,": "),o=Z(f,s),f.forEach(u),this.h()},h(){a(e,"class","event-link svelte-amswgv")},m(r,f){b(r,e,f),c(e,t),c(e,n),c(e,o)},p(r,f){f[1]&1&&l!==(l=r[137].type+"")&&fe(t,l),f[1]&1&&s!==(s=r[137].target+"")&&fe(o,s)},d(r){r&&u(e)}}}function ps(i){let e,l,t,n,s=Mt(i[122].content)+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U,O,$,g,L,D,E,I,T,Y,W=new Date(i[122].timestamp).toLocaleString()+"",z,V,J,ne,re,Q,G;function ie(){return i[93](i[122])}function ae(){return i[94](i[122])}function he(){return i[95](i[122])}let oe=i[124]&&fs(i),se=i[122].validation?.status&&ds(i),j=i[122].tags&&i[122].tags.length>0&&hs(i),K=i[122].links&&i[122].links.length>0&&_s(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),C=h("div"),N=h("button"),U=x("+"),$=P(),g=h("button"),L=x("âˆ’"),E=P(),oe&&oe.c(),I=P(),T=h("div"),Y=h("div"),z=x(W),V=P(),se&&se.c(),J=P(),j&&j.c(),ne=P(),K&&K.c(),re=P(),this.h()},l(te){e=d(te,"DIV",{class:!0});var q=p(e);l=d(q,"DIV",{class:!0});var ce=p(l);t=d(ce,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var ue=p(t);n=d(ue,"SPAN",{class:!0});var Ie=p(n);o=Z(Ie,s),Ie.forEach(u),r=A(ue),f=d(ue,"SPAN",{class:!0,"aria-hidden":!0});var me=p(f);_=Z(me,v),me.forEach(u),k=A(ue),S=d(ue,"SPAN",{class:!0});var De=p(S);R=Z(De,y),De.forEach(u),ue.forEach(u),M=A(ce),C=d(ce,"DIV",{class:!0});var Ne=p(C);N=d(Ne,"BUTTON",{class:!0,title:!0});var ze=p(N);U=Z(ze,"+"),ze.forEach(u),$=A(Ne),g=d(Ne,"BUTTON",{class:!0,title:!0});var We=p(g);L=Z(We,"âˆ’"),We.forEach(u),Ne.forEach(u),ce.forEach(u),E=A(q),oe&&oe.l(q),I=A(q),T=d(q,"DIV",{class:!0});var Pe=p(T);Y=d(Pe,"DIV",{class:!0});var Ce=p(Y);z=Z(Ce,W),Ce.forEach(u),V=A(Pe),se&&se.l(Pe),J=A(Pe),j&&j.l(Pe),ne=A(Pe),K&&K.l(Pe),Pe.forEach(u),re=A(q),q.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(N,"class","val-btn good svelte-amswgv"),a(N,"title","Mark as correct"),N.disabled=O=i[26][i[122].relPath]||i[122].validation?.status==="correct",a(g,"class","val-btn bad svelte-amswgv"),a(g,"title","Delete memory"),g.disabled=D=i[27][i[122].relPath],a(C,"class","validation-controls svelte-amswgv"),a(l,"class","event-card-header"),a(Y,"class","event-card-time"),a(T,"class","event-card-meta"),a(e,"class","event-card ai-ingestor-card svelte-amswgv")},m(te,q){b(te,e,q),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(l,M),c(l,C),c(C,N),c(N,U),c(C,$),c(C,g),c(g,L),c(e,E),oe&&oe.m(e,null),c(e,I),c(e,T),c(T,Y),c(Y,z),c(T,V),se&&se.m(T,null),c(T,J),j&&j.m(T,null),c(T,ne),K&&K.m(T,null),c(e,re),Q||(G=[de(t,"click",ie),de(N,"click",ae),de(g,"click",he)],Q=!0)},p(te,q){i=te,q[1]&1&&s!==(s=Mt(i[122].content)+"")&&fe(o,s),q[0]&2097152|q[1]&1&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),q[0]&2097152|q[1]&1&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),q[0]&2097152|q[1]&1&&B!==(B=i[124])&&a(t,"aria-expanded",B),q[0]&67108864|q[1]&1&&O!==(O=i[26][i[122].relPath]||i[122].validation?.status==="correct")&&(N.disabled=O),q[0]&134217728|q[1]&1&&D!==(D=i[27][i[122].relPath])&&(g.disabled=D),i[124]?oe?oe.p(i,q):(oe=fs(i),oe.c(),oe.m(e,I)):oe&&(oe.d(1),oe=null),q[1]&1&&W!==(W=new Date(i[122].timestamp).toLocaleString()+"")&&fe(z,W),i[122].validation?.status?se?se.p(i,q):(se=ds(i),se.c(),se.m(T,J)):se&&(se.d(1),se=null),i[122].tags&&i[122].tags.length>0?j?j.p(i,q):(j=hs(i),j.c(),j.m(T,ne)):j&&(j.d(1),j=null),i[122].links&&i[122].links.length>0?K?K.p(i,q):(K=_s(i),K.c(),K.m(T,null)):K&&(K.d(1),K=null)},d(te){te&&u(e),oe&&oe.d(),se&&se.d(),j&&j.d(),K&&K.d(),Q=!1,mt(G)}}}function gs(i){let e;function l(s,o){return s[132].relPath?fa:ua}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ua(i){let e,l='<pre class="svelte-amswgv">No file path available for this entry.</pre>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-xe3pgz"&&(e.innerHTML=l),this.h()},h(){a(e,"class","event-body svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function fa(i){let e;function l(s,o){return s[22][s[132].relPath]?.status==="loading"?va:s[22][s[132].relPath]?.status==="error"?ha:da}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function da(i){let e,l,t=(i[22][i[132].relPath]?.content??"")+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4198400&&t!==(t=(s[22][s[132].relPath]?.content??"")+"")&&fe(n,t)},d(s){s&&u(e)}}}function ha(i){let e,l,t=i[22][i[132].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load file: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load file: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4198400&&t!==(t=s[22][s[132].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function va(i){let e,l="Loading curated contentâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-6k2spv"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function bs(i){let e,l,t,n,s=i[132].name+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U,O=i[132].relPath+"",$,g,L;function D(){return i[92](i[132])}let E=i[124]&&gs(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),E&&E.c(),C=P(),N=h("div"),U=h("div"),$=x(O),this.h()},l(I){e=d(I,"DIV",{class:!0});var T=p(e);l=d(T,"DIV",{class:!0});var Y=p(l);t=d(Y,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var W=p(t);n=d(W,"SPAN",{class:!0});var z=p(n);o=Z(z,s),z.forEach(u),r=A(W),f=d(W,"SPAN",{class:!0,"aria-hidden":!0});var V=p(f);_=Z(V,v),V.forEach(u),k=A(W),S=d(W,"SPAN",{class:!0});var J=p(S);R=Z(J,y),J.forEach(u),W.forEach(u),Y.forEach(u),M=A(T),E&&E.l(T),C=A(T),N=d(T,"DIV",{class:!0});var ne=p(N);U=d(ne,"DIV",{class:!0});var re=p(U);$=Z(re,O),re.forEach(u),ne.forEach(u),T.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(l,"class","event-card-header"),a(U,"class","event-card-time"),a(N,"class","event-card-meta"),a(e,"class","event-card")},m(I,T){b(I,e,T),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(e,M),E&&E.m(e,null),c(e,C),c(e,N),c(N,U),c(U,$),g||(L=de(t,"click",D),g=!0)},p(I,T){i=I,T[0]&4096&&s!==(s=i[132].name+"")&&fe(o,s),T[0]&2101248&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),T[0]&2101248&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),T[0]&2101248&&B!==(B=i[124])&&a(t,"aria-expanded",B),i[124]?E?E.p(i,T):(E=gs(i),E.c(),E.m(e,C)):E&&(E.d(1),E=null),T[0]&4096&&O!==(O=i[132].relPath+"")&&fe($,O)},d(I){I&&u(e),E&&E.d(),g=!1,L()}}}function ks(i){let e,l='<div class="empty-title">No curated files</div>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1j2q51e"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function ws(i){let e;function l(s,o){return s[129].relPath?ma:_a}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function _a(i){let e,l,t=JSON.stringify(i[129],null,2)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&2048&&t!==(t=JSON.stringify(s[129],null,2)+"")&&fe(n,t)},d(s){s&&u(e)}}}function ma(i){let e;function l(s,o){return s[22][s[129].relPath]?.status==="loading"?ba:s[22][s[129].relPath]?.status==="error"?ga:pa}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function pa(i){let e,l,t=(i[22][i[129].relPath]?.content??JSON.stringify(i[129],null,2))+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4196352&&t!==(t=(s[22][s[129].relPath]?.content??JSON.stringify(s[129],null,2))+"")&&fe(n,t)},d(s){s&&u(e)}}}function ga(i){let e,l,t=i[22][i[129].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load task: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load task: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4196352&&t!==(t=s[22][s[129].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function ba(i){let e,l="Loading task contentâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-jkbic4"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function ys(i){let e,l,t,n,s=Mt(i[129].title,200)+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U,O=(i[129].updated?new Date(i[129].updated).toLocaleString():"")+"",$,g,L,D=i[129].status+"",E,I=i[129].priority?` â€¢ ${i[129].priority}`:"",T,Y,W;function z(){return i[91](i[129])}let V=i[124]&&ws(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),V&&V.c(),C=P(),N=h("div"),U=h("div"),$=x(O),g=P(),L=h("div"),E=x(D),T=x(I),this.h()},l(J){e=d(J,"DIV",{class:!0});var ne=p(e);l=d(ne,"DIV",{class:!0});var re=p(l);t=d(re,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var Q=p(t);n=d(Q,"SPAN",{class:!0});var G=p(n);o=Z(G,s),G.forEach(u),r=A(Q),f=d(Q,"SPAN",{class:!0,"aria-hidden":!0});var ie=p(f);_=Z(ie,v),ie.forEach(u),k=A(Q),S=d(Q,"SPAN",{class:!0});var ae=p(S);R=Z(ae,y),ae.forEach(u),Q.forEach(u),re.forEach(u),M=A(ne),V&&V.l(ne),C=A(ne),N=d(ne,"DIV",{class:!0});var he=p(N);U=d(he,"DIV",{class:!0});var oe=p(U);$=Z(oe,O),oe.forEach(u),g=A(he),L=d(he,"DIV",{class:!0});var se=p(L);E=Z(se,D),T=Z(se,I),se.forEach(u),he.forEach(u),ne.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(l,"class","event-card-header"),a(U,"class","event-card-time"),a(L,"class","event-valid svelte-amswgv"),a(N,"class","event-card-meta"),a(e,"class","event-card")},m(J,ne){b(J,e,ne),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(e,M),V&&V.m(e,null),c(e,C),c(e,N),c(N,U),c(U,$),c(N,g),c(N,L),c(L,E),c(L,T),Y||(W=de(t,"click",z),Y=!0)},p(J,ne){i=J,ne[0]&2048&&s!==(s=Mt(i[129].title,200)+"")&&fe(o,s),ne[0]&2099200&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),ne[0]&2099200&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),ne[0]&2099200&&B!==(B=i[124])&&a(t,"aria-expanded",B),i[124]?V?V.p(i,ne):(V=ws(i),V.c(),V.m(e,C)):V&&(V.d(1),V=null),ne[0]&2048&&O!==(O=(i[129].updated?new Date(i[129].updated).toLocaleString():"")+"")&&fe($,O),ne[0]&2048&&D!==(D=i[129].status+"")&&fe(E,D),ne[0]&2048&&I!==(I=i[129].priority?` â€¢ ${i[129].priority}`:"")&&fe(T,I)},d(J){J&&u(e),V&&V.d(),Y=!1,W()}}}function Ts(i){let e,l='<div class="empty-title">No active tasks</div>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-v7ykgl"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},d(t){t&&u(e)}}}function ka(i){let e,l=Ge(i[33]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Es($l(i,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);b(n,e,s)},p(n,s){if(s[0]&207618048|s[1]&3460){l=Ge(n[33]);let o;for(o=0;o<l.length;o+=1){const r=$l(n,l,o);t[o]?t[o].p(r,s):(t[o]=Es(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&u(e),wt(t,n)}}}function wa(i){let e,l='<div class="empty-icon">ðŸªž</div> <div class="empty-title">No reflections yet</div> <div class="empty-description">Reflections are generated by the boredom service and reflector agent. Trigger the reflector to populate this section.</div>';return{c(){e=h("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1fmvcg3"&&(e.innerHTML=l),this.h()},h(){a(e,"class","empty-state")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Cs(i){let e;function l(s,o){return s[122].relPath?Ta:ya}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ya(i){let e,l,t=i[122].content+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[1]&4&&t!==(t=s[122].content+"")&&fe(n,t)},d(s){s&&u(e)}}}function Ta(i){let e;function l(s,o){return s[22][s[122].relPath]?.status==="loading"?Ea:s[22][s[122].relPath]?.status==="error"?Sa:Ca}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Ca(i){let e,l,t=(i[22][i[122].relPath]?.content??i[122].content)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4194304|o[1]&4&&t!==(t=(s[22][s[122].relPath]?.content??s[122].content)+"")&&fe(n,t)},d(s){s&&u(e)}}}function Sa(i){let e,l,t=i[22][i[122].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load reflection: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load reflection: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4194304|o[1]&4&&t!==(t=s[22][s[122].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function Ea(i){let e,l="Loading reflectionâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-zw0mch"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Ss(i){let e,l=i[122].validation.status+"",t,n;return{c(){e=h("div"),t=x(l),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);t=Z(o,l),o.forEach(u),this.h()},h(){a(e,"class",n="event-valid "+i[122].validation.status+" svelte-amswgv")},m(s,o){b(s,e,o),c(e,t)},p(s,o){o[1]&4&&l!==(l=s[122].validation.status+"")&&fe(t,l),o[1]&4&&n!==(n="event-valid "+s[122].validation.status+" svelte-amswgv")&&a(e,"class",n)},d(s){s&&u(e)}}}function Es(i){let e,l,t,n,s=Mt(i[122].content)+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',O,$,g,L,D,E,I,T,Y,W,z,V,J=new Date(i[122].timestamp).toLocaleString()+"",ne,re,Q,G,ie;function ae(){return i[87](i[122])}function he(){return i[88](i[122])}function oe(){return i[89](i[122])}function se(){return i[90](i[122])}let j=i[124]&&Cs(i),K=i[122].validation?.status&&Ss(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),C=h("div"),N=h("button"),N.innerHTML=U,O=P(),$=h("button"),g=x("+"),D=P(),E=h("button"),I=x("âˆ’"),Y=P(),j&&j.c(),W=P(),z=h("div"),V=h("div"),ne=x(J),re=P(),K&&K.c(),Q=P(),this.h()},l(te){e=d(te,"DIV",{class:!0});var q=p(e);l=d(q,"DIV",{class:!0});var ce=p(l);t=d(ce,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var ue=p(t);n=d(ue,"SPAN",{class:!0});var Ie=p(n);o=Z(Ie,s),Ie.forEach(u),r=A(ue),f=d(ue,"SPAN",{class:!0,"aria-hidden":!0});var me=p(f);_=Z(me,v),me.forEach(u),k=A(ue),S=d(ue,"SPAN",{class:!0});var De=p(S);R=Z(De,y),De.forEach(u),ue.forEach(u),M=A(ce),C=d(ce,"DIV",{class:!0});var Ne=p(C);N=d(Ne,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(N)!=="svelte-162i9p"&&(N.innerHTML=U),O=A(Ne),$=d(Ne,"BUTTON",{class:!0,title:!0});var ze=p($);g=Z(ze,"+"),ze.forEach(u),D=A(Ne),E=d(Ne,"BUTTON",{class:!0,title:!0});var We=p(E);I=Z(We,"âˆ’"),We.forEach(u),Ne.forEach(u),ce.forEach(u),Y=A(q),j&&j.l(q),W=A(q),z=d(q,"DIV",{class:!0});var Pe=p(z);V=d(Pe,"DIV",{class:!0});var Ce=p(V);ne=Z(Ce,J),Ce.forEach(u),re=A(Pe),K&&K.l(Pe),Pe.forEach(u),Q=A(q),q.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(N,"class","val-btn edit svelte-amswgv"),a(N,"title","Edit reflection"),a($,"class","val-btn good svelte-amswgv"),a($,"title","Mark as correct"),$.disabled=L=i[26][i[122].relPath]||i[122].validation?.status==="correct",a(E,"class","val-btn bad svelte-amswgv"),a(E,"title","Delete memory"),E.disabled=T=i[27][i[122].relPath],a(C,"class","validation-controls svelte-amswgv"),a(l,"class","event-card-header"),a(V,"class","event-card-time"),a(z,"class","event-card-meta"),a(e,"class","event-card")},m(te,q){b(te,e,q),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(l,M),c(l,C),c(C,N),c(C,O),c(C,$),c($,g),c(C,D),c(C,E),c(E,I),c(e,Y),j&&j.m(e,null),c(e,W),c(e,z),c(z,V),c(V,ne),c(z,re),K&&K.m(z,null),c(e,Q),G||(ie=[de(t,"click",ae),de(N,"click",Jn(he)),de($,"click",oe),de(E,"click",se)],G=!0)},p(te,q){i=te,q[1]&4&&s!==(s=Mt(i[122].content)+"")&&fe(o,s),q[0]&2097152|q[1]&4&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),q[0]&2097152|q[1]&4&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),q[0]&2097152|q[1]&4&&B!==(B=i[124])&&a(t,"aria-expanded",B),q[0]&67108864|q[1]&4&&L!==(L=i[26][i[122].relPath]||i[122].validation?.status==="correct")&&($.disabled=L),q[0]&134217728|q[1]&4&&T!==(T=i[27][i[122].relPath])&&(E.disabled=T),i[124]?j?j.p(i,q):(j=Cs(i),j.c(),j.m(e,W)):j&&(j.d(1),j=null),q[1]&4&&J!==(J=new Date(i[122].timestamp).toLocaleString()+"")&&fe(ne,J),i[122].validation?.status?K?K.p(i,q):(K=Ss(i),K.c(),K.m(z,null)):K&&(K.d(1),K=null)},d(te){te&&u(e),j&&j.d(),K&&K.d(),G=!1,mt(ie)}}}function Ms(i){let e;function l(s,o){return s[122].relPath?Ia:Ma}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Ma(i){let e,l,t=i[122].content+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[1]&8&&t!==(t=s[122].content+"")&&fe(n,t)},d(s){s&&u(e)}}}function Ia(i){let e;function l(s,o){return s[22][s[122].relPath]?.status==="loading"?Na:s[22][s[122].relPath]?.status==="error"?La:Da}let t=l(i),n=t(i);return{c(){n.c(),e=H()},l(s){n.l(s),e=H()},m(s,o){n.m(s,o),b(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function Da(i){let e,l,t=(i[22][i[122].relPath]?.content??i[122].content)+"",n;return{c(){e=h("div"),l=h("pre"),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=d(o,"PRE",{class:!0});var r=p(l);n=Z(r,t),r.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","svelte-amswgv"),a(e,"class","event-body svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(l,n)},p(s,o){o[0]&4194304|o[1]&8&&t!==(t=(s[22][s[122].relPath]?.content??s[122].content)+"")&&fe(n,t)},d(s){s&&u(e)}}}function La(i){let e,l,t=i[22][i[122].relPath]?.error+"",n;return{c(){e=h("div"),l=x("Failed to load memory: "),n=x(t),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);l=Z(o,"Failed to load memory: "),n=Z(o,t),o.forEach(u),this.h()},h(){a(e,"class","event-body error svelte-amswgv")},m(s,o){b(s,e,o),c(e,l),c(e,n)},p(s,o){o[0]&4194304|o[1]&8&&t!==(t=s[22][s[122].relPath]?.error+"")&&fe(n,t)},d(s){s&&u(e)}}}function Na(i){let e,l="Loading full memoryâ€¦";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-hfkmvm"&&(e.textContent=l),this.h()},h(){a(e,"class","event-body loading svelte-amswgv")},m(t,n){b(t,e,n)},p:m,d(t){t&&u(e)}}}function Is(i){let e,l=i[122].validation.status+"",t,n;return{c(){e=h("div"),t=x(l),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=p(e);t=Z(o,l),o.forEach(u),this.h()},h(){a(e,"class",n="event-valid "+i[122].validation.status+" svelte-amswgv")},m(s,o){b(s,e,o),c(e,t)},p(s,o){o[1]&8&&l!==(l=s[122].validation.status+"")&&fe(t,l),o[1]&8&&n!==(n="event-valid "+s[122].validation.status+" svelte-amswgv")&&a(e,"class",n)},d(s){s&&u(e)}}}function Ds(i){let e,l,t,n,s=Mt(i[122].content)+"",o,r,f,v=i[124]?"â–²":"â–¼",_,k,S,y=i[124]?"Collapse memory":"Expand memory",R,B,M,C,N,U='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',O,$,g,L,D,E,I,T,Y,W,z,V,J=new Date(i[122].timestamp).toLocaleString()+"",ne,re,Q,G,ie;function ae(){return i[83](i[122])}function he(){return i[84](i[122])}function oe(){return i[85](i[122])}function se(){return i[86](i[122])}let j=i[124]&&Ms(i),K=i[122].validation?.status&&Is(i);return{c(){e=h("div"),l=h("div"),t=h("button"),n=h("span"),o=x(s),r=P(),f=h("span"),_=x(v),k=P(),S=h("span"),R=x(y),M=P(),C=h("div"),N=h("button"),N.innerHTML=U,O=P(),$=h("button"),g=x("+"),D=P(),E=h("button"),I=x("âˆ’"),Y=P(),j&&j.c(),W=P(),z=h("div"),V=h("div"),ne=x(J),re=P(),K&&K.c(),Q=P(),this.h()},l(te){e=d(te,"DIV",{class:!0});var q=p(e);l=d(q,"DIV",{class:!0});var ce=p(l);t=d(ce,"BUTTON",{class:!0,type:!0,"aria-expanded":!0});var ue=p(t);n=d(ue,"SPAN",{class:!0});var Ie=p(n);o=Z(Ie,s),Ie.forEach(u),r=A(ue),f=d(ue,"SPAN",{class:!0,"aria-hidden":!0});var me=p(f);_=Z(me,v),me.forEach(u),k=A(ue),S=d(ue,"SPAN",{class:!0});var De=p(S);R=Z(De,y),De.forEach(u),ue.forEach(u),M=A(ce),C=d(ce,"DIV",{class:!0});var Ne=p(C);N=d(Ne,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),X(N)!=="svelte-adk0u1"&&(N.innerHTML=U),O=A(Ne),$=d(Ne,"BUTTON",{class:!0,title:!0});var ze=p($);g=Z(ze,"+"),ze.forEach(u),D=A(Ne),E=d(Ne,"BUTTON",{class:!0,title:!0});var We=p(E);I=Z(We,"âˆ’"),We.forEach(u),Ne.forEach(u),ce.forEach(u),Y=A(q),j&&j.l(q),W=A(q),z=d(q,"DIV",{class:!0});var Pe=p(z);V=d(Pe,"DIV",{class:!0});var Ce=p(V);ne=Z(Ce,J),Ce.forEach(u),re=A(Pe),K&&K.l(Pe),Pe.forEach(u),Q=A(q),q.forEach(u),this.h()},h(){a(n,"class","event-card-title"),a(f,"class","event-toggle-icon svelte-amswgv"),a(f,"aria-hidden","true"),a(S,"class","sr-only svelte-amswgv"),a(t,"class","event-title-button svelte-amswgv"),a(t,"type","button"),a(t,"aria-expanded",B=i[124]),a(N,"class","val-btn edit svelte-amswgv"),a(N,"title","Edit memory"),a($,"class","val-btn good svelte-amswgv"),a($,"title","Mark as correct"),$.disabled=L=i[26][i[122].relPath]||i[122].validation?.status==="correct",a(E,"class","val-btn bad svelte-amswgv"),a(E,"title","Delete memory"),E.disabled=T=i[27][i[122].relPath],a(C,"class","validation-controls svelte-amswgv"),a(l,"class","event-card-header"),a(V,"class","event-card-time"),a(z,"class","event-card-meta"),a(e,"class","event-card")},m(te,q){b(te,e,q),c(e,l),c(l,t),c(t,n),c(n,o),c(t,r),c(t,f),c(f,_),c(t,k),c(t,S),c(S,R),c(l,M),c(l,C),c(C,N),c(C,O),c(C,$),c($,g),c(C,D),c(C,E),c(E,I),c(e,Y),j&&j.m(e,null),c(e,W),c(e,z),c(z,V),c(V,ne),c(z,re),K&&K.m(z,null),c(e,Q),G||(ie=[de(t,"click",ae),de(N,"click",Jn(he)),de($,"click",oe),de(E,"click",se)],G=!0)},p(te,q){i=te,q[1]&8&&s!==(s=Mt(i[122].content)+"")&&fe(o,s),q[0]&2097152|q[1]&8&&v!==(v=i[124]?"â–²":"â–¼")&&fe(_,v),q[0]&2097152|q[1]&8&&y!==(y=i[124]?"Collapse memory":"Expand memory")&&fe(R,y),q[0]&2097152|q[1]&8&&B!==(B=i[124])&&a(t,"aria-expanded",B),q[0]&67108864|q[1]&8&&L!==(L=i[26][i[122].relPath]||i[122].validation?.status==="correct")&&($.disabled=L),q[0]&134217728|q[1]&8&&T!==(T=i[27][i[122].relPath])&&(E.disabled=T),i[124]?j?j.p(i,q):(j=Ms(i),j.c(),j.m(e,W)):j&&(j.d(1),j=null),q[1]&8&&J!==(J=new Date(i[122].timestamp).toLocaleString()+"")&&fe(ne,J),i[122].validation?.status?K?K.p(i,q):(K=Is(i),K.c(),K.m(z,null)):K&&(K.d(1),K=null)},d(te){te&&u(e),j&&j.d(),K&&K.d(),G=!1,mt(ie)}}}function Aa(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Pa(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Va(i){let e,l="Loading persona editor...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-yfl91e"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Oa(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:za,then:$a,catch:Ha,value:121,blocks:[,,,]};return nt(i[35]("TrainingMonitor"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ra(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Wa,then:qa,catch:ja,value:121,blocks:[,,,]};return nt(i[35]("SystemControls"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ba(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Ya,then:Ja,catch:Ga,value:121,blocks:[,,,]};return nt(i[35]("DatasetManagement"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ua(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Xa,then:Ka,catch:Qa,value:121,blocks:[,,,]};return nt(i[35]("TrainingHistory"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Fa(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:ec,then:xa,catch:Za,value:121,blocks:[,,,]};return nt(i[35]("TrainingWizard"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ha(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function $a(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function za(i){let e,l="Loading training monitor...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-l2y1o5"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function ja(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function qa(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Wa(i){let e,l="Loading system controls...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-vdj1zy"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Ga(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ja(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Ya(i){let e,l="Loading dataset management...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1c3zn6k"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Qa(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ka(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Xa(i){let e,l="Loading training history...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-98fvaz"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Za(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function xa(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function ec(i){let e,l="Loading training wizard...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-95twla"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function tc(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:ic,then:oc,catch:sc,value:121,blocks:[,,,]};return nt(i[35]("VoiceSettings"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function nc(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:cc,then:ac,catch:rc,value:121,blocks:[,,,]};return nt(i[35]("VoiceTrainingWidget"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function lc(i){let e,l,t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:dc,then:fc,catch:uc,value:121,blocks:[,,,]};nt(i[35]("AudioUpload"),n);let s={ctx:i,current:null,token:null,hasCatch:!1,pending:_c,then:vc,catch:hc,value:121,blocks:[,,,]};return nt(i[35]("AudioRecorder"),s),{c(){e=h("div"),n.block.c(),l=P(),s.block.c(),this.h()},l(o){e=d(o,"DIV",{class:!0});var r=p(e);n.block.l(r),l=A(r),s.block.l(r),r.forEach(u),this.h()},h(){a(e,"class","audio-grid svelte-amswgv")},m(o,r){b(o,e,r),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=l,c(e,l),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,t=!0},p(o,r){i=o,lt(n,i,r),lt(s,i,r)},i(o){t||(ee(n.block),ee(s.block),t=!0)},o(o){for(let r=0;r<3;r+=1){const f=n.blocks[r];le(f)}for(let r=0;r<3;r+=1){const f=s.blocks[r];le(f)}t=!1},d(o){o&&u(e),n.block.d(),n.token=null,n=null,s.block.d(),s.token=null,s=null}}}function sc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function oc(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function ic(i){let e,l="Loading settings...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-3kyavm"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function rc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ac(i){let e,l,t;var n=i[121];function s(o,r){return{props:{provider:o[20]}}}return n&&(e=Se(n,s(i))),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s(o)),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}else if(n){const f={};r[0]&1048576&&(f.provider=o[20]),e.$set(f)}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function cc(i){let e,l="Loading voice training...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-qdk835"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function uc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function fc(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function dc(i){let e,l="Loading...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-18if4hz"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function hc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function vc(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function _c(i){let e,l="Loading...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-18if4hz"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function mc(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:wc,then:kc,catch:bc,value:121,blocks:[,,,]};return nt(i[35]("ApprovalQueue"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function pc(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Cc,then:Tc,catch:yc,value:121,blocks:[,,,]};return nt(i[35]("TaskManager"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function gc(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Mc,then:Ec,catch:Sc,value:121,blocks:[,,,]};return nt(i[35]("Dashboard"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function bc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function kc(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function wc(i){let e,l="Loading approvals...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-kato2f"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function yc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Tc(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Cc(i){let e,l="Loading tasks...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1hexr1h"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Sc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ec(i){let e,l,t;var n=i[121];function s(o,r){return{}}return n&&(e=Se(n,s())),{c(){e&&ye(e.$$.fragment),l=H()},l(o){e&&qe(e.$$.fragment,o),l=H()},m(o,r){e&&we(e,o,r),b(o,l,r),t=!0},p(o,r){if(n!==(n=o[121])){if(e){Re();const f=e;le(f.$$.fragment,1,0,()=>{ke(f,1)}),Be()}n?(e=Se(n,s()),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,l.parentNode,l)):e=null}},i(o){t||(e&&ee(e.$$.fragment,o),t=!0)},o(o){e&&le(e.$$.fragment,o),t=!1},d(o){o&&u(l),e&&ke(e,o)}}}function Mc(i){let e,l="Loading dashboard...";return{c(){e=h("div"),e.textContent=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-pydp43"&&(e.textContent=l),this.h()},h(){a(e,"class","loading-placeholder svelte-amswgv")},m(t,n){b(t,e,n)},p:m,i:m,o:m,d(t){t&&u(e)}}}function Ls(i){let e,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Lc,then:Dc,catch:Ic,value:121,blocks:[,,,]};return nt(i[35]("MemoryEditor"),t),{c(){e=H(),t.block.c()},l(n){e=H(),t.block.l(n)},m(n,s){b(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,s){i=n,lt(t,i,s)},i(n){l||(ee(t.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const o=t.blocks[s];le(o)}l=!1},d(n){n&&u(e),t.block.d(n),t.token=null,t=null}}}function Ic(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Dc(i){let e,l,t,n;function s(f){i[113](f)}var o=i[121];function r(f,v){let _={relPath:f[24],memoryType:f[25]};return f[23]!==void 0&&(_.isOpen=f[23]),{props:_}}return o&&(e=Se(o,r(i)),$t.push(()=>zn(e,"isOpen",s)),e.$on("saved",i[40]),e.$on("close",i[114])),{c(){e&&ye(e.$$.fragment),t=H()},l(f){e&&qe(e.$$.fragment,f),t=H()},m(f,v){e&&we(e,f,v),b(f,t,v),n=!0},p(f,v){if(o!==(o=f[121])){if(e){Re();const _=e;le(_.$$.fragment,1,0,()=>{ke(_,1)}),Be()}o?(e=Se(o,r(f)),$t.push(()=>zn(e,"isOpen",s)),e.$on("saved",f[40]),e.$on("close",f[114]),ye(e.$$.fragment),ee(e.$$.fragment,1),we(e,t.parentNode,t)):e=null}else if(o){const _={};v[0]&16777216&&(_.relPath=f[24]),v[0]&33554432&&(_.memoryType=f[25]),!l&&v[0]&8388608&&(l=!0,_.isOpen=f[23],Vs(()=>l=!1)),e.$set(_)}},i(f){n||(e&&ee(e.$$.fragment,f),n=!0)},o(f){e&&le(e.$$.fragment,f),n=!1},d(f){f&&u(t),e&&ke(e,f)}}}function Lc(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Nc(i){let e,l,t,n,s,o;const r=[yi,wi,ki,bi,gi,pi,mi,_i,vi],f=[];function v(k,S){return k[9]==="chat"?0:k[9]==="dashboard"?1:k[9]==="voice"?2:k[9]==="training"?3:k[9]==="persona"?4:k[9]==="system"?5:k[9]==="terminal"?6:k[9]==="agency"?7:k[9]==="system-coder"?8:-1}~(l=v(i))&&(t=f[l]=r[l](i));let _=i[23]&&Ls(i);return{c(){e=h("div"),t&&t.c(),n=P(),_&&_.c(),s=H(),this.h()},l(k){e=d(k,"DIV",{class:!0});var S=p(e);t&&t.l(S),S.forEach(u),n=A(k),_&&_.l(k),s=H(),this.h()},h(){a(e,"class","center-content svelte-amswgv")},m(k,S){b(k,e,S),~l&&f[l].m(e,null),b(k,n,S),_&&_.m(k,S),b(k,s,S),o=!0},p(k,S){let y=l;l=v(k),l===y?~l&&f[l].p(k,S):(t&&(Re(),le(f[y],1,1,()=>{f[y]=null}),Be()),~l?(t=f[l],t?t.p(k,S):(t=f[l]=r[l](k),t.c()),ee(t,1),t.m(e,null)):t=null),k[23]?_?(_.p(k,S),S[0]&8388608&&ee(_,1)):(_=Ls(k),_.c(),ee(_,1),_.m(s.parentNode,s)):_&&(Re(),le(_,1,1,()=>{_=null}),Be())},i(k){o||(ee(t),ee(_),o=!0)},o(k){le(t),le(_),o=!1},d(k){k&&(u(e),u(n),u(s)),~l&&f[l].d(),_&&_.d(k)}}}const Vt=50;function qt(i,e){if(!e.trim())return i;const l=e.toLowerCase();return i.filter(t=>{const n=(t.content||"").toLowerCase(),s=(t.tags||[]).join(" ").toLowerCase();return n.includes(l)||s.includes(l)})}function Wt(i,e,l){const t=(e-1)*l;return i.slice(t,t+l)}function Rt(i){return i.relPath?i.relPath:i.id?i.id:"name"in i&&typeof i.name=="string"?i.name:null}function Mt(i="",e=160){return i?i.length>e?`${i.slice(0,e)}â€¦`:i:""}function Ac(i,e,l){let t,n,s,o,r,f,v,_,k,S,y,R,B,M,C,N,U,O;ft(i,Xn,w=>l(9,O=w));let $=!1;const g=new Map;async function L(w){if(g.has(w))return g.get(w);let F;switch(w){case"Dashboard":F=await He(()=>import("./Dashboard.sQi7MIt0.js"),__vite__mapDeps([6,1]));break;case"TaskManager":F=await He(()=>import("./TaskManager.DKF5Dxlm.js"),__vite__mapDeps([7,1,8,5]));break;case"ApprovalQueue":F=await He(()=>import("./ApprovalQueue.BEZSdcx7.js"),__vite__mapDeps([9,1,8,5,10]));break;case"Terminal":F=await He(()=>import("./Terminal.D1ni3Z8b.js"),__vite__mapDeps([11,1]));break;case"MemoryControls":F=await He(()=>import("./MemoryControls.DwM1JVCn.js"),__vite__mapDeps([12,1]));break;case"AudioUpload":F=await He(()=>import("./AudioUpload.BMbA9cUr.js"),__vite__mapDeps([13,1,14]));break;case"AudioRecorder":F=await He(()=>import("./AudioRecorder.DnwhuuBC.js"),__vite__mapDeps([15,1]));break;case"VoiceTrainingWidget":F=await He(()=>import("./VoiceTrainingWidget.Vkzonhk3.js"),__vite__mapDeps([16,1,17]));break;case"VoiceSettings":F=await He(()=>import("./VoiceSettings.DgajoOwk.js"),__vite__mapDeps([18,1,19,5,8,20,21,22,23,24]));break;case"AdapterDashboard":F=await He(()=>import("./AdapterDashboard.B4hXyDEB.js"),__vite__mapDeps([25,1,26,27]));break;case"TrainingMonitor":F=await He(()=>import("./TrainingMonitor.JsyWuucy.js"),__vite__mapDeps([28,1,29]));break;case"OnboardingWizard":F=await He(()=>import("./OnboardingWizard.C3Wcx7rB.js"),__vite__mapDeps([30,1,31]));break;case"TrainingWizard":F=await He(()=>import("./TrainingWizard.DKZ2sbdU.js"),__vite__mapDeps([32,1,33]));break;case"TrainingHistory":F=await He(()=>import("./TrainingHistory.Dw8MX1ju.js"),__vite__mapDeps([34,1,35]));break;case"DatasetManagement":F=await He(()=>import("./DatasetManagement.BRLgkI4G.js"),__vite__mapDeps([36,1,26,37]));break;case"SystemControls":F=await He(()=>import("./SystemControls.IEhJK_MP.js"),__vite__mapDeps([38,1,26,39]));break;case"Lifeline":F=await He(()=>import("./Lifeline.6IWMOYI6.js"),__vite__mapDeps([40,1,41]));break;case"OvernightLearnings":F=await He(()=>import("./OvernightLearnings.BWSIS0j5.js"),__vite__mapDeps([42,1,43,5]));break;case"SystemSettings":F=await He(()=>import("./SystemSettings.BduLY-r0.js"),__vite__mapDeps([44,1,45]));break;case"BackendSettings":F=await He(()=>import("./BackendSettings.C8irhXHr.js"),__vite__mapDeps([46,1,47,21,5,22,23,48]));break;case"SecuritySettings":F=await He(()=>import("./SecuritySettings.BK2SyQjt.js"),__vite__mapDeps([49,1,19,5,50]));break;case"NetworkSettings":F=await He(()=>import("./NetworkSettings.BKQbY9pH.js"),__vite__mapDeps([51,1,52]));break;case"ChatSettings":F=await He(()=>import("./ChatSettings.Dne0_BHX.js"),__vite__mapDeps([53,1]));break;case"MemoryEditor":F=await He(()=>import("./MemoryEditor.CfwSt3n6.js"),__vite__mapDeps([54,1]));break;case"PersonaGenerator":F=await He(()=>import("./PersonaGenerator.DVURBmex.js"),__vite__mapDeps([55,1,56]));break;case"PersonaEditor":F=await He(()=>import("./PersonaEditor.BGilrD59.js"),__vite__mapDeps([57,1,58]));break;case"AddonsManager":F=await He(()=>import("./AddonsManager.DOXFmHtL.js"),__vite__mapDeps([59,1,60]));break;case"SchedulerSettings":F=await He(()=>import("./SchedulerSettings.EPUGNoKl.js"),__vite__mapDeps([61,1,62,63]));break;case"ProfileLocation":F=await He(()=>import("./ProfileLocation.BFTEhEan.js"),__vite__mapDeps([64,1,65]));break;case"ServerSettings":F=await He(()=>import("./ServerSettings.DVRlfntk.js"),__vite__mapDeps([66,1,21,5,22,67,23,47,68,19,8,20,69]));break;case"TerminalManager":F=await He(()=>import("./TerminalManager.CSiQX4tE.js"),__vite__mapDeps([70,1,4,5]));break;case"AgencyDashboard":F=await He(()=>import("./AgencyDashboard.DkMN3HjB.js"),__vite__mapDeps([71,1,8,5,72]));break;case"SystemCoderDashboard":F=await He(()=>import("./SystemCoderDashboard.CGh0Zl2O.js"),__vite__mapDeps([73,1,5,74]));break;default:throw new Error(`Unknown component: ${w}`)}const pe=F.default;return g.set(w,pe),pe}let D=[],E=[],I=[],T=[],Y=[],W=[],z=[],V=[],J=[],ne=!1,re=null,Q="",G=1,ie="editor",ae="episodic",he="upload",oe="wizard",se="settings",j="overview",K="rvc",te={},q={},ce=!1,ue="",Ie="Memory";async function me(){try{const w=await Xe("/api/voice-settings");if(w.ok){const F=await w.json();l(20,K=F.provider||"rvc")}}catch(w){console.error("[CenterContent] Error loading voice provider:",w)}}async function De(){if(!(O!=="persona"||ie!=="memory")){l(15,ne=!0),l(16,re=null);try{const w=await Xe("/api/memories_all?limit=100");if(!w.ok)throw new Error(`HTTP ${w.status}`);const F=await w.json(),pe=Array.isArray(F.episodic)?F.episodic:[],xe=Array.isArray(F.reflections)?F.reflections:[],Pt=Array.isArray(F.dreams)?F.dreams:[];l(11,E=Array.isArray(F.tasks)?F.tasks:[]),l(12,I=Array.isArray(F.curated)?F.curated:[]),l(13,V=Array.isArray(F.curiosityQuestions)?F.curiosityQuestions:[]),console.log("--- Memory Buckets Fetched ---",{episodicEvents:pe,reflections:xe,dreams:Pt}),l(0,D=pe),l(3,z=xe),l(43,W=Pt),l(1,T=D.filter(et=>et.tags&&(et.tags.includes("ingested")||et.tags.includes("ai"))||et.links&&et.links.some(kt=>kt.type==="source"))),l(2,Y=D.filter(et=>et.tags&&(et.tags.includes("audio")||et.tags.includes("transcript")))),console.log("--- Filtered Audio Memories ---",Y);const jt=[...D,...z,...T,...Y,...W],Lt=new Set(jt.map(et=>Rt(et)).filter(et=>!!et));l(21,te=Object.fromEntries(Object.entries(te).filter(([et])=>Lt.has(et)))),l(22,q=Object.fromEntries(Object.entries(q).filter(([et])=>Lt.has(et))))}catch(w){console.error("Failed to load events:",w),l(16,re=w.message)}finally{l(15,ne=!1)}}}async function Ne(){try{const w=await Xe("/api/functions?sortBy=qualityScore&sortOrder=desc");if(!w.ok)throw new Error(`HTTP ${w.status}`);const F=await w.json();l(14,J=Array.isArray(F.functions)?F.functions:[])}catch(w){console.error("Failed to load functions:",w),l(16,re=w.message)}}function ze(w){const F=Rt(w);if(console.log("[toggleExpanded]",{key:F,item:w,currentlyExpanded:te[F||""]}),!F)return;const pe=!te[F];l(21,te={...te,[F]:pe}),console.log("[toggleExpanded] Updated expanded state:",{key:F,next:pe,hasRelPath:!!w.relPath}),pe&&w.relPath&&(console.log("[toggleExpanded] Loading memory content for:",w.relPath),Ce(w.relPath))}function We(w,F="Memory"){l(24,ue=w),l(25,Ie=F),l(23,ce=!0)}function Pe(){De()}async function Ce(w){let F=q[w];if(!(F&&(F.status==="loading"||F.status==="ready"))){F?(F.status="loading",delete F.error,delete F.content,l(22,q={...q})):(F={status:"loading"},l(22,q={...q,[w]:F}));try{const pe=await Xe(`/api/memory-content?relPath=${encodeURIComponent(w)}`),xe=await pe.json();if(!pe.ok||!xe.success)throw new Error(xe?.error||"Failed to load memory content");F.status="ready",F.content=xe.content,l(22,q={...q})}catch(pe){F.status="error",F.error=pe.message,delete F.content,l(22,q={...q})}}}let Le={},Ee={};async function Oe(w,F){if(!Le[w.relPath]){l(26,Le={...Le,[w.relPath]:!0});try{const pe=await Xe("/api/memories/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({relPath:w.relPath,status:F})}),xe=await pe.json();if(!pe.ok||!xe.success)throw new Error(xe.error||"Failed to set validation");w.validation={status:F}}catch(pe){console.error(pe),alert(pe.message)}finally{l(26,Le={...Le,[w.relPath]:!1})}}}async function Qe(w){if(!Ee[w.relPath]){l(27,Ee={...Ee,[w.relPath]:!0});try{const F=await Xe("/api/memories/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({relPath:w.relPath})}),pe=await F.json();if(!F.ok||!pe.success)throw new Error(pe.error||"Failed to delete memory");l(0,D=D.filter(xe=>xe.relPath!==w.relPath))}catch(F){console.error(F),alert(F.message)}finally{l(27,Ee={...Ee,[w.relPath]:!1})}}}function st(w){Qe(w)}Os(()=>{l(10,$=Qt())});const Ae=()=>l(19,j="overview"),yt=()=>l(19,j="tasks"),at=()=>l(19,j="approvals"),dt=()=>l(8,he="upload"),Ct=()=>{l(8,he="training"),me()},Je=()=>l(8,he="settings"),Ye=()=>l(17,oe="wizard"),Ze=()=>l(17,oe="datasets"),Te=()=>l(17,oe="manage"),Ke=()=>l(17,oe="system"),bt=()=>l(17,oe="monitor"),ct=()=>l(6,ie="editor"),Tt=()=>l(6,ie="memory"),pt=()=>l(6,ie="generator"),It=()=>l(7,ae="episodic"),ge=()=>l(7,ae="reflections"),Me=()=>l(7,ae="tasks"),rt=()=>l(7,ae="curated"),ut=()=>l(7,ae="ai-ingestor"),gt=()=>l(7,ae="audio"),St=()=>l(7,ae="dreams"),Nt=()=>l(7,ae="curiosity"),Dt=()=>l(7,ae="functions");function _e(){Q=this.value,l(4,Q)}const be=()=>l(4,Q=""),$e=()=>l(5,G=1),Ve=()=>l(5,G=Math.max(1,G-1)),je=()=>l(5,G=Math.min(N,G+1)),ht=()=>l(5,G=N),At=w=>ze(w),Kt=w=>We(w.relPath,"Memory"),Xt=w=>Oe(w,"correct"),Zt=w=>st(w),cn=w=>ze(w),un=w=>We(w.relPath,"Reflection"),xt=w=>Oe(w,"correct"),fn=w=>st(w),dn=w=>ze(w),hn=w=>ze(w),vn=w=>ze(w),_n=w=>Oe(w,"correct"),mn=w=>st(w),pn=w=>ze(w),gn=w=>Oe(w,"correct"),bn=w=>st(w),kn=w=>ze(w),wn=w=>We(w.relPath,"Dream"),yn=w=>We(w.relPath,"Question"),Tn=()=>{Xn.set("chat")},Cn=()=>l(18,se="chat"),Sn=()=>l(18,se="settings"),En=()=>l(18,se="backend"),Mn=()=>l(18,se="security"),In=()=>l(18,se="storage"),Dn=()=>l(18,se="network"),Ln=()=>l(18,se="server"),Nn=()=>l(18,se="addons"),An=()=>l(18,se="scheduler"),Pn=()=>l(18,se="lifeline");function Vn(w){ce=w,l(23,ce)}const On=()=>l(23,ce=!1);return i.$$.update=()=>{if(i.$$.dirty[0]&512&&O!=="persona"&&l(6,ie="editor"),i.$$.dirty[0]&576&&O==="persona"&&ie==="memory"&&(De(),Ne()),i.$$.dirty[0]&512&&O!=="voice"&&l(8,he="upload"),i.$$.dirty[0]&768&&O==="voice"&&he==="training"&&me(),i.$$.dirty[0]&512&&O!=="training"&&l(17,oe="datasets"),i.$$.dirty[0]&512&&O!=="system"&&l(18,se="settings"),i.$$.dirty[0]&512&&O!=="dashboard"&&l(19,j="overview"),i.$$.dirty[0]&144&&(ae||Q!==void 0)&&l(5,G=1),i.$$.dirty[0]&17&&l(48,t=qt(D,Q)),i.$$.dirty[0]&32|i.$$.dirty[1]&131072&&l(34,n=Wt(t,G,Vt)),i.$$.dirty[1]&131072&&l(53,s=Math.ceil(t.length/Vt)),i.$$.dirty[0]&24&&l(47,o=qt(z,Q)),i.$$.dirty[0]&32|i.$$.dirty[1]&65536&&l(33,r=Wt(o,G,Vt)),i.$$.dirty[1]&65536&&l(52,f=Math.ceil(o.length/Vt)),i.$$.dirty[0]&16|i.$$.dirty[1]&4096&&l(46,v=qt(W,Q)),i.$$.dirty[0]&32|i.$$.dirty[1]&32768&&l(32,_=Wt(v,G,Vt)),i.$$.dirty[1]&32768&&l(51,k=Math.ceil(v.length/Vt)),i.$$.dirty[0]&18&&l(45,S=qt(T,Q)),i.$$.dirty[0]&32|i.$$.dirty[1]&16384&&l(31,y=Wt(S,G,Vt)),i.$$.dirty[1]&16384&&l(50,R=Math.ceil(S.length/Vt)),i.$$.dirty[0]&20&&l(44,B=qt(Y,Q)),i.$$.dirty[0]&32|i.$$.dirty[1]&8192&&l(30,M=Wt(B,G,Vt)),i.$$.dirty[1]&8192&&l(49,C=Math.ceil(B.length/Vt)),i.$$.dirty[0]&128|i.$$.dirty[1]&8126464&&l(29,N=(()=>{switch(ae){case"episodic":return s;case"reflections":return f;case"dreams":return k;case"ai-ingestor":return R;case"audio":return C;default:return 1}})()),i.$$.dirty[0]&128|i.$$.dirty[1]&253952&&l(28,U=(()=>{switch(ae){case"episodic":return t.length;case"reflections":return o.length;case"dreams":return v.length;case"ai-ingestor":return S.length;case"audio":return B.length;default:return 0}})()),i.$$.dirty[0]&512&&O&&O!=="chat")switch(O){case"dashboard":L("Dashboard"),L("TaskManager"),L("ApprovalQueue");break;case"voice":L("AudioUpload"),L("AudioRecorder"),L("VoiceTrainingWidget"),L("VoiceSettings");break;case"training":L("TrainingWizard"),L("TrainingHistory"),L("DatasetManagement"),L("SystemControls"),L("TrainingMonitor");break;case"persona":L("PersonaEditor"),L("MemoryControls"),L("PersonaGenerator");break;case"system":L("ChatSettings"),L("SystemSettings"),L("SecuritySettings"),L("ProfileLocation"),L("NetworkSettings"),L("AddonsManager"),L("Lifeline"),L("SchedulerSettings");break;case"terminal":L("TerminalManager");break}},[D,T,Y,z,Q,G,ie,ae,he,O,$,E,I,V,J,ne,re,oe,se,j,K,te,q,ce,ue,Ie,Le,Ee,U,N,M,y,_,r,n,L,me,De,ze,We,Pe,Oe,st,W,B,S,v,o,t,C,R,k,f,s,Ae,yt,at,dt,Ct,Je,Ye,Ze,Te,Ke,bt,ct,Tt,pt,It,ge,Me,rt,ut,gt,St,Nt,Dt,_e,be,$e,Ve,je,ht,At,Kt,Xt,Zt,cn,un,xt,fn,dn,hn,vn,_n,mn,pn,gn,bn,kn,wn,yn,Tn,Cn,Sn,En,Mn,In,Dn,Ln,Nn,An,Pn,Vn,On]}class Wc extends Gt{constructor(e){super(),Jt(this,e,Ac,Nc,Yt,{},null,[-1,-1,-1,-1,-1,-1])}}export{Wc as C,Ot as T,Us as a,Ht as b,Bn as c,Fs as d,Hc as e,qc as f,jc as g,zc as h,$c as i,sn as s,an as t};
