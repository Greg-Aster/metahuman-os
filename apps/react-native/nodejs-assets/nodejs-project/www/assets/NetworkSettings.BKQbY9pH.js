import{S as pe,i as me,s as _e,n as ie,d as c,a as N,b as a,c as m,e as h,f as C,g as G,h as L,j as g,k as M,o as be,l as le,P as ue,O as F,p as Q,x as oe,q as V,t as x,v as ke}from"./api-config.BAZ_dc_Y.js";function ze(o){let e,t,l="üåê Cloudflare Tunnel",d,i,r,n,f;function z(u,s){return u[0].installed?we:Se}let T=z(o),v=T(o),p=o[1]&&fe(o),_=o[3]&&ge(o),b=o[4]&&ve(o);return{c(){e=g("div"),t=g("h2"),t.textContent=l,d=M(),v.c(),i=M(),p&&p.c(),r=M(),_&&_.c(),n=M(),b&&b.c(),f=ue(),this.h()},l(u){e=h(u,"DIV",{class:!0});var s=C(e);t=h(s,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-t4hoah"&&(t.textContent=l),d=L(s),v.l(s),s.forEach(c),i=L(u),p&&p.l(u),r=L(u),_&&_.l(u),n=L(u),b&&b.l(u),f=ue(),this.h()},h(){m(t,"class","svelte-14zxgi7"),m(e,"class","tunnel-section svelte-14zxgi7")},m(u,s){N(u,e,s),a(e,t),a(e,d),v.m(e,null),N(u,i,s),p&&p.m(u,s),N(u,r,s),_&&_.m(u,s),N(u,n,s),b&&b.m(u,s),N(u,f,s)},p(u,s){T===(T=z(u))&&v?v.p(u,s):(v.d(1),v=T(u),v&&(v.c(),v.m(e,null))),u[1]?p?p.p(u,s):(p=fe(u),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),u[3]?_?_.p(u,s):(_=ge(u),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null),u[4]?b?b.p(u,s):(b=ve(u),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(u){u&&(c(e),c(i),c(r),c(n),c(f)),v.d(),p&&p.d(u),_&&_.d(u),b&&b.d(u)}}}function Te(o){let e,t="Loading tunnel status...";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-14t9vtv"&&(e.textContent=t),this.h()},h(){m(e,"class","loading svelte-14zxgi7")},m(l,d){N(l,e,d)},p:ie,d(l){l&&c(e)}}}function we(o){let e,t,l,d,i,r=o[0].running?"‚úÖ Running":"‚≠ï Stopped",n,f,z,T,v,p,_,b,u,s,w="Auto-start on boot",B,A,R,X,W,P,j,q,J,Z,O,Y='<h3 class="svelte-14zxgi7">‚ÑπÔ∏è How It Works</h3> <ul class="svelte-14zxgi7"><li class="svelte-14zxgi7"><strong>Auto-start:</strong> When enabled, the tunnel starts automatically when MetaHuman starts</li> <li class="svelte-14zxgi7"><strong>No port forwarding:</strong> Cloudflare tunnel creates a secure connection without opening router ports</li> <li class="svelte-14zxgi7"><strong>HTTPS included:</strong> Automatic SSL certificates from Cloudflare</li> <li class="svelte-14zxgi7"><strong>Access control:</strong> Configure email whitelisting in Cloudflare Zero Trust dashboard</li></ul>',$,te,E=o[0].pid&&de(o),D=o[0].hostname&&ce(o);return{c(){e=g("div"),t=g("div"),l=g("span"),d=M(),i=g("strong"),n=x(r),f=M(),E&&E.c(),z=M(),D&&D.c(),T=M(),v=g("div"),p=g("label"),_=g("input"),u=M(),s=g("span"),s.textContent=w,B=M(),A=g("div"),R=g("button"),X=x("Start Tunnel"),P=M(),j=g("button"),q=x("Stop Tunnel"),Z=M(),O=g("div"),O.innerHTML=Y,this.h()},l(k){e=h(k,"DIV",{class:!0});var S=C(e);t=h(S,"DIV",{class:!0});var I=C(t);l=h(I,"SPAN",{class:!0}),C(l).forEach(c),d=L(I),i=h(I,"STRONG",{});var H=C(i);n=V(H,r),H.forEach(c),f=L(I),E&&E.l(I),I.forEach(c),z=L(S),D&&D.l(S),T=L(S),v=h(S,"DIV",{class:!0});var y=C(v);p=h(y,"LABEL",{class:!0});var U=C(p);_=h(U,"INPUT",{type:!0}),u=L(U),s=h(U,"SPAN",{"data-svelte-h":!0}),G(s)!=="svelte-160lfoj"&&(s.textContent=w),U.forEach(c),B=L(y),A=h(y,"DIV",{class:!0});var K=C(A);R=h(K,"BUTTON",{class:!0});var ne=C(R);X=V(ne,"Start Tunnel"),ne.forEach(c),P=L(K),j=h(K,"BUTTON",{class:!0});var ee=C(j);q=V(ee,"Stop Tunnel"),ee.forEach(c),K.forEach(c),y.forEach(c),S.forEach(c),Z=L(k),O=h(k,"DIV",{class:!0,"data-svelte-h":!0}),G(O)!=="svelte-1sy5mz0"&&(O.innerHTML=Y),this.h()},h(){m(l,"class","status-dot svelte-14zxgi7"),F(l,"dot-running",o[0].running),F(l,"dot-stopped",!o[0].running),m(t,"class","status-indicator svelte-14zxgi7"),m(_,"type","checkbox"),_.checked=b=o[0].enabled,_.disabled=o[2],m(p,"class","toggle-label svelte-14zxgi7"),m(R,"class","btn btn-primary svelte-14zxgi7"),R.disabled=W=o[2]||o[0].running,m(j,"class","btn btn-danger svelte-14zxgi7"),j.disabled=J=o[2]||!o[0].running,m(A,"class","button-group svelte-14zxgi7"),m(v,"class","tunnel-controls svelte-14zxgi7"),m(e,"class","status-box svelte-14zxgi7"),F(e,"status-running",o[0].running),F(e,"status-stopped",!o[0].running),m(O,"class","info-box svelte-14zxgi7")},m(k,S){N(k,e,S),a(e,t),a(t,l),a(t,d),a(t,i),a(i,n),a(t,f),E&&E.m(t,null),a(e,z),D&&D.m(e,null),a(e,T),a(e,v),a(v,p),a(p,_),a(p,u),a(p,s),a(v,B),a(v,A),a(A,R),a(R,X),a(A,P),a(A,j),a(j,q),N(k,Z,S),N(k,O,S),$||(te=[oe(_,"change",o[9]),oe(R,"click",o[6]),oe(j,"click",o[7])],$=!0)},p(k,S){S&1&&F(l,"dot-running",k[0].running),S&1&&F(l,"dot-stopped",!k[0].running),S&1&&r!==(r=k[0].running?"‚úÖ Running":"‚≠ï Stopped")&&Q(n,r),k[0].pid?E?E.p(k,S):(E=de(k),E.c(),E.m(t,null)):E&&(E.d(1),E=null),k[0].hostname?D?D.p(k,S):(D=ce(k),D.c(),D.m(e,T)):D&&(D.d(1),D=null),S&1&&b!==(b=k[0].enabled)&&(_.checked=b),S&4&&(_.disabled=k[2]),S&5&&W!==(W=k[2]||k[0].running)&&(R.disabled=W),S&5&&J!==(J=k[2]||!k[0].running)&&(j.disabled=J),S&1&&F(e,"status-running",k[0].running),S&1&&F(e,"status-stopped",!k[0].running)},d(k){k&&(c(e),c(Z),c(O)),E&&E.d(),D&&D.d(),$=!1,ke(te)}}}function Se(o){let e,t='<strong class="svelte-14zxgi7">‚ö†Ô∏è cloudflared not installed</strong> <p>Install cloudflared to enable secure tunneling:</p> <code class="svelte-14zxgi7">wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb &amp;&amp; sudo dpkg -i cloudflared-linux-amd64.deb</code> <p style="margin-top: 1rem;"><a href="https://github.com/yourusername/metahuman/blob/master/docs/user-guide/17-cloudflare-tunnel-setup.md" target="_blank" rel="noopener noreferrer" class="inline-guide-link svelte-14zxgi7">üìñ View complete setup guide</a></p>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-ryjko0"&&(e.innerHTML=t),this.h()},h(){m(e,"class","warning-box svelte-14zxgi7")},m(l,d){N(l,e,d)},p:ie,d(l){l&&c(e)}}}function de(o){let e,t,l=o[0].pid+"",d,i;return{c(){e=g("span"),t=x("(PID: "),d=x(l),i=x(")"),this.h()},l(r){e=h(r,"SPAN",{class:!0});var n=C(e);t=V(n,"(PID: "),d=V(n,l),i=V(n,")"),n.forEach(c),this.h()},h(){m(e,"class","pid svelte-14zxgi7")},m(r,n){N(r,e,n),a(e,t),a(e,d),a(e,i)},p(r,n){n&1&&l!==(l=r[0].pid+"")&&Q(d,l)},d(r){r&&c(e)}}}function ce(o){let e,t,l="Public URL:",d,i,r,n=o[0].hostname+"",f,z;return{c(){e=g("div"),t=g("strong"),t.textContent=l,d=M(),i=g("a"),r=x("https://"),f=x(n),this.h()},l(T){e=h(T,"DIV",{class:!0});var v=C(e);t=h(v,"STRONG",{"data-svelte-h":!0}),G(t)!=="svelte-mawveg"&&(t.textContent=l),d=L(v),i=h(v,"A",{href:!0,target:!0,rel:!0,class:!0});var p=C(i);r=V(p,"https://"),f=V(p,n),p.forEach(c),v.forEach(c),this.h()},h(){m(i,"href",z="https://"+o[0].hostname),m(i,"target","_blank"),m(i,"rel","noopener noreferrer"),m(i,"class","svelte-14zxgi7"),m(e,"class","hostname svelte-14zxgi7")},m(T,v){N(T,e,v),a(e,t),a(e,d),a(e,i),a(i,r),a(i,f)},p(T,v){v&1&&n!==(n=T[0].hostname+"")&&Q(f,n),v&1&&z!==(z="https://"+T[0].hostname)&&m(i,"href",z)},d(T){T&&c(e)}}}function fe(o){let e,t,l="üñ•Ô∏è Headless Runtime Mode",d,i,r,n,f,z,T=o[1].headless?"üü° Headless Mode Active":"üü¢ Normal Mode",v,p,_,b,u,s,w,B,A,R="Enable Headless Mode",X,W,P,j,q=new Date(o[1].changedAt).toLocaleString()+"",J,Z,O=o[1].lastChangedBy+"",Y,$,te,E,D='<h3 class="svelte-14zxgi7">‚ÑπÔ∏è What is Headless Mode?</h3> <ul class="svelte-14zxgi7"><li class="svelte-14zxgi7"><strong>Tunnel + Web Server:</strong> Stay running and accessible</li> <li class="svelte-14zxgi7"><strong>Local Agents:</strong> Paused (boredom, sleep, organizer, reflector, etc.)</li> <li class="svelte-14zxgi7"><strong>Remote Access:</strong> Full system resources available to remote sessions</li> <li class="svelte-14zxgi7"><strong>No Conflicts:</strong> Prevents double-execution of background tasks</li> <li class="svelte-14zxgi7"><strong>Process Keepalive:</strong> Watcher stays running to monitor mode changes</li> <li class="svelte-14zxgi7"><strong>OS Sleep:</strong> Configure power settings to prevent system sleep (Linux: mask sleep.target, macOS: caffeinate, Windows: power settings)</li></ul>',k,S,I=o[1].headless&&he();return{c(){e=g("div"),t=g("h2"),t.textContent=l,d=M(),i=g("div"),r=g("div"),n=g("span"),f=M(),z=g("strong"),v=x(T),p=M(),I&&I.c(),_=M(),b=g("div"),u=g("label"),s=g("input"),B=M(),A=g("span"),A.textContent=R,X=M(),W=g("div"),P=g("small"),j=x("Last changed: "),J=x(q),Z=x(" ("),Y=x(O),$=x(")"),te=M(),E=g("div"),E.innerHTML=D,this.h()},l(H){e=h(H,"DIV",{class:!0});var y=C(e);t=h(y,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1oinub1"&&(t.textContent=l),d=L(y),i=h(y,"DIV",{class:!0});var U=C(i);r=h(U,"DIV",{class:!0});var K=C(r);n=h(K,"SPAN",{class:!0}),C(n).forEach(c),f=L(K),z=h(K,"STRONG",{});var ne=C(z);v=V(ne,T),ne.forEach(c),K.forEach(c),p=L(U),I&&I.l(U),_=L(U),b=h(U,"DIV",{class:!0});var ee=C(b);u=h(ee,"LABEL",{class:!0});var ae=C(u);s=h(ae,"INPUT",{type:!0}),B=L(ae),A=h(ae,"SPAN",{"data-svelte-h":!0}),G(A)!=="svelte-z8sfnf"&&(A.textContent=R),ae.forEach(c),X=L(ee),W=h(ee,"DIV",{class:!0});var re=C(W);P=h(re,"SMALL",{class:!0});var se=C(P);j=V(se,"Last changed: "),J=V(se,q),Z=V(se," ("),Y=V(se,O),$=V(se,")"),se.forEach(c),re.forEach(c),ee.forEach(c),U.forEach(c),te=L(y),E=h(y,"DIV",{class:!0,"data-svelte-h":!0}),G(E)!=="svelte-kbhi7n"&&(E.innerHTML=D),y.forEach(c),this.h()},h(){m(t,"class","svelte-14zxgi7"),m(n,"class","status-dot svelte-14zxgi7"),F(n,"dot-headless",o[1].headless),F(n,"dot-active",!o[1].headless),m(r,"class","status-indicator svelte-14zxgi7"),m(s,"type","checkbox"),s.checked=w=o[1].headless,s.disabled=o[2],m(u,"class","toggle-label svelte-14zxgi7"),m(P,"class","svelte-14zxgi7"),m(W,"class","metadata svelte-14zxgi7"),m(b,"class","tunnel-controls svelte-14zxgi7"),m(i,"class","status-box svelte-14zxgi7"),F(i,"status-headless",o[1].headless),m(E,"class","info-box svelte-14zxgi7"),m(e,"class","tunnel-section svelte-14zxgi7")},m(H,y){N(H,e,y),a(e,t),a(e,d),a(e,i),a(i,r),a(r,n),a(r,f),a(r,z),a(z,v),a(i,p),I&&I.m(i,null),a(i,_),a(i,b),a(b,u),a(u,s),a(u,B),a(u,A),a(b,X),a(b,W),a(W,P),a(P,j),a(P,J),a(P,Z),a(P,Y),a(P,$),a(e,te),a(e,E),k||(S=oe(s,"change",o[10]),k=!0)},p(H,y){y&2&&F(n,"dot-headless",H[1].headless),y&2&&F(n,"dot-active",!H[1].headless),y&2&&T!==(T=H[1].headless?"üü° Headless Mode Active":"üü¢ Normal Mode")&&Q(v,T),H[1].headless?I||(I=he(),I.c(),I.m(i,_)):I&&(I.d(1),I=null),y&2&&w!==(w=H[1].headless)&&(s.checked=w),y&4&&(s.disabled=H[2]),y&2&&q!==(q=new Date(H[1].changedAt).toLocaleString()+"")&&Q(J,q),y&2&&O!==(O=H[1].lastChangedBy+"")&&Q(Y,O),y&2&&F(i,"status-headless",H[1].headless)},d(H){H&&c(e),I&&I.d(),k=!1,S()}}}function he(o){let e,t='<p class="svelte-14zxgi7"><strong>‚ÑπÔ∏è Local agents are paused.</strong></p> <p class="svelte-14zxgi7">The tunnel and web server stay online, but background services (boredom, sleep, organizer, etc.) are stopped. Remote users can claim full system resources without conflicts.</p>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-18vxl6m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","info-banner svelte-14zxgi7")},m(l,d){N(l,e,d)},d(l){l&&c(e)}}}function ge(o){let e,t;return{c(){e=g("div"),t=x(o[3]),this.h()},l(l){e=h(l,"DIV",{class:!0});var d=C(e);t=V(d,o[3]),d.forEach(c),this.h()},h(){m(e,"class","error-message svelte-14zxgi7")},m(l,d){N(l,e,d),a(e,t)},p(l,d){d&8&&Q(t,l[3])},d(l){l&&c(e)}}}function ve(o){let e,t;return{c(){e=g("div"),t=x(o[4]),this.h()},l(l){e=h(l,"DIV",{class:!0});var d=C(e);t=V(d,o[4]),d.forEach(c),this.h()},h(){m(e,"class","success-message svelte-14zxgi7")},m(l,d){N(l,e,d),a(e,t)},p(l,d){d&16&&Q(t,l[4])},d(l){l&&c(e)}}}function Ce(o){let e,t,l='<h1 class="svelte-14zxgi7">Network Settings</h1> <p class="svelte-14zxgi7">Manage Cloudflare Tunnel and external connectivity</p> <a href="https://github.com/yourusername/metahuman/blob/master/docs/user-guide/17-cloudflare-tunnel-setup.md" target="_blank" rel="noopener noreferrer" class="setup-guide-link svelte-14zxgi7">üìñ Setup Guide</a>',d;function i(f,z){if(f[2]&&!f[0])return Te;if(f[0])return ze}let r=i(o),n=r&&r(o);return{c(){e=g("div"),t=g("div"),t.innerHTML=l,d=M(),n&&n.c(),this.h()},l(f){e=h(f,"DIV",{class:!0});var z=C(e);t=h(z,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-m267go"&&(t.innerHTML=l),d=L(z),n&&n.l(z),z.forEach(c),this.h()},h(){m(t,"class","network-header svelte-14zxgi7"),m(e,"class","network-container svelte-14zxgi7")},m(f,z){N(f,e,z),a(e,t),a(e,d),n&&n.m(e,null)},p(f,[z]){r===(r=i(f))&&n?n.p(f,z):(n&&n.d(1),n=r&&r(f),n&&(n.c(),n.m(e,null)))},i:ie,o:ie,d(f){f&&c(e),n&&n.d()}}}function Ee(o,e,t){let l=null,d=null,i=!0,r=null,n=null;async function f(){try{const s=await le("/api/cloudflare/status");s.ok&&t(0,l=await s.json())}catch(s){console.error("Failed to load tunnel status:",s)}finally{t(2,i=!1)}}async function z(s){t(3,r=null),t(4,n=null),t(2,i=!0);try{const w=await le("/api/cloudflare/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:s})});if(w.ok)t(4,n=s?"Tunnel enabled!":"Tunnel disabled!"),await f();else{const B=await w.json();t(3,r=B.error||"Failed to toggle tunnel")}}catch(w){t(3,r=w instanceof Error?w.message:"Failed to toggle tunnel")}finally{t(2,i=!1)}}async function T(){t(3,r=null),t(4,n=null),t(2,i=!0);try{const s=await le("/api/cloudflare/start",{method:"POST"});if(s.ok)t(4,n="Tunnel started!"),await f();else{const w=await s.json();t(3,r=w.error||"Failed to start tunnel")}}catch(s){t(3,r=s instanceof Error?s.message:"Failed to start tunnel")}finally{t(2,i=!1)}}async function v(){t(3,r=null),t(4,n=null),t(2,i=!0);try{const s=await le("/api/cloudflare/stop",{method:"POST"});if(s.ok)t(4,n="Tunnel stopped!"),await f();else{const w=await s.json();t(3,r=w.error||"Failed to stop tunnel")}}catch(s){t(3,r=s instanceof Error?s.message:"Failed to stop tunnel")}finally{t(2,i=!1)}}async function p(){try{const s=await le("/api/runtime/mode");s.ok&&t(1,d=await s.json())}catch(s){console.error("Failed to load runtime mode:",s)}}async function _(s){t(3,r=null),t(4,n=null),t(2,i=!0);try{const w=await le("/api/runtime/mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headless:s})});if(w.ok)t(4,n=s?"Headless mode enabled! Local agents will pause.":"Headless mode disabled! Local agents will resume."),await p();else{const B=await w.json();t(3,r=B.error||"Failed to toggle headless mode")}}catch(w){t(3,r=w instanceof Error?w.message:"Failed to toggle headless mode")}finally{t(2,i=!1)}}return be(()=>{f(),p();const s=setInterval(f,1e4),w=setInterval(p,1e4);return()=>{clearInterval(s),clearInterval(w)}}),[l,d,i,r,n,z,T,v,_,s=>z(s.currentTarget.checked),s=>_(s.currentTarget.checked)]}class ye extends pe{constructor(e){super(),me(this,e,Ee,Ce,_e,{})}}export{ye as default};
