import{S as wl,i as Nl,s as Al,n as ut,d as v,v as It,p as Y,a as N,b as s,x as re,c as o,e as d,f as E,g as w,h as b,q as I,j as c,k as C,t as P,o as Dl,l as mt,Z as Il,Q as Pl,r as vt,u as Pt,$ as Ll,m as Vl,V as zt,w as qt,z as Bt,y as Ol,P as Nt,T as jt}from"./api-config.BAZ_dc_Y.js";import{f as wt}from"./fetch-timeout.D037UL0m.js";function Gt(a,e,t){const l=a.slice();return l[82]=e[t],l}function Jt(a,e,t){const l=a.slice();return l[85]=e[t],l}function Qt(a,e,t){const l=a.slice();return l[85]=e[t],l}function Wt(a,e,t){const l=a.slice();return l[90]=e[t],l}function Yt(a,e,t){const l=a.slice();return l[93]=e[t],l}function Kt(a){let e,t,l="‚ö†Ô∏è",n,i,r,f="Connection Issue",u,h,g,k,_=a[5].includes("timeout")||a[5].includes("timed out"),y,p,T="√ó",S,V,D=_&&Zt();return{c(){e=c("div"),t=c("div"),t.textContent=l,n=C(),i=c("div"),r=c("strong"),r.textContent=f,u=C(),h=c("p"),g=P(a[5]),k=C(),D&&D.c(),y=C(),p=c("button"),p.textContent=T,this.h()},l(B){e=d(B,"DIV",{class:!0});var L=E(e);t=d(L,"DIV",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-tecbtq"&&(t.textContent=l),n=b(L),i=d(L,"DIV",{class:!0});var j=E(i);r=d(j,"STRONG",{class:!0,"data-svelte-h":!0}),w(r)!=="svelte-yqiwx7"&&(r.textContent=f),u=b(j),h=d(j,"P",{class:!0});var G=E(h);g=I(G,a[5]),G.forEach(v),k=b(j),D&&D.l(j),j.forEach(v),y=b(L),p=d(L,"BUTTON",{class:!0,"data-svelte-h":!0}),w(p)!=="svelte-1hbcnsv"&&(p.textContent=T),L.forEach(v),this.h()},h(){o(t,"class","error-icon svelte-1vidhd"),o(r,"class","svelte-1vidhd"),o(h,"class","svelte-1vidhd"),o(i,"class","error-content svelte-1vidhd"),o(p,"class","error-dismiss svelte-1vidhd"),o(e,"class","error-banner svelte-1vidhd")},m(B,L){N(B,e,L),s(e,t),s(e,n),s(e,i),s(i,r),s(i,u),s(i,h),s(h,g),s(i,k),D&&D.m(i,null),s(e,y),s(e,p),S||(V=re(p,"click",a[51]),S=!0)},p(B,L){L[0]&32&&Y(g,B[5]),L[0]&32&&(_=B[5].includes("timeout")||B[5].includes("timed out")),_?D||(D=Zt(),D.c(),D.m(i,null)):D&&(D.d(1),D=null)},d(B){B&&v(e),D&&D.d(),S=!1,V()}}}function Zt(a){let e,t="The server may be overloaded. Try refreshing or check if Ollama is stuck.";return{c(){e=c("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-970vrm"&&(e.textContent=t),this.h()},h(){o(e,"class","error-hint svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function Rl(a){let e,t,l,n="No active adapter";return{c(){e=c("div"),t=C(),l=c("span"),l.textContent=n,this.h()},l(i){e=d(i,"DIV",{class:!0}),E(e).forEach(v),t=b(i),l=d(i,"SPAN",{"data-svelte-h":!0}),w(l)!=="svelte-1d8kjhu"&&(l.textContent=n),this.h()},h(){o(e,"class","dot pending svelte-1vidhd")},m(i,r){N(i,e,r),N(i,t,r),N(i,l,r)},p:ut,d(i){i&&(v(e),v(t),v(l))}}}function Ml(a){let e,t,l,n;function i(u,h){return u[2]?.status==="loaded"?Bl:jl}let r=i(a),f=r(a);return{c(){e=c("div"),l=C(),n=c("span"),f.c(),this.h()},l(u){e=d(u,"DIV",{class:!0}),E(e).forEach(v),l=b(u),n=d(u,"SPAN",{});var h=E(n);f.l(h),h.forEach(v),this.h()},h(){o(e,"class",t="dot "+(a[2]?.status==="loaded"?"ok":"pending")+" svelte-1vidhd")},m(u,h){N(u,e,h),N(u,l,h),N(u,n,h),f.m(n,null)},p(u,h){h[0]&4&&t!==(t="dot "+(u[2]?.status==="loaded"?"ok":"pending")+" svelte-1vidhd")&&o(e,"class",t),r===(r=i(u))&&f?f.p(u,h):(f.d(1),f=r(u),f&&(f.c(),f.m(n,null)))},d(u){u&&(v(e),v(l),v(n)),f.d()}}}function jl(a){let e,t=a[2].modelName+"",l,n,i=(a[2].status||"pending")+"",r,f;return{c(){e=P("Adapter activated ("),l=P(t),n=P("); awaiting Ollama create (status: "),r=P(i),f=P(")")},l(u){e=I(u,"Adapter activated ("),l=I(u,t),n=I(u,"); awaiting Ollama create (status: "),r=I(u,i),f=I(u,")")},m(u,h){N(u,e,h),N(u,l,h),N(u,n,h),N(u,r,h),N(u,f,h)},p(u,h){h[0]&4&&t!==(t=u[2].modelName+"")&&Y(l,t),h[0]&4&&i!==(i=(u[2].status||"pending")+"")&&Y(r,i)},d(u){u&&(v(e),v(l),v(n),v(r),v(f))}}}function Bl(a){let e,t=a[2].modelName+"",l;return{c(){e=P("Active model loaded in Ollama: "),l=P(t)},l(n){e=I(n,"Active model loaded in Ollama: "),l=I(n,t)},m(n,i){N(n,e,i),N(n,l,i)},p(n,i){i[0]&4&&t!==(t=n[2].modelName+"")&&Y(l,t)},d(n){n&&(v(e),v(l))}}}function Xt(a){let e,t,l="Error:",n,i;return{c(){e=c("div"),t=c("strong"),t.textContent=l,n=C(),i=P(a[5]),this.h()},l(r){e=d(r,"DIV",{class:!0});var f=E(e);t=d(f,"STRONG",{"data-svelte-h":!0}),w(t)!=="svelte-1s1dywc"&&(t.textContent=l),n=b(f),i=I(f,a[5]),f.forEach(v),this.h()},h(){o(e,"class","error-box svelte-1vidhd")},m(r,f){N(r,e,f),s(e,t),s(e,n),s(e,i)},p(r,f){f[0]&32&&Y(i,r[5])},d(r){r&&v(e)}}}function Hl(a){let e,t="Auto-approval config not available.";return{c(){e=c("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-15qzoiz"&&(e.textContent=t),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function Ul(a){let e,t,l="Auto-Approval Enabled",n,i,r,f,u,h,g="Dry Run Mode",k,_,y,p,T,S,V="Auto Train",D,B,L,j,G,fe="Auto Evaluate",$,Q,Z,ce,ue,_e="Auto Activate",oe,K,se,W,H,de,x,z=a[1].thresholds.minPairs+"",pe,ie,O,R,M,ae=Math.round(a[1].thresholds.minHighConfidence*100)+"",ne,ee,F,J,ve,ge,be=Math.round(a[1].thresholds.minReflectionPct*100)+"",Pe,je,Ue,ye,Oe,Le,ke=Math.round(a[1].thresholds.maxLowConfidence*100)+"",Ee,We,Fe,Ge;return{c(){e=c("label"),t=c("span"),t.textContent=l,n=C(),i=c("input"),f=C(),u=c("label"),h=c("span"),h.textContent=g,k=C(),_=c("input"),p=C(),T=c("label"),S=c("span"),S.textContent=V,D=C(),B=c("input"),L=C(),j=c("label"),G=c("span"),G.textContent=fe,$=C(),Q=c("input"),Z=C(),ce=c("label"),ue=c("span"),ue.textContent=_e,oe=C(),K=c("input"),se=C(),W=c("div"),H=c("div"),de=P("Min pairs: "),x=c("strong"),pe=P(z),ie=C(),O=c("div"),R=P("High confidence ‚â• "),M=c("strong"),ne=P(ae),ee=P("%"),F=C(),J=c("div"),ve=P("Reflections ‚â• "),ge=c("strong"),Pe=P(be),je=P("%"),Ue=C(),ye=c("div"),Oe=P("Low confidence ‚â§ "),Le=c("strong"),Ee=P(ke),We=P("%"),this.h()},l(le){e=d(le,"LABEL",{class:!0});var he=E(e);t=d(he,"SPAN",{"data-svelte-h":!0}),w(t)!=="svelte-1w5c9fi"&&(t.textContent=l),n=b(he),i=d(he,"INPUT",{type:!0}),he.forEach(v),f=b(le),u=d(le,"LABEL",{class:!0});var Ne=E(u);h=d(Ne,"SPAN",{"data-svelte-h":!0}),w(h)!=="svelte-bjpr15"&&(h.textContent=g),k=b(Ne),_=d(Ne,"INPUT",{type:!0}),Ne.forEach(v),p=b(le),T=d(le,"LABEL",{class:!0});var Ve=E(T);S=d(Ve,"SPAN",{"data-svelte-h":!0}),w(S)!=="svelte-48hcjf"&&(S.textContent=V),D=b(Ve),B=d(Ve,"INPUT",{type:!0}),Ve.forEach(v),L=b(le),j=d(le,"LABEL",{class:!0});var et=E(j);G=d(et,"SPAN",{"data-svelte-h":!0}),w(G)!=="svelte-lgqst8"&&(G.textContent=fe),$=b(et),Q=d(et,"INPUT",{type:!0}),et.forEach(v),Z=b(le),ce=d(le,"LABEL",{class:!0});var Ke=E(ce);ue=d(Ke,"SPAN",{"data-svelte-h":!0}),w(ue)!=="svelte-1dmmlcm"&&(ue.textContent=_e),oe=b(Ke),K=d(Ke,"INPUT",{type:!0}),Ke.forEach(v),se=b(le),W=d(le,"DIV",{class:!0});var De=E(W);H=d(De,"DIV",{class:!0});var Te=E(H);de=I(Te,"Min pairs: "),x=d(Te,"STRONG",{class:!0});var Be=E(x);pe=I(Be,z),Be.forEach(v),Te.forEach(v),ie=b(De),O=d(De,"DIV",{class:!0});var lt=E(O);R=I(lt,"High confidence ‚â• "),M=d(lt,"STRONG",{class:!0});var xe=E(M);ne=I(xe,ae),ee=I(xe,"%"),xe.forEach(v),lt.forEach(v),F=b(De),J=d(De,"DIV",{class:!0});var ze=E(J);ve=I(ze,"Reflections ‚â• "),ge=d(ze,"STRONG",{class:!0});var st=E(ge);Pe=I(st,be),je=I(st,"%"),st.forEach(v),ze.forEach(v),Ue=b(De),ye=d(De,"DIV",{class:!0});var Ae=E(ye);Oe=I(Ae,"Low confidence ‚â§ "),Le=d(Ae,"STRONG",{class:!0});var He=E(Le);Ee=I(He,ke),We=I(He,"%"),He.forEach(v),Ae.forEach(v),De.forEach(v),this.h()},h(){o(i,"type","checkbox"),i.checked=r=a[1].enabled,i.disabled=a[6],o(e,"class","switch-row svelte-1vidhd"),o(_,"type","checkbox"),_.checked=y=a[1].dryRun,_.disabled=a[6],o(u,"class","switch-row svelte-1vidhd"),o(B,"type","checkbox"),B.checked=a[48]("autoTrain"),o(T,"class","switch-row svelte-1vidhd"),o(Q,"type","checkbox"),Q.checked=a[48]("autoEval"),o(j,"class","switch-row svelte-1vidhd"),o(K,"type","checkbox"),K.checked=a[48]("autoActivate"),o(ce,"class","switch-row svelte-1vidhd"),o(x,"class","svelte-1vidhd"),o(H,"class","threshold svelte-1vidhd"),o(M,"class","svelte-1vidhd"),o(O,"class","threshold svelte-1vidhd"),o(ge,"class","svelte-1vidhd"),o(J,"class","threshold svelte-1vidhd"),o(Le,"class","svelte-1vidhd"),o(ye,"class","threshold svelte-1vidhd"),o(W,"class","thresholds svelte-1vidhd")},m(le,he){N(le,e,he),s(e,t),s(e,n),s(e,i),N(le,f,he),N(le,u,he),s(u,h),s(u,k),s(u,_),N(le,p,he),N(le,T,he),s(T,S),s(T,D),s(T,B),N(le,L,he),N(le,j,he),s(j,G),s(j,$),s(j,Q),N(le,Z,he),N(le,ce,he),s(ce,ue),s(ce,oe),s(ce,K),N(le,se,he),N(le,W,he),s(W,H),s(H,de),s(H,x),s(x,pe),s(W,ie),s(W,O),s(O,R),s(O,M),s(M,ne),s(M,ee),s(W,F),s(W,J),s(J,ve),s(J,ge),s(ge,Pe),s(ge,je),s(W,Ue),s(W,ye),s(ye,Oe),s(ye,Le),s(Le,Ee),s(Le,We),Fe||(Ge=[re(i,"change",a[42]),re(_,"change",a[43]),re(B,"change",a[45]),re(Q,"change",a[46]),re(K,"change",a[47])],Fe=!0)},p(le,he){he[0]&2&&r!==(r=le[1].enabled)&&(i.checked=r),he[0]&64&&(i.disabled=le[6]),he[0]&2&&y!==(y=le[1].dryRun)&&(_.checked=y),he[0]&64&&(_.disabled=le[6]),he[0]&2&&z!==(z=le[1].thresholds.minPairs+"")&&Y(pe,z),he[0]&2&&ae!==(ae=Math.round(le[1].thresholds.minHighConfidence*100)+"")&&Y(ne,ae),he[0]&2&&be!==(be=Math.round(le[1].thresholds.minReflectionPct*100)+"")&&Y(Pe,be),he[0]&2&&ke!==(ke=Math.round(le[1].thresholds.maxLowConfidence*100)+"")&&Y(Ee,ke)},d(le){le&&(v(e),v(f),v(u),v(p),v(T),v(L),v(j),v(Z),v(ce),v(se),v(W)),Fe=!1,It(Ge)}}}function xt(a){let e,t,l='<h3 class="svelte-1vidhd">üìä Training Data Configuration</h3> <p class="svelte-1vidhd">Configure data collection and curation settings for LoRA adapter training.</p>',n,i,r,f,u="Curator Settings",h,g,k,_="Batch Size:",y,p,T,S,V,D="Samples processed per curator call (10-200)",B,L,j,G="Quality Threshold:",fe,$,Q,Z,ce,ue="Minimum quality score (0-10)",_e,oe,K,se="Temperature:",W,H,de,x,z,pe="LLM temperature (0-2)",ie,O,R,M="Collection Settings",ae,ne,ee,F="Max Samples/Source:",J,ve,ge,be,Pe,je="Maximum samples per memory type (100-10000)",Ue,ye,Oe,Le="Max Days:",ke,Ee,We,Fe,Ge,le="Days of history to include (999999 = all time)",he,Ne,Ve,et="Quick Presets",Ke,De,Te,Be,lt="Phase 1: Conservative",xe,ze,st="~800-1200 samples, ~15 mins",Ae,He,Ze,Je="Phase 2: Optimal (Current)",Re,at,ft="~2500-3000 samples, ~30 mins",Qe,Ce,Ie,m="Phase 3: Maximum",A,q,te="~4000-5000 samples, ~45-60 mins",we,Ye,nt,Xe="Current Configuration:",Ct,it,qe=a[8].curator.batchSize+"",U,X,rt,pt=a[8].collection.maxSamplesPerSource+"",gt,dt,Me,ct=a[8].curator.qualityThreshold+"",ht,tt,Dt;return{c(){e=c("section"),t=c("header"),t.innerHTML=l,n=C(),i=c("div"),r=c("div"),f=c("h4"),f.textContent=u,h=C(),g=c("div"),k=c("label"),k.textContent=_,y=C(),p=c("input"),S=C(),V=c("span"),V.textContent=D,B=C(),L=c("div"),j=c("label"),j.textContent=G,fe=C(),$=c("input"),Z=C(),ce=c("span"),ce.textContent=ue,_e=C(),oe=c("div"),K=c("label"),K.textContent=se,W=C(),H=c("input"),x=C(),z=c("span"),z.textContent=pe,ie=C(),O=c("div"),R=c("h4"),R.textContent=M,ae=C(),ne=c("div"),ee=c("label"),ee.textContent=F,J=C(),ve=c("input"),be=C(),Pe=c("span"),Pe.textContent=je,Ue=C(),ye=c("div"),Oe=c("label"),Oe.textContent=Le,ke=C(),Ee=c("input"),Fe=C(),Ge=c("span"),Ge.textContent=le,he=C(),Ne=c("div"),Ve=c("h4"),Ve.textContent=et,Ke=C(),De=c("div"),Te=c("button"),Be=c("span"),Be.textContent=lt,xe=C(),ze=c("span"),ze.textContent=st,Ae=C(),He=c("button"),Ze=c("span"),Ze.textContent=Je,Re=C(),at=c("span"),at.textContent=ft,Qe=C(),Ce=c("button"),Ie=c("span"),Ie.textContent=m,A=C(),q=c("span"),q.textContent=te,we=C(),Ye=c("div"),nt=c("strong"),nt.textContent=Xe,Ct=P(`
        Batch size: `),it=c("span"),U=P(qe),X=P(` |
        Max samples: `),rt=c("span"),gt=P(pt),dt=P(` |
        Quality threshold: `),Me=c("span"),ht=P(ct),this.h()},l(Se){e=d(Se,"SECTION",{class:!0});var me=E(e);t=d(me,"HEADER",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-r260uo"&&(t.innerHTML=l),n=b(me),i=d(me,"DIV",{class:!0});var bt=E(i);r=d(bt,"DIV",{class:!0});var $e=E(r);f=d($e,"H4",{class:!0,"data-svelte-h":!0}),w(f)!=="svelte-1303pnx"&&(f.textContent=u),h=b($e),g=d($e,"DIV",{class:!0});var ot=E(g);k=d(ot,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(k)!=="svelte-72ft8z"&&(k.textContent=_),y=b(ot),p=d(ot,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),S=b(ot),V=d(ot,"SPAN",{class:!0,"data-svelte-h":!0}),w(V)!=="svelte-1l0zscj"&&(V.textContent=D),ot.forEach(v),B=b($e),L=d($e,"DIV",{class:!0});var kt=E(L);j=d(kt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(j)!=="svelte-8yu783"&&(j.textContent=G),fe=b(kt),$=d(kt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Z=b(kt),ce=d(kt,"SPAN",{class:!0,"data-svelte-h":!0}),w(ce)!=="svelte-1jtncxe"&&(ce.textContent=ue),kt.forEach(v),_e=b($e),oe=d($e,"DIV",{class:!0});var Et=E(oe);K=d(Et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(K)!=="svelte-y9mcqo"&&(K.textContent=se),W=b(Et),H=d(Et,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),x=b(Et),z=d(Et,"SPAN",{class:!0,"data-svelte-h":!0}),w(z)!=="svelte-pdq3n3"&&(z.textContent=pe),Et.forEach(v),$e.forEach(v),ie=b(bt),O=d(bt,"DIV",{class:!0});var yt=E(O);R=d(yt,"H4",{class:!0,"data-svelte-h":!0}),w(R)!=="svelte-e9uabx"&&(R.textContent=M),ae=b(yt),ne=d(yt,"DIV",{class:!0});var Tt=E(ne);ee=d(Tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(ee)!=="svelte-1rr2ec1"&&(ee.textContent=F),J=b(Tt),ve=d(Tt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),be=b(Tt),Pe=d(Tt,"SPAN",{class:!0,"data-svelte-h":!0}),w(Pe)!=="svelte-1a769qz"&&(Pe.textContent=je),Tt.forEach(v),Ue=b(yt),ye=d(yt,"DIV",{class:!0});var St=E(ye);Oe=d(St,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(Oe)!=="svelte-a18err"&&(Oe.textContent=Le),ke=b(St),Ee=d(St,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Fe=b(St),Ge=d(St,"SPAN",{class:!0,"data-svelte-h":!0}),w(Ge)!=="svelte-10yjcxx"&&(Ge.textContent=le),St.forEach(v),yt.forEach(v),bt.forEach(v),he=b(me),Ne=d(me,"DIV",{class:!0});var Lt=E(Ne);Ve=d(Lt,"H4",{class:!0,"data-svelte-h":!0}),w(Ve)!=="svelte-kx09kj"&&(Ve.textContent=et),Ke=b(Lt),De=d(Lt,"DIV",{class:!0});var At=E(De);Te=d(At,"BUTTON",{class:!0});var Vt=E(Te);Be=d(Vt,"SPAN",{class:!0,"data-svelte-h":!0}),w(Be)!=="svelte-r9pj29"&&(Be.textContent=lt),xe=b(Vt),ze=d(Vt,"SPAN",{class:!0,"data-svelte-h":!0}),w(ze)!=="svelte-r0yfi2"&&(ze.textContent=st),Vt.forEach(v),Ae=b(At),He=d(At,"BUTTON",{class:!0});var Ot=E(He);Ze=d(Ot,"SPAN",{class:!0,"data-svelte-h":!0}),w(Ze)!=="svelte-j80odv"&&(Ze.textContent=Je),Re=b(Ot),at=d(Ot,"SPAN",{class:!0,"data-svelte-h":!0}),w(at)!=="svelte-1gd2f2e"&&(at.textContent=ft),Ot.forEach(v),Qe=b(At),Ce=d(At,"BUTTON",{class:!0});var Rt=E(Ce);Ie=d(Rt,"SPAN",{class:!0,"data-svelte-h":!0}),w(Ie)!=="svelte-sybp22"&&(Ie.textContent=m),A=b(Rt),q=d(Rt,"SPAN",{class:!0,"data-svelte-h":!0}),w(q)!=="svelte-11t61cs"&&(q.textContent=te),Rt.forEach(v),At.forEach(v),Lt.forEach(v),we=b(me),Ye=d(me,"DIV",{class:!0});var _t=E(Ye);nt=d(_t,"STRONG",{"data-svelte-h":!0}),w(nt)!=="svelte-knd7zz"&&(nt.textContent=Xe),Ct=I(_t,`
        Batch size: `),it=d(_t,"SPAN",{class:!0});var Ht=E(it);U=I(Ht,qe),Ht.forEach(v),X=I(_t,` |
        Max samples: `),rt=d(_t,"SPAN",{class:!0});var Ut=E(rt);gt=I(Ut,pt),Ut.forEach(v),dt=I(_t,` |
        Quality threshold: `),Me=d(_t,"SPAN",{class:!0});var Ft=E(Me);ht=I(Ft,ct),Ft.forEach(v),_t.forEach(v),me.forEach(v),this.h()},h(){o(t,"class","svelte-1vidhd"),o(f,"class","svelte-1vidhd"),o(k,"for","batch-size"),o(k,"class","svelte-1vidhd"),o(p,"id","batch-size"),o(p,"type","number"),o(p,"min","10"),o(p,"max","200"),o(p,"step","10"),p.value=T=a[8].curator.batchSize,p.disabled=a[9],o(p,"class","svelte-1vidhd"),o(V,"class","help-hint svelte-1vidhd"),o(g,"class","form-row svelte-1vidhd"),o(j,"for","quality-threshold"),o(j,"class","svelte-1vidhd"),o($,"id","quality-threshold"),o($,"type","number"),o($,"min","0"),o($,"max","10"),o($,"step","0.1"),$.value=Q=a[8].curator.qualityThreshold,$.disabled=a[9],o($,"class","svelte-1vidhd"),o(ce,"class","help-hint svelte-1vidhd"),o(L,"class","form-row svelte-1vidhd"),o(K,"for","temperature"),o(K,"class","svelte-1vidhd"),o(H,"id","temperature"),o(H,"type","number"),o(H,"min","0"),o(H,"max","2"),o(H,"step","0.1"),H.value=de=a[8].curator.temperature,H.disabled=a[9],o(H,"class","svelte-1vidhd"),o(z,"class","help-hint svelte-1vidhd"),o(oe,"class","form-row svelte-1vidhd"),o(r,"class","config-section svelte-1vidhd"),o(R,"class","svelte-1vidhd"),o(ee,"for","max-samples"),o(ee,"class","svelte-1vidhd"),o(ve,"id","max-samples"),o(ve,"type","number"),o(ve,"min","100"),o(ve,"max","10000"),o(ve,"step","100"),ve.value=ge=a[8].collection.maxSamplesPerSource,ve.disabled=a[9],o(ve,"class","svelte-1vidhd"),o(Pe,"class","help-hint svelte-1vidhd"),o(ne,"class","form-row svelte-1vidhd"),o(Oe,"for","max-days"),o(Oe,"class","svelte-1vidhd"),o(Ee,"id","max-days"),o(Ee,"type","number"),o(Ee,"min","1"),o(Ee,"max","999999"),Ee.value=We=a[8].collection.maxDays,Ee.disabled=a[9],o(Ee,"class","svelte-1vidhd"),o(Ge,"class","help-hint svelte-1vidhd"),o(ye,"class","form-row svelte-1vidhd"),o(O,"class","config-section svelte-1vidhd"),o(i,"class","training-config-grid svelte-1vidhd"),o(Ve,"class","svelte-1vidhd"),o(Be,"class","preset-name svelte-1vidhd"),o(ze,"class","preset-desc svelte-1vidhd"),o(Te,"class","preset-btn svelte-1vidhd"),Te.disabled=a[9],o(Ze,"class","preset-name svelte-1vidhd"),o(at,"class","preset-desc svelte-1vidhd"),o(He,"class","preset-btn active svelte-1vidhd"),He.disabled=a[9],o(Ie,"class","preset-name svelte-1vidhd"),o(q,"class","preset-desc svelte-1vidhd"),o(Ce,"class","preset-btn svelte-1vidhd"),Ce.disabled=a[9],o(De,"class","preset-buttons svelte-1vidhd"),o(Ne,"class","phase-presets svelte-1vidhd"),o(it,"class","highlight svelte-1vidhd"),o(rt,"class","highlight svelte-1vidhd"),o(Me,"class","highlight svelte-1vidhd"),o(Ye,"class","current-status svelte-1vidhd"),o(e,"class","card svelte-1vidhd")},m(Se,me){N(Se,e,me),s(e,t),s(e,n),s(e,i),s(i,r),s(r,f),s(r,h),s(r,g),s(g,k),s(g,y),s(g,p),s(g,S),s(g,V),s(r,B),s(r,L),s(L,j),s(L,fe),s(L,$),s(L,Z),s(L,ce),s(r,_e),s(r,oe),s(oe,K),s(oe,W),s(oe,H),s(oe,x),s(oe,z),s(i,ie),s(i,O),s(O,R),s(O,ae),s(O,ne),s(ne,ee),s(ne,J),s(ne,ve),s(ne,be),s(ne,Pe),s(O,Ue),s(O,ye),s(ye,Oe),s(ye,ke),s(ye,Ee),s(ye,Fe),s(ye,Ge),s(e,he),s(e,Ne),s(Ne,Ve),s(Ne,Ke),s(Ne,De),s(De,Te),s(Te,Be),s(Te,xe),s(Te,ze),s(De,Ae),s(De,He),s(He,Ze),s(He,Re),s(He,at),s(De,Qe),s(De,Ce),s(Ce,Ie),s(Ce,A),s(Ce,q),s(e,we),s(e,Ye),s(Ye,nt),s(Ye,Ct),s(Ye,it),s(it,U),s(Ye,X),s(Ye,rt),s(rt,gt),s(Ye,dt),s(Ye,Me),s(Me,ht),tt||(Dt=[re(p,"change",a[52]),re($,"change",a[53]),re(H,"change",a[54]),re(ve,"change",a[55]),re(Ee,"change",a[56]),re(Te,"click",a[57]),re(He,"click",a[58]),re(Ce,"click",a[59])],tt=!0)},p(Se,me){me[0]&256&&T!==(T=Se[8].curator.batchSize)&&p.value!==T&&(p.value=T),me[0]&512&&(p.disabled=Se[9]),me[0]&256&&Q!==(Q=Se[8].curator.qualityThreshold)&&$.value!==Q&&($.value=Q),me[0]&512&&($.disabled=Se[9]),me[0]&256&&de!==(de=Se[8].curator.temperature)&&H.value!==de&&(H.value=de),me[0]&512&&(H.disabled=Se[9]),me[0]&256&&ge!==(ge=Se[8].collection.maxSamplesPerSource)&&ve.value!==ge&&(ve.value=ge),me[0]&512&&(ve.disabled=Se[9]),me[0]&256&&We!==(We=Se[8].collection.maxDays)&&Ee.value!==We&&(Ee.value=We),me[0]&512&&(Ee.disabled=Se[9]),me[0]&512&&(Te.disabled=Se[9]),me[0]&512&&(He.disabled=Se[9]),me[0]&512&&(Ce.disabled=Se[9]),me[0]&256&&qe!==(qe=Se[8].curator.batchSize+"")&&Y(U,qe),me[0]&256&&pt!==(pt=Se[8].collection.maxSamplesPerSource+"")&&Y(gt,pt),me[0]&256&&ct!==(ct=Se[8].curator.qualityThreshold+"")&&Y(ht,ct)},d(Se){Se&&v(e),tt=!1,It(Dt)}}}function $t(a){let e,t,l,n,i="Run Full Cycle",r,f,u="√ó",h,g,k,_,y,p,T,S,V="Enable Dual Mode (combine historical + recent adapters)",D,B,L="If enabled, combines historical knowledge with recent learnings. Requires historical adapters to be present.",j,G,fe='<p class="svelte-1vidhd"><strong class="svelte-1vidhd">‚ÑπÔ∏è After starting:</strong> Follow training progress in the <strong class="svelte-1vidhd">Training Monitor</strong> section below.</p>',$,Q,Z,ce="Cancel",ue,_e,oe="Start Training",K,se;function W(x,z){return x[21]||x[20].length===0?zl:Fl}let H=W(a),de=H(a);return{c(){e=c("div"),t=c("div"),l=c("div"),n=c("h3"),n.textContent=i,r=C(),f=c("button"),f.textContent=u,h=C(),g=c("div"),de.c(),k=C(),_=c("div"),y=c("label"),p=c("input"),T=C(),S=c("span"),S.textContent=V,D=C(),B=c("p"),B.textContent=L,j=C(),G=c("div"),G.innerHTML=fe,$=C(),Q=c("div"),Z=c("button"),Z.textContent=ce,ue=C(),_e=c("button"),_e.textContent=oe,this.h()},l(x){e=d(x,"DIV",{class:!0,role:!0});var z=E(e);t=d(z,"DIV",{class:!0,role:!0,"aria-modal":!0});var pe=E(t);l=d(pe,"DIV",{class:!0});var ie=E(l);n=d(ie,"H3",{class:!0,"data-svelte-h":!0}),w(n)!=="svelte-fc2g64"&&(n.textContent=i),r=b(ie),f=d(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),w(f)!=="svelte-kdfzbe"&&(f.textContent=u),ie.forEach(v),h=b(pe),g=d(pe,"DIV",{class:!0});var O=E(g);de.l(O),k=b(O),_=d(O,"DIV",{class:!0});var R=E(_);y=d(R,"LABEL",{class:!0});var M=E(y);p=d(M,"INPUT",{type:!0,class:!0}),T=b(M),S=d(M,"SPAN",{"data-svelte-h":!0}),w(S)!=="svelte-191tigu"&&(S.textContent=V),M.forEach(v),D=b(R),B=d(R,"P",{class:!0,"data-svelte-h":!0}),w(B)!=="svelte-mlqf9n"&&(B.textContent=L),R.forEach(v),j=b(O),G=d(O,"DIV",{class:!0,"data-svelte-h":!0}),w(G)!=="svelte-1rtmxn8"&&(G.innerHTML=fe),O.forEach(v),$=b(pe),Q=d(pe,"DIV",{class:!0});var ae=E(Q);Z=d(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),w(Z)!=="svelte-1vcpy1a"&&(Z.textContent=ce),ue=b(ae),_e=d(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),w(_e)!=="svelte-ysabdi"&&(_e.textContent=oe),ae.forEach(v),pe.forEach(v),z.forEach(v),this.h()},h(){o(n,"class","svelte-1vidhd"),o(f,"class","modal-close svelte-1vidhd"),o(l,"class","modal-header svelte-1vidhd"),o(p,"type","checkbox"),o(p,"class","svelte-1vidhd"),o(y,"class","checkbox-label svelte-1vidhd"),o(B,"class","help-text svelte-1vidhd"),o(_,"class","form-group svelte-1vidhd"),o(G,"class","info-box svelte-1vidhd"),o(g,"class","modal-body svelte-1vidhd"),o(Z,"class","btn-secondary svelte-1vidhd"),o(_e,"class","btn-primary svelte-1vidhd"),o(Q,"class","modal-footer svelte-1vidhd"),o(t,"class","modal-content svelte-1vidhd"),o(t,"role","dialog"),o(t,"aria-modal","true"),o(e,"class","modal-overlay svelte-1vidhd"),o(e,"role","presentation")},m(x,z){N(x,e,z),s(e,t),s(t,l),s(l,n),s(l,r),s(l,f),s(t,h),s(t,g),de.m(g,null),s(g,k),s(g,_),s(_,y),s(y,p),p.checked=a[12],s(y,T),s(y,S),s(_,D),s(_,B),s(g,j),s(g,G),s(t,$),s(t,Q),s(Q,Z),s(Q,ue),s(Q,_e),K||(se=[re(f,"click",a[37]),re(p,"change",a[61]),re(Z,"click",a[37]),re(_e,"click",a[38]),re(t,"click",Pl(a[50])),re(e,"click",a[37])],K=!0)},p(x,z){H===(H=W(x))&&de?de.p(x,z):(de.d(1),de=H(x),de&&(de.c(),de.m(g,k))),z[0]&4096&&(p.checked=x[12])},d(x){x&&v(e),de.d(),K=!1,It(se)}}}function Fl(a){let e,t,l="Ollama Base Model:",n,i,r,f="Use default from etc/training.json",u,h,g="Select an Ollama model from your local installation to use as the base for LoRA fine-tuning.",k,_,y=vt(a[20]),p=[];for(let T=0;T<y.length;T+=1)p[T]=el(Yt(a,y,T));return{c(){e=c("div"),t=c("label"),t.textContent=l,n=C(),i=c("select"),r=c("option"),r.textContent=f;for(let T=0;T<p.length;T+=1)p[T].c();u=C(),h=c("p"),h.textContent=g,this.h()},l(T){e=d(T,"DIV",{class:!0});var S=E(e);t=d(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),w(t)!=="svelte-18em4iq"&&(t.textContent=l),n=b(S),i=d(S,"SELECT",{id:!0,class:!0});var V=E(i);r=d(V,"OPTION",{"data-svelte-h":!0}),w(r)!=="svelte-1bbxfcp"&&(r.textContent=f);for(let D=0;D<p.length;D+=1)p[D].l(V);V.forEach(v),u=b(S),h=d(S,"P",{class:!0,"data-svelte-h":!0}),w(h)!=="svelte-auwxfp"&&(h.textContent=g),S.forEach(v),this.h()},h(){o(t,"for","model-select"),o(t,"class","svelte-1vidhd"),r.__value="",Bt(r,r.__value),o(i,"id","model-select"),o(i,"class","svelte-1vidhd"),a[11]===void 0&&Ol(()=>a[60].call(i)),o(h,"class","help-text svelte-1vidhd"),o(e,"class","form-group svelte-1vidhd")},m(T,S){N(T,e,S),s(e,t),s(e,n),s(e,i),s(i,r);for(let V=0;V<p.length;V+=1)p[V]&&p[V].m(i,null);qt(i,a[11],!0),s(e,u),s(e,h),k||(_=re(i,"change",a[60]),k=!0)},p(T,S){if(S[0]&1048576){y=vt(T[20]);let V;for(V=0;V<y.length;V+=1){const D=Yt(T,y,V);p[V]?p[V].p(D,S):(p[V]=el(D),p[V].c(),p[V].m(i,null))}for(;V<p.length;V+=1)p[V].d(1);p.length=y.length}S[0]&1050624&&qt(i,T[11])},d(T){T&&v(e),Pt(p,T),k=!1,_()}}}function zl(a){let e,t,l="‚ö†Ô∏è No Ollama Models Available",n,i,r='No models found in your local Ollama installation. Please pull at least one model using <code class="svelte-1vidhd">ollama pull &lt;model&gt;</code>',f,u,h,g,k,_=a[21]&&tl(a);return{c(){e=c("div"),t=c("strong"),t.textContent=l,n=C(),i=c("p"),i.innerHTML=r,f=C(),u=c("p"),h=c("a"),g=P("üìñ View Setup Guide ‚Üí"),k=C(),_&&_.c(),this.h()},l(y){e=d(y,"DIV",{class:!0});var p=E(e);t=d(p,"STRONG",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-1o9mmv"&&(t.textContent=l),n=b(p),i=d(p,"P",{class:!0,"data-svelte-h":!0}),w(i)!=="svelte-144y7be"&&(i.innerHTML=r),f=b(p),u=d(p,"P",{class:!0});var T=E(u);h=d(T,"A",{href:!0,target:!0,class:!0});var S=E(h);g=I(S,"üìñ View Setup Guide ‚Üí"),S.forEach(v),T.forEach(v),k=b(p),_&&_.l(p),p.forEach(v),this.h()},h(){o(t,"class","svelte-1vidhd"),o(i,"class","svelte-1vidhd"),o(h,"href",a[22]),o(h,"target","_blank"),o(h,"class","setup-link svelte-1vidhd"),o(u,"class","svelte-1vidhd"),o(e,"class","warning-box svelte-1vidhd")},m(y,p){N(y,e,p),s(e,t),s(e,n),s(e,i),s(e,f),s(e,u),s(u,h),s(h,g),s(e,k),_&&_.m(e,null)},p(y,p){p[0]&4194304&&o(h,"href",y[22]),y[21]?_?_.p(y,p):(_=tl(y),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(y){y&&v(e),_&&_.d()}}}function el(a){let e,t=a[93].name+"",l,n,i=a[93].size+"",r,f,u;return{c(){e=c("option"),l=P(t),n=P(" - "),r=P(i),f=C(),this.h()},l(h){e=d(h,"OPTION",{});var g=E(e);l=I(g,t),n=I(g," - "),r=I(g,i),f=b(g),g.forEach(v),this.h()},h(){e.__value=u=a[93].id,Bt(e,e.__value)},m(h,g){N(h,e,g),s(e,l),s(e,n),s(e,r),s(e,f)},p(h,g){g[0]&1048576&&t!==(t=h[93].name+"")&&Y(l,t),g[0]&1048576&&i!==(i=h[93].size+"")&&Y(r,i),g[0]&1048576&&u!==(u=h[93].id)&&(e.__value=u,Bt(e,e.__value))},d(h){h&&v(e)}}}function tl(a){let e,t;return{c(){e=c("p"),t=P(a[21]),this.h()},l(l){e=d(l,"P",{class:!0});var n=E(e);t=I(n,a[21]),n.forEach(v),this.h()},h(){o(e,"class","error-detail svelte-1vidhd")},m(l,n){N(l,e,n),s(e,t)},p(l,n){n[0]&2097152&&Y(t,l[21])},d(l){l&&v(e)}}}function ql(a){let e,t="<span>No active training</span>";return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-15ejs9z"&&(e.innerHTML=t),this.h()},h(){o(e,"class","status-badge idle svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function Gl(a){let e,t,l,n,i,r,f,u,h,g=a[18]?"Cancelling...":"üõë Cancel",k,_,y;return{c(){e=c("div"),t=c("div"),l=C(),n=c("span"),i=P("Training in Progress (PID: "),r=P(a[13]),f=P(")"),u=C(),h=c("button"),k=P(g),this.h()},l(p){e=d(p,"DIV",{class:!0});var T=E(e);t=d(T,"DIV",{class:!0}),E(t).forEach(v),l=b(T),n=d(T,"SPAN",{});var S=E(n);i=I(S,"Training in Progress (PID: "),r=I(S,a[13]),f=I(S,")"),S.forEach(v),T.forEach(v),u=b(p),h=d(p,"BUTTON",{class:!0});var V=E(h);k=I(V,g),V.forEach(v),this.h()},h(){o(t,"class","spinner-small svelte-1vidhd"),o(e,"class","status-badge running svelte-1vidhd"),o(h,"class","btn-danger-small svelte-1vidhd"),h.disabled=a[18]},m(p,T){N(p,e,T),s(e,t),s(e,l),s(e,n),s(n,i),s(n,r),s(n,f),N(p,u,T),N(p,h,T),s(h,k),_||(y=re(h,"click",a[36]),_=!0)},p(p,T){T[0]&8192&&Y(r,p[13]),T[0]&262144&&g!==(g=p[18]?"Cancelling...":"üõë Cancel")&&Y(k,g),T[0]&262144&&(h.disabled=p[18])},d(p){p&&(v(e),v(u),v(h)),_=!1,y()}}}function ll(a){let e,t,l,n="üñ•Ô∏è Console Output (Dataset Building, Curator)",i,r,f,u,h,g="üìã Training Events",k,_,y;function p(j,G){return j[15].length===0?Ql:Jl}let T=p(a),S=T(a);function V(j,G){return j[14].length===0?Yl:Wl}let D=V(a),B=D(a),L=a[13]&&il();return{c(){e=c("div"),t=c("div"),l=c("h4"),l.textContent=n,i=C(),r=c("div"),S.c(),f=C(),u=c("div"),h=c("h4"),h.textContent=g,k=C(),_=c("div"),B.c(),y=C(),L&&L.c(),this.h()},l(j){e=d(j,"DIV",{class:!0});var G=E(e);t=d(G,"DIV",{class:!0});var fe=E(t);l=d(fe,"H4",{class:!0,"data-svelte-h":!0}),w(l)!=="svelte-140i85g"&&(l.textContent=n),i=b(fe),r=d(fe,"DIV",{class:!0});var $=E(r);S.l($),$.forEach(v),fe.forEach(v),f=b(G),u=d(G,"DIV",{class:!0});var Q=E(u);h=d(Q,"H4",{class:!0,"data-svelte-h":!0}),w(h)!=="svelte-ddoo5x"&&(h.textContent=g),k=b(Q),_=d(Q,"DIV",{class:!0});var Z=E(_);B.l(Z),Z.forEach(v),Q.forEach(v),y=b(G),L&&L.l(G),G.forEach(v),this.h()},h(){o(l,"class","svelte-1vidhd"),o(r,"class","logs-scroll console-output svelte-1vidhd"),o(t,"class","logs-container svelte-1vidhd"),o(h,"class","svelte-1vidhd"),o(_,"class","logs-scroll events-output svelte-1vidhd"),o(u,"class","logs-container compact svelte-1vidhd"),o(e,"class","monitor-content svelte-1vidhd")},m(j,G){N(j,e,G),s(e,t),s(t,l),s(t,i),s(t,r),S.m(r,null),a[63](r),s(e,f),s(e,u),s(u,h),s(u,k),s(u,_),B.m(_,null),a[64](_),s(e,y),L&&L.m(e,null)},p(j,G){T===(T=p(j))&&S?S.p(j,G):(S.d(1),S=T(j),S&&(S.c(),S.m(r,null))),D===(D=V(j))&&B?B.p(j,G):(B.d(1),B=D(j),B&&(B.c(),B.m(_,null))),j[13]?L||(L=il(),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(j){j&&v(e),S.d(),a[63](null),B.d(),a[64](null),L&&L.d()}}}function Jl(a){let e,t=vt(a[15]),l=[];for(let n=0;n<t.length;n+=1)l[n]=sl(Wt(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Nt()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=Nt()},m(n,i){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,i);N(n,e,i)},p(n,i){if(i[0]&32768){t=vt(n[15]);let r;for(r=0;r<t.length;r+=1){const f=Wt(n,t,r);l[r]?l[r].p(f,i):(l[r]=sl(f),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&v(e),Pt(l,n)}}}function Ql(a){let e,t,l=a[13]?"Waiting for process to start...":"Start a training cycle to see output.",n;return{c(){e=c("div"),t=P("No console output yet. "),n=P(l),this.h()},l(i){e=d(i,"DIV",{class:!0});var r=E(e);t=I(r,"No console output yet. "),n=I(r,l),r.forEach(v),this.h()},h(){o(e,"class","log-empty svelte-1vidhd")},m(i,r){N(i,e,r),s(e,t),s(e,n)},p(i,r){r[0]&8192&&l!==(l=i[13]?"Waiting for process to start...":"Start a training cycle to see output.")&&Y(n,l)},d(i){i&&v(e)}}}function sl(a){let e,t=a[90]+"",l;return{c(){e=c("div"),l=P(t),this.h()},l(n){e=d(n,"DIV",{class:!0});var i=E(e);l=I(i,t),i.forEach(v),this.h()},h(){o(e,"class","console-line svelte-1vidhd")},m(n,i){N(n,e,i),s(e,l)},p(n,i){i[0]&32768&&t!==(t=n[90]+"")&&Y(l,t)},d(n){n&&v(e)}}}function Wl(a){let e,t=vt(a[14]),l=[];for(let n=0;n<t.length;n+=1)l[n]=nl(Qt(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Nt()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=Nt()},m(n,i){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,i);N(n,e,i)},p(n,i){if(i[0]&16384){t=vt(n[14]);let r;for(r=0;r<t.length;r+=1){const f=Qt(n,t,r);l[r]?l[r].p(f,i):(l[r]=nl(f),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&v(e),Pt(l,n)}}}function Yl(a){let e,t,l=a[13]?"Waiting for events...":"Start a training cycle to see events.",n;return{c(){e=c("div"),t=P("No training events yet. "),n=P(l),this.h()},l(i){e=d(i,"DIV",{class:!0});var r=E(e);t=I(r,"No training events yet. "),n=I(r,l),r.forEach(v),this.h()},h(){o(e,"class","log-empty svelte-1vidhd")},m(i,r){N(i,e,r),s(e,t),s(e,n)},p(i,r){r[0]&8192&&l!==(l=i[13]?"Waiting for events...":"Start a training cycle to see events.")&&Y(n,l)},d(i){i&&v(e)}}}function al(a){let e,t=JSON.stringify(a[85].details)+"",l;return{c(){e=c("span"),l=P(t),this.h()},l(n){e=d(n,"SPAN",{class:!0});var i=E(e);l=I(i,t),i.forEach(v),this.h()},h(){o(e,"class","log-details svelte-1vidhd")},m(n,i){N(n,e,i),s(e,l)},p(n,i){i[0]&16384&&t!==(t=JSON.stringify(n[85].details)+"")&&Y(l,t)},d(n){n&&v(e)}}}function nl(a){let e,t,l=new Date(a[85].timestamp).toLocaleTimeString()+"",n,i,r,f=(a[85].event||"unknown").replace("full_cycle_","").replace(/_/g," ")+"",u,h,g,k=a[85].details&&al(a);return{c(){e=c("div"),t=c("span"),n=P(l),i=C(),r=c("span"),u=P(f),h=C(),k&&k.c(),g=C(),this.h()},l(_){e=d(_,"DIV",{class:!0});var y=E(e);t=d(y,"SPAN",{class:!0});var p=E(t);n=I(p,l),p.forEach(v),i=b(y),r=d(y,"SPAN",{class:!0});var T=E(r);u=I(T,f),T.forEach(v),h=b(y),k&&k.l(y),g=b(y),y.forEach(v),this.h()},h(){o(t,"class","log-timestamp svelte-1vidhd"),o(r,"class","log-event svelte-1vidhd"),o(e,"class","log-entry svelte-1vidhd")},m(_,y){N(_,e,y),s(e,t),s(t,n),s(e,i),s(e,r),s(r,u),s(e,h),k&&k.m(e,null),s(e,g)},p(_,y){y[0]&16384&&l!==(l=new Date(_[85].timestamp).toLocaleTimeString()+"")&&Y(n,l),y[0]&16384&&f!==(f=(_[85].event||"unknown").replace("full_cycle_","").replace(/_/g," ")+"")&&Y(u,f),_[85].details?k?k.p(_,y):(k=al(_),k.c(),k.m(e,g)):k&&(k.d(1),k=null)},d(_){_&&v(e),k&&k.d()}}}function il(a){let e,t=`<p class="help-text svelte-1vidhd"><strong>Note:</strong> The training process may take 30-60 minutes depending on dataset size.
              You can navigate away and check back later.</p>`;return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-xi63e1"&&(e.innerHTML=t),this.h()},h(){o(e,"class","progress-footer svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function rl(a){let e,t,l="Recent Activity",n,i,r,f=vt(a[7].slice(0,5)),u=[];for(let g=0;g<f.length;g+=1)u[g]=cl(Jt(a,f,g));let h=a[7].length===0&&ul();return{c(){e=c("div"),t=c("h4"),t.textContent=l,n=C(),i=c("div");for(let g=0;g<u.length;g+=1)u[g].c();r=C(),h&&h.c(),this.h()},l(g){e=d(g,"DIV",{class:!0});var k=E(e);t=d(k,"H4",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-dfla2a"&&(t.textContent=l),n=b(k),i=d(k,"DIV",{class:!0});var _=E(i);for(let y=0;y<u.length;y+=1)u[y].l(_);r=b(_),h&&h.l(_),_.forEach(v),k.forEach(v),this.h()},h(){o(t,"class","svelte-1vidhd"),o(i,"class","log-list svelte-1vidhd"),o(e,"class","recent-activity-compact svelte-1vidhd")},m(g,k){N(g,e,k),s(e,t),s(e,n),s(e,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);s(i,r),h&&h.m(i,null)},p(g,k){if(k[0]&128){f=vt(g[7].slice(0,5));let _;for(_=0;_<f.length;_+=1){const y=Jt(g,f,_);u[_]?u[_].p(y,k):(u[_]=cl(y),u[_].c(),u[_].m(i,r))}for(;_<u.length;_+=1)u[_].d(1);u.length=f.length}g[7].length===0?h||(h=ul(),h.c(),h.m(i,null)):h&&(h.d(1),h=null)},d(g){g&&v(e),Pt(u,g),h&&h.d()}}}function ol(a){let e,t=a[85].details.dataset+"",l;return{c(){e=c("span"),l=P(t),this.h()},l(n){e=d(n,"SPAN",{class:!0});var i=E(e);l=I(i,t),i.forEach(v),this.h()},h(){o(e,"class","log-ds svelte-1vidhd")},m(n,i){N(n,e,i),s(e,l)},p(n,i){i[0]&128&&t!==(t=n[85].details.dataset+"")&&Y(l,t)},d(n){n&&v(e)}}}function dl(a){let e,t=a[85].details.modelName+"",l;return{c(){e=c("span"),l=P(t),this.h()},l(n){e=d(n,"SPAN",{class:!0});var i=E(e);l=I(i,t),i.forEach(v),this.h()},h(){o(e,"class","log-ds svelte-1vidhd")},m(n,i){N(n,e,i),s(e,l)},p(n,i){i[0]&128&&t!==(t=n[85].details.modelName+"")&&Y(l,t)},d(n){n&&v(e)}}}function cl(a){let e,t,l=new Date(a[85].timestamp).toLocaleTimeString()+"",n,i,r,f=a[85].event+"",u,h,g,k=a[85].details?.dataset&&ol(a),_=a[85].details?.modelName&&dl(a);return{c(){e=c("div"),t=c("span"),n=P(l),i=C(),r=c("span"),u=P(f),h=C(),k&&k.c(),g=C(),_&&_.c(),this.h()},l(y){e=d(y,"DIV",{class:!0});var p=E(e);t=d(p,"SPAN",{class:!0});var T=E(t);n=I(T,l),T.forEach(v),i=b(p),r=d(p,"SPAN",{class:!0});var S=E(r);u=I(S,f),S.forEach(v),h=b(p),k&&k.l(p),g=b(p),_&&_.l(p),p.forEach(v),this.h()},h(){o(t,"class","log-time svelte-1vidhd"),o(r,"class","log-evt svelte-1vidhd"),o(e,"class","log-item svelte-1vidhd")},m(y,p){N(y,e,p),s(e,t),s(t,n),s(e,i),s(e,r),s(r,u),s(e,h),k&&k.m(e,null),s(e,g),_&&_.m(e,null)},p(y,p){p[0]&128&&l!==(l=new Date(y[85].timestamp).toLocaleTimeString()+"")&&Y(n,l),p[0]&128&&f!==(f=y[85].event+"")&&Y(u,f),y[85].details?.dataset?k?k.p(y,p):(k=ol(y),k.c(),k.m(e,g)):k&&(k.d(1),k=null),y[85].details?.modelName?_?_.p(y,p):(_=dl(y),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(y){y&&v(e),k&&k.d(),_&&_.d()}}}function ul(a){let e,t="No recent events";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-rznydr"&&(e.textContent=t),this.h()},h(){o(e,"class","empty svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function Kl(a){let e,t,l='<tr><th class="svelte-1vidhd">Date</th> <th class="svelte-1vidhd">Status</th> <th class="svelte-1vidhd">Pairs</th> <th class="svelte-1vidhd">Approval</th> <th class="svelte-1vidhd">Eval</th> <th class="svelte-1vidhd">Actions</th></tr>',n,i,r=vt(a[0]),f=[];for(let u=0;u<r.length;u+=1)f[u]=yl(Gt(a,r,u));return{c(){e=c("table"),t=c("thead"),t.innerHTML=l,n=C(),i=c("tbody");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=d(u,"TABLE",{class:!0});var h=E(e);t=d(h,"THEAD",{"data-svelte-h":!0}),w(t)!=="svelte-18ox62c"&&(t.innerHTML=l),n=b(h),i=d(h,"TBODY",{});var g=E(i);for(let k=0;k<f.length;k+=1)f[k].l(g);g.forEach(v),h.forEach(v),this.h()},h(){o(e,"class","dataset-table svelte-1vidhd")},m(u,h){N(u,e,h),s(e,t),s(e,n),s(e,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(i,null)},p(u,h){if(h[0]&2080374785|h[1]&1){r=vt(u[0]);let g;for(g=0;g<r.length;g+=1){const k=Gt(u,r,g);f[g]?f[g].p(k,h):(f[g]=yl(k),f[g].c(),f[g].m(i,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=r.length}},d(u){u&&v(e),Pt(f,u)}}}function Zl(a){let e,t='<div class="empty-title svelte-1vidhd">No datasets available</div> <p class="muted svelte-1vidhd">Run sleep-service or adapter-builder to generate instruction pairs.</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-n8p7fd"&&(e.innerHTML=t),this.h()},h(){o(e,"class","empty svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function Xl(a){let e,t="Loading datasets‚Ä¶";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-yypuvm"&&(e.textContent=t),this.h()},h(){o(e,"class","loading svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function vl(a){let e,t="Active";return{c(){e=c("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-zix614"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-active svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function hl(a){let e,t="Auto";return{c(){e=c("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-uup1x0"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-auto svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function fl(a){let e,t="Dry Run";return{c(){e=c("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-dyyrdh"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-dry svelte-1vidhd")},m(l,n){N(l,e,n)},d(l){l&&v(e)}}}function xl(a){let e,t="Pending";return{c(){e=c("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-3j39az"&&(e.textContent=t),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function $l(a){let e,t,l=new Date(a[82].approvedAt).toLocaleString()+"",n,i,r,f,u=(a[82].approvedBy||"unknown")+"",h,g,k,_=a[82].notes&&pl(a),y=a[82].qualityScore&&_l(a);return{c(){e=c("div"),t=c("div"),n=P(l),i=C(),r=c("div"),f=P("by "),h=P(u),g=C(),_&&_.c(),k=C(),y&&y.c(),this.h()},l(p){e=d(p,"DIV",{class:!0});var T=E(e);t=d(T,"DIV",{});var S=E(t);n=I(S,l),S.forEach(v),i=b(T),r=d(T,"DIV",{class:!0});var V=E(r);f=I(V,"by "),h=I(V,u),V.forEach(v),g=b(T),_&&_.l(T),k=b(T),y&&y.l(T),T.forEach(v),this.h()},h(){o(r,"class","muted svelte-1vidhd"),o(e,"class","meta svelte-1vidhd")},m(p,T){N(p,e,T),s(e,t),s(t,n),s(e,i),s(e,r),s(r,f),s(r,h),s(e,g),_&&_.m(e,null),s(e,k),y&&y.m(e,null)},p(p,T){T[0]&1&&l!==(l=new Date(p[82].approvedAt).toLocaleString()+"")&&Y(n,l),T[0]&1&&u!==(u=(p[82].approvedBy||"unknown")+"")&&Y(h,u),p[82].notes?_?_.p(p,T):(_=pl(p),_.c(),_.m(e,k)):_&&(_.d(1),_=null),p[82].qualityScore?y?y.p(p,T):(y=_l(p),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(p){p&&v(e),_&&_.d(),y&&y.d()}}}function pl(a){let e,t=a[82].notes+"",l;return{c(){e=c("div"),l=P(t),this.h()},l(n){e=d(n,"DIV",{class:!0});var i=E(e);l=I(i,t),i.forEach(v),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(n,i){N(n,e,i),s(e,l)},p(n,i){i[0]&1&&t!==(t=n[82].notes+"")&&Y(l,t)},d(n){n&&v(e)}}}function _l(a){let e,t,l=a[82].qualityScore.toFixed(0)+"",n,i;return{c(){e=c("div"),t=P("Quality "),n=P(l),i=P("/100"),this.h()},l(r){e=d(r,"DIV",{class:!0});var f=E(e);t=I(f,"Quality "),n=I(f,l),i=I(f,"/100"),f.forEach(v),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(r,f){N(r,e,f),s(e,t),s(e,n),s(e,i)},p(r,f){f[0]&1&&l!==(l=r[82].qualityScore.toFixed(0)+"")&&Y(n,l)},d(r){r&&v(e)}}}function es(a){let e,t="Not run";return{c(){e=c("span"),e.textContent=t,this.h()},l(l){e=d(l,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-1mexb62"&&(e.textContent=t),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function ts(a){let e,t,l=a[82].evalScore.toFixed(3)+"",n,i,r,f=a[82].evalPassed?"Passed":"Failed",u,h;return{c(){e=c("div"),t=c("div"),n=P(l),i=C(),r=c("div"),u=P(f),this.h()},l(g){e=d(g,"DIV",{class:!0});var k=E(e);t=d(k,"DIV",{});var _=E(t);n=I(_,l),_.forEach(v),i=b(k),r=d(k,"DIV",{class:!0});var y=E(r);u=I(y,f),y.forEach(v),k.forEach(v),this.h()},h(){o(r,"class",h=jt(`muted ${a[82].evalPassed?"pass":"fail"}`)+" svelte-1vidhd"),o(e,"class","meta svelte-1vidhd")},m(g,k){N(g,e,k),s(e,t),s(t,n),s(e,i),s(e,r),s(r,u)},p(g,k){k[0]&1&&l!==(l=g[82].evalScore.toFixed(3)+"")&&Y(n,l),k[0]&1&&f!==(f=g[82].evalPassed?"Passed":"Failed")&&Y(u,f),k[0]&1&&h!==(h=jt(`muted ${g[82].evalPassed?"pass":"fail"}`)+" svelte-1vidhd")&&o(r,"class",h)},d(g){g&&v(e)}}}function ml(a){let e,t=a[26](a[82].date,"approve")?"Approving‚Ä¶":"Approve",l,n,i,r,f=a[26](a[82].date,"reject")?"Rejecting‚Ä¶":"Reject",u,h,g,k;function _(){return a[65](a[82])}function y(){return a[66](a[82])}return{c(){e=c("button"),l=P(t),i=C(),r=c("button"),u=P(f),this.h()},l(p){e=d(p,"BUTTON",{class:!0});var T=E(e);l=I(T,t),T.forEach(v),i=b(p),r=d(p,"BUTTON",{class:!0});var S=E(r);u=I(S,f),S.forEach(v),this.h()},h(){o(e,"class","action svelte-1vidhd"),e.disabled=n=a[26](a[82].date,"approve"),o(r,"class","action danger svelte-1vidhd"),r.disabled=h=a[26](a[82].date,"reject")},m(p,T){N(p,e,T),s(e,l),N(p,i,T),N(p,r,T),s(r,u),g||(k=[re(e,"click",_),re(r,"click",y)],g=!0)},p(p,T){a=p,T[0]&1&&t!==(t=a[26](a[82].date,"approve")?"Approving‚Ä¶":"Approve")&&Y(l,t),T[0]&1&&n!==(n=a[26](a[82].date,"approve"))&&(e.disabled=n),T[0]&1&&f!==(f=a[26](a[82].date,"reject")?"Rejecting‚Ä¶":"Reject")&&Y(u,f),T[0]&1&&h!==(h=a[26](a[82].date,"reject"))&&(r.disabled=h)},d(p){p&&(v(e),v(i),v(r)),g=!1,It(k)}}}function gl(a){let e,t=a[26](a[82].date,"train")?"Starting‚Ä¶":"Train",l,n,i,r;function f(){return a[67](a[82])}return{c(){e=c("button"),l=P(t),this.h()},l(u){e=d(u,"BUTTON",{class:!0});var h=E(e);l=I(h,t),h.forEach(v),this.h()},h(){o(e,"class","action svelte-1vidhd"),e.disabled=n=a[26](a[82].date,"train")},m(u,h){N(u,e,h),s(e,l),i||(r=re(e,"click",f),i=!0)},p(u,h){a=u,h[0]&1&&t!==(t=a[26](a[82].date,"train")?"Starting‚Ä¶":"Train")&&Y(l,t),h[0]&1&&n!==(n=a[26](a[82].date,"train"))&&(e.disabled=n)},d(u){u&&v(e),i=!1,r()}}}function bl(a){let e,t=a[26](a[82].date,"eval")?"Evaluating‚Ä¶":"Evaluate",l,n,i,r;function f(){return a[68](a[82])}return{c(){e=c("button"),l=P(t),this.h()},l(u){e=d(u,"BUTTON",{class:!0});var h=E(e);l=I(h,t),h.forEach(v),this.h()},h(){o(e,"class","action svelte-1vidhd"),e.disabled=n=a[26](a[82].date,"eval")},m(u,h){N(u,e,h),s(e,l),i||(r=re(e,"click",f),i=!0)},p(u,h){a=u,h[0]&1&&t!==(t=a[26](a[82].date,"eval")?"Evaluating‚Ä¶":"Evaluate")&&Y(l,t),h[0]&1&&n!==(n=a[26](a[82].date,"eval"))&&(e.disabled=n)},d(u){u&&v(e),i=!1,r()}}}function Cl(a){let e,t=a[26](a[82].date,"activate")?"Activating‚Ä¶":"Activate",l,n,i,r;function f(){return a[69](a[82])}return{c(){e=c("button"),l=P(t),this.h()},l(u){e=d(u,"BUTTON",{class:!0});var h=E(e);l=I(h,t),h.forEach(v),this.h()},h(){o(e,"class","action svelte-1vidhd"),e.disabled=n=a[26](a[82].date,"activate")},m(u,h){N(u,e,h),s(e,l),i||(r=re(e,"click",f),i=!0)},p(u,h){a=u,h[0]&1&&t!==(t=a[26](a[82].date,"activate")?"Activating‚Ä¶":"Activate")&&Y(l,t),h[0]&1&&n!==(n=a[26](a[82].date,"activate"))&&(e.disabled=n)},d(u){u&&v(e),i=!1,r()}}}function kl(a){let e,t=a[26](a[82].date,"reject")?"Rejecting‚Ä¶":"Archive",l,n,i,r;function f(){return a[70](a[82])}return{c(){e=c("button"),l=P(t),this.h()},l(u){e=d(u,"BUTTON",{class:!0});var h=E(e);l=I(h,t),h.forEach(v),this.h()},h(){o(e,"class","action danger subtle svelte-1vidhd"),e.disabled=n=a[26](a[82].date,"reject")},m(u,h){N(u,e,h),s(e,l),i||(r=re(e,"click",f),i=!0)},p(u,h){a=u,h[0]&1&&t!==(t=a[26](a[82].date,"reject")?"Rejecting‚Ä¶":"Archive")&&Y(l,t),h[0]&1&&n!==(n=a[26](a[82].date,"reject"))&&(e.disabled=n)},d(u){u&&v(e),i=!1,r()}}}function El(a){let e,t,l,n,i=a[82].date+"",r,f,u,h,g,k,_,y=Mt(a[82].status).label+"",p,T,S,V,D=a[82].pairCount+"",B,L,j,G,fe,$,Q,Z,ce,ue,_e,oe,K,se=a[82].status==="active"&&vl(),W=a[82].autoApproved&&hl(),H=a[82].dryRun&&fl();function de(F,J){return F[82].approvedAt?$l:xl}let x=de(a),z=x(a);function pe(F,J){return typeof F[82].evalScore=="number"?ts:es}let ie=pe(a),O=ie(a),R=a[82].status==="pending"&&ml(a),M=a[82].status==="approved"&&gl(a),ae=a[82].status==="trained"&&bl(a),ne=a[82].status==="evaluated"&&a[82].evalPassed&&Cl(a),ee=a[82].status!=="pending"&&kl(a);return{c(){e=c("tr"),t=c("td"),l=c("div"),n=c("div"),r=P(i),f=C(),se&&se.c(),u=C(),W&&W.c(),h=C(),H&&H.c(),g=C(),k=c("td"),_=c("span"),p=P(y),S=C(),V=c("td"),B=P(D),L=C(),j=c("td"),z.c(),G=C(),fe=c("td"),O.c(),$=C(),Q=c("td"),Z=c("div"),R&&R.c(),ce=C(),M&&M.c(),ue=C(),ae&&ae.c(),_e=C(),ne&&ne.c(),oe=C(),ee&&ee.c(),K=C(),this.h()},l(F){e=d(F,"TR",{});var J=E(e);t=d(J,"TD",{class:!0});var ve=E(t);l=d(ve,"DIV",{class:!0});var ge=E(l);n=d(ge,"DIV",{class:!0});var be=E(n);r=I(be,i),be.forEach(v),f=b(ge),se&&se.l(ge),u=b(ge),W&&W.l(ge),h=b(ge),H&&H.l(ge),ge.forEach(v),ve.forEach(v),g=b(J),k=d(J,"TD",{class:!0});var Pe=E(k);_=d(Pe,"SPAN",{class:!0});var je=E(_);p=I(je,y),je.forEach(v),Pe.forEach(v),S=b(J),V=d(J,"TD",{class:!0});var Ue=E(V);B=I(Ue,D),Ue.forEach(v),L=b(J),j=d(J,"TD",{class:!0});var ye=E(j);z.l(ye),ye.forEach(v),G=b(J),fe=d(J,"TD",{class:!0});var Oe=E(fe);O.l(Oe),Oe.forEach(v),$=b(J),Q=d(J,"TD",{class:!0});var Le=E(Q);Z=d(Le,"DIV",{class:!0});var ke=E(Z);R&&R.l(ke),ce=b(ke),M&&M.l(ke),ue=b(ke),ae&&ae.l(ke),_e=b(ke),ne&&ne.l(ke),oe=b(ke),ee&&ee.l(ke),ke.forEach(v),Le.forEach(v),K=b(J),J.forEach(v),this.h()},h(){o(n,"class","date-value svelte-1vidhd"),o(l,"class","date-cell svelte-1vidhd"),o(t,"class","svelte-1vidhd"),o(_,"class",T=jt("status-badge "+Mt(a[82].status).class)+" svelte-1vidhd"),o(k,"class","svelte-1vidhd"),o(V,"class","svelte-1vidhd"),o(j,"class","svelte-1vidhd"),o(fe,"class","svelte-1vidhd"),o(Z,"class","actions svelte-1vidhd"),o(Q,"class","svelte-1vidhd")},m(F,J){N(F,e,J),s(e,t),s(t,l),s(l,n),s(n,r),s(l,f),se&&se.m(l,null),s(l,u),W&&W.m(l,null),s(l,h),H&&H.m(l,null),s(e,g),s(e,k),s(k,_),s(_,p),s(e,S),s(e,V),s(V,B),s(e,L),s(e,j),z.m(j,null),s(e,G),s(e,fe),O.m(fe,null),s(e,$),s(e,Q),s(Q,Z),R&&R.m(Z,null),s(Z,ce),M&&M.m(Z,null),s(Z,ue),ae&&ae.m(Z,null),s(Z,_e),ne&&ne.m(Z,null),s(Z,oe),ee&&ee.m(Z,null),s(e,K)},p(F,J){J[0]&1&&i!==(i=F[82].date+"")&&Y(r,i),F[82].status==="active"?se||(se=vl(),se.c(),se.m(l,u)):se&&(se.d(1),se=null),F[82].autoApproved?W||(W=hl(),W.c(),W.m(l,h)):W&&(W.d(1),W=null),F[82].dryRun?H||(H=fl(),H.c(),H.m(l,null)):H&&(H.d(1),H=null),J[0]&1&&y!==(y=Mt(F[82].status).label+"")&&Y(p,y),J[0]&1&&T!==(T=jt("status-badge "+Mt(F[82].status).class)+" svelte-1vidhd")&&o(_,"class",T),J[0]&1&&D!==(D=F[82].pairCount+"")&&Y(B,D),x===(x=de(F))&&z?z.p(F,J):(z.d(1),z=x(F),z&&(z.c(),z.m(j,null))),ie===(ie=pe(F))&&O?O.p(F,J):(O.d(1),O=ie(F),O&&(O.c(),O.m(fe,null))),F[82].status==="pending"?R?R.p(F,J):(R=ml(F),R.c(),R.m(Z,ce)):R&&(R.d(1),R=null),F[82].status==="approved"?M?M.p(F,J):(M=gl(F),M.c(),M.m(Z,ue)):M&&(M.d(1),M=null),F[82].status==="trained"?ae?ae.p(F,J):(ae=bl(F),ae.c(),ae.m(Z,_e)):ae&&(ae.d(1),ae=null),F[82].status==="evaluated"&&F[82].evalPassed?ne?ne.p(F,J):(ne=Cl(F),ne.c(),ne.m(Z,oe)):ne&&(ne.d(1),ne=null),F[82].status!=="pending"?ee?ee.p(F,J):(ee=kl(F),ee.c(),ee.m(Z,null)):ee&&(ee.d(1),ee=null)},d(F){F&&v(e),se&&se.d(),W&&W.d(),H&&H.d(),z.d(),O.d(),R&&R.d(),M&&M.d(),ae&&ae.d(),ne&&ne.d(),ee&&ee.d()}}}function yl(a){let e=a[82].date,t,l=El(a);return{c(){l.c(),t=Nt()},l(n){l.l(n),t=Nt()},m(n,i){l.m(n,i),N(n,t,i)},p(n,i){i[0]&1&&Al(e,e=n[82].date)?(l.d(1),l=El(n),l.c(),l.m(t.parentNode,t)):l.p(n,i)},d(n){n&&v(t),l.d(n)}}}function ls(a){let e,t="No active adapter configured. Chat will use the base model.";return{c(){e=c("p"),e.textContent=t,this.h()},l(l){e=d(l,"P",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-zdq63e"&&(e.textContent=t),this.h()},h(){o(e,"class","muted svelte-1vidhd")},m(l,n){N(l,e,n)},p:ut,d(l){l&&v(e)}}}function ss(a){let e,t,l,n="Model:",i,r=a[2].modelName+"",f,u,h,g,k="Dataset:",_,y=(a[2].dataset||"unknown")+"",p,T,S,V,D="Activated:",B,L=new Date(a[2].activatedAt).toLocaleString()+"",j,G,fe,$,Q,Z="Status:",ce,ue=(a[2].status||"loaded")+"",_e,oe,K,se,W="Adapter Path:",H,de,x=a[2].adapterPath+"",z,pe,ie=typeof a[2].evalScore=="number"&&Tl(a),O=a[2].modelfilePath&&Sl(a);return{c(){e=c("div"),t=c("div"),l=c("strong"),l.textContent=n,i=C(),f=P(r),u=C(),h=c("div"),g=c("strong"),g.textContent=k,_=C(),p=P(y),T=C(),S=c("div"),V=c("strong"),V.textContent=D,B=C(),j=P(L),G=C(),ie&&ie.c(),fe=C(),$=c("div"),Q=c("strong"),Q.textContent=Z,ce=C(),_e=P(ue),oe=C(),K=c("div"),se=c("strong"),se.textContent=W,H=C(),de=c("code"),z=P(x),pe=C(),O&&O.c(),this.h()},l(R){e=d(R,"DIV",{class:!0});var M=E(e);t=d(M,"DIV",{});var ae=E(t);l=d(ae,"STRONG",{"data-svelte-h":!0}),w(l)!=="svelte-1n6jg5l"&&(l.textContent=n),i=b(ae),f=I(ae,r),ae.forEach(v),u=b(M),h=d(M,"DIV",{});var ne=E(h);g=d(ne,"STRONG",{"data-svelte-h":!0}),w(g)!=="svelte-1506die"&&(g.textContent=k),_=b(ne),p=I(ne,y),ne.forEach(v),T=b(M),S=d(M,"DIV",{});var ee=E(S);V=d(ee,"STRONG",{"data-svelte-h":!0}),w(V)!=="svelte-mlikuv"&&(V.textContent=D),B=b(ee),j=I(ee,L),ee.forEach(v),G=b(M),ie&&ie.l(M),fe=b(M),$=d(M,"DIV",{});var F=E($);Q=d(F,"STRONG",{"data-svelte-h":!0}),w(Q)!=="svelte-1ftu2mm"&&(Q.textContent=Z),ce=b(F),_e=I(F,ue),F.forEach(v),oe=b(M),K=d(M,"DIV",{class:!0});var J=E(K);se=d(J,"STRONG",{"data-svelte-h":!0}),w(se)!=="svelte-tm2cn2"&&(se.textContent=W),H=b(J),de=d(J,"CODE",{});var ve=E(de);z=I(ve,x),ve.forEach(v),J.forEach(v),pe=b(M),O&&O.l(M),M.forEach(v),this.h()},h(){o(K,"class","path-label svelte-1vidhd"),o(e,"class","meta-grid svelte-1vidhd")},m(R,M){N(R,e,M),s(e,t),s(t,l),s(t,i),s(t,f),s(e,u),s(e,h),s(h,g),s(h,_),s(h,p),s(e,T),s(e,S),s(S,V),s(S,B),s(S,j),s(e,G),ie&&ie.m(e,null),s(e,fe),s(e,$),s($,Q),s($,ce),s($,_e),s(e,oe),s(e,K),s(K,se),s(K,H),s(K,de),s(de,z),s(e,pe),O&&O.m(e,null)},p(R,M){M[0]&4&&r!==(r=R[2].modelName+"")&&Y(f,r),M[0]&4&&y!==(y=(R[2].dataset||"unknown")+"")&&Y(p,y),M[0]&4&&L!==(L=new Date(R[2].activatedAt).toLocaleString()+"")&&Y(j,L),typeof R[2].evalScore=="number"?ie?ie.p(R,M):(ie=Tl(R),ie.c(),ie.m(e,fe)):ie&&(ie.d(1),ie=null),M[0]&4&&ue!==(ue=(R[2].status||"loaded")+"")&&Y(_e,ue),M[0]&4&&x!==(x=R[2].adapterPath+"")&&Y(z,x),R[2].modelfilePath?O?O.p(R,M):(O=Sl(R),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(R){R&&v(e),ie&&ie.d(),O&&O.d()}}}function Tl(a){let e,t,l="Eval Score:",n,i=a[2].evalScore.toFixed(3)+"",r;return{c(){e=c("div"),t=c("strong"),t.textContent=l,n=C(),r=P(i)},l(f){e=d(f,"DIV",{});var u=E(e);t=d(u,"STRONG",{"data-svelte-h":!0}),w(t)!=="svelte-1dovnto"&&(t.textContent=l),n=b(u),r=I(u,i),u.forEach(v)},m(f,u){N(f,e,u),s(e,t),s(e,n),s(e,r)},p(f,u){u[0]&4&&i!==(i=f[2].evalScore.toFixed(3)+"")&&Y(r,i)},d(f){f&&v(e)}}}function Sl(a){let e,t,l="Modelfile:",n,i,r=a[2].modelfilePath+"",f;return{c(){e=c("div"),t=c("strong"),t.textContent=l,n=C(),i=c("code"),f=P(r),this.h()},l(u){e=d(u,"DIV",{class:!0});var h=E(e);t=d(h,"STRONG",{"data-svelte-h":!0}),w(t)!=="svelte-1lja6h7"&&(t.textContent=l),n=b(h),i=d(h,"CODE",{});var g=E(i);f=I(g,r),g.forEach(v),h.forEach(v),this.h()},h(){o(e,"class","path-label svelte-1vidhd")},m(u,h){N(u,e,h),s(e,t),s(e,n),s(e,i),s(i,f)},p(u,h){h[0]&4&&r!==(r=u[2].modelfilePath+"")&&Y(f,r)},d(u){u&&v(e)}}}function as(a){let e,t,l,n='<h2 class="svelte-1vidhd">üß† LoRA Adaptation</h2> <p class="svelte-1vidhd">Manage datasets, training, and activation directly from the UI.</p>',i,r,f=a[4]?"Refreshing‚Ä¶":"Refresh",u,h,g,k,_,y,p,T,S='<h3 class="svelte-1vidhd">Autonomy Controls</h3> <p class="svelte-1vidhd">Nightly LoRA pipeline settings (no file edits needed).</p>',V,D,B,L="Run Builder Now",j,G,fe="Run Dreamer",$,Q,Z="Run Night Processor",ce,ue,_e="Start Sleep Service",oe,K,se="Run Full Cycle Now",W,H,de="Export Conversations",x,z,pe="üîÄ Merge Historical Adapters",ie,O,R,M,ae="Enable LoRA (sleep.json)",ne,ee,F,J,ve,ge,be,Pe,je,Ue,ye='<h3 class="svelte-1vidhd">üñ•Ô∏è Training Monitor</h3> <p class="svelte-1vidhd">Real-time view of active training processes and recent activity.</p>',Oe,Le,ke=a[19]?"‚ñº Collapse":"‚ñ∂ Expand",Ee,We,Fe,Ge,le,he,Ne,Ve,et='<h3 class="svelte-1vidhd">Datasets</h3> <p class="svelte-1vidhd">Review, approve, and run the LoRA pipeline for each nightly dataset.</p>',Ke,De,Te,Be,lt='<h3 class="svelte-1vidhd">Active Adapter</h3> <p class="svelte-1vidhd">Current LoRA adapter in use by the chat system.</p>',xe,ze,st,Ae=a[5]&&Kt(a);function He(U,X){return U[2]?Ml:Rl}let Ze=He(a),Je=Ze(a),Re=a[5]&&Xt(a);function at(U,X){return U[1]?Ul:Hl}let ft=at(a),Qe=ft(a),Ce=a[8]&&xt(a),Ie=a[10]&&$t(a);function m(U,X){return U[13]?Gl:ql}let A=m(a),q=A(a),te=a[19]&&ll(a),we=!a[19]&&rl(a);function Ye(U,X){return U[4]?Xl:U[0].length===0?Zl:Kl}let nt=Ye(a),Xe=nt(a);function Ct(U,X){return U[2]?ss:ls}let it=Ct(a),qe=it(a);return{c(){e=c("div"),t=c("div"),l=c("div"),l.innerHTML=n,i=C(),r=c("button"),u=P(f),h=C(),Ae&&Ae.c(),g=C(),k=c("div"),Je.c(),_=C(),Re&&Re.c(),y=C(),p=c("section"),T=c("header"),T.innerHTML=S,V=C(),D=c("div"),B=c("button"),B.textContent=L,j=C(),G=c("button"),G.textContent=fe,$=C(),Q=c("button"),Q.textContent=Z,ce=C(),ue=c("button"),ue.textContent=_e,oe=C(),K=c("button"),K.textContent=se,W=C(),H=c("button"),H.textContent=de,x=C(),z=c("button"),z.textContent=pe,ie=C(),O=c("div"),R=c("label"),M=c("span"),M.textContent=ae,ne=C(),ee=c("input"),F=C(),Qe.c(),J=C(),Ce&&Ce.c(),ve=C(),Ie&&Ie.c(),ge=C(),be=c("section"),Pe=c("header"),je=c("div"),Ue=c("div"),Ue.innerHTML=ye,Oe=C(),Le=c("button"),Ee=P(ke),We=C(),Fe=c("div"),q.c(),Ge=C(),te&&te.c(),le=C(),we&&we.c(),he=C(),Ne=c("section"),Ve=c("header"),Ve.innerHTML=et,Ke=C(),Xe.c(),De=C(),Te=c("section"),Be=c("header"),Be.innerHTML=lt,xe=C(),qe.c(),this.h()},l(U){e=d(U,"DIV",{class:!0});var X=E(e);t=d(X,"DIV",{class:!0});var rt=E(t);l=d(rt,"DIV",{"data-svelte-h":!0}),w(l)!=="svelte-1hcehk1"&&(l.innerHTML=n),i=b(rt),r=d(rt,"BUTTON",{class:!0});var pt=E(r);u=I(pt,f),pt.forEach(v),rt.forEach(v),h=b(X),Ae&&Ae.l(X),g=b(X),k=d(X,"DIV",{class:!0});var gt=E(k);Je.l(gt),gt.forEach(v),_=b(X),Re&&Re.l(X),y=b(X),p=d(X,"SECTION",{class:!0});var dt=E(p);T=d(dt,"HEADER",{class:!0,"data-svelte-h":!0}),w(T)!=="svelte-i4yixg"&&(T.innerHTML=S),V=b(dt),D=d(dt,"DIV",{class:!0});var Me=E(D);B=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(B)!=="svelte-39bjbp"&&(B.textContent=L),j=b(Me),G=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(G)!=="svelte-11le6wd"&&(G.textContent=fe),$=b(Me),Q=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(Q)!=="svelte-5kr7wp"&&(Q.textContent=Z),ce=b(Me),ue=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(ue)!=="svelte-tdj4t1"&&(ue.textContent=_e),oe=b(Me),K=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(K)!=="svelte-6xzvt"&&(K.textContent=se),W=b(Me),H=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(H)!=="svelte-gylc61"&&(H.textContent=de),x=b(Me),z=d(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),w(z)!=="svelte-1beekcy"&&(z.textContent=pe),Me.forEach(v),ie=b(dt),O=d(dt,"DIV",{class:!0});var ct=E(O);R=d(ct,"LABEL",{class:!0});var ht=E(R);M=d(ht,"SPAN",{"data-svelte-h":!0}),w(M)!=="svelte-1xugdkt"&&(M.textContent=ae),ne=b(ht),ee=d(ht,"INPUT",{type:!0}),ht.forEach(v),F=b(ct),Qe.l(ct),ct.forEach(v),dt.forEach(v),J=b(X),Ce&&Ce.l(X),ve=b(X),Ie&&Ie.l(X),ge=b(X),be=d(X,"SECTION",{class:!0});var tt=E(be);Pe=d(tt,"HEADER",{class:!0});var Dt=E(Pe);je=d(Dt,"DIV",{class:!0});var Se=E(je);Ue=d(Se,"DIV",{"data-svelte-h":!0}),w(Ue)!=="svelte-1vc0bjr"&&(Ue.innerHTML=ye),Oe=b(Se),Le=d(Se,"BUTTON",{class:!0});var me=E(Le);Ee=I(me,ke),me.forEach(v),Se.forEach(v),Dt.forEach(v),We=b(tt),Fe=d(tt,"DIV",{class:!0});var bt=E(Fe);q.l(bt),bt.forEach(v),Ge=b(tt),te&&te.l(tt),le=b(tt),we&&we.l(tt),tt.forEach(v),he=b(X),Ne=d(X,"SECTION",{class:!0});var $e=E(Ne);Ve=d($e,"HEADER",{class:!0,"data-svelte-h":!0}),w(Ve)!=="svelte-1mq8ojk"&&(Ve.innerHTML=et),Ke=b($e),Xe.l($e),$e.forEach(v),De=b(X),Te=d(X,"SECTION",{class:!0});var ot=E(Te);Be=d(ot,"HEADER",{class:!0,"data-svelte-h":!0}),w(Be)!=="svelte-1qat7cw"&&(Be.innerHTML=lt),xe=b(ot),qe.l(ot),ot.forEach(v),X.forEach(v),this.h()},h(){o(r,"class","refresh-btn svelte-1vidhd"),r.disabled=a[4],o(t,"class","header svelte-1vidhd"),o(k,"class","status-line svelte-1vidhd"),o(T,"class","svelte-1vidhd"),o(B,"class","action svelte-1vidhd"),o(G,"class","action svelte-1vidhd"),o(Q,"class","action svelte-1vidhd"),o(ue,"class","action svelte-1vidhd"),o(K,"class","action svelte-1vidhd"),o(H,"class","action svelte-1vidhd"),o(z,"class","action highlight svelte-1vidhd"),o(D,"class","actions-row svelte-1vidhd"),o(ee,"type","checkbox"),ee.checked=a[3],o(R,"class","switch-row svelte-1vidhd"),o(O,"class","config-grid svelte-1vidhd"),o(p,"class","card svelte-1vidhd"),o(Le,"class","toggle-btn svelte-1vidhd"),o(je,"class","monitor-header-content svelte-1vidhd"),o(Pe,"class","svelte-1vidhd"),o(Fe,"class","monitor-status svelte-1vidhd"),o(be,"class","card training-monitor svelte-1vidhd"),o(Ve,"class","svelte-1vidhd"),o(Ne,"class","card svelte-1vidhd"),o(Be,"class","svelte-1vidhd"),o(Te,"class","card svelte-1vidhd"),o(e,"class","adapter-dashboard svelte-1vidhd")},m(U,X){N(U,e,X),s(e,t),s(t,l),s(t,i),s(t,r),s(r,u),s(e,h),Ae&&Ae.m(e,null),s(e,g),s(e,k),Je.m(k,null),s(e,_),Re&&Re.m(e,null),s(e,y),s(e,p),s(p,T),s(p,V),s(p,D),s(D,B),s(D,j),s(D,G),s(D,$),s(D,Q),s(D,ce),s(D,ue),s(D,oe),s(D,K),s(D,W),s(D,H),s(D,x),s(D,z),s(p,ie),s(p,O),s(O,R),s(R,M),s(R,ne),s(R,ee),s(O,F),Qe.m(O,null),s(e,J),Ce&&Ce.m(e,null),s(e,ve),Ie&&Ie.m(e,null),s(e,ge),s(e,be),s(be,Pe),s(Pe,je),s(je,Ue),s(je,Oe),s(je,Le),s(Le,Ee),s(be,We),s(be,Fe),q.m(Fe,null),s(be,Ge),te&&te.m(be,null),s(be,le),we&&we.m(be,null),s(e,he),s(e,Ne),s(Ne,Ve),s(Ne,Ke),Xe.m(Ne,null),s(e,De),s(e,Te),s(Te,Be),s(Te,xe),qe.m(Te,null),ze||(st=[re(window,"keydown",a[49]),re(r,"click",a[23]),re(B,"click",a[32]),re(G,"click",a[33]),re(Q,"click",a[34]),re(ue,"click",a[35]),re(K,"click",a[39]),re(H,"click",a[40]),re(z,"click",a[41]),re(ee,"change",a[44]),re(Le,"click",a[62])],ze=!0)},p(U,X){X[0]&16&&f!==(f=U[4]?"Refreshing‚Ä¶":"Refresh")&&Y(u,f),X[0]&16&&(r.disabled=U[4]),U[5]?Ae?Ae.p(U,X):(Ae=Kt(U),Ae.c(),Ae.m(e,g)):Ae&&(Ae.d(1),Ae=null),Ze===(Ze=He(U))&&Je?Je.p(U,X):(Je.d(1),Je=Ze(U),Je&&(Je.c(),Je.m(k,null))),U[5]?Re?Re.p(U,X):(Re=Xt(U),Re.c(),Re.m(e,y)):Re&&(Re.d(1),Re=null),X[0]&8&&(ee.checked=U[3]),ft===(ft=at(U))&&Qe?Qe.p(U,X):(Qe.d(1),Qe=ft(U),Qe&&(Qe.c(),Qe.m(O,null))),U[8]?Ce?Ce.p(U,X):(Ce=xt(U),Ce.c(),Ce.m(e,ve)):Ce&&(Ce.d(1),Ce=null),U[10]?Ie?Ie.p(U,X):(Ie=$t(U),Ie.c(),Ie.m(e,ge)):Ie&&(Ie.d(1),Ie=null),X[0]&524288&&ke!==(ke=U[19]?"‚ñº Collapse":"‚ñ∂ Expand")&&Y(Ee,ke),A===(A=m(U))&&q?q.p(U,X):(q.d(1),q=A(U),q&&(q.c(),q.m(Fe,null))),U[19]?te?te.p(U,X):(te=ll(U),te.c(),te.m(be,le)):te&&(te.d(1),te=null),U[19]?we&&(we.d(1),we=null):we?we.p(U,X):(we=rl(U),we.c(),we.m(be,null)),nt===(nt=Ye(U))&&Xe?Xe.p(U,X):(Xe.d(1),Xe=nt(U),Xe&&(Xe.c(),Xe.m(Ne,null))),it===(it=Ct(U))&&qe?qe.p(U,X):(qe.d(1),qe=it(U),qe&&(qe.c(),qe.m(Te,null)))},i:ut,o:ut,d(U){U&&v(e),Ae&&Ae.d(),Je.d(),Re&&Re.d(),Qe.d(),Ce&&Ce.d(),Ie&&Ie.d(),q.d(),te&&te.d(),we&&we.d(),Xe.d(),qe.d(),ze=!1,It(st)}}}function Mt(a){switch(a){case"pending":return{label:"Pending",class:"status-pending"};case"approved":return{label:"Approved",class:"status-approved"};case"trained":return{label:"Trained",class:"status-trained"};case"evaluated":return{label:"Evaluated",class:"status-evaluated"};case"active":return{label:"Active",class:"status-active"};default:return{label:a,class:"status-pending"}}}function ns(a,e,t){let l=[],n=null,i=null,r=!1,f=!0,u=null,h={},g=!1,k=[],_=null,y=!1;async function p(){t(4,f=!0),t(5,u=null);try{const{data:m,error:A}=await wt("/api/adapters",{timeout:15e3,retries:1,retryDelay:2e3});if(A)throw new Error(A);if(!m||!m.success)throw new Error(m?.error||"Failed to load adapters");t(0,l=Array.isArray(m.datasets)?m.datasets:[]),t(1,n=m.autoApproval??null),t(2,i=m.activeAdapter??null),t(3,r=!!m.sleep?.loraEnabled),t(7,k=Array.isArray(m.recentLogs)?m.recentLogs:[])}catch(m){console.error("[AdapterDashboard] Load error:",m),t(5,u=m.message)}finally{t(4,f=!1)}}async function T(){try{const{data:m,error:A}=await wt("/api/training-data",{timeout:1e4});if(A){console.error("Failed to load training config:",A);return}m&&m.success&&t(8,_=m.config)}catch(m){console.error("Failed to load training config:",m)}}async function S(m){t(9,y=!0);try{const A=await mt("/api/training-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),q=await A.json();if(!A.ok||!q.success)throw new Error(q.error||"Failed to update training config");t(8,_=q.config),alert("Training data configuration updated successfully")}catch(A){alert(A.message)}finally{t(9,y=!1)}}function V(m){if(!_||!_.phases[m])return;const A=_.phases[m];S({curator:{batchSize:A.curator.batchSize},collection:{maxSamplesPerSource:A.curator.maxSamplesPerSource}})}Dl(async()=>{p(),T(),ne();try{const te=await(await mt("/api/training/running")).json();te.success&&te.running&&(t(13,W=te.pid),t(19,O=!0),J())}catch(q){console.warn("Could not check training status on mount:",q)}const m=setInterval(p,3e4),A=()=>{document.hidden?(clearInterval(m),ve()):(p(),setInterval(p,3e4),W&&J())};return document.addEventListener("visibilitychange",A),()=>{clearInterval(m),ve(),document.removeEventListener("visibilitychange",A)}}),Il(()=>{z&&W&&t(16,z.scrollTop=z.scrollHeight,z),pe&&W&&t(17,pe.scrollTop=pe.scrollHeight,pe)});function D(m,A,q){const te=`${m}:${A}`;h=q?{...h,[te]:A}:Object.fromEntries(Object.entries(h).filter(([we])=>we!==te))}function B(m,A){return!!h[`${m}:${A}`]}async function L(m,A){const q=await mt("/api/adapters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:m,...A})}),te=await q.json();if(!q.ok||!te.success)throw new Error(te.error||`Action ${m} failed`);return te}async function j(m){if(confirm(`Approve dataset ${m}?`)){D(m,"approve",!0);try{await L("approve",{date:m}),await p()}catch(A){alert(A.message)}finally{D(m,"approve",!1)}}}async function G(m){if(confirm(`Reject dataset ${m}? It will be moved to _rejected.`)){D(m,"reject",!0);try{await L("reject",{date:m,reason:"Rejected via web UI"}),await p()}catch(A){alert(A.message)}finally{D(m,"reject",!1)}}}async function fe(m){if(confirm(`Start LoRA training for ${m}? This runs in the background.`)){D(m,"train",!0);try{await L("train",{date:m}),await p(),alert("Training started. Check audit logs for progress.")}catch(A){alert(A.message)}finally{D(m,"train",!1)}}}async function $(m){D(m,"eval",!0);try{await L("eval",{date:m}),await p(),alert("Evaluation started. Refresh later for results.")}catch(A){alert(A.message)}finally{D(m,"eval",!1)}}async function Q(m){if(confirm(`Activate adapter ${m}? Ensure Ollama has the base model installed.`)){D(m,"activate",!0);try{const A=await L("activate",{date:m});await p(),alert(A.message||"Adapter activation metadata updated. Run `ollama create` as instructed.")}catch(A){alert(A.message)}finally{D(m,"activate",!1)}}}async function Z(){try{await L("runBuilder",{}),alert("Adapter-builder started. Refresh in a moment to see the dataset."),await p()}catch(m){alert(m.message)}}async function ce(){try{await L("runDreamer",{}),alert("Dreamer started. Morning profile will include new learnings.")}catch(m){alert(m.message)}}async function ue(){try{await L("runNightProcessor",{}),alert("Night processor started (transcriber + audio-organizer).")}catch(m){alert(m.message)}}async function _e(){try{await L("startSleepService",{}),alert("Sleep service started in background. It will run nightly.")}catch(m){alert(m.message)}}let oe=!1,K="",se=!1,W=null,H=[],de=[],x=null,z=null,pe=null,ie=!1,O=!1,R=[],M=null,ae="/docs/user-guide/lora-training.md";async function ne(){try{const{data:m,error:A}=await wt("/api/training-models",{timeout:1e4});if(A){console.error("Failed to load training models:",A),t(21,M=A);return}m&&m.success&&m.models?(t(20,R=m.models),m.notes?.setup_guide&&t(22,ae=m.notes.setup_guide)):(t(21,M=m?.error||"Failed to load training models"),m?.setupGuide&&t(22,ae=m.setupGuide))}catch(m){console.error("Failed to load training models:",m),t(21,M="Failed to load training models")}}async function ee(){try{const{data:A}=await wt("/api/training/logs?maxLines=50",{timeout:5e3});A&&A.success&&A.logs&&t(14,H=A.logs);const{data:q}=await wt("/api/training/console-logs?maxLines=100",{timeout:5e3});q&&q.success&&q.logs&&t(15,de=q.logs);const{data:te}=await wt("/api/training/running",{timeout:5e3});te&&te.success&&(t(13,W=te.running?te.pid:null),!te.running&&W&&ve())}catch(m){console.warn("Failed to load training logs:",m)}}async function F(){if(confirm("Cancel the training cycle? This will stop all in-progress work.")){t(18,ie=!0);try{await L("cancelFullCycle",{}),t(13,W=null),ve(),alert("Training cancelled successfully")}catch(m){alert(m.message)}finally{t(18,ie=!1)}}}function J(){x&&clearInterval(x),ee(),x=setInterval(ee,1e4)}function ve(){x&&(clearInterval(x),x=null)}function ge(){t(10,oe=!1)}async function be(){try{await L("fullCycle",{model:K||void 0,dualMode:se}),t(10,oe=!1),t(19,O=!0),J(),alert("Training started! Check the Training Monitor section below to follow progress.")}catch(m){alert(m&&m.message||String(m))}}async function Pe(){try{const A=await mt("/api/training-config");if(A.ok){const q=await A.json();t(11,K=q.base_model||"")}}catch{t(11,K=R.length>0?R[0].id:"")}!R.map(A=>A.id).includes(K)&&R.length>0&&t(11,K=R[0].id);try{const A=await mt("/api/adapters");if(A.ok){const q=await A.json(),te=q.datasets&&q.datasets.length>1;t(12,se=te)}}catch(A){console.warn("Could not determine if dual mode should be enabled:",A),t(12,se=!1)}t(10,oe=!0)}async function je(){try{const m=await mt("/api/export/conversations",{method:"POST"}),A=await m.json();if(!m.ok||!A.success)throw new Error(A.error||"Export failed");alert(`Exported ${A.count} items to ${A.dir||"N/A"}`)}catch(m){alert(m&&m.message||String(m))}}async function Ue(){if(confirm("Merge all historical adapters into a single consolidated adapter? This may take several minutes."))try{await L("mergeAdapters",{}),alert("Adapter merge started. Check audit logs for progress."),await p()}catch(m){alert(m.message)}}async function ye(m,A){if(n){t(6,g=!0);try{const q={};q[m]=A,await L("autoApproval",q),await p()}catch(q){alert(q.message)}finally{t(6,g=!1)}}}function Oe(m){const A=m.currentTarget;ye("enabled",!!A.checked)}function Le(m){const A=m.currentTarget;ye("dryRun",!!A.checked)}async function ke(m){try{const A=m.currentTarget,q=await mt("/api/adapters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sleep",loraEnabled:!!A.checked})}),te=await q.json();if(!q.ok||!te.success)throw new Error(te.error||"Failed to update sleep config");t(3,r=!!te.sleep?.loraEnabled)}catch(A){alert(A&&A.message||String(A))}}async function Ee(m,A){try{const q={action:"autoApproval"};q[m]=A;const te=await mt("/api/adapters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),we=await te.json();if(!te.ok||!we.success)throw new Error(we.error||"Failed to update auto-approval options");t(1,n=we.config)}catch(q){alert(q&&q.message||String(q))}}function We(m){Ee("autoTrain",!!m.currentTarget.checked)}function Fe(m){Ee("autoEval",!!m.currentTarget.checked)}function Ge(m){Ee("autoActivate",!!m.currentTarget.checked)}function le(m){const A=n;return A?A[m]!==!1:!1}function he(m){m.key==="Escape"&&oe&&t(10,oe=!1)}function Ne(m){Ll.call(this,a,m)}const Ve=()=>t(5,u=null),et=m=>S({curator:{batchSize:parseInt(m.currentTarget.value)}}),Ke=m=>S({curator:{qualityThreshold:parseFloat(m.currentTarget.value)}}),De=m=>S({curator:{temperature:parseFloat(m.currentTarget.value)}}),Te=m=>S({collection:{maxSamplesPerSource:parseInt(m.currentTarget.value)}}),Be=m=>S({collection:{maxDays:parseInt(m.currentTarget.value)}}),lt=()=>V("phase1_conservative"),xe=()=>V("phase2_optimal"),ze=()=>V("phase3_maximum");function st(){K=Vl(this),t(11,K),t(20,R)}function Ae(){se=this.checked,t(12,se)}const He=()=>t(19,O=!O);function Ze(m){zt[m?"unshift":"push"](()=>{z=m,t(16,z)})}function Je(m){zt[m?"unshift":"push"](()=>{pe=m,t(17,pe)})}return[l,n,i,r,f,u,g,k,_,y,oe,K,se,W,H,de,z,pe,ie,O,R,M,ae,p,S,V,B,j,G,fe,$,Q,Z,ce,ue,_e,F,ge,be,Pe,je,Ue,Oe,Le,ke,We,Fe,Ge,le,he,Ne,Ve,et,Ke,De,Te,Be,lt,xe,ze,st,Ae,He,Ze,Je,m=>j(m.date),m=>G(m.date),m=>fe(m.date),m=>$(m.date),m=>Q(m.date),m=>G(m.date)]}class os extends wl{constructor(e){super(),Nl(this,e,ns,as,Al,{},null,[-1,-1,-1,-1])}}export{os as default};
