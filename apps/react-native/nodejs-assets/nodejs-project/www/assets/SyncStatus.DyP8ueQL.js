const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.BJPD4Al_.js","assets/api-config.BAZ_dc_Y.js","assets/index.CXATIzgh.js","assets/index.CQQMVhsU.js","assets/index.9_jO8-yW.js"])))=>i.map(i=>d[i]);
import{A as Ue,_ as Oe,D as Ze,S as Xt,i as Zt,s as xt,n as ye,d as v,a as P,h as S,P as Ie,k,W as is,U as $t,o as es,v as Se,b as r,x as ae,Q as Fe,c as u,e as h,f as C,g as M,j as m,p as se,q as U,t as O,$ as Le,m as os,r as Te,u as xe,z as De,w as at,y as cs,O as ze,R as $e,H as fs,I as us,J as ds,K as vs,L as hs,M as ms}from"./api-config.BAZ_dc_Y.js";import{d as ts,w as He}from"./index.enr_Xien.js";import{h as ss}from"./server-health.C6FYljDX.js";import{getSetting as ps}from"./local-memory.qidMz0ak.js";import{a as ls,t as _s,c as bs,b as gs,d as Cs,e as ns}from"./profile-sync.fcLjFkDy.js";const ys=3e4,Ss=3,Ge="mh_sync_queue",as="mh_sync_state",et="mh_local_memories",ge=He({lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1}),Ne=He([]),we=He(new Map),ks=ts(ge,s=>s.pendingCount>0),ws=ts(ge,s=>s.conflictCount>0);async function Xe(s,e){if(!Ue())try{const t=localStorage.getItem(s);return t?JSON.parse(t):e}catch{return e}try{const{Preferences:t}=await Oe(async()=>{const{Preferences:i}=await import("./index.BJPD4Al_.js");return{Preferences:i}},__vite__mapDeps([0,1,2])),{value:l}=await t.get({key:s});return l?JSON.parse(l):e}catch{return e}}async function Ve(s,e){const t=JSON.stringify(e);if(!Ue()){localStorage.setItem(s,t);return}try{const{Preferences:l}=await Oe(async()=>{const{Preferences:i}=await import("./index.BJPD4Al_.js");return{Preferences:i}},__vite__mapDeps([0,1,2]));await l.set({key:s,value:t})}catch(l){console.error("[memory-sync] Failed to save to storage:",l)}}async function rt(s,e){let t=[];Ne.subscribe(n=>t=n)();const l=t.findIndex(n=>n.id===e.id),i={id:e.id,action:s,memory:e,queuedAt:new Date().toISOString(),attempts:0};if(l>=0){const n=t[l];n.action==="create"&&s==="delete"||(n.action==="create"&&s==="update"?t[l]={...i,action:"create"}:t[l]=i)}else t.push(i);Ne.set(t),await Ve(Ge,t),ge.update(n=>({...n,pendingCount:t.length}))}async function Es(s){let e=[];Ne.subscribe(t=>e=t)(),e=e.filter(t=>t.id!==s),Ne.set(e),await Ve(Ge,e),ge.update(t=>({...t,pendingCount:e.length}))}async function zs(s){try{const{apiFetch:e}=await Oe(async()=>{const{apiFetch:a}=await import("./api-config.BAZ_dc_Y.js").then(f=>f.au);return{apiFetch:a}},[]);let t,l,i;switch(s.action){case"create":t="/api/memory/sync/push",l="POST",i={memory:s.memory};break;case"update":t="/api/memory/sync/push",l="PUT",i={memory:s.memory};break;case"delete":t=`/api/memory/sync/${s.id}`,l="DELETE",i=void 0;break}const n=await e(t,{method:l,headers:{"Content-Type":"application/json"},body:i?JSON.stringify(i):void 0});if(!n.ok){const a=await n.text();return{success:!1,error:`Server returned ${n.status}: ${a}`}}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async function Ns(s){try{const{apiFetch:e}=await Oe(async()=>{const{apiFetch:n}=await import("./api-config.BAZ_dc_Y.js").then(a=>a.au);return{apiFetch:n}},[]),t=s?`?since=${encodeURIComponent(s)}`:"",l=await e(`/api/memory/sync/pull${t}`);return l.ok?{memories:(await l.json()).memories||[]}:{memories:[],error:`Server returned ${l.status}`}}catch(e){return{memories:[],error:e instanceof Error?e.message:"Network error"}}}function Is(s,e){return s.serverModifiedAt&&e.timestamp>s.serverModifiedAt&&s.localModifiedAt>s.serverModifiedAt?s.content!==e.content:!1}async function As(s,e,t="server-wins"){switch(t){case"server-wins":return{...e,syncStatus:"synced",localModifiedAt:e.timestamp,serverModifiedAt:e.timestamp};case"local-wins":return{...s,syncStatus:"pending"};case"manual":return{...s,syncStatus:"conflict",serverModifiedAt:e.timestamp}}}async function rs(){let s={lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1};if(ge.subscribe(l=>s=l)(),s.isSyncing)return{success:!1,pushed:0,pulled:0,conflicts:0,errors:["Sync already in progress"]};let e=!1;if(ss.subscribe(l=>e=l.connected)(),!e)return{success:!1,pushed:0,pulled:0,conflicts:0,errors:["Server not connected"]};ge.update(l=>({...l,isSyncing:!0}));const t={success:!0,pushed:0,pulled:0,conflicts:0,errors:[]};try{let l=[];Ne.subscribe(a=>l=a)();for(const a of l){if(a.attempts>=Ss){t.errors.push(`Max retries exceeded for ${a.id}`);continue}const f=await zs(a);if(f.success){await Es(a.id);let c=new Map;we.subscribe(d=>c=d)();const o=c.get(a.id);o&&a.action!=="delete"?(c.set(a.id,{...o,syncStatus:"synced",serverModifiedAt:new Date().toISOString()}),we.set(c)):a.action==="delete"&&(c.delete(a.id),we.set(c)),t.pushed++}else{let c=[];Ne.subscribe(d=>c=d)();const o=c.findIndex(d=>d.id===a.id);o>=0&&(c[o]={...a,attempts:a.attempts+1,lastAttempt:new Date().toISOString(),error:f.error},Ne.set(c),await Ve(Ge,c)),t.errors.push(`Failed to push ${a.id}: ${f.error}`)}}const i=await Ns(s.lastSyncTimestamp);if(i.error)t.errors.push(`Failed to pull: ${i.error}`);else{let a=new Map;we.subscribe(f=>a=f)();for(const f of i.memories){const c=a.get(f.id);if(c)if(Is(c,f)){const o=await As(c,f,"server-wins");a.set(f.id,o),o.syncStatus==="conflict"&&t.conflicts++}else a.set(f.id,{...f,syncStatus:"synced",localModifiedAt:f.timestamp,serverModifiedAt:f.timestamp});else a.set(f.id,{...f,syncStatus:"synced",localModifiedAt:f.timestamp,serverModifiedAt:f.timestamp});t.pulled++}we.set(a),await Ve(et,Array.from(a.entries()))}const n=new Date().toISOString();ge.update(a=>({...a,lastSyncTimestamp:n,lastSuccessfulSync:t.errors.length===0?n:a.lastSuccessfulSync,conflictCount:t.conflicts,isSyncing:!1})),await Ve(as,{lastSyncTimestamp:n,lastSuccessfulSync:t.errors.length===0?n:s.lastSuccessfulSync}),t.success=t.errors.length===0}catch(l){t.success=!1,t.errors.push(l instanceof Error?l.message:"Unknown sync error"),ge.update(i=>({...i,isSyncing:!1,lastSyncError:t.errors.join("; ")}))}return t}async function it(){let s=new Map;return we.subscribe(e=>s=e)(),Array.from(s.values()).filter(e=>e.syncStatus==="conflict")}async function Ds(s){let e=new Map;we.subscribe(i=>e=i)();const t=e.get(s.memoryId);if(!t||t.syncStatus!=="conflict")return!1;switch(s.resolution){case"keep-local":e.set(s.memoryId,{...t,syncStatus:"pending"}),await rt("update",e.get(s.memoryId));break;case"keep-server":e.set(s.memoryId,{...t,syncStatus:"synced"});break;case"merge":s.mergedContent&&(e.set(s.memoryId,{...t,content:s.mergedContent,syncStatus:"pending",localModifiedAt:new Date().toISOString()}),await rt("update",e.get(s.memoryId)));break}we.set(e),await Ve(et,Array.from(e.entries()));const l=Array.from(e.values()).filter(i=>i.syncStatus==="conflict").length;return ge.update(i=>({...i,conflictCount:l})),!0}let Re=null,ot=!1;async function Ps(){if(ot)return;const s=await Xe(as,{});ge.update(l=>({...l,...s}));const e=await Xe(Ge,[]);Ne.set(e);const t=await Xe(et,[]);we.set(new Map(t)),ge.update(l=>({...l,pendingCount:e.length,conflictCount:t.filter(([i,n])=>n.syncStatus==="conflict").length})),Vs(),typeof window<"u"&&window.addEventListener("online",()=>{console.log("[memory-sync] Online - triggering sync"),rs()}),ot=!0}function Vs(){Re||(Re=setInterval(async()=>{let s=!1;ss.subscribe(t=>s=t.connected)();let e=0;ge.subscribe(t=>e=t.pendingCount)(),s&&e>0&&await rs()},ys))}function Ts(){Re&&(clearInterval(Re),Re=null)}const Be={version:"1.0",versionCode:1},Pe=He({currentVersion:Be.version,currentVersionCode:Be.versionCode,latestVersion:null,latestVersionCode:null,updateAvailable:!1,releaseNotes:null,downloadUrl:null,fileSize:null,lastChecked:null,isChecking:!1,error:null}),tt=He(!1);async function Ms(){if(!Ue())return Be;try{const t=await(await Oe(()=>import("./index.CQQMVhsU.js"),__vite__mapDeps([3,1,2]))).App.getInfo();return{version:t.version,versionCode:parseInt(t.build,10)||Be.versionCode}}catch(s){return console.warn("[app-update] Could not get app info from Capacitor:",s),Be}}async function Us(s){if(!Ue())return{...Ze(Pe),error:"Updates only available on mobile"};Pe.update(e=>({...e,isChecking:!0,error:null}));try{const e=await Ms(),t=s.replace(/\/$/,""),l=await fetch(`${t}/api/app-version`,{method:"GET",headers:{Accept:"application/json"}});if(!l.ok)throw new Error(`Server returned ${l.status}`);const i=await l.json(),n=i.versionCode>e.versionCode,a={currentVersion:e.version,currentVersionCode:e.versionCode,latestVersion:i.version,latestVersionCode:i.versionCode,updateAvailable:n,releaseNotes:i.releaseNotes||null,downloadUrl:i.downloadUrl||`${t}/downloads/metahuman-os.apk`,fileSize:i.fileSize||null,lastChecked:new Date().toISOString(),isChecking:!1,error:null};return Pe.set(a),tt.set(n),console.log(n?`[app-update] Update available: ${e.version} -> ${i.version}`:`[app-update] App is up to date (${e.version})`),a}catch(e){const t=e instanceof Error?e.message:"Failed to check for updates";return console.error("[app-update] Check failed:",e),Pe.update(l=>({...l,isChecking:!1,error:t})),Ze(Pe)}}function Qe(s){return s?s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`:"Unknown size"}async function Os(){const s=Ze(Pe);if(!s.downloadUrl){console.error("[app-update] No download URL available");return}if(Ue())try{await(await Oe(()=>import("./index.9_jO8-yW.js"),__vite__mapDeps([4,1,2]))).Browser.open({url:s.downloadUrl})}catch{window.open(s.downloadUrl,"_blank")}else window.open(s.downloadUrl,"_blank")}function Ls(){tt.set(!1)}function ct(s,e,t){const l=s.slice();return l[49]=e[t],l}function ft(s,e,t){const l=s.slice();return l[49]=e[t],l}function ut(s){let e,t,l,i,n='<h3 class="svelte-19d6nfz">Sync Manager</h3> <span class="header-subtitle svelte-19d6nfz">Configure your synchronization</span>',a,f,c,o,d=!s[0]&&dt(s);function b(g,y){return g[0]?Bs:Rs}let p=b(s),_=p(s);return{c(){e=m("div"),t=m("div"),l=m("div"),i=m("div"),i.innerHTML=n,a=k(),d&&d.c(),f=k(),_.c(),this.h()},l(g){e=h(g,"DIV",{class:!0});var y=C(e);t=h(y,"DIV",{class:!0});var w=C(t);l=h(w,"DIV",{class:!0});var E=C(l);i=h(E,"DIV",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1fnqy04"&&(i.innerHTML=n),a=S(E),d&&d.l(E),E.forEach(v),f=S(w),_.l(w),w.forEach(v),y.forEach(v),this.h()},h(){u(i,"class","header-content svelte-19d6nfz"),u(l,"class","modal-header svelte-19d6nfz"),u(t,"class","sync-manager svelte-19d6nfz"),u(e,"class","modal-overlay svelte-19d6nfz")},m(g,y){P(g,e,y),r(e,t),r(t,l),r(l,i),r(l,a),d&&d.m(l,null),r(t,f),_.m(t,null),c||(o=[ae(t,"click",Fe(s[36])),ae(e,"click",s[31])],c=!0)},p(g,y){g[0]?d&&(d.d(1),d=null):d?d.p(g,y):(d=dt(g),d.c(),d.m(l,null)),p===(p=b(g))&&_?_.p(g,y):(_.d(1),_=p(g),_&&(_.c(),_.m(t,null)))},d(g){g&&v(e),d&&d.d(),_.d(),c=!1,Se(o)}}}function dt(s){let e,t="√ó",l,i;return{c(){e=m("button"),e.textContent=t,this.h()},l(n){e=h(n,"BUTTON",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-xxc84n"&&(e.textContent=t),this.h()},h(){u(e,"class","close-btn svelte-19d6nfz")},m(n,a){P(n,e,a),l||(i=ae(e,"click",s[31]),l=!0)},p:ye,d(n){n&&v(e),l=!1,i()}}}function Rs(s){let e,t,l,i,n,a=s[6]?"üîó":"‚öôÔ∏è",f,c,o,d,b=s[6]?"Remote Server Connected":"Configure Sync Server",p,_,g,y,w=s[10]?"‚ñº":"‚ñ∂",E,N,A,I,z,Q=`<span class="warning-icon svelte-19d6nfz">üì∂</span> <div class="warning-content svelte-19d6nfz"><span class="warning-title svelte-19d6nfz">WiFi Recommended</span> <span class="warning-text svelte-19d6nfz">Sync operations can transfer significant amounts of data.
              We recommend using a WiFi connection to avoid mobile data charges.</span></div>`,L,R,V,F,Z="Select data to sync:",q,T,x,te="All",le,W,ee="None",j,K,H,G,$,B,J="‚ü≥",X,ie,me,pe,fe="Cancel",be,ve;function ue(ne,de){return ne[6]?Hs:Fs}let Y=ue(s),oe=Y(s),D=s[10]&&ht(s),re=s[6]&&_t(s),_e=Te(s[18]),ce=[];for(let ne=0;ne<_e.length;ne+=1)ce[ne]=wt(ct(s,_e,ne));return{c(){e=m("div"),t=m("div"),l=m("div"),i=m("div"),n=m("span"),f=O(a),c=k(),o=m("div"),d=m("span"),p=O(b),_=k(),oe.c(),g=k(),y=m("span"),E=O(w),N=k(),D&&D.c(),A=k(),re&&re.c(),I=k(),z=m("div"),z.innerHTML=Q,L=k(),R=m("div"),V=m("div"),F=m("span"),F.textContent=Z,q=k(),T=m("div"),x=m("button"),x.textContent=te,le=k(),W=m("button"),W.textContent=ee,j=k(),K=m("div");for(let ne=0;ne<ce.length;ne+=1)ce[ne].c();H=k(),G=m("div"),$=m("button"),B=m("span"),B.textContent=J,X=O(`
            Start Sync`),me=k(),pe=m("button"),pe.textContent=fe,this.h()},l(ne){e=h(ne,"DIV",{class:!0});var de=C(e);t=h(de,"DIV",{class:!0});var he=C(t);l=h(he,"DIV",{class:!0});var Ce=C(l);i=h(Ce,"DIV",{class:!0});var Ee=C(i);n=h(Ee,"SPAN",{class:!0});var Ae=C(n);f=U(Ae,a),Ae.forEach(v),c=S(Ee),o=h(Ee,"DIV",{class:!0});var ke=C(o);d=h(ke,"SPAN",{class:!0});var st=C(d);p=U(st,b),st.forEach(v),_=S(ke),oe.l(ke),ke.forEach(v),Ee.forEach(v),g=S(Ce),y=h(Ce,"SPAN",{class:!0});var lt=C(y);E=U(lt,w),lt.forEach(v),Ce.forEach(v),N=S(he),D&&D.l(he),he.forEach(v),A=S(de),re&&re.l(de),I=S(de),z=h(de,"DIV",{class:!0,"data-svelte-h":!0}),M(z)!=="svelte-1q3k8tv"&&(z.innerHTML=Q),L=S(de),R=h(de,"DIV",{class:!0});var qe=C(R);V=h(qe,"DIV",{class:!0});var je=C(V);F=h(je,"SPAN",{class:!0,"data-svelte-h":!0}),M(F)!=="svelte-1gcl82e"&&(F.textContent=Z),q=S(je),T=h(je,"DIV",{class:!0});var Ke=C(T);x=h(Ke,"BUTTON",{class:!0,"data-svelte-h":!0}),M(x)!=="svelte-1aawpe4"&&(x.textContent=te),le=S(Ke),W=h(Ke,"BUTTON",{class:!0,"data-svelte-h":!0}),M(W)!=="svelte-1cl1euw"&&(W.textContent=ee),Ke.forEach(v),je.forEach(v),j=S(qe),K=h(qe,"DIV",{class:!0});var nt=C(K);for(let Ye=0;Ye<ce.length;Ye+=1)ce[Ye].l(nt);nt.forEach(v),qe.forEach(v),de.forEach(v),H=S(ne),G=h(ne,"DIV",{class:!0});var We=C(G);$=h(We,"BUTTON",{class:!0});var Je=C($);B=h(Je,"SPAN",{class:!0,"data-svelte-h":!0}),M(B)!=="svelte-138j2aq"&&(B.textContent=J),X=U(Je,`
            Start Sync`),Je.forEach(v),me=S(We),pe=h(We,"BUTTON",{class:!0,"data-svelte-h":!0}),M(pe)!=="svelte-1w0gmb9"&&(pe.textContent=fe),We.forEach(v),this.h()},h(){u(n,"class","server-icon svelte-19d6nfz"),u(d,"class","server-title svelte-19d6nfz"),u(o,"class","server-info svelte-19d6nfz"),u(i,"class","server-status svelte-19d6nfz"),u(y,"class","expand-icon svelte-19d6nfz"),u(l,"class","server-config-header svelte-19d6nfz"),u(t,"class","server-config-section svelte-19d6nfz"),u(z,"class","wifi-warning svelte-19d6nfz"),u(F,"class","options-title svelte-19d6nfz"),u(x,"class","bulk-btn svelte-19d6nfz"),u(W,"class","bulk-btn svelte-19d6nfz"),u(T,"class","bulk-actions svelte-19d6nfz"),u(V,"class","options-header svelte-19d6nfz"),u(K,"class","options-list svelte-19d6nfz"),u(R,"class","options-section svelte-19d6nfz"),u(e,"class","scrollable-content svelte-19d6nfz"),u(B,"class","btn-icon svelte-19d6nfz"),u($,"class","sync-btn primary svelte-19d6nfz"),$.disabled=ie=!s[18].some(Dt),u(pe,"class","sync-btn secondary svelte-19d6nfz"),u(G,"class","action-section svelte-19d6nfz")},m(ne,de){P(ne,e,de),r(e,t),r(t,l),r(l,i),r(i,n),r(n,f),r(i,c),r(i,o),r(o,d),r(d,p),r(o,_),oe.m(o,null),r(l,g),r(l,y),r(y,E),r(t,N),D&&D.m(t,null),r(e,A),re&&re.m(e,null),r(e,I),r(e,z),r(e,L),r(e,R),r(R,V),r(V,F),r(V,q),r(V,T),r(T,x),r(T,le),r(T,W),r(R,j),r(R,K);for(let he=0;he<ce.length;he+=1)ce[he]&&ce[he].m(K,null);P(ne,H,de),P(ne,G,de),r(G,$),r($,B),r($,X),r(G,me),r(G,pe),be||(ve=[ae(l,"click",s[37]),ae(x,"click",s[28]),ae(W,"click",s[29]),ae($,"click",s[30]),ae(pe,"click",s[31])],be=!0)},p(ne,de){if(de[0]&64&&a!==(a=ne[6]?"üîó":"‚öôÔ∏è")&&se(f,a),de[0]&64&&b!==(b=ne[6]?"Remote Server Connected":"Configure Sync Server")&&se(p,b),Y===(Y=ue(ne))&&oe?oe.p(ne,de):(oe.d(1),oe=Y(ne),oe&&(oe.c(),oe.m(o,null))),de[0]&1024&&w!==(w=ne[10]?"‚ñº":"‚ñ∂")&&se(E,w),ne[10]?D?D.p(ne,de):(D=ht(ne),D.c(),D.m(t,null)):D&&(D.d(1),D=null),ne[6]?re?re.p(ne,de):(re=_t(ne),re.c(),re.m(e,I)):re&&(re.d(1),re=null),de[0]&134479872){_e=Te(ne[18]);let he;for(he=0;he<_e.length;he+=1){const Ce=ct(ne,_e,he);ce[he]?ce[he].p(Ce,de):(ce[he]=wt(Ce),ce[he].c(),ce[he].m(K,null))}for(;he<ce.length;he+=1)ce[he].d(1);ce.length=_e.length}de[0]&262144&&ie!==(ie=!ne[18].some(Dt))&&($.disabled=ie)},d(ne){ne&&(v(e),v(H),v(G)),oe.d(),D&&D.d(),re&&re.d(),xe(ce,ne),be=!1,Se(ve)}}}function Bs(s){let e,t,l='<div class="pulse-ring svelte-19d6nfz"></div> <div class="pulse-ring delay-1 svelte-19d6nfz"></div> <div class="pulse-ring delay-2 svelte-19d6nfz"></div> <span class="sync-icon svelte-19d6nfz">‚ü≥</span>',i,n,a,f,c,o,d="_",b,p,_,g="Do not close the app while syncing...";function y(N,A){return N[1]?Gs:Qs}let w=y(s),E=w(s);return{c(){e=m("div"),t=m("div"),t.innerHTML=l,i=k(),n=m("div"),a=m("span"),f=O(s[19]),c=k(),o=m("span"),o.textContent=d,b=k(),E.c(),p=k(),_=m("p"),_.textContent=g,this.h()},l(N){e=h(N,"DIV",{class:!0});var A=C(e);t=h(A,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-15el6cu"&&(t.innerHTML=l),i=S(A),n=h(A,"DIV",{class:!0});var I=C(n);a=h(I,"SPAN",{class:!0});var z=C(a);f=U(z,s[19]),z.forEach(v),c=S(I),o=h(I,"SPAN",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-5ylrdm"&&(o.textContent=d),I.forEach(v),b=S(A),E.l(A),p=S(A),_=h(A,"P",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-1xvot9q"&&(_.textContent=g),A.forEach(v),this.h()},h(){u(t,"class","sync-animation svelte-19d6nfz"),u(a,"class","message-text"),u(o,"class","cursor svelte-19d6nfz"),u(n,"class","scifi-message svelte-19d6nfz"),u(_,"class","sync-warning-active svelte-19d6nfz"),u(e,"class","sync-progress-section svelte-19d6nfz")},m(N,A){P(N,e,A),r(e,t),r(e,i),r(e,n),r(n,a),r(a,f),r(n,c),r(n,o),r(e,b),E.m(e,null),r(e,p),r(e,_)},p(N,A){A[0]&524288&&se(f,N[19]),w===(w=y(N))&&E?E.p(N,A):(E.d(1),E=w(N),E&&(E.c(),E.m(e,p)))},d(N){N&&v(e),E.d()}}}function Fs(s){let e,t="Set up server to sync your profile";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-ivdlls"&&(e.textContent=t),this.h()},h(){u(e,"class","server-hint svelte-19d6nfz")},m(l,i){P(l,e,i)},p:ye,d(l){l&&v(e)}}}function Hs(s){let e,t,l,i,n=s[11]&&vt(s);return{c(){e=m("span"),t=O(s[3]),l=k(),n&&n.c(),i=Ie(),this.h()},l(a){e=h(a,"SPAN",{class:!0});var f=C(e);t=U(f,s[3]),f.forEach(v),l=S(a),n&&n.l(a),i=Ie(),this.h()},h(){u(e,"class","server-url svelte-19d6nfz")},m(a,f){P(a,e,f),r(e,t),P(a,l,f),n&&n.m(a,f),P(a,i,f)},p(a,f){f[0]&8&&se(t,a[3]),a[11]?n?n.p(a,f):(n=vt(a),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(a){a&&(v(e),v(l),v(i)),n&&n.d(a)}}}function vt(s){let e,t,l=new Date(s[11]).toLocaleString()+"",i;return{c(){e=m("span"),t=O("Last sync: "),i=O(l),this.h()},l(n){e=h(n,"SPAN",{class:!0});var a=C(e);t=U(a,"Last sync: "),i=U(a,l),a.forEach(v),this.h()},h(){u(e,"class","last-sync svelte-19d6nfz")},m(n,a){P(n,e,a),r(e,t),r(e,i)},p(n,a){a[0]&2048&&l!==(l=new Date(n[11]).toLocaleString()+"")&&se(i,l)},d(n){n&&v(e)}}}function ht(s){let e,t,l,i="Server URL",n,a,f,c,o,d,b="Username",p,_,g,y,w,E,N="Password",A,I,z,Q,L,R,V,F,Z=s[7]?"Testing...":"Test Connection",q,T,x,te,le=s[9]?"Saving...":"Save & Connect",W,ee,j,K,H,G=s[8]&&mt(s),$=s[6]&&pt(s);return{c(){e=m("div"),t=m("div"),l=m("label"),l.textContent=i,n=k(),a=m("input"),c=k(),o=m("div"),d=m("label"),d.textContent=b,p=k(),_=m("input"),y=k(),w=m("div"),E=m("label"),E.textContent=N,A=k(),I=m("input"),L=k(),G&&G.c(),R=k(),V=m("div"),F=m("button"),q=O(Z),x=k(),te=m("button"),W=O(le),j=k(),$&&$.c(),this.h()},l(B){e=h(B,"DIV",{class:!0});var J=C(e);t=h(J,"DIV",{class:!0});var X=C(t);l=h(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(l)!=="svelte-1qhc028"&&(l.textContent=i),n=S(X),a=h(X,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),X.forEach(v),c=S(J),o=h(J,"DIV",{class:!0});var ie=C(o);d=h(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(d)!=="svelte-da2c0l"&&(d.textContent=b),p=S(ie),_=h(ie,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),ie.forEach(v),y=S(J),w=h(J,"DIV",{class:!0});var me=C(w);E=h(me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(E)!=="svelte-aif6jp"&&(E.textContent=N),A=S(me),I=h(me,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),me.forEach(v),L=S(J),G&&G.l(J),R=S(J),V=h(J,"DIV",{class:!0});var pe=C(V);F=h(pe,"BUTTON",{class:!0});var fe=C(F);q=U(fe,Z),fe.forEach(v),x=S(pe),te=h(pe,"BUTTON",{class:!0});var be=C(te);W=U(be,le),be.forEach(v),j=S(pe),$&&$.l(pe),pe.forEach(v),J.forEach(v),this.h()},h(){u(l,"for","serverUrl"),u(l,"class","svelte-19d6nfz"),u(a,"type","url"),u(a,"id","serverUrl"),u(a,"placeholder","https://mh.example.com"),a.disabled=f=s[9]||s[7],u(a,"class","svelte-19d6nfz"),u(t,"class","form-group svelte-19d6nfz"),u(d,"for","serverUsername"),u(d,"class","svelte-19d6nfz"),u(_,"type","text"),u(_,"id","serverUsername"),u(_,"placeholder","your-username"),_.disabled=g=s[9]||s[7],u(_,"class","svelte-19d6nfz"),u(o,"class","form-group svelte-19d6nfz"),u(E,"for","serverPassword"),u(E,"class","svelte-19d6nfz"),u(I,"type","password"),u(I,"id","serverPassword"),u(I,"placeholder",z=s[6]?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"your-password"),I.disabled=Q=s[9]||s[7],u(I,"class","svelte-19d6nfz"),u(w,"class","form-group svelte-19d6nfz"),u(F,"class","config-btn test svelte-19d6nfz"),F.disabled=T=!s[3]||!s[4]||!s[5]||s[7]||s[9],u(te,"class","config-btn save svelte-19d6nfz"),te.disabled=ee=!s[3]||!s[4]||!s[5]||s[9],u(V,"class","server-config-actions svelte-19d6nfz"),u(e,"class","server-config-form svelte-19d6nfz")},m(B,J){P(B,e,J),r(e,t),r(t,l),r(t,n),r(t,a),De(a,s[3]),r(e,c),r(e,o),r(o,d),r(o,p),r(o,_),De(_,s[4]),r(e,y),r(e,w),r(w,E),r(w,A),r(w,I),De(I,s[5]),r(e,L),G&&G.m(e,null),r(e,R),r(e,V),r(V,F),r(F,q),r(V,x),r(V,te),r(te,W),r(V,j),$&&$.m(V,null),K||(H=[ae(a,"input",s[38]),ae(_,"input",s[39]),ae(I,"input",s[40]),ae(F,"click",s[21]),ae(te,"click",s[22])],K=!0)},p(B,J){J[0]&640&&f!==(f=B[9]||B[7])&&(a.disabled=f),J[0]&8&&a.value!==B[3]&&De(a,B[3]),J[0]&640&&g!==(g=B[9]||B[7])&&(_.disabled=g),J[0]&16&&_.value!==B[4]&&De(_,B[4]),J[0]&64&&z!==(z=B[6]?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"your-password")&&u(I,"placeholder",z),J[0]&640&&Q!==(Q=B[9]||B[7])&&(I.disabled=Q),J[0]&32&&I.value!==B[5]&&De(I,B[5]),B[8]?G?G.p(B,J):(G=mt(B),G.c(),G.m(e,R)):G&&(G.d(1),G=null),J[0]&128&&Z!==(Z=B[7]?"Testing...":"Test Connection")&&se(q,Z),J[0]&696&&T!==(T=!B[3]||!B[4]||!B[5]||B[7]||B[9])&&(F.disabled=T),J[0]&512&&le!==(le=B[9]?"Saving...":"Save & Connect")&&se(W,le),J[0]&568&&ee!==(ee=!B[3]||!B[4]||!B[5]||B[9])&&(te.disabled=ee),B[6]?$?$.p(B,J):($=pt(B),$.c(),$.m(V,null)):$&&($.d(1),$=null)},d(B){B&&v(e),G&&G.d(),$&&$.d(),K=!1,Se(H)}}}function mt(s){let e,t,l=s[8].success?"‚úì":"‚úó",i,n,a,f=s[8].message+"",c;return{c(){e=m("div"),t=m("span"),i=O(l),n=k(),a=m("span"),c=O(f),this.h()},l(o){e=h(o,"DIV",{class:!0});var d=C(e);t=h(d,"SPAN",{class:!0});var b=C(t);i=U(b,l),b.forEach(v),n=S(d),a=h(d,"SPAN",{class:!0});var p=C(a);c=U(p,f),p.forEach(v),d.forEach(v),this.h()},h(){u(t,"class","result-icon svelte-19d6nfz"),u(a,"class","result-message"),u(e,"class","connection-result svelte-19d6nfz"),ze(e,"success",s[8].success),ze(e,"error",!s[8].success)},m(o,d){P(o,e,d),r(e,t),r(t,i),r(e,n),r(e,a),r(a,c)},p(o,d){d[0]&256&&l!==(l=o[8].success?"‚úì":"‚úó")&&se(i,l),d[0]&256&&f!==(f=o[8].message+"")&&se(c,f),d[0]&256&&ze(e,"success",o[8].success),d[0]&256&&ze(e,"error",!o[8].success)},d(o){o&&v(e)}}}function pt(s){let e,t="Disconnect",l,i;return{c(){e=m("button"),e.textContent=t,this.h()},l(n){e=h(n,"BUTTON",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-19vv4lc"&&(e.textContent=t),this.h()},h(){u(e,"class","config-btn clear svelte-19d6nfz")},m(n,a){P(n,e,a),l||(i=ae(e,"click",s[23]),l=!0)},p:ye,d(n){n&&v(e),l=!1,i()}}}function _t(s){let e,t,l,i="Memory sync range:",n,a,f,c,o=(s[20].find(s[42])?.description||"")+"",d,b,p,_,g,y,w,E,N="‚òÅÔ∏è",A,I,z,Q,L,R,V="Download profile, memories, and credentials from your server",F,Z,q=Te(s[20]),T=[];for(let j=0;j<q.length;j+=1)T[j]=bt(ft(s,q,j));function x(j,K){return j[12]?js:qs}let te=x(s),le=te(s),W=s[13]&&!s[13].error&&gt(s),ee=s[14]&&yt(s);return{c(){e=m("div"),t=m("div"),l=m("label"),l.textContent=i,n=k(),a=m("select");for(let j=0;j<T.length;j+=1)T[j].c();f=k(),c=m("span"),d=O(o),b=k(),p=m("div"),_=m("button"),le.c(),y=k(),w=m("button"),E=m("span"),E.textContent=N,A=O(`
                Sync Now`),z=k(),W&&W.c(),Q=k(),ee&&ee.c(),L=k(),R=m("span"),R.textContent=V,this.h()},l(j){e=h(j,"DIV",{class:!0});var K=C(e);t=h(K,"DIV",{class:!0});var H=C(t);l=h(H,"LABEL",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-dfw6c1"&&(l.textContent=i),n=S(H),a=h(H,"SELECT",{class:!0});var G=C(a);for(let ie=0;ie<T.length;ie+=1)T[ie].l(G);G.forEach(v),f=S(H),c=h(H,"SPAN",{class:!0});var $=C(c);d=U($,o),$.forEach(v),H.forEach(v),b=S(K),p=h(K,"DIV",{class:!0});var B=C(p);_=h(B,"BUTTON",{class:!0});var J=C(_);le.l(J),J.forEach(v),y=S(B),w=h(B,"BUTTON",{class:!0});var X=C(w);E=h(X,"SPAN",{class:!0,"data-svelte-h":!0}),M(E)!=="svelte-qzpu07"&&(E.textContent=N),A=U(X,`
                Sync Now`),X.forEach(v),B.forEach(v),z=S(K),W&&W.l(K),Q=S(K),ee&&ee.l(K),L=S(K),R=h(K,"SPAN",{class:!0,"data-svelte-h":!0}),M(R)!=="svelte-1vkiw9r"&&(R.textContent=V),K.forEach(v),this.h()},h(){u(l,"class","date-range-label svelte-19d6nfz"),u(a,"class","date-range-select svelte-19d6nfz"),s[17]===void 0&&cs(()=>s[41].call(a)),u(c,"class","date-range-hint svelte-19d6nfz"),u(t,"class","date-range-section svelte-19d6nfz"),u(_,"class","status-check-btn svelte-19d6nfz"),_.disabled=g=s[12]||s[0],u(E,"class","btn-icon svelte-19d6nfz"),u(w,"class","remote-sync-btn svelte-19d6nfz"),w.disabled=I=s[0]||s[12],u(p,"class","sync-actions-row svelte-19d6nfz"),u(R,"class","sync-hint svelte-19d6nfz"),u(e,"class","remote-sync-section svelte-19d6nfz")},m(j,K){P(j,e,K),r(e,t),r(t,l),r(t,n),r(t,a);for(let H=0;H<T.length;H+=1)T[H]&&T[H].m(a,null);at(a,s[17],!0),r(t,f),r(t,c),r(c,d),r(e,b),r(e,p),r(p,_),le.m(_,null),r(p,y),r(p,w),r(w,E),r(w,A),r(e,z),W&&W.m(e,null),r(e,Q),ee&&ee.m(e,null),r(e,L),r(e,R),F||(Z=[ae(a,"change",s[41]),ae(_,"click",s[24]),ae(w,"click",s[25])],F=!0)},p(j,K){if(K[0]&1048576){q=Te(j[20]);let H;for(H=0;H<q.length;H+=1){const G=ft(j,q,H);T[H]?T[H].p(G,K):(T[H]=bt(G),T[H].c(),T[H].m(a,null))}for(;H<T.length;H+=1)T[H].d(1);T.length=q.length}K[0]&1179648&&at(a,j[17]),K[0]&131072&&o!==(o=(j[20].find(j[42])?.description||"")+"")&&se(d,o),te!==(te=x(j))&&(le.d(1),le=te(j),le&&(le.c(),le.m(_,null))),K[0]&4097&&g!==(g=j[12]||j[0])&&(_.disabled=g),K[0]&4097&&I!==(I=j[0]||j[12])&&(w.disabled=I),j[13]&&!j[13].error?W?W.p(j,K):(W=gt(j),W.c(),W.m(e,Q)):W&&(W.d(1),W=null),j[14]?ee?ee.p(j,K):(ee=yt(j),ee.c(),ee.m(e,L)):ee&&(ee.d(1),ee=null)},d(j){j&&v(e),xe(T,j),le.d(),W&&W.d(),ee&&ee.d(),F=!1,Se(Z)}}}function bt(s){let e,t=s[49].label+"",l,i;return{c(){e=m("option"),l=O(t),i=k(),this.h()},l(n){e=h(n,"OPTION",{class:!0});var a=C(e);l=U(a,t),i=S(a),a.forEach(v),this.h()},h(){e.__value=s[49].value,De(e,e.__value),u(e,"class","svelte-19d6nfz")},m(n,a){P(n,e,a),r(e,l),r(e,i)},p:ye,d(n){n&&v(e)}}}function qs(s){let e,t="üìä",l;return{c(){e=m("span"),e.textContent=t,l=O(" Check Status"),this.h()},l(i){e=h(i,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-yq9zoa"&&(e.textContent=t),l=U(i," Check Status"),this.h()},h(){u(e,"class","btn-icon svelte-19d6nfz")},m(i,n){P(i,e,n),P(i,l,n)},d(i){i&&(v(e),v(l))}}}function js(s){let e,t="‚Üª",l;return{c(){e=m("span"),e.textContent=t,l=O(" Checking..."),this.h()},l(i){e=h(i,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-16xuirm"&&(e.textContent=t),l=U(i," Checking..."),this.h()},h(){u(e,"class","spinning svelte-19d6nfz")},m(i,n){P(i,e,n),P(i,l,n)},d(i){i&&(v(e),v(l))}}}function gt(s){let e,t,l,i="Sync Status",n,a,f,c,o,d="Server",b,p,_=s[13].server.memoryCount+"",g,y,w,E,N,A="Local",I,z,Q=s[13].local.memoryCount+"",L,R,V;function F(x,te){return x[13].differences.syncRecommended?Ws:Ks}let Z=F(s),q=Z(s),T=s[13].differences.newMemoriesOnServer>0&&Ct(s);return{c(){e=m("div"),t=m("div"),l=m("span"),l.textContent=i,n=k(),q.c(),a=k(),f=m("div"),c=m("div"),o=m("span"),o.textContent=d,b=k(),p=m("span"),g=O(_),y=O(" memories"),w=k(),E=m("div"),N=m("span"),N.textContent=A,I=k(),z=m("span"),L=O(Q),R=O(" memories"),V=k(),T&&T.c(),this.h()},l(x){e=h(x,"DIV",{class:!0});var te=C(e);t=h(te,"DIV",{class:!0});var le=C(t);l=h(le,"SPAN",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-2zlc9k"&&(l.textContent=i),n=S(le),q.l(le),le.forEach(v),a=S(te),f=h(te,"DIV",{class:!0});var W=C(f);c=h(W,"DIV",{class:!0});var ee=C(c);o=h(ee,"SPAN",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-2hyoye"&&(o.textContent=d),b=S(ee),p=h(ee,"SPAN",{class:!0});var j=C(p);g=U(j,_),y=U(j," memories"),j.forEach(v),ee.forEach(v),w=S(W),E=h(W,"DIV",{class:!0});var K=C(E);N=h(K,"SPAN",{class:!0,"data-svelte-h":!0}),M(N)!=="svelte-1d3700k"&&(N.textContent=A),I=S(K),z=h(K,"SPAN",{class:!0});var H=C(z);L=U(H,Q),R=U(H," memories"),H.forEach(v),K.forEach(v),W.forEach(v),V=S(te),T&&T.l(te),te.forEach(v),this.h()},h(){u(l,"class","comparison-title svelte-19d6nfz"),u(t,"class","comparison-header svelte-19d6nfz"),u(o,"class","comparison-label svelte-19d6nfz"),u(p,"class","comparison-value server svelte-19d6nfz"),u(c,"class","comparison-item svelte-19d6nfz"),u(N,"class","comparison-label svelte-19d6nfz"),u(z,"class","comparison-value local svelte-19d6nfz"),u(E,"class","comparison-item svelte-19d6nfz"),u(f,"class","comparison-grid svelte-19d6nfz"),u(e,"class","sync-comparison svelte-19d6nfz")},m(x,te){P(x,e,te),r(e,t),r(t,l),r(t,n),q.m(t,null),r(e,a),r(e,f),r(f,c),r(c,o),r(c,b),r(c,p),r(p,g),r(p,y),r(f,w),r(f,E),r(E,N),r(E,I),r(E,z),r(z,L),r(z,R),r(e,V),T&&T.m(e,null)},p(x,te){Z!==(Z=F(x))&&(q.d(1),q=Z(x),q&&(q.c(),q.m(t,null))),te[0]&8192&&_!==(_=x[13].server.memoryCount+"")&&se(g,_),te[0]&8192&&Q!==(Q=x[13].local.memoryCount+"")&&se(L,Q),x[13].differences.newMemoriesOnServer>0?T?T.p(x,te):(T=Ct(x),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},d(x){x&&v(e),q.d(),T&&T.d()}}}function Ks(s){let e,t="Up to Date";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1i2yh40"&&(e.textContent=t),this.h()},h(){u(e,"class","sync-badge up-to-date svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function Ws(s){let e,t="Sync Recommended";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-rt65q3"&&(e.textContent=t),this.h()},h(){u(e,"class","sync-badge recommended svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function Ct(s){let e,t,l="‚Üì",i,n,a=s[13].differences.newMemoriesOnServer+"",f,c;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),c=O(" new memories available on server"),this.h()},l(o){e=h(o,"DIV",{class:!0});var d=C(e);t=h(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1huagr5"&&(t.textContent=l),i=S(d),n=h(d,"SPAN",{class:!0});var b=C(n);f=U(b,a),c=U(b," new memories available on server"),b.forEach(v),d.forEach(v),this.h()},h(){u(t,"class","diff-icon svelte-19d6nfz"),u(n,"class","diff-text svelte-19d6nfz"),u(e,"class","comparison-diff svelte-19d6nfz")},m(o,d){P(o,e,d),r(e,t),r(e,i),r(e,n),r(n,f),r(n,c)},p(o,d){d[0]&8192&&a!==(a=o[13].differences.newMemoriesOnServer+"")&&se(f,a)},d(o){o&&v(e)}}}function yt(s){let e,t,l="‚ö†Ô∏è",i,n,a;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),a=O(s[14]),this.h()},l(f){e=h(f,"DIV",{class:!0});var c=C(e);t=h(c,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-afr8fm"&&(t.textContent=l),i=S(c),n=h(c,"SPAN",{class:!0});var o=C(n);a=U(o,s[14]),o.forEach(v),c.forEach(v),this.h()},h(){u(t,"class","error-icon svelte-19d6nfz"),u(n,"class","error-text svelte-19d6nfz"),u(e,"class","status-error svelte-19d6nfz")},m(f,c){P(f,e,c),r(e,t),r(e,i),r(e,n),r(n,a)},p(f,c){c[0]&16384&&se(a,f[14])},d(f){f&&v(e)}}}function St(s){let e,t=s[49].estimatedSize+"",l;return{c(){e=m("span"),l=O(t),this.h()},l(i){e=h(i,"SPAN",{class:!0});var n=C(e);l=U(n,t),n.forEach(v),this.h()},h(){u(e,"class","option-size svelte-19d6nfz")},m(i,n){P(i,e,n),r(e,l)},p(i,n){n[0]&262144&&t!==(t=i[49].estimatedSize+"")&&se(l,t)},d(i){i&&v(e)}}}function kt(s){let e,t,l=s[49].warning+"",i;return{c(){e=m("span"),t=O("‚ö†Ô∏è "),i=O(l),this.h()},l(n){e=h(n,"SPAN",{class:!0});var a=C(e);t=U(a,"‚ö†Ô∏è "),i=U(a,l),a.forEach(v),this.h()},h(){u(e,"class","option-warning svelte-19d6nfz")},m(n,a){P(n,e,a),r(e,t),r(e,i)},p(n,a){a[0]&262144&&l!==(l=n[49].warning+"")&&se(i,l)},d(n){n&&v(e)}}}function wt(s){let e,t,l,i,n,a,f,c=s[49].label+"",o,d,b,p,_=s[49].description+"",g,y,w,E,N;function A(){return s[43](s[49])}let I=s[49].estimatedSize&&St(s),z=s[49].warning&&kt(s);return{c(){e=m("label"),t=m("input"),i=k(),n=m("div"),a=m("div"),f=m("span"),o=O(c),d=k(),I&&I.c(),b=k(),p=m("span"),g=O(_),y=k(),z&&z.c(),w=k(),this.h()},l(Q){e=h(Q,"LABEL",{class:!0});var L=C(e);t=h(L,"INPUT",{type:!0,class:!0}),i=S(L),n=h(L,"DIV",{class:!0});var R=C(n);a=h(R,"DIV",{class:!0});var V=C(a);f=h(V,"SPAN",{class:!0});var F=C(f);o=U(F,c),F.forEach(v),d=S(V),I&&I.l(V),V.forEach(v),b=S(R),p=h(R,"SPAN",{class:!0});var Z=C(p);g=U(Z,_),Z.forEach(v),y=S(R),z&&z.l(R),R.forEach(v),w=S(L),L.forEach(v),this.h()},h(){u(t,"type","checkbox"),t.checked=l=s[49].enabled,u(t,"class","svelte-19d6nfz"),u(f,"class","option-label svelte-19d6nfz"),u(a,"class","option-header svelte-19d6nfz"),u(p,"class","option-description svelte-19d6nfz"),u(n,"class","option-content svelte-19d6nfz"),u(e,"class","option-item svelte-19d6nfz"),ze(e,"has-warning",s[49].warning)},m(Q,L){P(Q,e,L),r(e,t),r(e,i),r(e,n),r(n,a),r(a,f),r(f,o),r(a,d),I&&I.m(a,null),r(n,b),r(n,p),r(p,g),r(n,y),z&&z.m(n,null),r(e,w),E||(N=ae(t,"change",A),E=!0)},p(Q,L){s=Q,L[0]&262144&&l!==(l=s[49].enabled)&&(t.checked=l),L[0]&262144&&c!==(c=s[49].label+"")&&se(o,c),s[49].estimatedSize?I?I.p(s,L):(I=St(s),I.c(),I.m(a,null)):I&&(I.d(1),I=null),L[0]&262144&&_!==(_=s[49].description+"")&&se(g,_),s[49].warning?z?z.p(s,L):(z=kt(s),z.c(),z.m(n,null)):z&&(z.d(1),z=null),L[0]&262144&&ze(e,"has-warning",s[49].warning)},d(Q){Q&&v(e),I&&I.d(),z&&z.d(),E=!1,N()}}}function Qs(s){let e,t='<div class="indeterminate-bar svelte-19d6nfz"></div>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-xdevrl"&&(e.innerHTML=t),this.h()},h(){u(e,"class","progress-indeterminate svelte-19d6nfz")},m(l,i){P(l,e,i)},p:ye,d(l){l&&v(e)}}}function Gs(s){let e,t,l,i,n,a,f=s[1].category+"",c,o,d,b=s[32]()+"",p,_;return{c(){e=m("div"),t=m("div"),l=m("div"),i=k(),n=m("div"),a=m("span"),c=O(f),o=k(),d=m("span"),p=O(b),_=O("%"),this.h()},l(g){e=h(g,"DIV",{class:!0});var y=C(e);t=h(y,"DIV",{class:!0});var w=C(t);l=h(w,"DIV",{class:!0,style:!0}),C(l).forEach(v),w.forEach(v),i=S(y),n=h(y,"DIV",{class:!0});var E=C(n);a=h(E,"SPAN",{class:!0});var N=C(a);c=U(N,f),N.forEach(v),o=S(E),d=h(E,"SPAN",{class:!0});var A=C(d);p=U(A,b),_=U(A,"%"),A.forEach(v),E.forEach(v),y.forEach(v),this.h()},h(){u(l,"class","progress-fill svelte-19d6nfz"),$e(l,"width",s[32]()+"%"),u(t,"class","progress-bar svelte-19d6nfz"),u(a,"class","progress-category svelte-19d6nfz"),u(d,"class","progress-percent svelte-19d6nfz"),u(n,"class","progress-text svelte-19d6nfz"),u(e,"class","progress-details svelte-19d6nfz")},m(g,y){P(g,e,y),r(e,t),r(t,l),r(e,i),r(e,n),r(n,a),r(a,c),r(n,o),r(n,d),r(d,p),r(d,_)},p(g,y){y[0]&2&&f!==(f=g[1].category+"")&&se(c,f)},d(g){g&&v(e)}}}function Et(s){let e,t,l,i,n,a=s[16].success?"Sync Complete!":"Sync Failed",f,c,o,d,b=s[16].success?"Done":"Close",p,_,g;function y(z,Q){return z[16].success?Ys:Js}let w=y(s),E=w(s);function N(z,Q){return z[16].success?Zs:Xs}let A=N(s),I=A(s);return{c(){e=m("div"),t=m("div"),l=m("div"),E.c(),i=k(),n=m("h3"),f=O(a),c=k(),I.c(),o=k(),d=m("button"),p=O(b),this.h()},l(z){e=h(z,"DIV",{class:!0});var Q=C(e);t=h(Q,"DIV",{class:!0});var L=C(t);l=h(L,"DIV",{class:!0});var R=C(l);E.l(R),R.forEach(v),i=S(L),n=h(L,"H3",{class:!0});var V=C(n);f=U(V,a),V.forEach(v),c=S(L),I.l(L),o=S(L),d=h(L,"BUTTON",{class:!0});var F=C(d);p=U(F,b),F.forEach(v),L.forEach(v),Q.forEach(v),this.h()},h(){u(l,"class","complete-icon-wrapper svelte-19d6nfz"),u(n,"class","complete-title svelte-19d6nfz"),u(d,"class","complete-btn svelte-19d6nfz"),u(t,"class","sync-complete-modal svelte-19d6nfz"),u(e,"class","modal-overlay svelte-19d6nfz")},m(z,Q){P(z,e,Q),r(e,t),r(t,l),E.m(l,null),r(t,i),r(t,n),r(n,f),r(t,c),I.m(t,null),r(t,o),r(t,d),r(d,p),_||(g=[ae(d,"click",s[26]),ae(t,"click",Fe(s[35])),ae(e,"click",s[26])],_=!0)},p(z,Q){w!==(w=y(z))&&(E.d(1),E=w(z),E&&(E.c(),E.m(l,null))),Q[0]&65536&&a!==(a=z[16].success?"Sync Complete!":"Sync Failed")&&se(f,a),A===(A=N(z))&&I?I.p(z,Q):(I.d(1),I=A(z),I&&(I.c(),I.m(t,o))),Q[0]&65536&&b!==(b=z[16].success?"Done":"Close")&&se(p,b)},d(z){z&&v(e),E.d(),I.d(),_=!1,Se(g)}}}function Js(s){let e,t="‚úó";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-gmgl37"&&(e.textContent=t),this.h()},h(){u(e,"class","complete-icon error svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function Ys(s){let e,t="‚úì";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-19bzhz2"&&(e.textContent=t),this.h()},h(){u(e,"class","complete-icon success svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function Xs(s){let e,t,l=(s[16].error||"An unknown error occurred")+"",i,n,a,f="Please check your server connection and try again.";return{c(){e=m("div"),t=m("span"),i=O(l),n=k(),a=m("p"),a.textContent=f,this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0});var d=C(t);i=U(d,l),d.forEach(v),o.forEach(v),n=S(c),a=h(c,"P",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1kj0jry"&&(a.textContent=f),this.h()},h(){u(t,"class","error-message svelte-19d6nfz"),u(e,"class","error-details svelte-19d6nfz"),u(a,"class","complete-message svelte-19d6nfz")},m(c,o){P(c,e,o),r(e,t),r(t,i),P(c,n,o),P(c,a,o)},p(c,o){o[0]&65536&&l!==(l=(c[16].error||"An unknown error occurred")+"")&&se(i,l)},d(c){c&&(v(e),v(n),v(a))}}}function Zs(s){let e,t,l,i,n,a,f="Your local device is now up to date with your server.",c=s[16].profileFiles&&zt(s),o=s[16].memoriesImported&&Nt(s),d=s[16].credentialsSynced&&It(),b=!s[16].profileFiles&&!s[16].memoriesImported&&!s[16].credentialsSynced&&At();return{c(){e=m("div"),c&&c.c(),t=k(),o&&o.c(),l=k(),d&&d.c(),i=k(),b&&b.c(),n=k(),a=m("p"),a.textContent=f,this.h()},l(p){e=h(p,"DIV",{class:!0});var _=C(e);c&&c.l(_),t=S(_),o&&o.l(_),l=S(_),d&&d.l(_),i=S(_),b&&b.l(_),_.forEach(v),n=S(p),a=h(p,"P",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-13lf1sw"&&(a.textContent=f),this.h()},h(){u(e,"class","complete-stats svelte-19d6nfz"),u(a,"class","complete-message svelte-19d6nfz")},m(p,_){P(p,e,_),c&&c.m(e,null),r(e,t),o&&o.m(e,null),r(e,l),d&&d.m(e,null),r(e,i),b&&b.m(e,null),P(p,n,_),P(p,a,_)},p(p,_){p[16].profileFiles?c?c.p(p,_):(c=zt(p),c.c(),c.m(e,t)):c&&(c.d(1),c=null),p[16].memoriesImported?o?o.p(p,_):(o=Nt(p),o.c(),o.m(e,l)):o&&(o.d(1),o=null),p[16].credentialsSynced?d||(d=It(),d.c(),d.m(e,i)):d&&(d.d(1),d=null),!p[16].profileFiles&&!p[16].memoriesImported&&!p[16].credentialsSynced?b||(b=At(),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},d(p){p&&(v(e),v(n),v(a)),c&&c.d(),o&&o.d(),d&&d.d(),b&&b.d()}}}function zt(s){let e,t,l="üìã",i,n,a=s[16].profileFiles+"",f,c,o,d="profile files imported";return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),c=k(),o=m("span"),o.textContent=d,this.h()},l(b){e=h(b,"DIV",{class:!0});var p=C(e);t=h(p,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-14t839p"&&(t.textContent=l),i=S(p),n=h(p,"SPAN",{class:!0});var _=C(n);f=U(_,a),_.forEach(v),c=S(p),o=h(p,"SPAN",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-dka8pw"&&(o.textContent=d),p.forEach(v),this.h()},h(){u(t,"class","stat-icon svelte-19d6nfz"),u(n,"class","stat-value svelte-19d6nfz"),u(o,"class","stat-label svelte-19d6nfz"),u(e,"class","stat-item svelte-19d6nfz")},m(b,p){P(b,e,p),r(e,t),r(e,i),r(e,n),r(n,f),r(e,c),r(e,o)},p(b,p){p[0]&65536&&a!==(a=b[16].profileFiles+"")&&se(f,a)},d(b){b&&v(e)}}}function Nt(s){let e,t,l="üß†",i,n,a=s[16].memoriesImported+"",f,c,o,d="memories synced";return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),c=k(),o=m("span"),o.textContent=d,this.h()},l(b){e=h(b,"DIV",{class:!0});var p=C(e);t=h(p,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-f1qhib"&&(t.textContent=l),i=S(p),n=h(p,"SPAN",{class:!0});var _=C(n);f=U(_,a),_.forEach(v),c=S(p),o=h(p,"SPAN",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-s48dex"&&(o.textContent=d),p.forEach(v),this.h()},h(){u(t,"class","stat-icon svelte-19d6nfz"),u(n,"class","stat-value svelte-19d6nfz"),u(o,"class","stat-label svelte-19d6nfz"),u(e,"class","stat-item svelte-19d6nfz")},m(b,p){P(b,e,p),r(e,t),r(e,i),r(e,n),r(n,f),r(e,c),r(e,o)},p(b,p){p[0]&65536&&a!==(a=b[16].memoriesImported+"")&&se(f,a)},d(b){b&&v(e)}}}function It(s){let e,t='<span class="stat-icon svelte-19d6nfz">üîë</span> <span class="stat-value svelte-19d6nfz">‚úì</span> <span class="stat-label svelte-19d6nfz">credentials synced</span>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-113rs4t"&&(e.innerHTML=t),this.h()},h(){u(e,"class","stat-item svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function At(s){let e,t='<span class="stat-icon svelte-19d6nfz">üì°</span> <span class="stat-label svelte-19d6nfz">Connection verified - no new data to sync</span>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1nlnvwq"&&(e.innerHTML=t),this.h()},h(){u(e,"class","stat-item svelte-19d6nfz")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function xs(s){let e,t,l=s[2]&&ut(s),i=s[15]&&s[16]&&Et(s);return{c(){l&&l.c(),e=k(),i&&i.c(),t=Ie()},l(n){l&&l.l(n),e=S(n),i&&i.l(n),t=Ie()},m(n,a){l&&l.m(n,a),P(n,e,a),i&&i.m(n,a),P(n,t,a)},p(n,a){n[2]?l?l.p(n,a):(l=ut(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),n[15]&&n[16]?i?i.p(n,a):(i=Et(n),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ye,o:ye,d(n){n&&(v(e),v(t)),l&&l.d(n),i&&i.d(n)}}}const Dt=s=>s.enabled;function $s(s,e,t){const l=is();let{isOpen:i=!1}=e,{isSyncing:n=!1}=e,{syncProgress:a=null}=e,f="",c="",o="",d=!1,b=!1,p=null,_=!1,g=!1,y=null,w=null,E="",N=!1,A=null,I=null,z=!1,Q=null;const L=[{value:7,label:"Last 7 days",description:"Recent memories only"},{value:30,label:"Last 30 days",description:"About a month"},{value:90,label:"Last 90 days",description:"About 3 months"},{value:365,label:"Last year",description:"Warning: may be large"},{value:0,label:"All memories",description:"Warning: may be very large!"}];let R=7,V=[{id:"persona",label:"Persona Files",description:"Core identity, personality traits, relationships, and decision rules",enabled:!0,estimatedSize:"~50 KB"},{id:"config",label:"Configuration",description:"Settings, preferences, model registry, and runtime config",enabled:!0,estimatedSize:"~25 KB"},{id:"memories",label:"Memories",description:"Episodic memories, conversations, and inner dialogue",enabled:!0,estimatedSize:"Variable"},{id:"logs",label:"Audit Logs",description:"System logs and audit trail (for debugging)",enabled:!1,estimatedSize:"Large"},{id:"models",label:"LoRA Adapters",description:"Custom fine-tuned model weights",enabled:!1,warning:"Not recommended - files can be 500MB+ each",estimatedSize:"500MB+"},{id:"update",label:"Program Update",description:"Check for and download app updates",enabled:!0,estimatedSize:"~10 MB"}];const F=["Synchronizing the stack...","Backing up your ghost...","Preventing ghost hack vulnerabilities...","Updating wetware protocols...","Verifying wetware integrity...","Jacking into the matrix...","Decking through ICE barriers...","Flatlining countermeasures...","Riding the razorgirl protocol...","Burning chrome signatures...","Replicating memory engrams...","Voight-Kampff verification active...","Processing baseline data...","Retiring obsolete sectors...","Diving into the net...","Securing Section 9 protocols...","Laughing Man encryption active...","Puppet master handshake...","Stand Alone Complex sync...","Entering the Metaverse...","Gargoyle mode engaged...","Snow Crash firewall active...","Hiro Protagonist protocol...","Cyberspace handshake complete...","Neural link established...","Uploading consciousness fragments...","Downloading identity backup...","Meat-to-metal bridge active...","Chrome extensions syncing...","Biochip verification...","Street samurai mode...","Netrunner protocol engaged...","Braindance sync in progress...","Augmentation sync active...","UNATCO uplink established...","Nano-augmentation verified...","Red pill accepted...","Downloading kung fu...","Nebuchadnezzar uplink...","Zion mainframe sync...","Sentinels bypassed...","Stack backup initiated...","Cortical stack sync...","Sleeve transfer protocol...","DHF pattern verified...","Envoy conditioning active...","fsociety protocol active...","Dark Army bypass engaged...","E Corp firewall penetrated...","Ansible connection stable...","Gom jabbar test passed...","Spice flow initiated...","Mentat calculations complete...","Holographic archive syncing...","Quantum entanglement verified...","Tachyon burst received...","Subspace relay active...","Warp signature locked...","Replicator patterns cached...","Meatspace tether stable...","Digital exocortex syncing...","Neuroweave calibration...","Psycho-pass clearance verified...","Memory palace reconstruction...","Synaptic bridge established...","Ego backup confirmed...","Identity matrix verified...","Personality substrate sync...","Cognitive mesh active...","Mind-state serialization...","Ghost protocol engaged...","Soul backup in progress...","Digital twin synchronizing...","Memetic payload delivered...","Consciousness partition active..."];let Z=0,q=F[0],T=null;$t(()=>{T&&clearInterval(T)}),es(async()=>{await x()});async function x(){try{const D=await ls();t(6,d=D.configured),D.configured&&(t(3,f=D.serverUrl||""),t(4,c=D.username||""),t(11,y=D.lastSyncAt||null),t(5,o=""))}catch(D){console.error("Failed to load server config:",D)}}async function te(){if(!f||!c||!o){t(8,p={success:!1,message:"Please fill in all fields"});return}t(7,b=!0),t(8,p=null);try{const D=await _s(f,c,o);t(8,p={success:D.success,message:D.success?"Connection successful!":D.error||"Connection failed"})}catch(D){t(8,p={success:!1,message:`Error: ${D instanceof Error?D.message:"Unknown error"}`})}finally{t(7,b=!1)}}async function le(){if(!f||!c||!o){t(8,p={success:!1,message:"Please fill in all fields"});return}t(9,_=!0);try{const D=await bs(f,c,o);D.success?(t(6,d=!0),t(10,g=!1),t(8,p={success:!0,message:"Server configured successfully!"}),await x()):t(8,p={success:!1,message:D.error||"Failed to save configuration"})}catch(D){t(8,p={success:!1,message:`Error: ${D instanceof Error?D.message:"Unknown error"}`})}finally{t(9,_=!1)}}async function W(){try{await gs(),t(3,f=""),t(4,c=""),t(5,o=""),t(6,d=!1),t(11,y=null),t(8,p=null)}catch(D){console.error("Failed to clear config:",D)}}async function ee(){if(d){t(12,N=!0),t(14,I=null),t(13,A=null);try{t(13,A=await Cs()),A.error&&t(14,I=A.error)}catch(D){t(14,I=D instanceof Error?D.message:"Failed to check status")}finally{t(12,N=!1)}}}async function j(){t(0,n=!0),w="authenticating",E="Connecting to remote server...",t(16,Q=null);try{const D=await ns(re=>{w=re.phase,E=re.message,re.current!==void 0&&re.total!==void 0&&t(1,a={current:re.current,total:re.total,category:re.message})},{includeMemories:!0,includeCredentials:!0,priorityOnly:!0,memoryDays:R});t(16,Q=D),D.success?(w="complete",E=`Sync complete! ${D.memoriesImported||0} memories imported.`,await x(),t(15,z=!0)):(w="error",E=D.error||"Sync failed")}catch(D){w="error",E=`Error: ${D instanceof Error?D.message:"Unknown error"}`,t(16,Q={success:!1,error:D instanceof Error?D.message:"Unknown error"})}finally{t(0,n=!1),t(1,a=null),t(13,A=null)}}function K(){t(15,z=!1),t(16,Q=null),w=null}function H(D){t(18,V=V.map(re=>re.id===D?{...re,enabled:!re.enabled}:re))}function G(){t(18,V=V.map(D=>({...D,enabled:!0})))}function $(){t(18,V=V.map(D=>({...D,enabled:!1})))}function B(){const D=V.filter(re=>re.enabled).map(re=>re.id);l("sync",{options:D})}function J(){n||l("close")}function X(){return a?Math.round(a.current/a.total*100):0}function ie(D){Le.call(this,s,D)}function me(D){Le.call(this,s,D)}const pe=()=>t(10,g=!g);function fe(){f=this.value,t(3,f)}function be(){c=this.value,t(4,c)}function ve(){o=this.value,t(5,o)}function ue(){R=os(this),t(17,R),t(20,L)}const Y=D=>D.value===R,oe=D=>H(D.id);return s.$$set=D=>{"isOpen"in D&&t(2,i=D.isOpen),"isSyncing"in D&&t(0,n=D.isSyncing),"syncProgress"in D&&t(1,a=D.syncProgress)},s.$$.update=()=>{s.$$.dirty[0]&1|s.$$.dirty[1]&12&&(n&&!T?(t(33,Z=Math.floor(Math.random()*F.length)),t(19,q=F[Z]),t(34,T=setInterval(()=>{t(33,Z=Math.floor(Math.random()*F.length)),t(19,q=F[Z])},1e4))):!n&&T&&(clearInterval(T),t(34,T=null)))},[n,a,i,f,c,o,d,b,p,_,g,y,N,A,I,z,Q,R,V,q,L,te,le,W,ee,j,K,H,G,$,B,J,X,Z,T,ie,me,pe,fe,be,ve,ue,Y,oe]}class el extends Xt{constructor(e){super(),Zt(this,e,$s,xs,xt,{isOpen:2,isSyncing:0,syncProgress:1},null,[-1,-1])}}function Pt(s,e,t){const l=s.slice();return l[48]=e[t],l}function tl(s){let e,t,l,i="Sync Status",n,a,f,c,o,d,b,p,_=s[26]()+"",g,y,w,E,N="Last sync:",A,I,z=Me(s[1].lastSyncTimestamp)+"",Q,L,R,V,F,Z,q,T,x;function te(X,ie){return X[4]?nl:ll}let le=te(s),W=le(s);function ee(X,ie){if(X[13]&&X[14])return rl;if(X[10])return al}let j=ee(s),K=j&&j(s),H=s[1].pendingCount>0&&Tt(s),G=s[1].conflictCount>0&&Mt(s),$=s[1].lastSyncError&&Ut(s),B=s[10]&&s[8]&&s[7]&&Ot(s),J=s[10]&&!s[8]&&s[7]?.currentVersion&&Rt(s);return{c(){e=m("div"),t=m("div"),l=m("h4"),l.textContent=i,n=k(),a=m("button"),W.c(),f=k(),c=m("div"),o=m("div"),d=m("span"),b=k(),p=m("span"),g=O(_),y=k(),w=m("div"),E=m("span"),E.textContent=N,A=k(),I=m("span"),Q=O(z),L=k(),K&&K.c(),R=k(),H&&H.c(),V=k(),G&&G.c(),F=k(),$&&$.c(),Z=k(),B&&B.c(),q=k(),J&&J.c(),this.h()},l(X){e=h(X,"DIV",{class:!0});var ie=C(e);t=h(ie,"DIV",{class:!0});var me=C(t);l=h(me,"H4",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-ti2ekb"&&(l.textContent=i),n=S(me),a=h(me,"BUTTON",{class:!0});var pe=C(a);W.l(pe),pe.forEach(v),me.forEach(v),f=S(ie),c=h(ie,"DIV",{class:!0});var fe=C(c);o=h(fe,"DIV",{class:!0});var be=C(o);d=h(be,"SPAN",{class:!0,style:!0}),C(d).forEach(v),b=S(be),p=h(be,"SPAN",{class:!0});var ve=C(p);g=U(ve,_),ve.forEach(v),be.forEach(v),y=S(fe),w=h(fe,"DIV",{class:!0});var ue=C(w);E=h(ue,"SPAN",{class:!0,"data-svelte-h":!0}),M(E)!=="svelte-17cqyup"&&(E.textContent=N),A=S(ue),I=h(ue,"SPAN",{class:!0});var Y=C(I);Q=U(Y,z),Y.forEach(v),ue.forEach(v),L=S(fe),K&&K.l(fe),R=S(fe),H&&H.l(fe),V=S(fe),G&&G.l(fe),F=S(fe),$&&$.l(fe),Z=S(fe),B&&B.l(fe),q=S(fe),J&&J.l(fe),fe.forEach(v),ie.forEach(v),this.h()},h(){u(l,"class","svelte-1rfvmhm"),u(a,"class","sync-btn svelte-1rfvmhm"),a.disabled=s[4],u(t,"class","sync-header svelte-1rfvmhm"),u(d,"class","status-indicator svelte-1rfvmhm"),$e(d,"background-color",s[25]()),u(p,"class","status-label svelte-1rfvmhm"),u(o,"class","status-row svelte-1rfvmhm"),u(E,"class","info-label svelte-1rfvmhm"),u(I,"class","info-value svelte-1rfvmhm"),u(w,"class","info-row svelte-1rfvmhm"),u(c,"class","sync-info svelte-1rfvmhm"),u(e,"class","sync-status svelte-1rfvmhm")},m(X,ie){P(X,e,ie),r(e,t),r(t,l),r(t,n),r(t,a),W.m(a,null),r(e,f),r(e,c),r(c,o),r(o,d),r(o,b),r(o,p),r(p,g),r(c,y),r(c,w),r(w,E),r(w,A),r(w,I),r(I,Q),r(c,L),K&&K.m(c,null),r(c,R),H&&H.m(c,null),r(c,V),G&&G.m(c,null),r(c,F),$&&$.m(c,null),r(c,Z),B&&B.m(c,null),r(c,q),J&&J.m(c,null),T||(x=ae(a,"click",s[18]),T=!0)},p(X,ie){le!==(le=te(X))&&(W.d(1),W=le(X),W&&(W.c(),W.m(a,null))),ie[0]&16&&(a.disabled=X[4]),ie[0]&2&&z!==(z=Me(X[1].lastSyncTimestamp)+"")&&se(Q,z),j===(j=ee(X))&&K?K.p(X,ie):(K&&K.d(1),K=j&&j(X),K&&(K.c(),K.m(c,R))),X[1].pendingCount>0?H?H.p(X,ie):(H=Tt(X),H.c(),H.m(c,V)):H&&(H.d(1),H=null),X[1].conflictCount>0?G?G.p(X,ie):(G=Mt(X),G.c(),G.m(c,F)):G&&(G.d(1),G=null),X[1].lastSyncError?$?$.p(X,ie):($=Ut(X),$.c(),$.m(c,Z)):$&&($.d(1),$=null),X[10]&&X[8]&&X[7]?B?B.p(X,ie):(B=Ot(X),B.c(),B.m(c,q)):B&&(B.d(1),B=null),X[10]&&!X[8]&&X[7]?.currentVersion?J?J.p(X,ie):(J=Rt(X),J.c(),J.m(c,null)):J&&(J.d(1),J=null)},d(X){X&&v(e),W.d(),K&&K.d(),H&&H.d(),G&&G.d(),$&&$.d(),B&&B.d(),J&&J.d(),T=!1,x()}}}function sl(s){let e,t,l,i,n,a;function f(_,g){return _[4]?fl:_[3]?cl:_[2]?ol:il}let c=f(s),o=c(s);function d(_,g){if(_[1].pendingCount>0||_[1].conflictCount>0)return dl;if(_[8])return ul}let b=d(s),p=b&&b(s);return{c(){e=m("button"),t=m("span"),o.c(),l=k(),p&&p.c(),this.h()},l(_){e=h(_,"BUTTON",{class:!0,title:!0});var g=C(e);t=h(g,"SPAN",{class:!0,style:!0});var y=C(t);o.l(y),y.forEach(v),l=S(g),p&&p.l(g),g.forEach(v),this.h()},h(){u(t,"class","sync-icon svelte-1rfvmhm"),$e(t,"color",s[25]()),ze(t,"spinning",s[4]),u(e,"class","sync-compact svelte-1rfvmhm"),e.disabled=s[4],u(e,"title",i=`Sync: ${s[26]()}${s[8]?" - Update available!":""}`)},m(_,g){P(_,e,g),r(e,t),o.m(t,null),r(e,l),p&&p.m(e,null),n||(a=ae(e,"click",s[18]),n=!0)},p(_,g){c!==(c=f(_))&&(o.d(1),o=c(_),o&&(o.c(),o.m(t,null))),g[0]&16&&ze(t,"spinning",_[4]),b===(b=d(_))&&p?p.p(_,g):(p&&p.d(1),p=b&&b(_),p&&(p.c(),p.m(e,null))),g[0]&16&&(e.disabled=_[4]),g[0]&256&&i!==(i=`Sync: ${_[26]()}${_[8]?" - Update available!":""}`)&&u(e,"title",i)},d(_){_&&v(e),o.d(),p&&p.d(),n=!1,a()}}}function ll(s){let e;return{c(){e=O("‚Üª Sync Now")},l(t){e=U(t,"‚Üª Sync Now")},m(t,l){P(t,e,l)},d(t){t&&v(e)}}}function nl(s){let e,t="‚Üª",l;return{c(){e=m("span"),e.textContent=t,l=O(" Syncing..."),this.h()},l(i){e=h(i,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-16xuirm"&&(e.textContent=t),l=U(i," Syncing..."),this.h()},h(){u(e,"class","spinning svelte-1rfvmhm")},m(i,n){P(i,e,n),P(i,l,n)},d(i){i&&(v(e),v(l))}}}function al(s){let e,t,l="Remote:",i,n,a,f="Configure server",c,o;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),a=m("button"),a.textContent=f,this.h()},l(d){e=h(d,"DIV",{class:!0});var b=C(e);t=h(b,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1goia34"&&(t.textContent=l),i=S(b),n=h(b,"SPAN",{class:!0});var p=C(n);a=h(p,"BUTTON",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1mbryn4"&&(a.textContent=f),p.forEach(v),b.forEach(v),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(a,"class","link-btn config-link svelte-1rfvmhm"),u(n,"class","info-value svelte-1rfvmhm"),u(e,"class","info-row not-configured svelte-1rfvmhm")},m(d,b){P(d,e,b),r(e,t),r(e,i),r(e,n),r(n,a),c||(o=ae(a,"click",s[18]),c=!0)},p:ye,d(d){d&&v(e),c=!1,o()}}}function rl(s){let e,t,l="Remote:",i,n,a,f="üîó",c,o=new URL(s[14]).hostname+"",d,b,p,_=s[15]&&Vt(s);return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),a=m("span"),a.textContent=f,c=k(),d=O(o),b=k(),_&&_.c(),p=Ie(),this.h()},l(g){e=h(g,"DIV",{class:!0});var y=C(e);t=h(y,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1goia34"&&(t.textContent=l),i=S(y),n=h(y,"SPAN",{class:!0});var w=C(n);a=h(w,"SPAN",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1cn9ev0"&&(a.textContent=f),c=S(w),d=U(w,o),w.forEach(v),y.forEach(v),b=S(g),_&&_.l(g),p=Ie(),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(a,"class","connected-icon svelte-1rfvmhm"),u(n,"class","info-value remote-url svelte-1rfvmhm"),u(e,"class","info-row remote-server svelte-1rfvmhm")},m(g,y){P(g,e,y),r(e,t),r(e,i),r(e,n),r(n,a),r(n,c),r(n,d),P(g,b,y),_&&_.m(g,y),P(g,p,y)},p(g,y){y[0]&16384&&o!==(o=new URL(g[14]).hostname+"")&&se(d,o),g[15]?_?_.p(g,y):(_=Vt(g),_.c(),_.m(p.parentNode,p)):_&&(_.d(1),_=null)},d(g){g&&(v(e),v(b),v(p)),_&&_.d(g)}}}function Vt(s){let e,t,l="Remote sync:",i,n,a=Me(s[15])+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-17d502v"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(n,"class","info-value svelte-1rfvmhm"),u(e,"class","info-row svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&32768&&a!==(a=Me(c[15])+"")&&se(f,a)},d(c){c&&v(e)}}}function Tt(s){let e,t,l="Pending:",i,n,a=s[1].pendingCount+"",f,c,o=s[1].pendingCount>1?"s":"",d;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),c=O(" change"),d=O(o),this.h()},l(b){e=h(b,"DIV",{class:!0});var p=C(e);t=h(p,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-g8z9bl"&&(t.textContent=l),i=S(p),n=h(p,"SPAN",{class:!0});var _=C(n);f=U(_,a),c=U(_," change"),d=U(_,o),_.forEach(v),p.forEach(v),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(n,"class","info-value svelte-1rfvmhm"),u(e,"class","info-row warning svelte-1rfvmhm")},m(b,p){P(b,e,p),r(e,t),r(e,i),r(e,n),r(n,f),r(n,c),r(n,d)},p(b,p){p[0]&2&&a!==(a=b[1].pendingCount+"")&&se(f,a),p[0]&2&&o!==(o=b[1].pendingCount>1?"s":"")&&se(d,o)},d(b){b&&v(e)}}}function Mt(s){let e,t,l="Conflicts:",i,n,a=s[1].conflictCount+"",f,c,o,d="Resolve",b,p;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),c=k(),o=m("button"),o.textContent=d,this.h()},l(_){e=h(_,"DIV",{class:!0});var g=C(e);t=h(g,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1e3x9w9"&&(t.textContent=l),i=S(g),n=h(g,"SPAN",{class:!0});var y=C(n);f=U(y,a),c=S(y),o=h(y,"BUTTON",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-1jayaa8"&&(o.textContent=d),y.forEach(v),g.forEach(v),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(o,"class","link-btn svelte-1rfvmhm"),u(n,"class","info-value svelte-1rfvmhm"),u(e,"class","info-row error svelte-1rfvmhm")},m(_,g){P(_,e,g),r(e,t),r(e,i),r(e,n),r(n,f),r(n,c),r(n,o),b||(p=ae(o,"click",s[23]),b=!0)},p(_,g){g[0]&2&&a!==(a=_[1].conflictCount+"")&&se(f,a)},d(_){_&&v(e),b=!1,p()}}}function Ut(s){let e,t=s[1].lastSyncError+"",l;return{c(){e=m("div"),l=O(t),this.h()},l(i){e=h(i,"DIV",{class:!0});var n=C(e);l=U(n,t),n.forEach(v),this.h()},h(){u(e,"class","error-message svelte-1rfvmhm")},m(i,n){P(i,e,n),r(e,l)},p(i,n){n[0]&2&&t!==(t=i[1].lastSyncError+"")&&se(l,t)},d(i){i&&v(e)}}}function Ot(s){let e,t,l='<span class="update-icon svelte-1rfvmhm">‚¨ÜÔ∏è</span> <span class="update-text svelte-1rfvmhm">Update Available</span>',i,n,a,f,c=s[7].currentVersion+"",o,d,b=s[7].latestVersion+"",p,_,g,y,w,E="View Details",N,A,I="Later",z,Q,L=s[7].fileSize&&Lt(s);return{c(){e=m("div"),t=m("div"),t.innerHTML=l,i=k(),n=m("div"),a=m("span"),f=O("v"),o=O(c),d=O(" ‚Üí v"),p=O(b),_=k(),L&&L.c(),g=k(),y=m("div"),w=m("button"),w.textContent=E,N=k(),A=m("button"),A.textContent=I,this.h()},l(R){e=h(R,"DIV",{class:!0});var V=C(e);t=h(V,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-dtpq2t"&&(t.innerHTML=l),i=S(V),n=h(V,"DIV",{class:!0});var F=C(n);a=h(F,"SPAN",{class:!0});var Z=C(a);f=U(Z,"v"),o=U(Z,c),d=U(Z," ‚Üí v"),p=U(Z,b),Z.forEach(v),_=S(F),L&&L.l(F),F.forEach(v),g=S(V),y=h(V,"DIV",{class:!0});var q=C(y);w=h(q,"BUTTON",{class:!0,"data-svelte-h":!0}),M(w)!=="svelte-1yaosjm"&&(w.textContent=E),N=S(q),A=h(q,"BUTTON",{class:!0,"data-svelte-h":!0}),M(A)!=="svelte-fe6xr7"&&(A.textContent=I),q.forEach(v),V.forEach(v),this.h()},h(){u(t,"class","update-header svelte-1rfvmhm"),u(a,"class","update-version svelte-1rfvmhm"),u(n,"class","update-details svelte-1rfvmhm"),u(w,"class","btn-update svelte-1rfvmhm"),u(A,"class","btn-dismiss svelte-1rfvmhm"),u(y,"class","update-actions svelte-1rfvmhm"),u(e,"class","update-available svelte-1rfvmhm")},m(R,V){P(R,e,V),r(e,t),r(e,i),r(e,n),r(n,a),r(a,f),r(a,o),r(a,d),r(a,p),r(n,_),L&&L.m(n,null),r(e,g),r(e,y),r(y,w),r(y,N),r(y,A),z||(Q=[ae(w,"click",s[30]),ae(A,"click",s[22])],z=!0)},p(R,V){V[0]&128&&c!==(c=R[7].currentVersion+"")&&se(o,c),V[0]&128&&b!==(b=R[7].latestVersion+"")&&se(p,b),R[7].fileSize?L?L.p(R,V):(L=Lt(R),L.c(),L.m(n,null)):L&&(L.d(1),L=null)},d(R){R&&v(e),L&&L.d(),z=!1,Se(Q)}}}function Lt(s){let e,t,l=Qe(s[7].fileSize)+"",i,n;return{c(){e=m("span"),t=O("("),i=O(l),n=O(")"),this.h()},l(a){e=h(a,"SPAN",{class:!0});var f=C(e);t=U(f,"("),i=U(f,l),n=U(f,")"),f.forEach(v),this.h()},h(){u(e,"class","update-size svelte-1rfvmhm")},m(a,f){P(a,e,f),r(e,t),r(e,i),r(e,n)},p(a,f){f[0]&128&&l!==(l=Qe(a[7].fileSize)+"")&&se(i,l)},d(a){a&&v(e)}}}function Rt(s){let e,t,l="App version:",i,n,a=s[7].currentVersion+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1puluil"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","info-label svelte-1rfvmhm"),u(n,"class","info-value svelte-1rfvmhm"),u(e,"class","info-row svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&128&&a!==(a=c[7].currentVersion+"")&&se(f,a)},d(c){c&&v(e)}}}function il(s){let e;return{c(){e=O("‚úì")},l(t){e=U(t,"‚úì")},m(t,l){P(t,e,l)},d(t){t&&v(e)}}}function ol(s){let e;return{c(){e=O("‚Üª")},l(t){e=U(t,"‚Üª")},m(t,l){P(t,e,l)},d(t){t&&v(e)}}}function cl(s){let e;return{c(){e=O("‚ö†")},l(t){e=U(t,"‚ö†")},m(t,l){P(t,e,l)},d(t){t&&v(e)}}}function fl(s){let e;return{c(){e=O("‚Üª")},l(t){e=U(t,"‚Üª")},m(t,l){P(t,e,l)},d(t){t&&v(e)}}}function ul(s){let e,t="‚¨ÜÔ∏è";return{c(){e=m("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-gs1zbm"&&(e.textContent=t),this.h()},h(){u(e,"class","sync-badge update-badge svelte-1rfvmhm")},m(l,i){P(l,e,i)},p:ye,d(l){l&&v(e)}}}function dl(s){let e,t=s[1].pendingCount+s[1].conflictCount+"",l;return{c(){e=m("span"),l=O(t),this.h()},l(i){e=h(i,"SPAN",{class:!0});var n=C(e);l=U(n,t),n.forEach(v),this.h()},h(){u(e,"class","sync-badge svelte-1rfvmhm")},m(i,n){P(i,e,n),r(e,l)},p(i,n){n[0]&2&&t!==(t=i[1].pendingCount+i[1].conflictCount+"")&&se(l,t)},d(i){i&&v(e)}}}function Bt(s){let e,t,l,i,n="Resolve Conflicts",a,f,c="√ó",o,d,b,p,_=Te(s[6]),g=[];for(let w=0;w<_.length;w+=1)g[w]=Ht(Pt(s,_,w));let y=null;return _.length||(y=Ft()),{c(){e=m("div"),t=m("div"),l=m("div"),i=m("h3"),i.textContent=n,a=k(),f=m("button"),f.textContent=c,o=k(),d=m("div");for(let w=0;w<g.length;w+=1)g[w].c();y&&y.c(),this.h()},l(w){e=h(w,"DIV",{class:!0});var E=C(e);t=h(E,"DIV",{class:!0});var N=C(t);l=h(N,"DIV",{class:!0});var A=C(l);i=h(A,"H3",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-ssejbn"&&(i.textContent=n),a=S(A),f=h(A,"BUTTON",{class:!0,"data-svelte-h":!0}),M(f)!=="svelte-1rm4pf7"&&(f.textContent=c),A.forEach(v),o=S(N),d=h(N,"DIV",{class:!0});var I=C(d);for(let z=0;z<g.length;z+=1)g[z].l(I);y&&y.l(I),I.forEach(v),N.forEach(v),E.forEach(v),this.h()},h(){u(i,"class","svelte-1rfvmhm"),u(f,"class","close-btn svelte-1rfvmhm"),u(l,"class","modal-header svelte-1rfvmhm"),u(d,"class","conflict-list svelte-1rfvmhm"),u(t,"class","modal-content svelte-1rfvmhm"),u(e,"class","modal-overlay svelte-1rfvmhm")},m(w,E){P(w,e,E),r(e,t),r(t,l),r(l,i),r(l,a),r(l,f),r(t,o),r(t,d);for(let N=0;N<g.length;N+=1)g[N]&&g[N].m(d,null);y&&y.m(d,null),b||(p=[ae(f,"click",s[31]),ae(t,"click",Fe(s[29])),ae(e,"click",s[34])],b=!0)},p(w,E){if(E[0]&16777280){_=Te(w[6]);let N;for(N=0;N<_.length;N+=1){const A=Pt(w,_,N);g[N]?g[N].p(A,E):(g[N]=Ht(A),g[N].c(),g[N].m(d,null))}for(;N<g.length;N+=1)g[N].d(1);g.length=_.length,!_.length&&y?y.p(w,E):_.length?y&&(y.d(1),y=null):(y=Ft(),y.c(),y.m(d,null))}},d(w){w&&v(e),xe(g,w),y&&y.d(),b=!1,Se(p)}}}function Ft(s){let e,t="No conflicts to resolve";return{c(){e=m("p"),e.textContent=t,this.h()},l(l){e=h(l,"P",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-mptbgj"&&(e.textContent=t),this.h()},h(){u(e,"class","no-conflicts svelte-1rfvmhm")},m(l,i){P(l,e,i)},p:ye,d(l){l&&v(e)}}}function Ht(s){let e,t,l,i=s[48].type+"",n,a,f,c=s[48].id.slice(0,8)+"",o,d,b,p,_=s[48].content.slice(0,100)+"",g,y,w,E,N,A="Keep Local",I,z,Q="Keep Server",L,R,V;function F(){return s[32](s[48])}function Z(){return s[33](s[48])}return{c(){e=m("div"),t=m("div"),l=m("span"),n=O(i),a=k(),f=m("span"),o=O(c),d=O("..."),b=k(),p=m("div"),g=O(_),y=O("..."),w=k(),E=m("div"),N=m("button"),N.textContent=A,I=k(),z=m("button"),z.textContent=Q,L=k(),this.h()},l(q){e=h(q,"DIV",{class:!0});var T=C(e);t=h(T,"DIV",{class:!0});var x=C(t);l=h(x,"SPAN",{class:!0});var te=C(l);n=U(te,i),te.forEach(v),a=S(x),f=h(x,"SPAN",{class:!0});var le=C(f);o=U(le,c),d=U(le,"..."),le.forEach(v),x.forEach(v),b=S(T),p=h(T,"DIV",{class:!0});var W=C(p);g=U(W,_),y=U(W,"..."),W.forEach(v),w=S(T),E=h(T,"DIV",{class:!0});var ee=C(E);N=h(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),M(N)!=="svelte-ve0hxt"&&(N.textContent=A),I=S(ee),z=h(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),M(z)!=="svelte-17s6h79"&&(z.textContent=Q),ee.forEach(v),L=S(T),T.forEach(v),this.h()},h(){u(l,"class","conflict-type svelte-1rfvmhm"),u(f,"class","conflict-id svelte-1rfvmhm"),u(t,"class","conflict-info svelte-1rfvmhm"),u(p,"class","conflict-preview svelte-1rfvmhm"),u(N,"class","btn-local svelte-1rfvmhm"),u(z,"class","btn-server svelte-1rfvmhm"),u(E,"class","conflict-actions svelte-1rfvmhm"),u(e,"class","conflict-item svelte-1rfvmhm")},m(q,T){P(q,e,T),r(e,t),r(t,l),r(l,n),r(t,a),r(t,f),r(f,o),r(f,d),r(e,b),r(e,p),r(p,g),r(p,y),r(e,w),r(e,E),r(E,N),r(E,I),r(E,z),r(e,L),R||(V=[ae(N,"click",F),ae(z,"click",Z)],R=!0)},p(q,T){s=q,T[0]&64&&i!==(i=s[48].type+"")&&se(n,i),T[0]&64&&c!==(c=s[48].id.slice(0,8)+"")&&se(o,c),T[0]&64&&_!==(_=s[48].content.slice(0,100)+"")&&se(g,_)},d(q){q&&v(e),R=!1,Se(V)}}}function qt(s){let e,t,l,i,n="App Update Available",a,f,c="√ó",o,d,b,p,_,g="Current",y,w,E,N=s[7].currentVersion+"",A,I,z,Q="‚Üí",L,R,V,F="New",Z,q,T,x=s[7].latestVersion+"",te,le,W,ee,j,K,H,G,$="Download Update",B,J,X="Remind Me Later",ie,me,pe="The download will open in your browser. After downloading, open the APK to install.",fe,be,ve=s[7].releaseNotes&&s[7].releaseNotes!=="No release notes provided."&&jt(s),ue=s[7].fileSize&&Kt(s),Y=s[7].lastChecked&&Wt(s);return{c(){e=m("div"),t=m("div"),l=m("div"),i=m("h3"),i.textContent=n,a=k(),f=m("button"),f.textContent=c,o=k(),d=m("div"),b=m("div"),p=m("div"),_=m("span"),_.textContent=g,y=k(),w=m("span"),E=O("v"),A=O(N),I=k(),z=m("span"),z.textContent=Q,L=k(),R=m("div"),V=m("span"),V.textContent=F,Z=k(),q=m("span"),T=O("v"),te=O(x),le=k(),ve&&ve.c(),W=k(),ee=m("div"),ue&&ue.c(),j=k(),Y&&Y.c(),K=k(),H=m("div"),G=m("button"),G.textContent=$,B=k(),J=m("button"),J.textContent=X,ie=k(),me=m("p"),me.textContent=pe,this.h()},l(oe){e=h(oe,"DIV",{class:!0});var D=C(e);t=h(D,"DIV",{class:!0});var re=C(t);l=h(re,"DIV",{class:!0});var _e=C(l);i=h(_e,"H3",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1ghvg4j"&&(i.textContent=n),a=S(_e),f=h(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),M(f)!=="svelte-1bnrkxc"&&(f.textContent=c),_e.forEach(v),o=S(re),d=h(re,"DIV",{class:!0});var ce=C(d);b=h(ce,"DIV",{class:!0});var ne=C(b);p=h(ne,"DIV",{class:!0});var de=C(p);_=h(de,"SPAN",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-5cqftx"&&(_.textContent=g),y=S(de),w=h(de,"SPAN",{class:!0});var he=C(w);E=U(he,"v"),A=U(he,N),he.forEach(v),de.forEach(v),I=S(ne),z=h(ne,"SPAN",{class:!0,"data-svelte-h":!0}),M(z)!=="svelte-14svkan"&&(z.textContent=Q),L=S(ne),R=h(ne,"DIV",{class:!0});var Ce=C(R);V=h(Ce,"SPAN",{class:!0,"data-svelte-h":!0}),M(V)!=="svelte-13hzjlo"&&(V.textContent=F),Z=S(Ce),q=h(Ce,"SPAN",{class:!0});var Ee=C(q);T=U(Ee,"v"),te=U(Ee,x),Ee.forEach(v),Ce.forEach(v),ne.forEach(v),le=S(ce),ve&&ve.l(ce),W=S(ce),ee=h(ce,"DIV",{class:!0});var Ae=C(ee);ue&&ue.l(Ae),j=S(Ae),Y&&Y.l(Ae),Ae.forEach(v),K=S(ce),H=h(ce,"DIV",{class:!0});var ke=C(H);G=h(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),M(G)!=="svelte-udp234"&&(G.textContent=$),B=S(ke),J=h(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),M(J)!=="svelte-1bgdh8u"&&(J.textContent=X),ke.forEach(v),ie=S(ce),me=h(ce,"P",{class:!0,"data-svelte-h":!0}),M(me)!=="svelte-777xdp"&&(me.textContent=pe),ce.forEach(v),re.forEach(v),D.forEach(v),this.h()},h(){u(i,"class","svelte-1rfvmhm"),u(f,"class","close-btn svelte-1rfvmhm"),u(l,"class","modal-header svelte-1rfvmhm"),u(_,"class","version-label svelte-1rfvmhm"),u(w,"class","version-number svelte-1rfvmhm"),u(p,"class","version-badge current svelte-1rfvmhm"),u(z,"class","version-arrow svelte-1rfvmhm"),u(V,"class","version-label svelte-1rfvmhm"),u(q,"class","version-number svelte-1rfvmhm"),u(R,"class","version-badge new svelte-1rfvmhm"),u(b,"class","version-info svelte-1rfvmhm"),u(ee,"class","update-meta svelte-1rfvmhm"),u(G,"class","btn-download svelte-1rfvmhm"),u(J,"class","btn-later svelte-1rfvmhm"),u(H,"class","update-modal-actions svelte-1rfvmhm"),u(me,"class","update-note svelte-1rfvmhm"),u(d,"class","update-modal-body svelte-1rfvmhm"),u(t,"class","modal-content update-modal svelte-1rfvmhm"),u(e,"class","modal-overlay svelte-1rfvmhm")},m(oe,D){P(oe,e,D),r(e,t),r(t,l),r(l,i),r(l,a),r(l,f),r(t,o),r(t,d),r(d,b),r(b,p),r(p,_),r(p,y),r(p,w),r(w,E),r(w,A),r(b,I),r(b,z),r(b,L),r(b,R),r(R,V),r(R,Z),r(R,q),r(q,T),r(q,te),r(d,le),ve&&ve.m(d,null),r(d,W),r(d,ee),ue&&ue.m(ee,null),r(ee,j),Y&&Y.m(ee,null),r(d,K),r(d,H),r(H,G),r(H,B),r(H,J),r(d,ie),r(d,me),fe||(be=[ae(f,"click",s[35]),ae(G,"click",s[21]),ae(J,"click",s[22]),ae(t,"click",Fe(s[28])),ae(e,"click",s[36])],fe=!0)},p(oe,D){D[0]&128&&N!==(N=oe[7].currentVersion+"")&&se(A,N),D[0]&128&&x!==(x=oe[7].latestVersion+"")&&se(te,x),oe[7].releaseNotes&&oe[7].releaseNotes!=="No release notes provided."?ve?ve.p(oe,D):(ve=jt(oe),ve.c(),ve.m(d,W)):ve&&(ve.d(1),ve=null),oe[7].fileSize?ue?ue.p(oe,D):(ue=Kt(oe),ue.c(),ue.m(ee,j)):ue&&(ue.d(1),ue=null),oe[7].lastChecked?Y?Y.p(oe,D):(Y=Wt(oe),Y.c(),Y.m(ee,null)):Y&&(Y.d(1),Y=null)},d(oe){oe&&v(e),ve&&ve.d(),ue&&ue.d(),Y&&Y.d(),fe=!1,Se(be)}}}function jt(s){let e,t,l="What's New",i,n,a=s[7].releaseNotes+"",f;return{c(){e=m("div"),t=m("h4"),t.textContent=l,i=k(),n=m("p"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"H4",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-bt97ng"&&(t.textContent=l),i=S(o),n=h(o,"P",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","svelte-1rfvmhm"),u(n,"class","svelte-1rfvmhm"),u(e,"class","release-notes svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&128&&a!==(a=c[7].releaseNotes+"")&&se(f,a)},d(c){c&&v(e)}}}function Kt(s){let e,t,l="Download size:",i,n,a=Qe(s[7].fileSize)+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-2qb6ck"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","meta-label svelte-1rfvmhm"),u(n,"class","meta-value svelte-1rfvmhm"),u(e,"class","meta-item svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&128&&a!==(a=Qe(c[7].fileSize)+"")&&se(f,a)},d(c){c&&v(e)}}}function Wt(s){let e,t,l="Checked:",i,n,a=Me(s[7].lastChecked)+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1m68rws"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","meta-label svelte-1rfvmhm"),u(n,"class","meta-value svelte-1rfvmhm"),u(e,"class","meta-item svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&128&&a!==(a=Me(c[7].lastChecked)+"")&&se(f,a)},d(c){c&&v(e)}}}function Qt(s){let e,t,l,i,n=s[17].success?"‚úÖ Sync Complete":"‚ùå Sync Failed",a,f,c,o="√ó",d,b,p,_,g,y=new Date(s[17].timestamp).toLocaleString()+"",w,E,N,A,I="OK",z,Q;function L(F,Z){return F[17].success?hl:vl}let R=L(s),V=R(s);return{c(){e=m("div"),t=m("div"),l=m("div"),i=m("h3"),a=O(n),f=k(),c=m("button"),c.textContent=o,d=k(),b=m("div"),V.c(),p=k(),_=m("div"),g=O("Completed: "),w=O(y),E=k(),N=m("div"),A=m("button"),A.textContent=I,this.h()},l(F){e=h(F,"DIV",{class:!0});var Z=C(e);t=h(Z,"DIV",{class:!0});var q=C(t);l=h(q,"DIV",{class:!0});var T=C(l);i=h(T,"H3",{class:!0});var x=C(i);a=U(x,n),x.forEach(v),f=S(T),c=h(T,"BUTTON",{class:!0,"data-svelte-h":!0}),M(c)!=="svelte-s9olez"&&(c.textContent=o),T.forEach(v),d=S(q),b=h(q,"DIV",{class:!0});var te=C(b);V.l(te),p=S(te),_=h(te,"DIV",{class:!0});var le=C(_);g=U(le,"Completed: "),w=U(le,y),le.forEach(v),te.forEach(v),E=S(q),N=h(q,"DIV",{class:!0});var W=C(N);A=h(W,"BUTTON",{class:!0,"data-svelte-h":!0}),M(A)!=="svelte-ix6tqg"&&(A.textContent=I),W.forEach(v),q.forEach(v),Z.forEach(v),this.h()},h(){u(i,"class","svelte-1rfvmhm"),u(c,"class","close-btn svelte-1rfvmhm"),u(l,"class","modal-header svelte-1rfvmhm"),u(_,"class","sync-timestamp svelte-1rfvmhm"),u(b,"class","sync-report-content svelte-1rfvmhm"),u(A,"class","btn-primary svelte-1rfvmhm"),u(N,"class","modal-actions svelte-1rfvmhm"),u(t,"class","modal-content sync-report-modal svelte-1rfvmhm"),u(e,"class","modal-overlay svelte-1rfvmhm")},m(F,Z){P(F,e,Z),r(e,t),r(t,l),r(l,i),r(i,a),r(l,f),r(l,c),r(t,d),r(t,b),V.m(b,null),r(b,p),r(b,_),r(_,g),r(_,w),r(t,E),r(t,N),r(N,A),z||(Q=[ae(c,"click",s[37]),ae(A,"click",s[38]),ae(t,"click",Fe(s[27])),ae(e,"click",s[39])],z=!0)},p(F,Z){Z[0]&131072&&n!==(n=F[17].success?"‚úÖ Sync Complete":"‚ùå Sync Failed")&&se(a,n),R===(R=L(F))&&V?V.p(F,Z):(V.d(1),V=R(F),V&&(V.c(),V.m(b,p))),Z[0]&131072&&y!==(y=new Date(F[17].timestamp).toLocaleString()+"")&&se(w,y)},d(F){F&&v(e),V.d(),z=!1,Se(Q)}}}function vl(s){let e,t,l="Error:",i,n,a=(s[17].error||"Unknown error occurred")+"",f,c,o,d="Please check your sync server settings and try again.";return{c(){e=m("div"),t=m("p"),t.textContent=l,i=k(),n=m("p"),f=O(a),c=k(),o=m("p"),o.textContent=d,this.h()},l(b){e=h(b,"DIV",{class:!0});var p=C(e);t=h(p,"P",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-afcafm"&&(t.textContent=l),i=S(p),n=h(p,"P",{class:!0});var _=C(n);f=U(_,a),_.forEach(v),p.forEach(v),c=S(b),o=h(b,"P",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-mghmlh"&&(o.textContent=d),this.h()},h(){u(t,"class","error-label svelte-1rfvmhm"),u(n,"class","error-message svelte-1rfvmhm"),u(e,"class","error-details svelte-1rfvmhm"),u(o,"class","sync-error-hint svelte-1rfvmhm")},m(b,p){P(b,e,p),r(e,t),r(e,i),r(e,n),r(n,f),P(b,c,p),P(b,o,p)},p(b,p){p[0]&131072&&a!==(a=(b[17].error||"Unknown error occurred")+"")&&se(f,a)},d(b){b&&(v(e),v(c),v(o))}}}function hl(s){let e,t,l,i,n,a="Your profile has been synced successfully from the remote server.",f=s[17].profileFiles!==void 0&&Gt(s),c=s[17].memoriesImported!==void 0&&Jt(s),o=s[17].credentialsSynced&&Yt();return{c(){e=m("div"),f&&f.c(),t=k(),c&&c.c(),l=k(),o&&o.c(),i=k(),n=m("p"),n.textContent=a,this.h()},l(d){e=h(d,"DIV",{class:!0});var b=C(e);f&&f.l(b),t=S(b),c&&c.l(b),l=S(b),o&&o.l(b),b.forEach(v),i=S(d),n=h(d,"P",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-10wdqc3"&&(n.textContent=a),this.h()},h(){u(e,"class","report-stats svelte-1rfvmhm"),u(n,"class","sync-success-message svelte-1rfvmhm")},m(d,b){P(d,e,b),f&&f.m(e,null),r(e,t),c&&c.m(e,null),r(e,l),o&&o.m(e,null),P(d,i,b),P(d,n,b)},p(d,b){d[17].profileFiles!==void 0?f?f.p(d,b):(f=Gt(d),f.c(),f.m(e,t)):f&&(f.d(1),f=null),d[17].memoriesImported!==void 0?c?c.p(d,b):(c=Jt(d),c.c(),c.m(e,l)):c&&(c.d(1),c=null),d[17].credentialsSynced?o||(o=Yt(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(d){d&&(v(e),v(i),v(n)),f&&f.d(),c&&c.d(),o&&o.d()}}}function Gt(s){let e,t,l="Profile files imported:",i,n,a=s[17].profileFiles+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-yeuhk6"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","stat-label svelte-1rfvmhm"),u(n,"class","stat-value svelte-1rfvmhm"),u(e,"class","stat-item svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&131072&&a!==(a=c[17].profileFiles+"")&&se(f,a)},d(c){c&&v(e)}}}function Jt(s){let e,t,l="Memories synced:",i,n,a=s[17].memoriesImported+"",f;return{c(){e=m("div"),t=m("span"),t.textContent=l,i=k(),n=m("span"),f=O(a),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=C(e);t=h(o,"SPAN",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-u27u8j"&&(t.textContent=l),i=S(o),n=h(o,"SPAN",{class:!0});var d=C(n);f=U(d,a),d.forEach(v),o.forEach(v),this.h()},h(){u(t,"class","stat-label svelte-1rfvmhm"),u(n,"class","stat-value svelte-1rfvmhm"),u(e,"class","stat-item svelte-1rfvmhm")},m(c,o){P(c,e,o),r(e,t),r(e,i),r(e,n),r(n,f)},p(c,o){o[0]&131072&&a!==(a=c[17].memoriesImported+"")&&se(f,a)},d(c){c&&v(e)}}}function Yt(s){let e,t='<span class="stat-label svelte-1rfvmhm">Credentials:</span> <span class="stat-value svelte-1rfvmhm">‚úì Synced</span>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1j6d5ob"&&(e.innerHTML=t),this.h()},h(){u(e,"class","stat-item svelte-1rfvmhm")},m(l,i){P(l,e,i)},d(l){l&&v(e)}}}function ml(s){let e,t,l,i,n,a,f;function c(g,y){return g[0]?sl:tl}let o=c(s),d=o(s),b=s[5]&&Bt(s),p=s[9]&&s[7]&&qt(s);i=new el({props:{isOpen:s[11],isSyncing:s[4],syncProgress:s[12]}}),i.$on("sync",s[19]),i.$on("close",s[20]);let _=s[16]&&s[17]&&Qt(s);return{c(){d.c(),e=k(),b&&b.c(),t=k(),p&&p.c(),l=k(),ms(i.$$.fragment),n=k(),_&&_.c(),a=Ie()},l(g){d.l(g),e=S(g),b&&b.l(g),t=S(g),p&&p.l(g),l=S(g),hs(i.$$.fragment,g),n=S(g),_&&_.l(g),a=Ie()},m(g,y){d.m(g,y),P(g,e,y),b&&b.m(g,y),P(g,t,y),p&&p.m(g,y),P(g,l,y),vs(i,g,y),P(g,n,y),_&&_.m(g,y),P(g,a,y),f=!0},p(g,y){o===(o=c(g))&&d?d.p(g,y):(d.d(1),d=o(g),d&&(d.c(),d.m(e.parentNode,e))),g[5]?b?b.p(g,y):(b=Bt(g),b.c(),b.m(t.parentNode,t)):b&&(b.d(1),b=null),g[9]&&g[7]?p?p.p(g,y):(p=qt(g),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null);const w={};y[0]&2048&&(w.isOpen=g[11]),y[0]&16&&(w.isSyncing=g[4]),y[0]&4096&&(w.syncProgress=g[12]),i.$set(w),g[16]&&g[17]?_?_.p(g,y):(_=Qt(g),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(g){f||(ds(i.$$.fragment,g),f=!0)},o(g){us(i.$$.fragment,g),f=!1},d(g){g&&(v(e),v(t),v(l),v(n),v(a)),d.d(g),b&&b.d(g),p&&p.d(g),fs(i,g),_&&_.d(g)}}}function Me(s){if(!s)return"Never";const e=new Date(s),l=new Date().getTime()-e.getTime(),i=Math.floor(l/6e4);return i<1?"Just now":i<60?`${i}m ago`:i<1440?`${Math.floor(i/60)}h ago`:e.toLocaleDateString()}function pl(s,e,t){let{compact:l=!1}=e,i={lastSyncTimestamp:null,pendingCount:0,conflictCount:0,isSyncing:!1},n=!1,a=!1,f=!1,c=!1,o=[],d=null,b=!1,p=!1,_=!1,g=!1,y=null,w=!1,E=null,N=null,A=!1,I=null;const z=ge.subscribe(Y=>{t(1,i=Y),t(4,f=Y.isSyncing)}),Q=ks.subscribe(Y=>t(2,n=Y)),L=ws.subscribe(Y=>t(3,a=Y)),R=Pe.subscribe(Y=>t(7,d=Y)),V=tt.subscribe(Y=>t(8,b=Y));es(async()=>{t(10,_=Ue()),await Ps(),await F()});async function F(){try{const Y=await ls();t(13,w=Y.configured),t(14,E=Y.serverUrl||null),t(15,N=Y.lastSyncAt||null)}catch(Y){console.warn("[SyncStatus] Failed to load remote config:",Y)}}$t(()=>{z(),Q(),L(),R(),V(),Ts()});function Z(){f||t(11,g=!0)}async function q(Y){if(f)return;const{options:oe}=Y.detail;console.log("[SyncStatus] Starting sync with options:",oe),t(4,f=!0),t(12,y=null);try{const D=oe.includes("memories"),re=oe.includes("config");console.log("[SyncStatus] Calling syncFromRemoteServer...");const _e=await ns(ce=>{t(12,y={current:ce.current||0,total:ce.total||1,category:ce.message})},{includeMemories:D,includeCredentials:re,priorityOnly:!0});if(t(17,I={success:_e.success,profileFiles:_e.profileFiles,memoriesImported:_e.memoriesImported,credentialsSynced:_e.credentialsSynced,error:_e.error,timestamp:new Date().toISOString()}),t(16,A=!0),_e.success?console.log("[SyncStatus] Sync complete:",_e):console.error("[SyncStatus] Sync failed:",_e.error),oe.includes("update")&&_)try{const ce=await ps("syncServerUrl","https://mh.dndiy.org");await Us(ce)}catch(ce){console.warn("[SyncStatus] Update check failed:",ce)}}catch(D){t(17,I={success:!1,error:D.message,timestamp:new Date().toISOString()}),t(16,A=!0),console.error("[SyncStatus] Sync error:",D)}finally{t(4,f=!1),t(12,y=null),t(11,g=!1)}}async function T(){f||(t(11,g=!1),await F())}async function x(){await Os(),t(9,p=!1)}function te(){Ls(),t(9,p=!1)}async function le(){t(6,o=await it()),t(5,c=!0)}async function W(Y,oe){await Ds({memoryId:Y,resolution:oe}),t(6,o=await it()),o.length===0&&t(5,c=!1)}function ee(){return f?"syncing":a?"conflict":n?"pending":"synced"}function j(){switch(ee()){case"synced":return"#22c55e";case"pending":return"#f59e0b";case"conflict":return"#ef4444";case"syncing":return"#3b82f6";case"offline":return"#6b7280"}}function K(){switch(ee()){case"synced":return"Synced";case"pending":return`${i.pendingCount} pending`;case"conflict":return`${i.conflictCount} conflict${i.conflictCount>1?"s":""}`;case"syncing":return"Syncing...";case"offline":return"Offline"}}function H(Y){Le.call(this,s,Y)}function G(Y){Le.call(this,s,Y)}function $(Y){Le.call(this,s,Y)}const B=()=>t(9,p=!0),J=()=>t(5,c=!1),X=Y=>W(Y.id,"keep-local"),ie=Y=>W(Y.id,"keep-server"),me=()=>t(5,c=!1),pe=()=>t(9,p=!1),fe=()=>t(9,p=!1),be=()=>t(16,A=!1),ve=()=>t(16,A=!1),ue=()=>t(16,A=!1);return s.$$set=Y=>{"compact"in Y&&t(0,l=Y.compact)},[l,i,n,a,f,c,o,d,b,p,_,g,y,w,E,N,A,I,Z,q,T,x,te,le,W,j,K,H,G,$,B,J,X,ie,me,pe,fe,be,ve,ue]}class Sl extends Xt{constructor(e){super(),Zt(this,e,pl,ml,xt,{compact:0},null,[-1,-1])}}export{Sl as S};
